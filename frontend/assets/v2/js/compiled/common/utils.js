// Generated by CoffeeScript 1.3.3
var MONTHS, SHORT_MONTHS, SHORT_WEEKDAYS, Utils, dateUtils, exTrim;

MONTHS = ['января', 'февраля', 'марта', 'апреля', 'мая', 'июня', 'июля', 'августа', 'сентрября', 'октября', 'ноября', 'декабря'];

SHORT_MONTHS = ['янв', 'фев', 'мар', 'апр', 'мая', 'июн', 'июл', 'авг', 'сен', 'окт', 'ноя', 'дек'];

SHORT_WEEKDAYS = ['Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб', 'Вс'];

dateUtils = {
  formatDay: function(date) {
    var day, re;
    if (date.length === 0) {
      return;
    }
    if (date.getDay) {
      day = date.getDate();
    } else {
      re = /(\d+)\.(\d+)\.(\d+)/;
      day = re.exec(date)[1];
    }
    return day;
  },
  formatMonth: function(date) {
    var month, re;
    if (date.length === 0) {
      return;
    }
    if (date.getMonth) {
      month = date.getMonth();
    } else {
      re = /(\d+)\.(\d+)\.(\d+)/;
      month = re.exec(date)[2] - 1;
    }
    return SHORT_MONTHS[month];
  },
  formatDayMonth: function(date) {
    var result;
    if (date.length === 0) {
      return;
    }
    result = "";
    result += date.getDate();
    result += " ";
    return result += MONTHS[date.getMonth()];
  },
  formatDayMonthInterval: function(dateStart, dateEnd) {
    var result;
    if (dateStart.length === 0 || dateEnd.length === 0) {
      return;
    }
    result = "с ";
    result += dateStart.getDate();
    if (dateStart.getMonth() !== dateEnd.getMonth()) {
      result += ' ' + MONTHS[dateStart.getMonth()];
    }
    result += ' по ' + dateEnd.getDate();
    return result += ' ' + MONTHS[dateEnd.getMonth()];
  },
  formatDayShortMonth: function(date) {
    var result;
    if (date.length === 0) {
      return;
    }
    result = "";
    result += date.getDate();
    result += " ";
    return result += SHORT_MONTHS[date.getMonth()];
  },
  formatHtmlDayShortMonth: function(date) {
    var result;
    if (!date.getDate) {
      date = date.toDate();
    }
    result = '<span class="f17">';
    result += date.getDate();
    result += "</span><br>";
    return result += SHORT_MONTHS[date.getMonth()];
  },
  formatDayMonthWeekday: function(date) {
    var result;
    console.log("formatDayMonthWeekday", date);
    if (!date.getDate()) {
      date = date.toDate();
    }
    result = "<b>";
    result += date.getDate();
    result += "</b> ";
    result += SHORT_MONTHS[date.getMonth()];
    result += ", ";
    return result += SHORT_WEEKDAYS[date.getDay()];
  },
  formatTime: function(date) {
    var minutes, result;
    result = "";
    result += date.getHours();
    result += ":";
    minutes = date.getMinutes().toString();
    if (minutes.length === 1) {
      minutes = "0" + minutes;
    }
    result += minutes;
    return result;
  },
  formatTimeInMinutes: function(date) {
    var result;
    result = date.getHours() * 60 + date.getMinutes();
    return result;
  },
  formatDuration: function(duration) {
    var all_minutes, hours, minutes;
    all_minutes = duration / 60;
    minutes = all_minutes % 60;
    hours = (all_minutes - minutes) / 60;
    return hours + " ч. " + minutes + " м.";
  }
};

Utils = {
  inRange: function(value, range) {
    return range.from <= value && value <= range.to;
  },
  fromIso: function(dateIsoString) {
    var initArray;
    if (typeof dateIsoString === 'string') {
      initArray = dateIsoString.split('-');
      return new Date(initArray[0], initArray[1] - 1, initArray[2]);
    } else {
      return dateIsoString;
    }
  },
  scrollTo: function(selector, animation) {
    var oPos;
    if (animation == null) {
      animation = true;
    }
    if (typeof selector === "string") {
      oPos = $(selector).offset();
    } else {
      oPos = {};
      oPos.top = selector;
    }
    if (animation) {
      return $("html,body").animate({
        'scrollTop': oPos.top
      });
    } else {
      return $("html,body").scrollTop(oPos.top);
    }
  },
  wordAfterNum: function(number, oneWord, fourWord, sevenWord) {
    var iModulo, iNum;
    if (sevenWord == null) {
      sevenWord = false;
    }
    if (!sevenWord) {
      sevenWord = fourWord;
    }
    iNum = number % 100;
    if ((4 < iNum && iNum < 21)) {
      return number + ' ' + sevenWord;
    } else {
      iModulo = iNum % 10;
      if (iModulo === 1) {
        return number + ' ' + oneWord;
      } else if ((1 < iModulo && iModulo < 5)) {
        return number + ' ' + fourWord;
      } else {
        return number + ' ' + sevenWord;
      }
    }
  }
};

exTrim = function(str, charlist) {
  var re;
  charlist = (!charlist ? " s " : charlist.replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g, "$1"));
  re = new RegExp("^[" + charlist + "]+|[" + charlist + "]+$", "g");
  return str.replace(re, "");
};
