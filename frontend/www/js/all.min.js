(function(c,a){function b(b,c,d){if(d===a&&1===b.nodeType)if(d="data-"+c.replace(Dc,"-$1").toLowerCase(),d=b.getAttribute(d),"string"===typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:Ec.test(d)?k.parseJSON(d):d}catch(e){}k.data(b,c,d)}else d=a;return d}function d(a){for(var b in a)if(!("data"===b&&k.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function e(){return!1}function f(){return!0}function h(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function j(a,
b){do a=a[b];while(a&&1!==a.nodeType);return a}function m(a,b,c){b=b||0;if(k.isFunction(b))return k.grep(a,function(a,d){return!!b.call(a,d,a)===c});if(b.nodeType)return k.grep(a,function(a){return a===b===c});if("string"===typeof b){var d=k.grep(a,function(a){return 1===a.nodeType});if(Gc.test(b))return k.filter(b,d,!c);b=k.filter(b,d)}return k.grep(a,function(a){return 0<=k.inArray(a,b)===c})}function p(a){var b=Wb.split("|");a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());
return a}function g(a,b){if(1===b.nodeType&&k.hasData(a)){var c,d,e;d=k._data(a);var f=k._data(b,d),g=d.events;if(g)for(c in delete f.handle,f.events={},g){d=0;for(e=g[c].length;d<e;d++)k.event.add(b,c,g[c][d])}f.data&&(f.data=k.extend({},f.data))}}function n(a,b){var c;1===b.nodeType&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),k.support.html5Clone&&(a.innerHTML&&!k.trim(b.innerHTML))&&
(b.innerHTML=a.innerHTML)):"input"===c&&Xb.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.selected=a.defaultSelected:"input"===c||"textarea"===c?b.defaultValue=a.defaultValue:"script"===c&&b.text!==a.text&&(b.text=a.text),b.removeAttribute(k.expando))}function q(a){return"undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function u(a){Xb.test(a.type)&&(a.defaultChecked=
a.checked)}function s(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Yb.length;e--;)if(b=Yb[e]+c,b in a)return b;return d}function A(a,b){a=b||a;return"none"===k.css(a,"display")||!k.contains(a.ownerDocument,a)}function y(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)c=a[f],c.style&&(e[f]=k._data(c,"olddisplay"),b?(!e[f]&&"none"===c.style.display&&(c.style.display=""),""===c.style.display&&A(c)&&(e[f]=k._data(c,"olddisplay",I(c.nodeName)))):(d=ka(c,"display"),!e[f]&&"none"!==
d&&k._data(c,"olddisplay",d)));for(f=0;f<g;f++)if(c=a[f],c.style&&(!b||"none"===c.style.display||""===c.style.display))c.style.display=b?e[f]||"":"none";return a}function x(a,b,c){return(a=Hc.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function v(a,b,c,d){b=c===(d?"border":"content")?4:"width"===b?1:0;for(var e=0;4>b;b+=2)"margin"===c&&(e+=k.css(a,c+Ka[b],!0)),d?("content"===c&&(e-=parseFloat(ka(a,"padding"+Ka[b]))||0),"margin"!==c&&(e-=parseFloat(ka(a,"border"+Ka[b]+"Width"))||0)):(e+=parseFloat(ka(a,
"padding"+Ka[b]))||0,"padding"!==c&&(e+=parseFloat(ka(a,"border"+Ka[b]+"Width"))||0));return e}function C(a,b,c){var d="width"===b?a.offsetWidth:a.offsetHeight,e=!0,f=k.support.boxSizing&&"border-box"===k.css(a,"boxSizing");if(0>=d||null==d){d=ka(a,b);if(0>d||null==d)d=a.style[b];if(gb.test(d))return d;e=f&&(k.support.boxSizingReliable||d===a.style[b]);d=parseFloat(d)||0}return d+v(a,b,c||(f?"border":"content"),e)+"px"}function I(a){if(yb[a])return yb[a];var b=k("<"+a+">").appendTo(G.body),c=b.css("display");
b.remove();if("none"===c||""===c){Ra=G.body.appendChild(Ra||k.extend(G.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!Sa||!Ra.createElement)Sa=(Ra.contentWindow||Ra.contentDocument).document,Sa.write("<!doctype html><html><body>"),Sa.close();b=Sa.body.appendChild(Sa.createElement(a));c=ka(b,"display");G.body.removeChild(Ra)}return yb[a]=c}function r(a,b,c,d){var e;if(k.isArray(b))k.each(b,function(b,e){c||Ic.test(a)?d(a,e):r(a+"["+("object"===typeof e?b:"")+"]",e,c,d)});else if(!c&&
"object"===k.type(b))for(e in b)r(a+"["+e+"]",b[e],c,d);else d(a,b)}function E(a){return function(b,c){"string"!==typeof b&&(c=b,b="*");var d,e,f=b.toLowerCase().split(U),g=0,h=f.length;if(k.isFunction(c))for(;g<h;g++)d=f[g],(e=/^\+/.test(d))&&(d=d.substr(1)||"*"),d=a[d]=a[d]||[],d[e?"unshift":"push"](c)}}function J(b,c,d,e,f,g){f=f||c.dataTypes[0];g=g||{};g[f]=!0;var h;f=b[f];for(var j=0,k=f?f.length:0,n=b===zb;j<k&&(n||!h);j++)h=f[j](c,d,e),"string"===typeof h&&(!n||g[h]?h=a:(c.dataTypes.unshift(h),
h=J(b,c,d,e,h,g)));if((n||!h)&&!g["*"])h=J(b,c,d,e,"*",g);return h}function D(b,c){var d,e,f=k.ajaxSettings.flatOptions||{};for(d in c)c[d]!==a&&((f[d]?b:e||(e={}))[d]=c[d]);e&&k.extend(!0,b,e)}function F(){try{return new c.XMLHttpRequest}catch(a){}}function B(){setTimeout(function(){Ta=a},0);return Ta=k.now()}function K(a,b,c){var d,e=0,f=hb.length,g=k.Deferred().always(function(){delete h.elem}),h=function(){for(var b=Ta||B(),b=Math.max(0,j.startTime+j.duration-b),c=1-(b/j.duration||0),d=0,e=j.tweens.length;d<
e;d++)j.tweens[d].run(c);g.notifyWith(a,[j,c,b]);if(1>c&&e)return b;g.resolveWith(a,[j]);return!1},j=g.promise({elem:a,props:k.extend({},b),opts:k.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Ta||B(),duration:c.duration,tweens:[],createTween:function(b,c){var d=k.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);j.tweens.push(d);return d},stop:function(b){for(var c=0,d=b?j.tweens.length:0;c<d;c++)j.tweens[c].run(1);b?g.resolveWith(a,[j,b]):g.rejectWith(a,
[j,b]);return this}});b=j.props;c=j.opts.specialEasing;var n,q,m,s;for(d in b)if(n=k.camelCase(d),q=c[n],m=b[d],k.isArray(m)&&(q=m[1],m=b[d]=m[0]),d!==n&&(b[n]=m,delete b[d]),(s=k.cssHooks[n])&&"expand"in s)for(d in m=s.expand(m),delete b[n],m)d in b||(b[d]=m[d],c[d]=q);else c[n]=q;for(;e<f;e++)if(d=hb[e].call(j,a,b,j.opts))return d;var w=j;k.each(b,function(a,b){for(var c=($a[a]||[]).concat($a["*"]),d=0,e=c.length;d<e&&!c[d].call(w,a,b);d++);});k.isFunction(j.opts.start)&&j.opts.start.call(a,j);
k.fx.timer(k.extend(h,{anim:j,queue:j.opts.queue,elem:a}));return j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function H(a,b,c,d,e){return new H.prototype.init(a,b,c,d,e)}function L(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=Ka[e],d["margin"+c]=d["padding"+c]=a;b&&(d.opacity=d.width=a);return d}function P(a){return k.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var N,O,G=c.document,M=c.location,R=c.navigator,ga=c.jQuery,
la=c.$,Y=Array.prototype.push,Z=Array.prototype.slice,ia=Array.prototype.indexOf,aa=Object.prototype.toString,ma=Object.prototype.hasOwnProperty,da=String.prototype.trim,k=function(a,b){return new k.fn.init(a,b,N)},ea=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,w=/\S/,U=/\s+/,V=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Q=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,W=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ja=/^[\],:{}\s]*$/,qa=/(?:^|:|,)(?:\s*\[)+/g,La=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,Aa=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,
Da=/^-ms-/,ha=/-([\da-z])/gi,Ba=function(a,b){return(b+"").toUpperCase()},Ma=function(){G.addEventListener?(G.removeEventListener("DOMContentLoaded",Ma,!1),k.ready()):"complete"===G.readyState&&(G.detachEvent("onreadystatechange",Ma),k.ready())},sa={};k.fn=k.prototype={constructor:k,init:function(b,c,d){var e;if(!b)return this;if(b.nodeType)return this.context=this[0]=b,this.length=1,this;if("string"===typeof b){if((e="<"===b.charAt(0)&&">"===b.charAt(b.length-1)&&3<=b.length?[null,b,null]:Q.exec(b))&&
(e[1]||!c)){if(e[1])return b=(c=c instanceof k?c[0]:c)&&c.nodeType?c.ownerDocument||c:G,b=k.parseHTML(e[1],b,!0),W.test(e[1])&&k.isPlainObject(c)&&this.attr.call(b,c,!0),k.merge(this,b);if((c=G.getElementById(e[2]))&&c.parentNode){if(c.id!==e[2])return d.find(b);this.length=1;this[0]=c}this.context=G;this.selector=b;return this}return!c||c.jquery?(c||d).find(b):this.constructor(c).find(b)}if(k.isFunction(b))return d.ready(b);b.selector!==a&&(this.selector=b.selector,this.context=b.context);return k.makeArray(b,
this)},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return Z.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,b,c){a=k.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;"find"===b?a.selector=this.selector+(this.selector?" ":"")+c:b&&(a.selector=this.selector+"."+b+"("+c+")");return a},each:function(a,b){return k.each(this,a,b)},ready:function(a){k.ready.promise().done(a);
return this},eq:function(a){a=+a;return-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(Z.apply(this,arguments),"slice",Z.call(arguments).join(","))},map:function(a){return this.pushStack(k.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:Y,sort:[].sort,splice:[].splice};k.fn.init.prototype=k.fn;k.extend=k.fn.extend=function(){var b,
c,d,e,f,g=arguments[0]||{},h=1,j=arguments.length,n=!1;"boolean"===typeof g&&(n=g,g=arguments[1]||{},h=2);"object"!==typeof g&&!k.isFunction(g)&&(g={});j===h&&(g=this,--h);for(;h<j;h++)if(null!=(b=arguments[h]))for(c in b)d=g[c],e=b[c],g!==e&&(n&&e&&(k.isPlainObject(e)||(f=k.isArray(e)))?(f?(f=!1,d=d&&k.isArray(d)?d:[]):d=d&&k.isPlainObject(d)?d:{},g[c]=k.extend(n,d,e)):e!==a&&(g[c]=e));return g};k.extend({noConflict:function(a){c.$===k&&(c.$=la);a&&c.jQuery===k&&(c.jQuery=ga);return k},isReady:!1,
readyWait:1,holdReady:function(a){a?k.readyWait++:k.ready(!0)},ready:function(a){if(!(!0===a?--k.readyWait:k.isReady)){if(!G.body)return setTimeout(k.ready,1);k.isReady=!0;!0!==a&&0<--k.readyWait||(O.resolveWith(G,[k]),k.fn.trigger&&k(G).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===k.type(a)},isArray:Array.isArray||function(a){return"array"===k.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==
a?String(a):sa[aa.call(a)]||"object"},isPlainObject:function(b){if(!b||"object"!==k.type(b)||b.nodeType||k.isWindow(b))return!1;try{if(b.constructor&&!ma.call(b,"constructor")&&!ma.call(b.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}for(var d in b);return d===a||ma.call(b,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw Error(a);},parseHTML:function(a,b,c){var d;if(!a||"string"!==typeof a)return null;"boolean"===typeof b&&(c=b,b=0);b=b||
G;if(d=W.exec(a))return[b.createElement(d[1])];d=k.buildFragment([a],b,c?null:[]);return k.merge([],(d.cacheable?k.clone(d.fragment):d.fragment).childNodes)},parseJSON:function(a){if(!a||"string"!==typeof a)return null;a=k.trim(a);if(c.JSON&&c.JSON.parse)return c.JSON.parse(a);if(ja.test(a.replace(La,"@").replace(Aa,"]").replace(qa,"")))return(new Function("return "+a))();k.error("Invalid JSON: "+a)},parseXML:function(b){var d,e;if(!b||"string"!==typeof b)return null;try{c.DOMParser?(e=new DOMParser,
d=e.parseFromString(b,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(b))}catch(f){d=a}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&k.error("Invalid XML: "+b);return d},noop:function(){},globalEval:function(a){a&&w.test(a)&&(c.execScript||function(a){c.eval.call(c,a)})(a)},camelCase:function(a){return a.replace(Da,"ms-").replace(ha,Ba)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(b,c,
d){var e,f=0,g=b.length,h=g===a||k.isFunction(b);if(d)if(h)for(e in b){if(!1===c.apply(b[e],d))break}else for(;f<g&&!1!==c.apply(b[f++],d););else if(h)for(e in b){if(!1===c.call(b[e],e,b[e]))break}else for(;f<g&&!1!==c.call(b[f],f,b[f++]););return b},trim:da&&!da.call("\ufeff\u00a0")?function(a){return null==a?"":da.call(a)}:function(a){return null==a?"":(a+"").replace(V,"")},makeArray:function(a,b){var c,d=b||[];null!=a&&(c=k.type(a),null==a.length||"string"===c||"function"===c||"regexp"===c||k.isWindow(a)?
Y.call(d,a):k.merge(d,a));return d},inArray:function(a,b,c){var d;if(b){if(ia)return ia.call(b,a,c);d=b.length;for(c=c?0>c?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(b,c){var d=c.length,e=b.length,f=0;if("number"===typeof d)for(;f<d;f++)b[e++]=c[f];else for(;c[f]!==a;)b[e++]=c[f++];b.length=e;return b},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;f<g;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(b,c,d){var e,f,g=[],h=0,j=b.length;if(b instanceof
k||j!==a&&"number"===typeof j&&(0<j&&b[0]&&b[j-1]||0===j||k.isArray(b)))for(;h<j;h++)e=c(b[h],h,d),null!=e&&(g[g.length]=e);else for(f in b)e=c(b[f],f,d),null!=e&&(g[g.length]=e);return g.concat.apply([],g)},guid:1,proxy:function(b,c){var d,e;"string"===typeof c&&(d=b[c],c=b,b=d);if(!k.isFunction(b))return a;e=Z.call(arguments,2);d=function(){return b.apply(c,e.concat(Z.call(arguments)))};d.guid=b.guid=b.guid||k.guid++;return d},access:function(b,c,d,e,f,g,h){var j,n=null==d,q=0,m=b.length;if(d&&
"object"===typeof d){for(q in d)k.access(b,c,q,d[q],1,g,e);f=1}else if(e!==a){j=h===a&&k.isFunction(e);n&&(j?(j=c,c=function(a,b,c){return j.call(k(a),c)}):(c.call(b,e),c=null));if(c)for(;q<m;q++)c(b[q],d,j?e.call(b[q],q,c(b[q],d)):e,h);f=1}return f?b:n?c.call(b):m?c(b[0],d):g},now:function(){return(new Date).getTime()}});k.ready.promise=function(a){if(!O)if(O=k.Deferred(),"complete"===G.readyState)setTimeout(k.ready,1);else if(G.addEventListener)G.addEventListener("DOMContentLoaded",Ma,!1),c.addEventListener("load",
k.ready,!1);else{G.attachEvent("onreadystatechange",Ma);c.attachEvent("onload",k.ready);var b=!1;try{b=null==c.frameElement&&G.documentElement}catch(d){}b&&b.doScroll&&function Fc(){if(!k.isReady){try{b.doScroll("left")}catch(a){return setTimeout(Fc,50)}k.ready()}}()}return O.promise(a)};k.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){sa["[object "+b+"]"]=b.toLowerCase()});N=k(G);var ta={};k.Callbacks=function(b){var c;if("string"===typeof b){if(!(c=ta[b])){c=
b;var d=ta[c]={};k.each(c.split(U),function(a,b){d[b]=!0});c=d}}else c=k.extend({},b);b=c;var e,f,g,h,j,n,q=[],m=!b.once&&[],s=function(a){e=b.memory&&a;f=!0;n=h||0;h=0;j=q.length;for(g=!0;q&&n<j;n++)if(!1===q[n].apply(a[0],a[1])&&b.stopOnFalse){e=!1;break}g=!1;q&&(m?m.length&&s(m.shift()):e?q=[]:w.disable())},w={add:function(){if(q){var a=q.length;(function Jc(a){k.each(a,function(a,c){var d=k.type(c);"function"===d?(!b.unique||!w.has(c))&&q.push(c):c&&(c.length&&"string"!==d)&&Jc(c)})})(arguments);
g?j=q.length:e&&(h=a,s(e))}return this},remove:function(){q&&k.each(arguments,function(a,b){for(var c;-1<(c=k.inArray(b,q,c));)q.splice(c,1),g&&(c<=j&&j--,c<=n&&n--)});return this},has:function(a){return-1<k.inArray(a,q)},empty:function(){q=[];return this},disable:function(){q=m=e=a;return this},disabled:function(){return!q},lock:function(){m=a;e||w.disable();return this},locked:function(){return!m},fireWith:function(a,b){b=b||[];b=[a,b.slice?b.slice():b];if(q&&(!f||m))g?m.push(b):s(b);return this},
fire:function(){w.fireWith(this,arguments);return this},fired:function(){return!!f}};return w};k.extend({Deferred:function(a){var b=[["resolve","done",k.Callbacks("once memory"),"resolved"],["reject","fail",k.Callbacks("once memory"),"rejected"],["notify","progress",k.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){e.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return k.Deferred(function(c){k.each(b,function(b,d){var f=d[0],g=a[b];
e[d[1]](k.isFunction(g)?function(){var a=g.apply(this,arguments);if(a&&k.isFunction(a.promise))a.promise().done(c.resolve).fail(c.reject).progress(c.notify);else c[f+"With"](this===e?c:this,[a])}:c[f])});a=null}).promise()},promise:function(a){return null!=a?k.extend(a,d):d}},e={};d.pipe=d.then;k.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add;h&&g.add(function(){c=h},b[a^1][2].disable,b[2][2].lock);e[f[0]]=g.fire;e[f[0]+"With"]=g.fireWith});d.promise(e);a&&a.call(e,e);return e},when:function(a){var b=
0,c=Z.call(arguments),d=c.length,e=1!==d||a&&k.isFunction(a.promise)?d:0,f=1===e?a:k.Deferred(),g=function(a,b,c){return function(d){b[a]=this;c[a]=1<arguments.length?Z.call(arguments):d;c===h?f.notifyWith(b,c):--e||f.resolveWith(b,c)}},h,j,n;if(1<d){h=Array(d);j=Array(d);for(n=Array(d);b<d;b++)c[b]&&k.isFunction(c[b].promise)?c[b].promise().done(g(b,n,c)).fail(f.reject).progress(g(b,j,h)):--e}e||f.resolveWith(n,c);return f.promise()}});var xa=k,ua;var S,Ea,Fa,ib,jb,ca,va,Ga,Ab,oa,ab,X=G.createElement("div");
X.setAttribute("className","t");X.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";Ea=X.getElementsByTagName("*");Fa=X.getElementsByTagName("a")[0];if(!Ea||!Fa||!Ea.length)ua={};else{ib=G.createElement("select");jb=ib.appendChild(G.createElement("option"));ca=X.getElementsByTagName("input")[0];Fa.style.cssText="top:1px;float:left;opacity:.5";S={leadingWhitespace:3===X.firstChild.nodeType,tbody:!X.getElementsByTagName("tbody").length,htmlSerialize:!!X.getElementsByTagName("link").length,
style:/top/.test(Fa.getAttribute("style")),hrefNormalized:"/a"===Fa.getAttribute("href"),opacity:/^0.5/.test(Fa.style.opacity),cssFloat:!!Fa.style.cssFloat,checkOn:"on"===ca.value,optSelected:jb.selected,getSetAttribute:"t"!==X.className,enctype:!!G.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==G.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===G.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,
shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1};ca.checked=!0;S.noCloneChecked=ca.cloneNode(!0).checked;ib.disabled=!0;S.optDisabled=!jb.disabled;try{delete X.test}catch(Hd){S.deleteExpando=!1}!X.addEventListener&&(X.attachEvent&&X.fireEvent)&&(X.attachEvent("onclick",ab=function(){S.noCloneEvent=!1}),X.cloneNode(!0).fireEvent("onclick"),X.detachEvent("onclick",ab));ca=G.createElement("input");ca.value="t";ca.setAttribute("type","radio");S.radioValue="t"===ca.value;
ca.setAttribute("checked","checked");ca.setAttribute("name","t");X.appendChild(ca);va=G.createDocumentFragment();va.appendChild(X.lastChild);S.checkClone=va.cloneNode(!0).cloneNode(!0).lastChild.checked;S.appendChecked=ca.checked;va.removeChild(ca);va.appendChild(X);if(X.attachEvent)for(Ab in{submit:!0,change:!0,focusin:!0})Ga="on"+Ab,oa=Ga in X,oa||(X.setAttribute(Ga,"return;"),oa="function"===typeof X[Ga]),S[Ab+"Bubbles"]=oa;k(function(){var a,b,d,e=G.getElementsByTagName("body")[0];e&&(a=G.createElement("div"),
a.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",e.insertBefore(a,e.firstChild),b=G.createElement("div"),a.appendChild(b),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",d=b.getElementsByTagName("td"),d[0].style.cssText="padding:0;margin:0;border:0;display:none",oa=0===d[0].offsetHeight,d[0].style.display="",d[1].style.display="none",S.reliableHiddenOffsets=oa&&0===d[0].offsetHeight,b.innerHTML="",b.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",
S.boxSizing=4===b.offsetWidth,S.doesNotIncludeMarginInBodyOffset=1!==e.offsetTop,c.getComputedStyle&&(S.pixelPosition="1%"!==(c.getComputedStyle(b,null)||{}).top,S.boxSizingReliable="4px"===(c.getComputedStyle(b,null)||{width:"4px"}).width,d=G.createElement("div"),d.style.cssText=b.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;",d.style.marginRight=d.style.width="0",b.style.width="1px",b.appendChild(d),S.reliableMarginRight=!parseFloat((c.getComputedStyle(d,null)||{}).marginRight)),
"undefined"!==typeof b.style.zoom&&(b.innerHTML="",b.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;width:1px;padding:1px;display:inline;zoom:1",S.inlineBlockNeedsLayout=3===b.offsetWidth,b.style.display="block",b.style.overflow="visible",b.innerHTML="<div></div>",b.firstChild.style.width="5px",S.shrinkWrapBlocks=3!==b.offsetWidth,a.style.zoom=1),e.removeChild(a))});va.removeChild(X);Ea=Fa=ib=jb=ca=va=X=null;ua=S}xa.support=ua;var Ec=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Dc=/([A-Z])/g;
k.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(k.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?k.cache[a[k.expando]]:a[k.expando];return!!a&&!d(a)},data:function(b,c,d,e){if(k.acceptData(b)){var f=k.expando,g="string"===typeof c,h=b.nodeType,j=h?k.cache:b,n=h?b[f]:b[f]&&f;if(n&&j[n]&&(e||j[n].data)||!(g&&d===a)){n||(h?b[f]=n=k.deletedIds.pop()||k.guid++:n=f);j[n]||(j[n]={},h||(j[n].toJSON=
k.noop));if("object"===typeof c||"function"===typeof c)e?j[n]=k.extend(j[n],c):j[n].data=k.extend(j[n].data,c);b=j[n];e||(b.data||(b.data={}),b=b.data);d!==a&&(b[k.camelCase(c)]=d);g?(d=b[c],null==d&&(d=b[k.camelCase(c)])):d=b;return d}}},removeData:function(a,b,c){if(k.acceptData(a)){var e,f,g,h=a.nodeType,j=h?k.cache:a,n=h?a[k.expando]:k.expando;if(j[n]){if(b&&(e=c?j[n]:j[n].data)){k.isArray(b)||(b in e?b=[b]:(b=k.camelCase(b),b=b in e?[b]:b.split(" ")));f=0;for(g=b.length;f<g;f++)delete e[b[f]];
if(!(c?d:k.isEmptyObject)(e))return}if(!c&&(delete j[n].data,!d(j[n])))return;h?k.cleanData([a],!0):k.support.deleteExpando||j!=j.window?delete j[n]:j[n]=null}}},_data:function(a,b,c){return k.data(a,b,c,!0)},acceptData:function(a){var b=a.nodeName&&k.noData[a.nodeName.toLowerCase()];return!b||!0!==b&&a.getAttribute("classid")===b}});k.fn.extend({data:function(c,d){var e,f,g,h,j,n=this[0],q=0,m=null;if(c===a){if(this.length&&(m=k.data(n),1===n.nodeType&&!k._data(n,"parsedAttrs"))){g=n.attributes;
for(j=g.length;q<j;q++)h=g[q].name,h.indexOf("data-")||(h=k.camelCase(h.substring(5)),b(n,h,m[h]));k._data(n,"parsedAttrs",!0)}return m}if("object"===typeof c)return this.each(function(){k.data(this,c)});e=c.split(".",2);e[1]=e[1]?"."+e[1]:"";f=e[1]+"!";return k.access(this,function(d){if(d===a)return m=this.triggerHandler("getData"+f,[e[0]]),m===a&&n&&(m=k.data(n,c),m=b(n,c,m)),m===a&&e[1]?this.data(e[0]):m;e[1]=d;this.each(function(){var a=k(this);a.triggerHandler("setData"+f,e);k.data(this,c,d);
a.triggerHandler("changeData"+f,e)})},null,d,1<arguments.length,null,!1)},removeData:function(a){return this.each(function(){k.removeData(this,a)})}});k.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=k._data(a,b),c&&(!d||k.isArray(c)?d=k._data(a,b,k.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=k.queue(a,b),d=c.length,e=c.shift(),f=k._queueHooks(a,b),g=function(){k.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--);e&&("fx"===b&&c.unshift("inprogress"),
delete f.stop,e.call(a,g,f));!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return k._data(a,c)||k._data(a,c,{empty:k.Callbacks("once memory").add(function(){k.removeData(a,b+"queue",!0);k.removeData(a,c,!0)})})}});k.fn.extend({queue:function(b,c){var d=2;"string"!==typeof b&&(c=b,b="fx",d--);return arguments.length<d?k.queue(this[0],b):c===a?this:this.each(function(){var a=k.queue(this,b,c);k._queueHooks(this,b);"fx"===b&&"inprogress"!==a[0]&&k.dequeue(this,b)})},dequeue:function(a){return this.each(function(){k.dequeue(this,
a)})},delay:function(a,b){a=k.fx?k.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(b,c){var d,e=1,f=k.Deferred(),g=this,h=this.length,j=function(){--e||f.resolveWith(g,[g])};"string"!==typeof b&&(c=b,b=a);for(b=b||"fx";h--;)if((d=k._data(g[h],b+"queueHooks"))&&d.empty)e++,d.empty.add(j);j();return f.promise(c)}});var na,Zb,bb,Ca=/[\t\r\n]/g,Ua=/\r/g,Va=/^(?:button|input)$/i,
Wa=/^(?:button|input|object|select|textarea)$/i,kb=/^a(?:rea|)$/i,Bb=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,$b=k.support.getSetAttribute;k.fn.extend({attr:function(a,b){return k.access(this,k.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){k.removeAttr(this,a)})},prop:function(a,b){return k.access(this,k.prop,a,b,1<arguments.length)},removeProp:function(b){b=k.propFix[b]||b;return this.each(function(){try{this[b]=
a,delete this[b]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if(k.isFunction(a))return this.each(function(b){k(this).addClass(a.call(this,b,this.className))});if(a&&"string"===typeof a){b=a.split(U);c=0;for(d=this.length;c<d;c++)if(e=this[c],1===e.nodeType)if(!e.className&&1===b.length)e.className=a;else{f=" "+e.className+" ";g=0;for(h=b.length;g<h;g++)0>f.indexOf(" "+b[g]+" ")&&(f+=b[g]+" ");e.className=k.trim(f)}}return this},removeClass:function(b){var c,d,e,f,g,h,j;if(k.isFunction(b))return this.each(function(a){k(this).removeClass(b.call(this,
a,this.className))});if(b&&"string"===typeof b||b===a){c=(b||"").split(U);h=0;for(j=this.length;h<j;h++)if(e=this[h],1===e.nodeType&&e.className){d=(" "+e.className+" ").replace(Ca," ");f=0;for(g=c.length;f<g;f++)for(;0<=d.indexOf(" "+c[f]+" ");)d=d.replace(" "+c[f]+" "," ");e.className=b?k.trim(d):""}}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"===typeof b;return k.isFunction(a)?this.each(function(c){k(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===
c)for(var e,f=0,g=k(this),h=b,j=a.split(U);e=j[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else if("undefined"===c||"boolean"===c)this.className&&k._data(this,"__className__",this.className),this.className=this.className||!1===a?"":k._data(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(Ca," ").indexOf(a))return!0;return!1},val:function(b){var c,d,e,f=this[0];if(arguments.length)return e=
k.isFunction(b),this.each(function(d){var f=k(this);if(1===this.nodeType&&(d=e?b.call(this,d,f.val()):b,null==d?d="":"number"===typeof d?d+="":k.isArray(d)&&(d=k.map(d,function(a){return null==a?"":a+""})),c=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()],!c||!("set"in c)||c.set(this,d,"value")===a))this.value=d});if(f){if((c=k.valHooks[f.type]||k.valHooks[f.nodeName.toLowerCase()])&&"get"in c&&(d=c.get(f,"value"))!==a)return d;d=f.value;return"string"===typeof d?d.replace(Ua,""):null==
d?"":d}}});k.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){for(var b,c=a.options,d=a.selectedIndex,e=(a="select-one"===a.type||0>d)?null:[],f=a?d+1:c.length,g=0>d?f:a?d:0;g<f;g++)if(b=c[g],(b.selected||g===d)&&(k.support.optDisabled?!b.disabled:null===b.getAttribute("disabled"))&&(!b.parentNode.disabled||!k.nodeName(b.parentNode,"optgroup"))){b=k(b).val();if(a)return b;e.push(b)}return e},set:function(a,b){var c=k.makeArray(b);
k(a).find("option").each(function(){this.selected=0<=k.inArray(k(this).val(),c)});c.length||(a.selectedIndex=-1);return c}}},attrFn:{},attr:function(b,c,d,e){var f,g,h=b.nodeType;if(b&&!(3===h||8===h||2===h)){if(e&&k.isFunction(k.fn[c]))return k(b)[c](d);if("undefined"===typeof b.getAttribute)return k.prop(b,c,d);if(e=1!==h||!k.isXMLDoc(b))c=c.toLowerCase(),g=k.attrHooks[c]||(Bb.test(c)?Zb:na);if(d!==a)if(null===d)k.removeAttr(b,c);else{if(g&&"set"in g&&e&&(f=g.set(b,d,c))!==a)return f;b.setAttribute(c,
d+"");return d}else{if(g&&"get"in g&&e&&null!==(f=g.get(b,c)))return f;f=b.getAttribute(c);return null===f?a:f}}},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&1===a.nodeType)for(d=b.split(U);g<d.length;g++)if(e=d[g])c=k.propFix[e]||e,(f=Bb.test(e))||k.attr(a,e,""),a.removeAttribute($b?e:c),f&&c in a&&(a[c]=!1)},attrHooks:{type:{set:function(a,b){if(Va.test(a.nodeName)&&a.parentNode)k.error("type property can't be changed");else if(!k.support.radioValue&&"radio"===b&&k.nodeName(a,"input")){var c=
a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}},value:{get:function(a,b){return na&&k.nodeName(a,"button")?na.get(a,b):b in a?a.value:null},set:function(a,b,c){if(na&&k.nodeName(a,"button"))return na.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},
prop:function(b,c,d){var e,f,g;g=b.nodeType;if(b&&!(3===g||8===g||2===g)){if(g=1!==g||!k.isXMLDoc(b))c=k.propFix[c]||c,f=k.propHooks[c];return d!==a?f&&"set"in f&&(e=f.set(b,d,c))!==a?e:b[c]=d:f&&"get"in f&&null!==(e=f.get(b,c))?e:b[c]}},propHooks:{tabIndex:{get:function(b){var c=b.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):Wa.test(b.nodeName)||kb.test(b.nodeName)&&b.href?0:a}}}});Zb={get:function(b,c){var d,e=k.prop(b,c);return!0===e||"boolean"!==typeof e&&(d=b.getAttributeNode(c))&&
!1!==d.nodeValue?c.toLowerCase():a},set:function(a,b,c){!1===b?k.removeAttr(a,c):(b=k.propFix[c]||c,b in a&&(a[b]=!0),a.setAttribute(c,c.toLowerCase()));return c}};$b||(bb={name:!0,id:!0,coords:!0},na=k.valHooks.button={get:function(b,c){var d;return(d=b.getAttributeNode(c))&&(bb[c]?""!==d.value:d.specified)?d.value:a},set:function(a,b,c){var d=a.getAttributeNode(c);d||(d=G.createAttribute(c),a.setAttributeNode(d));return d.value=b+""}},k.each(["width","height"],function(a,b){k.attrHooks[b]=k.extend(k.attrHooks[b],
{set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}})}),k.attrHooks.contenteditable={get:na.get,set:function(a,b,c){""===b&&(b="false");na.set(a,b,c)}});k.support.hrefNormalized||k.each(["href","src","width","height"],function(b,c){k.attrHooks[c]=k.extend(k.attrHooks[c],{get:function(b){b=b.getAttribute(c,2);return null===b?a:b}})});k.support.style||(k.attrHooks.style={get:function(b){return b.style.cssText.toLowerCase()||a},set:function(a,b){return a.style.cssText=b+""}});k.support.optSelected||
(k.propHooks.selected=k.extend(k.propHooks.selected,{get:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex;return null}}));k.support.enctype||(k.propFix.enctype="encoding");k.support.checkOn||k.each(["radio","checkbox"],function(){k.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}});k.each(["radio","checkbox"],function(){k.valHooks[this]=k.extend(k.valHooks[this],{set:function(a,b){if(k.isArray(b))return a.checked=0<=k.inArray(k(a).val(),
b)}})});var Cb=/^(?:textarea|input|select)$/i,ac=/^([^\.]*|)(?:\.(.+)|)$/,Kc=/(?:^|\s)hover(\.\S+|)\b/,Lc=/^key/,Mc=/^(?:mouse|contextmenu)|click/,bc=/^(?:focusinfocus|focusoutblur)$/,cc=function(a){return k.event.special.hover?a:a.replace(Kc,"mouseenter$1 mouseleave$1")};k.event={add:function(b,c,d,e,f){var g,h,j,n,q,m,s,w,p;if(!(3===b.nodeType||8===b.nodeType||!c||!d||!(g=k._data(b)))){d.handler&&(s=d,d=s.handler,f=s.selector);d.guid||(d.guid=k.guid++);j=g.events;j||(g.events=j={});h=g.handle;h||
(g.handle=h=function(b){return"undefined"!==typeof k&&(!b||k.event.triggered!==b.type)?k.event.dispatch.apply(h.elem,arguments):a},h.elem=b);c=k.trim(cc(c)).split(" ");for(g=0;g<c.length;g++){n=ac.exec(c[g])||[];q=n[1];m=(n[2]||"").split(".").sort();p=k.event.special[q]||{};q=(f?p.delegateType:p.bindType)||q;p=k.event.special[q]||{};n=k.extend({type:q,origType:n[1],data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&k.expr.match.needsContext.test(f),namespace:m.join(".")},s);w=j[q];if(!w&&(w=
j[q]=[],w.delegateCount=0,!p.setup||!1===p.setup.call(b,e,m,h)))b.addEventListener?b.addEventListener(q,h,!1):b.attachEvent&&b.attachEvent("on"+q,h);p.add&&(p.add.call(b,n),n.handler.guid||(n.handler.guid=d.guid));f?w.splice(w.delegateCount++,0,n):w.push(n);k.event.global[q]=!0}b=null}},global:{},remove:function(a,b,c,d,e){var f,g,h,j,n,q,m,w,s,p,Q=k.hasData(a)&&k._data(a);if(Q&&(m=Q.events)){b=k.trim(cc(b||"")).split(" ");for(f=0;f<b.length;f++)if(g=ac.exec(b[f])||[],h=j=g[1],g=g[2],h){w=k.event.special[h]||
{};h=(d?w.delegateType:w.bindType)||h;s=m[h]||[];n=s.length;g=g?RegExp("(^|\\.)"+g.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(q=0;q<s.length;q++)if(p=s[q],(e||j===p.origType)&&(!c||c.guid===p.guid)&&(!g||g.test(p.namespace))&&(!d||d===p.selector||"**"===d&&p.selector))s.splice(q--,1),p.selector&&s.delegateCount--,w.remove&&w.remove.call(a,p);0===s.length&&n!==s.length&&((!w.teardown||!1===w.teardown.call(a,g,Q.handle))&&k.removeEvent(a,h,Q.handle),delete m[h])}else for(h in m)k.event.remove(a,
h+b[f],c,d,!0);k.isEmptyObject(m)&&(delete Q.handle,k.removeData(a,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(b,d,e,f){if(!e||!(3===e.nodeType||8===e.nodeType)){var g,h,j,n,q,m,w=b.type||b;j=[];if(!bc.test(w+k.event.triggered)&&(0<=w.indexOf("!")&&(w=w.slice(0,-1),g=!0),0<=w.indexOf(".")&&(j=w.split("."),w=j.shift(),j.sort()),e&&!k.event.customEvent[w]||k.event.global[w]))if(b="object"===typeof b?b[k.expando]?b:new k.Event(w,b):new k.Event(w),b.type=w,b.isTrigger=
!0,b.exclusive=g,b.namespace=j.join("."),b.namespace_re=b.namespace?RegExp("(^|\\.)"+j.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,j=0>w.indexOf(":")?"on"+w:"",e){if(b.result=a,b.target||(b.target=e),d=null!=d?k.makeArray(d):[],d.unshift(b),n=k.event.special[w]||{},!(n.trigger&&!1===n.trigger.apply(e,d))){m=[[e,n.bindType||w]];if(!f&&!n.noBubble&&!k.isWindow(e)){q=n.delegateType||w;g=bc.test(q+w)?e:e.parentNode;for(h=e;g;g=g.parentNode)m.push([g,q]),h=g;if(h===(e.ownerDocument||G))m.push([h.defaultView||
h.parentWindow||c,q])}for(h=0;h<m.length&&!b.isPropagationStopped();h++)g=m[h][0],b.type=m[h][1],(q=(k._data(g,"events")||{})[b.type]&&k._data(g,"handle"))&&q.apply(g,d),(q=j&&g[j])&&(k.acceptData(g)&&q.apply&&!1===q.apply(g,d))&&b.preventDefault();b.type=w;if(!f&&!b.isDefaultPrevented()&&(!n._default||!1===n._default.apply(e.ownerDocument,d))&&!("click"===w&&k.nodeName(e,"a"))&&k.acceptData(e))if(j&&e[w]&&("focus"!==w&&"blur"!==w||0!==b.target.offsetWidth)&&!k.isWindow(e))(h=e[j])&&(e[j]=null),k.event.triggered=
w,e[w](),k.event.triggered=a,h&&(e[j]=h);return b.result}}else for(h in e=k.cache,e)e[h].events&&e[h].events[w]&&k.event.trigger(b,d,e[h].handle.elem,!0)}},dispatch:function(b){b=k.event.fix(b||c.event);var d,e,f,g,h,j,n=(k._data(this,"events")||{})[b.type]||[],q=n.delegateCount,m=Z.call(arguments),w=!b.exclusive&&!b.namespace,s=k.event.special[b.type]||{},p=[];m[0]=b;b.delegateTarget=this;if(!(s.preDispatch&&!1===s.preDispatch.call(this,b))){if(q&&!(b.button&&"click"===b.type))for(e=b.target;e!=
this;e=e.parentNode||this)if(!0!==e.disabled||"click"!==b.type){g={};h=[];for(d=0;d<q;d++)f=n[d],j=f.selector,g[j]===a&&(g[j]=f.needsContext?0<=k(j,this).index(e):k.find(j,this,null,[e]).length),g[j]&&h.push(f);h.length&&p.push({elem:e,matches:h})}n.length>q&&p.push({elem:this,matches:n.slice(q)});for(d=0;d<p.length&&!b.isPropagationStopped();d++){g=p[d];b.currentTarget=g.elem;for(e=0;e<g.matches.length&&!b.isImmediatePropagationStopped();e++)if(f=g.matches[e],w||!b.namespace&&!f.namespace||b.namespace_re&&
b.namespace_re.test(f.namespace))b.data=f.data,b.handleObj=f,f=((k.event.special[f.origType]||{}).handle||f.handler).apply(g.elem,m),f!==a&&(b.result=f,!1===f&&(b.preventDefault(),b.stopPropagation()))}s.postDispatch&&s.postDispatch.call(this,b);return b.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],
filter:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(b,c){var d,e,f=c.button,g=c.fromElement;null==b.pageX&&null!=c.clientX&&(d=b.target.ownerDocument||G,e=d.documentElement,d=d.body,b.pageX=c.clientX+(e&&e.scrollLeft||d&&d.scrollLeft||0)-(e&&e.clientLeft||d&&d.clientLeft||0),b.pageY=c.clientY+(e&&e.scrollTop||d&&
d.scrollTop||0)-(e&&e.clientTop||d&&d.clientTop||0));!b.relatedTarget&&g&&(b.relatedTarget=g===b.target?c.toElement:g);!b.which&&f!==a&&(b.which=f&1?1:f&2?3:f&4?2:0);return b}},fix:function(a){if(a[k.expando])return a;var b,c,d=a,e=k.event.fixHooks[a.type]||{},f=e.props?this.props.concat(e.props):this.props;a=k.Event(d);for(b=f.length;b;)c=f[--b],a[c]=d[c];a.target||(a.target=d.srcElement||G);3===a.target.nodeType&&(a.target=a.target.parentNode);a.metaKey=!!a.metaKey;return e.filter?e.filter(a,d):
a},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){k.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){a=k.extend(new k.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?k.event.trigger(a,null,b):k.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};k.event.handle=k.event.dispatch;k.removeEvent=G.removeEventListener?
function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){b="on"+b;a.detachEvent&&("undefined"===typeof a[b]&&(a[b]=null),a.detachEvent(b,c))};k.Event=function(a,b){if(!(this instanceof k.Event))return new k.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?f:e):this.type=a;b&&k.extend(this,b);this.timeStamp=a&&a.timeStamp||k.now();this[k.expando]=!0};k.Event.prototype=
{preventDefault:function(){this.isDefaultPrevented=f;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=f;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=f;this.stopPropagation()},isDefaultPrevented:e,isPropagationStopped:e,isImmediatePropagationStopped:e};k.each({mouseenter:"mouseover",mouseleave:"mouseout"},
function(a,b){k.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=a.relatedTarget,e=a.handleObj;if(!d||d!==this&&!k.contains(this,d))a.type=e.origType,c=e.handler.apply(this,arguments),a.type=b;return c}}});k.support.submitBubbles||(k.event.special.submit={setup:function(){if(k.nodeName(this,"form"))return!1;k.event.add(this,"click._submit keypress._submit",function(b){b=b.target;if((b=k.nodeName(b,"input")||k.nodeName(b,"button")?b.form:a)&&!k._data(b,"_submit_attached"))k.event.add(b,
"submit._submit",function(a){a._submit_bubble=!0}),k._data(b,"_submit_attached",!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&k.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(k.nodeName(this,"form"))return!1;k.event.remove(this,"._submit")}});k.support.changeBubbles||(k.event.special.change={setup:function(){if(Cb.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)k.event.add(this,"propertychange._change",
function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),k.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1);k.event.simulate("change",this,a,!0)});return!1}k.event.add(this,"beforeactivate._change",function(a){a=a.target;Cb.test(a.nodeName)&&!k._data(a,"_change_attached")&&(k.event.add(a,"change._change",function(a){this.parentNode&&(!a.isSimulated&&!a.isTrigger)&&k.event.simulate("change",this.parentNode,a,!0)}),k._data(a,
"_change_attached",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){k.event.remove(this,"._change");return!Cb.test(this.nodeName)}});k.support.focusinBubbles||k.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){k.event.simulate(b,a.target,k.event.fix(a),!0)};k.event.special[b]={setup:function(){0===c++&&G.addEventListener(a,d,!0)},teardown:function(){0===
--c&&G.removeEventListener(a,d,!0)}}});k.fn.extend({on:function(b,c,d,f,g){var h,j;if("object"===typeof b){"string"!==typeof c&&(d=d||c,c=a);for(j in b)this.on(j,c,d,b[j],g);return this}null==d&&null==f?(f=c,d=c=a):null==f&&("string"===typeof c?(f=d,d=a):(f=d,d=c,c=a));if(!1===f)f=e;else if(!f)return this;1===g&&(h=f,f=function(a){k().off(a);return h.apply(this,arguments)},f.guid=h.guid||(h.guid=k.guid++));return this.each(function(){k.event.add(this,b,f,d,c)})},one:function(a,b,c,d){return this.on(a,
b,c,d,1)},off:function(b,c,d){var f;if(b&&b.preventDefault&&b.handleObj)return f=b.handleObj,k(b.delegateTarget).off(f.namespace?f.origType+"."+f.namespace:f.origType,f.selector,f.handler),this;if("object"===typeof b){for(f in b)this.off(f,c,b[f]);return this}if(!1===c||"function"===typeof c)d=c,c=a;!1===d&&(d=e);return this.each(function(){k.event.remove(this,b,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){k(this.context).on(a,
this.selector,b,c);return this},die:function(a,b){k(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){k.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return k.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||k.guid++,d=0,e=function(c){var e=(k._data(this,
"lastToggle"+a.guid)||0)%d;k._data(this,"lastToggle"+a.guid,e+1);c.preventDefault();return b[e].apply(this,arguments)||!1};for(e.guid=c;d<b.length;)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});k.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){k.fn[b]=function(a,
c){null==c&&(c=a,a=null);return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)};Lc.test(b)&&(k.event.fixHooks[b]=k.event.keyHooks);Mc.test(b)&&(k.event.fixHooks[b]=k.event.mouseHooks)});var Nc=c,T=function(a,b,c,d){c=c||[];b=b||ya;var e,f,g,h,j=b.nodeType;if(!a||"string"!==typeof a)return c;if(1!==j&&9!==j)return[];g=lb(b);if(!g&&!d&&(e=Oc.exec(a)))if(h=e[1])if(9===j)if((f=b.getElementById(h))&&f.parentNode){if(f.id===h)return c.push(f),c}else return c;else{if(b.ownerDocument&&(f=b.ownerDocument.getElementById(h))&&
dc(b,f)&&f.id===h)return c.push(f),c}else{if(e[2])return Xa.apply(c,Ya.call(b.getElementsByTagName(a),0)),c;if((h=e[3])&&ec&&b.getElementsByClassName)return Xa.apply(c,Ya.call(b.getElementsByClassName(h),0)),c}return Db(a.replace(mb,"$1"),b,c,d,g)},db=function(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}},fc=function(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}},Na=function(a){return wa(function(b){b=+b;return wa(function(c,
d){for(var e,f=a([],c.length,b),g=f.length;g--;)if(c[e=f[g]])c[e]=!(d[e]=c[e])})})},nb=function(a,b,c){if(a===b)return c;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1},pb=function(a,b){var c,d,e,f,g,h,j;if(g=gc[fa][a+" "])return b?0:g.slice(0);g=a;h=[];for(j=ba.preFilter;g;){if(!c||(d=Pc.exec(g)))d&&(g=g.slice(d[0].length)||g),h.push(e=[]);c=!1;if(d=Qc.exec(g))e.push(c=new hc(d.shift())),g=g.slice(c.length),c.type=d[0].replace(mb," ");for(f in ba.filter)if((d=ob[f].exec(g))&&
(!j[f]||(d=j[f](d))))e.push(c=new hc(d.shift())),g=g.slice(c.length),c.type=f,c.matches=d;if(!c)break}return b?g.length:g?T.error(a):gc(a,h).slice(0)},Fb=function(a,b,c){var d=b.dir,e=c&&"parentNode"===b.dir,f=Rc++;return b.first?function(b,c,f){for(;b=b[d];)if(e||1===b.nodeType)return a(b,c,f)}:function(b,c,g){if(g)for(;b=b[d];){if((e||1===b.nodeType)&&a(b,c,g))return b}else for(var h,j=eb+" "+f+" ",n=j+Eb;b=b[d];)if(e||1===b.nodeType){if((h=b[fa])===n)return b.sizset;if("string"===typeof h&&0===
h.indexOf(j)){if(b.sizset)return b}else{b[fa]=n;if(a(b,c,g))return b.sizset=!0,b;b.sizset=!1}}}},Gb=function(a){return 1<a.length?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]},qb=function(a,b,c,d,e){for(var f,g=[],h=0,j=a.length,n=null!=b;h<j;h++)if(f=a[h])if(!c||c(f,d,e))g.push(f),n&&b.push(h);return g},Hb=function(a,b,c,d,e,f){d&&!d[fa]&&(d=Hb(d));e&&!e[fa]&&(e=Hb(e,f));return wa(function(f,g,h,j){var n,q,k=[],m=[],w=g.length,s;if(!(s=f)){s=b||"*";for(var p=h.nodeType?
[h]:h,Q=[],u=0,A=p.length;u<A;u++)T(s,p[u],Q);s=Q}s=a&&(f||!b)?qb(s,k,a,h,j):s;p=c?e||(f?a:w||d)?[]:g:s;c&&c(s,p,h,j);if(d){n=qb(p,m);d(n,[],h,j);for(h=n.length;h--;)if(q=n[h])p[m[h]]=!(s[m[h]]=q)}if(f){if(e||a){if(e){n=[];for(h=p.length;h--;)if(q=p[h])n.push(s[h]=q);e(null,p=[],n,j)}for(h=p.length;h--;)if((q=p[h])&&-1<(n=e?Ib.call(f,q):k[h]))f[n]=!(g[n]=q)}}else p=qb(p===g?p.splice(w,p.length):p),e?e(null,g,p,j):Xa.apply(g,p)})},Jb=function(a){var b,c,d,e=a.length,f=ba.relative[a[0].type];c=f||ba.relative[" "];
for(var g=f?1:0,h=Fb(function(a){return a===b},c,!0),j=Fb(function(a){return-1<Ib.call(b,a)},c,!0),n=[function(a,c,d){return!f&&(d||c!==rb)||((b=c).nodeType?h(a,c,d):j(a,c,d))}];g<e;g++)if(c=ba.relative[a[g].type])n=[Fb(Gb(n),c)];else{c=ba.filter[a[g].type].apply(null,a[g].matches);if(c[fa]){for(d=++g;d<e&&!ba.relative[a[d].type];d++);return Hb(1<g&&Gb(n),1<g&&a.slice(0,g-1).join("").replace(mb,"$1"),c,g<d&&Jb(a.slice(g,d)),d<e&&Jb(a=a.slice(d)),d<e&&a.join(""))}n.push(c)}return Gb(n)},Db=function(a,
b,c,d,e){var f,g,h,j,n=pb(a);if(!d&&1===n.length){g=n[0]=n[0].slice(0);if(2<g.length&&"ID"===(h=g[0]).type&&9===b.nodeType&&!e&&ba.relative[g[1].type]){b=ba.find.ID(h.matches[0].replace(Oa,""),b,e)[0];if(!b)return c;a=a.slice(g.shift().length)}for(f=ob.POS.test(a)?-1:g.length-1;0<=f;f--){h=g[f];if(ba.relative[j=h.type])break;if(j=ba.find[j])if(d=j(h.matches[0].replace(Oa,""),Kb.test(g[0].type)&&b.parentNode||b,e)){g.splice(f,1);a=d.length&&g.join("");if(!a)return Xa.apply(c,Ya.call(d,0)),c;break}}}Lb(a,
n)(d,b,e,c,Kb.test(a));return c},ic=function(){},Eb,Mb,ba,sb,lb,dc,Lb,Nb,fb,rb,jc=!0,fa=("sizcache"+Math.random()).replace(".",""),hc=String,ya=Nc.document,ra=ya.documentElement,eb=0,Rc=0,Sc=[].pop,Xa=[].push,Ya=[].slice,Ib=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},wa=function(a,b){a[fa]=null==b||b;return a},Ob=function(){var a={},b=[];return wa(function(c,d){b.push(c)>ba.cacheLength&&delete a[b.shift()];return a[c+" "]=d},a)},kc=Ob(),gc=Ob(),lc=Ob(),
mc="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w#")+")|)|)[\\x20\\t\\r\\n\\f]*\\]",Pb=":((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+mc+")|[^:]|\\\\.)*|.*))\\)|)",mb=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),Pc=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,Qc=/^[\x20\t\r\n\f]*([\x20\t\r\n\f>+~])[\x20\t\r\n\f]*/,
Tc=RegExp(Pb),Oc=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,Kb=/[\x20\t\r\n\f]*[+~]/,Uc=/h\d/i,Vc=/input|select|textarea|button/i,Oa=/\\(?!\\)/g,ob={ID:/^#((?:\\.|[-\w]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[-\w]|[^\x00-\xa0])+)/,NAME:/^\[name=['"]?((?:\\.|[-\w]|[^\x00-\xa0])+)['"]?\]/,TAG:RegExp("^("+"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:RegExp("^"+mc),PSEUDO:RegExp("^"+Pb),POS:/:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i,CHILD:RegExp("^:(only|nth|first|last)-child(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)",
"i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},Ha=function(a){var b=ya.createElement("div");try{return a(b)}catch(c){return!1}finally{}},Wc=Ha(function(a){a.appendChild(ya.createComment(""));return!a.getElementsByTagName("*").length}),Xc=Ha(function(a){a.innerHTML="<a href='#'></a>";return a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&"#"===a.firstChild.getAttribute("href")}),
Yc=Ha(function(a){a.innerHTML="<select></select>";a=typeof a.lastChild.getAttribute("multiple");return"boolean"!==a&&"string"!==a}),ec=Ha(function(a){a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!a.getElementsByClassName||!a.getElementsByClassName("e").length)return!1;a.lastChild.className="e";return 2===a.getElementsByClassName("e").length}),Zc=Ha(function(a){a.id=fa+0;a.innerHTML="<a name='"+fa+"'></a><div name='"+fa+"'></div>";ra.insertBefore(a,ra.firstChild);var b=ya.getElementsByName&&
ya.getElementsByName(fa).length===2+ya.getElementsByName(fa+0).length;Mb=!ya.getElementById(fa);ra.removeChild(a);return b});try{Ya.call(ra.childNodes,0)[0].nodeType}catch(Id){Ya=function(a){for(var b,c=[];b=this[a];a++)c.push(b);return c}}T.matches=function(a,b){return T(a,null,null,b)};T.matchesSelector=function(a,b){return 0<T(b,null,null,[a]).length};sb=T.getText=function(a){var b,c="",d=0;if(b=a.nodeType)if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=
a.nextSibling)c+=sb(a)}else{if(3===b||4===b)return a.nodeValue}else for(;b=a[d];d++)c+=sb(b);return c};lb=T.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};dc=T.contains=ra.contains?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||!(1===d.nodeType&&c.contains&&c.contains(d)))}:ra.compareDocumentPosition?function(a,b){return b&&!!(a.compareDocumentPosition(b)&16)}:function(a,b){for(;b=b.parentNode;)if(b===a)return!0;
return!1};T.attr=function(a,b){var c,d=lb(a);d||(b=b.toLowerCase());return(c=ba.attrHandle[b])?c(a):d||Yc?a.getAttribute(b):(c=a.getAttributeNode(b))?"boolean"===typeof a[b]?a[b]?b:null:c.specified?c.value:null:null};ba=T.selectors={cacheLength:50,createPseudo:wa,match:ob,attrHandle:Xc?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},find:{ID:Mb?function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(a=b.getElementById(a))&&a.parentNode?
[a]:[]}:function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(b=b.getElementById(a))?b.id===a||"undefined"!==typeof b.getAttributeNode&&b.getAttributeNode("id").value===a?[b]:void 0:[]},TAG:Wc?function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a)}:function(a,b){var c=b.getElementsByTagName(a);if("*"===a){for(var d,e=[],f=0;d=c[f];f++)1===d.nodeType&&e.push(d);return e}return c},NAME:Zc&&function(a,b){if("undefined"!==typeof b.getElementsByName)return b.getElementsByName(name)},
CLASS:ec&&function(a,b,c){if("undefined"!==typeof b.getElementsByClassName&&!c)return b.getElementsByClassName(a)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(Oa,"");a[3]=(a[4]||a[5]||"").replace(Oa,"");"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1]?(a[2]||T.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*("even"===
a[2]||"odd"===a[2])),a[4]=+(a[6]+a[7]||"odd"===a[2])):a[2]&&T.error(a[0]);return a},PSEUDO:function(a){var b,c;if(ob.CHILD.test(a[0]))return null;if(a[3])a[2]=a[3];else if(b=a[4]){if(Tc.test(b)&&(c=pb(b,!0))&&(c=b.indexOf(")",b.length-c)-b.length))b=b.slice(0,c),a[0]=a[0].slice(0,c);a[2]=b}return a.slice(0,3)}},filter:{ID:Mb?function(a){a=a.replace(Oa,"");return function(b){return b.getAttribute("id")===a}}:function(a){a=a.replace(Oa,"");return function(b){return(b="undefined"!==typeof b.getAttributeNode&&
b.getAttributeNode("id"))&&b.value===a}},TAG:function(a){if("*"===a)return function(){return!0};a=a.replace(Oa,"").toLowerCase();return function(b){return b.nodeName&&b.nodeName.toLowerCase()===a}},CLASS:function(a){var b=kc[fa][a+" "];return b||(b=RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&kc(a,function(a){return b.test(a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){d=T.attr(d,a);if(null==d)return"!="===
b;if(!b)return!0;d+="";return"="===b?d===c:"!="===b?d!==c:"^="===b?c&&0===d.indexOf(c):"*="===b?c&&-1<d.indexOf(c):"$="===b?c&&d.substr(d.length-c.length)===c:"~="===b?-1<(" "+d+" ").indexOf(c):"|="===b?d===c||d.substr(0,c.length+1)===c+"-":!1}},CHILD:function(a,b,c,d){return"nth"===a?function(a){var b,e;b=a.parentNode;if(1===c&&0===d)return!0;if(b){e=0;for(b=b.firstChild;b&&!(1===b.nodeType&&(e++,a===b));b=b.nextSibling);}e-=d;return e===c||0===e%c&&0<=e/c}:function(b){var c=b;switch(a){case "only":case "first":for(;c=
c.previousSibling;)if(1===c.nodeType)return!1;if("first"===a)return!0;c=b;case "last":for(;c=c.nextSibling;)if(1===c.nodeType)return!1;return!0}}},PSEUDO:function(a,b){var c,d=ba.pseudos[a]||ba.setFilters[a.toLowerCase()]||T.error("unsupported pseudo: "+a);return d[fa]?d(b):1<d.length?(c=[a,a,"",b],ba.setFilters.hasOwnProperty(a.toLowerCase())?wa(function(a,c){for(var e,f=d(a,b),g=f.length;g--;)e=Ib.call(a,f[g]),a[e]=!(c[e]=f[g])}):function(a){return d(a,0,c)}):d}},pseudos:{not:wa(function(a){var b=
[],c=[],d=Lb(a.replace(mb,"$1"));return d[fa]?wa(function(a,b,c,e){e=d(a,null,e,[]);for(var f=a.length;f--;)if(c=e[f])a[f]=!(b[f]=c)}):function(a,e,f){b[0]=a;d(b,null,f,c);return!c.pop()}}),has:wa(function(a){return function(b){return 0<T(a,b).length}}),contains:wa(function(a){return function(b){return-1<(b.textContent||b.innerText||sb(b)).indexOf(a)}}),enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===
b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},parent:function(a){return!ba.pseudos.empty(a)},empty:function(a){var b;for(a=a.firstChild;a;){if("@"<a.nodeName||3===(b=a.nodeType)||4===b)return!1;a=a.nextSibling}return!0},header:function(a){return Uc.test(a.nodeName)},text:function(a){var b,c;return"input"===a.nodeName.toLowerCase()&&"text"===(b=a.type)&&(null==(c=a.getAttribute("type"))||c.toLowerCase()===b)},radio:db("radio"),
checkbox:db("checkbox"),file:db("file"),password:db("password"),image:db("image"),submit:fc("submit"),reset:fc("reset"),button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return Vc.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&!(!a.type&&!a.href&&!~a.tabIndex)},active:function(a){return a===a.ownerDocument.activeElement},first:Na(function(){return[0]}),last:Na(function(a,
b){return[b-1]}),eq:Na(function(a,b,c){return[0>c?c+b:c]}),even:Na(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:Na(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:Na(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:Na(function(a,b,c){for(c=0>c?c+b:c;++c<b;)a.push(c);return a})}};Nb=ra.compareDocumentPosition?function(a,b){return a===b?(fb=!0,0):(!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition:a.compareDocumentPosition(b)&4)?
-1:1}:function(a,b){if(a===b)return fb=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[];c=a.parentNode;d=b.parentNode;var g=c;if(c===d)return nb(a,b);if(c){if(!d)return 1}else return-1;for(;g;)e.unshift(g),g=g.parentNode;for(g=d;g;)f.unshift(g),g=g.parentNode;c=e.length;d=f.length;for(g=0;g<c&&g<d;g++)if(e[g]!==f[g])return nb(e[g],f[g]);return g===c?nb(a,f[g],-1):nb(e[g],b,1)};[0,0].sort(Nb);jc=!fb;T.uniqueSort=function(a){var b,c=[],d=1,e=0;fb=jc;a.sort(Nb);
if(fb){for(;b=a[d];d++)b===a[d-1]&&(e=c.push(d));for(;e--;)a.splice(c[e],1)}return a};T.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};Lb=T.compile=function(a,b){var c,d=[],e=[],f=lc[fa][a+" "];if(!f){b||(b=pb(a));for(c=b.length;c--;)f=Jb(b[c]),f[fa]?d.push(f):e.push(f);var g=0<d.length,h=0<e.length,j=function(a,b,c,f,n){var q,k,m=[],w=0,s="0",p=a&&[],za=null!=n,Q=rb,u=a||h&&ba.find.TAG("*",n&&b.parentNode||b),A=eb+=null==Q?1:Math.E;za&&(rb=b!==ya&&b,Eb=j.el);for(;null!=
(n=u[s]);s++){if(h&&n){for(q=0;k=e[q];q++)if(k(n,b,c)){f.push(n);break}za&&(eb=A,Eb=++j.el)}g&&((n=!k&&n)&&w--,a&&p.push(n))}w+=s;if(g&&s!==w){for(q=0;k=d[q];q++)k(p,m,b,c);if(a){if(0<w)for(;s--;)!p[s]&&!m[s]&&(m[s]=Sc.call(f));m=qb(m)}Xa.apply(f,m);za&&(!a&&0<m.length&&1<w+d.length)&&T.uniqueSort(f)}za&&(eb=A,rb=Q);return p};j.el=0;c=g?wa(j):j;f=lc(a,c)}return f};if(ya.querySelectorAll){var nc,$c=Db,ad=/'|\\/g,bd=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,Ia=[":focus"],tb=[":active"],ub=ra.matchesSelector||
ra.mozMatchesSelector||ra.webkitMatchesSelector||ra.oMatchesSelector||ra.msMatchesSelector;Ha(function(a){a.innerHTML="<select><option selected=''></option></select>";a.querySelectorAll("[selected]").length||Ia.push("\\[[\\x20\\t\\r\\n\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)");a.querySelectorAll(":checked").length||Ia.push(":checked")});Ha(function(a){a.innerHTML="<p test=''></p>";a.querySelectorAll("[test^='']").length&&Ia.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:\"\"|'')");a.innerHTML=
"<input type='hidden'/>";a.querySelectorAll(":enabled").length||Ia.push(":enabled",":disabled")});Ia=RegExp(Ia.join("|"));Db=function(a,b,c,d,e){if(!d&&!e&&!Ia.test(a)){var f,g,h=!0,j=fa;g=b;f=9===b.nodeType&&a;if(1===b.nodeType&&"object"!==b.nodeName.toLowerCase()){f=pb(a);(h=b.getAttribute("id"))?j=h.replace(ad,"\\$&"):b.setAttribute("id",j);j="[id='"+j+"'] ";for(g=f.length;g--;)f[g]=j+f[g].join("");g=Kb.test(a)&&b.parentNode||b;f=f.join(",")}if(f)try{return Xa.apply(c,Ya.call(g.querySelectorAll(f),
0)),c}catch(n){}finally{h||b.removeAttribute("id")}}return $c(a,b,c,d,e)};ub&&(Ha(function(a){nc=ub.call(a,"div");try{ub.call(a,"[test!='']:sizzle"),tb.push("!=",Pb)}catch(b){}}),tb=RegExp(tb.join("|")),T.matchesSelector=function(a,b){b=b.replace(bd,"='$1']");if(!lb(a)&&!tb.test(b)&&!Ia.test(b))try{var c=ub.call(a,b);if(c||nc||a.document&&11!==a.document.nodeType)return c}catch(d){}return 0<T(b,null,null,[a]).length})}ba.pseudos.nth=ba.pseudos.eq;ba.filters=ic.prototype=ba.pseudos;ba.setFilters=new ic;
T.attr=k.attr;k.find=T;k.expr=T.selectors;k.expr[":"]=k.expr.pseudos;k.unique=T.uniqueSort;k.text=T.getText;k.isXMLDoc=T.isXML;k.contains=T.contains;var cd=/Until$/,dd=/^(?:parents|prev(?:Until|All))/,Gc=/^.[^:#\[\.,]*$/,oc=k.expr.match.needsContext,ed={children:!0,contents:!0,next:!0,prev:!0};k.fn.extend({find:function(a){var b,c,d,e,f,g,h=this;if("string"!==typeof a)return k(a).filter(function(){b=0;for(c=h.length;b<c;b++)if(k.contains(h[b],this))return!0});g=this.pushStack("","find",a);b=0;for(c=
this.length;b<c;b++)if(d=g.length,k.find(a,this[b],g),0<b)for(e=d;e<g.length;e++)for(f=0;f<d;f++)if(g[f]===g[e]){g.splice(e--,1);break}return g},has:function(a){var b,c=k(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(k.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(m(this,a,!1),"not",a)},filter:function(a){return this.pushStack(m(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"===typeof a?oc.test(a)?0<=k(a,this.context).index(this[0]):0<k.filter(a,
this).length:0<this.filter(a).length)},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=oc.test(a)||"string"!==typeof a?k(a,b||this.context):0;d<e;d++)for(c=this[d];c&&c.ownerDocument&&c!==b&&11!==c.nodeType;){if(g?-1<g.index(c):k.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}f=1<f.length?k.unique(f):f;return this.pushStack(f,"closest",a)},index:function(a){return!a?this[0]&&this[0].parentNode?this.prevAll().length:-1:"string"===typeof a?k.inArray(this[0],k(a)):k.inArray(a.jquery?
a[0]:a,this)},add:function(a,b){var c="string"===typeof a?k(a,b):k.makeArray(a&&a.nodeType?[a]:a),d=k.merge(this.get(),c);return this.pushStack(h(c[0])||h(d[0])?d:k.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});k.fn.andSelf=k.fn.addBack;k.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return k.dir(a,"parentNode")},parentsUntil:function(a,b,c){return k.dir(a,"parentNode",c)},next:function(a){return j(a,
"nextSibling")},prev:function(a){return j(a,"previousSibling")},nextAll:function(a){return k.dir(a,"nextSibling")},prevAll:function(a){return k.dir(a,"previousSibling")},nextUntil:function(a,b,c){return k.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return k.dir(a,"previousSibling",c)},siblings:function(a){return k.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return k.sibling(a.firstChild)},contents:function(a){return k.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:
k.merge([],a.childNodes)}},function(a,b){k.fn[a]=function(c,d){var e=k.map(this,b,c);cd.test(a)||(d=c);d&&"string"===typeof d&&(e=k.filter(d,e));e=1<this.length&&!ed[a]?k.unique(e):e;1<this.length&&dd.test(a)&&(e=e.reverse());return this.pushStack(e,a,Z.call(arguments).join(","))}});k.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return 1===b.length?k.find.matchesSelector(b[0],a)?[b[0]]:[]:k.find.matches(a,b)},dir:function(b,c,d){var e=[];for(b=b[c];b&&9!==b.nodeType&&(d===a||1!==b.nodeType||
!k(b).is(d));)1===b.nodeType&&e.push(b),b=b[c];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Wb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",fd=/ jQuery\d+="(?:null|\d+)"/g,Qb=/^\s+/,pc=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,qc=/<([\w:]+)/,gd=/<tbody/i,hd=/<|&#?\w+;/,id=/<(?:script|style|link)/i,
jd=/<(?:script|object|embed|option|style)/i,Rb=RegExp("<(?:"+Wb+")[\\s/>]","i"),Xb=/^(?:checkbox|radio)$/,rc=/checked\s*(?:[^=]|=\s*.checked.)/i,kd=/\/(java|ecma)script/i,ld=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,pa={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],
area:[1,"<map>","</map>"],_default:[0,"",""]},sc=p(G),Sb=sc.appendChild(G.createElement("div"));pa.optgroup=pa.option;pa.tbody=pa.tfoot=pa.colgroup=pa.caption=pa.thead;pa.th=pa.td;k.support.htmlSerialize||(pa._default=[1,"X<div>","</div>"]);k.fn.extend({text:function(b){return k.access(this,function(b){return b===a?k.text(this):this.empty().append((this[0]&&this[0].ownerDocument||G).createTextNode(b))},null,b,arguments.length)},wrapAll:function(a){if(k.isFunction(a))return this.each(function(b){k(this).wrapAll(a.call(this,
b))});if(this[0]){var b=k(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return k.isFunction(a)?this.each(function(b){k(this).wrapInner(a.call(this,b))}):this.each(function(){var b=k(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=k.isFunction(a);return this.each(function(c){k(this).wrapAll(b?
a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){k.nodeName(this,"body")||k(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(a,this.firstChild)})},before:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,
this)});if(arguments.length){var a=k.clean(arguments);return this.pushStack(k.merge(a,this),"before",this.selector)}},after:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=k.clean(arguments);return this.pushStack(k.merge(this,a),"after",this.selector)}},remove:function(a,b){for(var c,d=0;null!=(c=this[d]);d++)if(!a||k.filter(a,[c]).length)!b&&1===c.nodeType&&(k.cleanData(c.getElementsByTagName("*")),
k.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c);return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)for(1===a.nodeType&&k.cleanData(a.getElementsByTagName("*"));a.firstChild;)a.removeChild(a.firstChild);return this},clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return k.clone(this,a,b)})},html:function(b){return k.access(this,function(b){var c=this[0]||{},d=0,e=this.length;if(b===a)return 1===c.nodeType?c.innerHTML.replace(fd,""):a;if("string"===
typeof b&&!id.test(b)&&(k.support.htmlSerialize||!Rb.test(b))&&(k.support.leadingWhitespace||!Qb.test(b))&&!pa[(qc.exec(b)||["",""])[1].toLowerCase()]){b=b.replace(pc,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},1===c.nodeType&&(k.cleanData(c.getElementsByTagName("*")),c.innerHTML=b);c=0}catch(f){}}c&&this.empty().append(b)},null,b,arguments.length)},replaceWith:function(a){if(!h(this[0])){if(k.isFunction(a))return this.each(function(b){var c=k(this),d=c.html();c.replaceWith(a.call(this,b,d))});"string"!==
typeof a&&(a=k(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;k(this).remove();b?k(b).before(a):k(c).append(a)})}return this.length?this.pushStack(k(k.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(b,c,d){b=[].concat.apply([],b);var e,f,g,h=0,j=b[0],n=[],q=this.length;if(!k.support.checkClone&&1<q&&"string"===typeof j&&rc.test(j))return this.each(function(){k(this).domManip(b,c,d)});if(k.isFunction(j))return this.each(function(e){var f=
k(this);b[0]=j.call(this,e,c?f.html():a);f.domManip(b,c,d)});if(this[0]){e=k.buildFragment(b,this,n);g=e.fragment;f=g.firstChild;1===g.childNodes.length&&(g=f);if(f){c=c&&k.nodeName(f,"tr");for(e=e.cacheable||q-1;h<q;h++)d.call(c&&k.nodeName(this[h],"table")?this[h].getElementsByTagName("tbody")[0]||this[h].appendChild(this[h].ownerDocument.createElement("tbody")):this[h],h===e?g:k.clone(g,!0,!0))}g=f=null;n.length&&k.each(n,function(a,b){b.src?k.ajax?k.ajax({url:b.src,type:"GET",dataType:"script",
async:!1,global:!1,"throws":!0}):k.error("no ajax"):k.globalEval((b.text||b.textContent||b.innerHTML||"").replace(ld,""));b.parentNode&&b.parentNode.removeChild(b)})}return this}});k.buildFragment=function(b,c,d){var e,f,g,h=b[0];c=c||G;c=!c.nodeType&&c[0]||c;c=c.ownerDocument||c;if(1===b.length&&"string"===typeof h&&512>h.length&&c===G&&"<"===h.charAt(0)&&!jd.test(h)&&(k.support.checkClone||!rc.test(h))&&(k.support.html5Clone||!Rb.test(h)))f=!0,e=k.fragments[h],g=e!==a;e||(e=c.createDocumentFragment(),
k.clean(b,c,e,d),f&&(k.fragments[h]=g&&e));return{fragment:e,cacheable:f}};k.fragments={};k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){k.fn[a]=function(c){var d,e=0,f=[];c=k(c);var g=c.length;d=1===this.length&&this[0].parentNode;if((null==d||d&&11===d.nodeType&&1===d.childNodes.length)&&1===g)return c[b](this[0]),this;for(;e<g;e++)d=(0<e?this.clone(!0):this).get(),k(c[e])[b](d),f=f.concat(d);return this.pushStack(f,
a,c.selector)}});k.extend({clone:function(a,b,c){var d,e,f,h;k.support.html5Clone||k.isXMLDoc(a)||!Rb.test("<"+a.nodeName+">")?h=a.cloneNode(!0):(Sb.innerHTML=a.outerHTML,Sb.removeChild(h=Sb.firstChild));if((!k.support.noCloneEvent||!k.support.noCloneChecked)&&(1===a.nodeType||11===a.nodeType)&&!k.isXMLDoc(a)){n(a,h);d=q(a);e=q(h);for(f=0;d[f];++f)e[f]&&n(d[f],e[f])}if(b&&(g(a,h),c)){d=q(a);e=q(h);for(f=0;d[f];++f)g(d[f],e[f])}return h},clean:function(a,b,c,d){var e,f,g,h,j,n,q=b===G&&sc,m=[];if(!b||
"undefined"===typeof b.createDocumentFragment)b=G;for(e=0;null!=(g=a[e]);e++)if("number"===typeof g&&(g+=""),g){if("string"===typeof g)if(hd.test(g)){q=q||p(b);n=b.createElement("div");q.appendChild(n);g=g.replace(pc,"<$1></$2>");f=(qc.exec(g)||["",""])[1].toLowerCase();h=pa[f]||pa._default;j=h[0];for(n.innerHTML=h[1]+g+h[2];j--;)n=n.lastChild;if(!k.support.tbody){j=gd.test(g);h="table"===f&&!j?n.firstChild&&n.firstChild.childNodes:"<table>"===h[1]&&!j?n.childNodes:[];for(f=h.length-1;0<=f;--f)k.nodeName(h[f],
"tbody")&&!h[f].childNodes.length&&h[f].parentNode.removeChild(h[f])}!k.support.leadingWhitespace&&Qb.test(g)&&n.insertBefore(b.createTextNode(Qb.exec(g)[0]),n.firstChild);g=n.childNodes;n.parentNode.removeChild(n)}else g=b.createTextNode(g);g.nodeType?m.push(g):k.merge(m,g)}n&&(g=n=q=null);if(!k.support.appendChecked)for(e=0;null!=(g=m[e]);e++)k.nodeName(g,"input")?u(g):"undefined"!==typeof g.getElementsByTagName&&k.grep(g.getElementsByTagName("input"),u);if(c){a=function(a){if(!a.type||kd.test(a.type))return d?
d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a)};for(e=0;null!=(g=m[e]);e++)if(!k.nodeName(g,"script")||!a(g))c.appendChild(g),"undefined"!==typeof g.getElementsByTagName&&(g=k.grep(k.merge([],g.getElementsByTagName("script")),a),m.splice.apply(m,[e+1,0].concat(g)),e+=g.length)}return m},cleanData:function(a,b){for(var c,d,e,f,g=0,h=k.expando,j=k.cache,n=k.support.deleteExpando,q=k.event.special;null!=(e=a[g]);g++)if(b||k.acceptData(e))if(c=(d=e[h])&&j[d]){if(c.events)for(f in c.events)q[f]?
k.event.remove(e,f):k.removeEvent(e,f,c.handle);j[d]&&(delete j[d],n?delete e[h]:e.removeAttribute?e.removeAttribute(h):e[h]=null,k.deletedIds.push(d))}}});var vb,Ja;k.uaMatch=function(a){a=a.toLowerCase();a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}};vb=k.uaMatch(R.userAgent);Ja={};vb.browser&&
(Ja[vb.browser]=!0,Ja.version=vb.version);Ja.chrome?Ja.webkit=!0:Ja.webkit&&(Ja.safari=!0);k.browser=Ja;k.sub=function(){function a(b,c){return new a.fn.init(b,c)}k.extend(!0,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(c,d){d&&(d instanceof k&&!(d instanceof a))&&(d=a(d));return k.fn.init.call(this,c,d,b)};a.fn.init.prototype=a.fn;var b=a(G);return a};var ka,Ra,Sa,Tb=/alpha\([^)]*\)/i,md=/opacity=([^)]*)/,nd=/^(top|right|bottom|left)$/,od=
/^(none|table(?!-c[ea]).+)/,tc=/^margin/,Hc=RegExp("^("+ea+")(.*)$","i"),gb=RegExp("^("+ea+")(?!px)[a-z%]+$","i"),pd=RegExp("^([-+])=("+ea+")","i"),yb={BODY:"block"},qd={position:"absolute",visibility:"hidden",display:"block"},uc={letterSpacing:0,fontWeight:400},Ka=["Top","Right","Bottom","Left"],Yb=["Webkit","O","Moz","ms"],rd=k.fn.toggle;k.fn.extend({css:function(b,c){return k.access(this,function(b,c,d){return d!==a?k.style(b,c,d):k.css(b,c)},b,c,1<arguments.length)},show:function(){return y(this,
!0)},hide:function(){return y(this)},toggle:function(a,b){var c="boolean"===typeof a;return k.isFunction(a)&&k.isFunction(b)?rd.apply(this,arguments):this.each(function(){(c?a:A(this))?k(this).show():k(this).hide()})}});k.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=ka(a,"opacity");return""===c?"1":c}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":k.support.cssFloat?"cssFloat":"styleFloat"},style:function(b,
c,d,e){if(b&&!(3===b.nodeType||8===b.nodeType||!b.style)){var f,g,h,j=k.camelCase(c),n=b.style;c=k.cssProps[j]||(k.cssProps[j]=s(n,j));h=k.cssHooks[c]||k.cssHooks[j];if(d!==a){g=typeof d;if("string"===g&&(f=pd.exec(d)))d=(f[1]+1)*f[2]+parseFloat(k.css(b,c)),g="number";if(!(null==d||"number"===g&&isNaN(d)))if("number"===g&&!k.cssNumber[j]&&(d+="px"),!h||!("set"in h)||(d=h.set(b,d,e))!==a)try{n[c]=d}catch(q){}}else return h&&"get"in h&&(f=h.get(b,!1,e))!==a?f:n[c]}},css:function(b,c,d,e){var f,g;g=
k.camelCase(c);c=k.cssProps[g]||(k.cssProps[g]=s(b.style,g));(g=k.cssHooks[c]||k.cssHooks[g])&&"get"in g&&(f=g.get(b,!0,e));f===a&&(f=ka(b,c));"normal"===f&&c in uc&&(f=uc[c]);return d||e!==a?(b=parseFloat(f),d||k.isNumeric(b)?b||0:f):f},swap:function(a,b,c){var d,e={};for(d in b)e[d]=a.style[d],a.style[d]=b[d];c=c.call(a);for(d in b)a.style[d]=e[d];return c}});c.getComputedStyle?ka=function(a,b){var d,e,f,g,h=c.getComputedStyle(a,null),j=a.style;h&&(d=h.getPropertyValue(b)||h[b],""===d&&!k.contains(a.ownerDocument,
a)&&(d=k.style(a,b)),gb.test(d)&&tc.test(b)&&(e=j.width,f=j.minWidth,g=j.maxWidth,j.minWidth=j.maxWidth=j.width=d,d=h.width,j.width=e,j.minWidth=f,j.maxWidth=g));return d}:G.documentElement.currentStyle&&(ka=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;null==e&&(f&&f[b])&&(e=f[b]);if(gb.test(e)&&!nd.test(b)){c=f.left;if(d=a.runtimeStyle&&a.runtimeStyle.left)a.runtimeStyle.left=a.currentStyle.left;f.left="fontSize"===b?"1em":e;e=f.pixelLeft+"px";f.left=c;d&&(a.runtimeStyle.left=
d)}return""===e?"auto":e});k.each(["height","width"],function(a,b){k.cssHooks[b]={get:function(a,c,d){if(c)return 0===a.offsetWidth&&od.test(ka(a,"display"))?k.swap(a,qd,function(){return C(a,b,d)}):C(a,b,d)},set:function(a,c,d){return x(a,c,d?v(a,b,d,k.support.boxSizing&&"border-box"===k.css(a,"boxSizing")):0)}}});k.support.opacity||(k.cssHooks.opacity={get:function(a,b){return md.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,
b){var c=a.style,d=a.currentStyle,e=k.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1;if(1<=b&&(""===k.trim(f.replace(Tb,""))&&c.removeAttribute)&&(c.removeAttribute("filter"),d&&!d.filter))return;c.filter=Tb.test(f)?f.replace(Tb,e):f+" "+e}});k(function(){k.support.reliableMarginRight||(k.cssHooks.marginRight={get:function(a,b){return k.swap(a,{display:"inline-block"},function(){if(b)return ka(a,"marginRight")})}});!k.support.pixelPosition&&k.fn.position&&k.each(["top",
"left"],function(a,b){k.cssHooks[b]={get:function(a,c){if(c){var d=ka(a,b);return gb.test(d)?k(a).position()[b]+"px":d}}}})});k.expr&&k.expr.filters&&(k.expr.filters.hidden=function(a){return 0===a.offsetWidth&&0===a.offsetHeight||!k.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||ka(a,"display"))},k.expr.filters.visible=function(a){return!k.expr.filters.hidden(a)});k.each({margin:"",padding:"",border:"Width"},function(a,b){k.cssHooks[a+b]={expand:function(c){var d="string"===typeof c?
c.split(" "):[c],e={};for(c=0;4>c;c++)e[a+Ka[c]+b]=d[c]||d[c-2]||d[0];return e}};tc.test(a)||(k.cssHooks[a+b].set=x)});var sd=/%20/g,Ic=/\[\]$/,vc=/\r?\n/g,td=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,ud=/^(?:select|textarea)/i;k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?k.makeArray(this.elements):this}).filter(function(){return this.name&&
!this.disabled&&(this.checked||ud.test(this.nodeName)||td.test(this.type))}).map(function(a,b){var c=k(this).val();return null==c?null:k.isArray(c)?k.map(c,function(a){return{name:b.name,value:a.replace(vc,"\r\n")}}):{name:b.name,value:c.replace(vc,"\r\n")}}).get()}});k.param=function(b,c){var d,e=[],f=function(a,b){b=k.isFunction(b)?b():null==b?"":b;e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===a&&(c=k.ajaxSettings&&k.ajaxSettings.traditional);if(k.isArray(b)||b.jquery&&!k.isPlainObject(b))k.each(b,
function(){f(this.name,this.value)});else for(d in b)r(d,b[d],c,f);return e.join("&").replace(sd,"+")};var Pa,Qa,vd=/#.*$/,wd=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,xd=/^(?:GET|HEAD)$/,yd=/^\/\//,wc=/\?/,zd=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Ad=/([?&])_=[^&]*/,xc=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,yc=k.fn.load,zb={},zc={},Ac=["*/"]+["*"];try{Qa=M.href}catch(Jd){Qa=G.createElement("a"),Qa.href="",Qa=Qa.href}Pa=xc.exec(Qa.toLowerCase())||[];k.fn.load=function(b,c,d){if("string"!==
typeof b&&yc)return yc.apply(this,arguments);if(!this.length)return this;var e,f,g,h=this,j=b.indexOf(" ");0<=j&&(e=b.slice(j,b.length),b=b.slice(0,j));k.isFunction(c)?(d=c,c=a):c&&"object"===typeof c&&(f="POST");k.ajax({url:b,type:f,dataType:"html",data:c,complete:function(a,b){d&&h.each(d,g||[a.responseText,b,a])}}).done(function(a){g=arguments;h.html(e?k("<div>").append(a.replace(zd,"")).find(e):a)});return this};k.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),
function(a,b){k.fn[b]=function(a){return this.on(b,a)}});k.each(["get","post"],function(b,c){k[c]=function(b,d,e,f){k.isFunction(d)&&(f=f||e,e=d,d=a);return k.ajax({type:c,url:b,data:d,success:e,dataType:f})}});k.extend({getScript:function(b,c){return k.get(b,a,c,"script")},getJSON:function(a,b,c){return k.get(a,b,c,"json")},ajaxSetup:function(a,b){b?D(a,k.ajaxSettings):(b=a,a=k.ajaxSettings);D(a,b);return a},ajaxSettings:{url:Qa,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(Pa[1]),
global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Ac},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":c.String,"text html":!0,"text json":k.parseJSON,"text xml":k.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:E(zb),ajaxTransport:E(zc),ajax:function(b,
c){function d(b,c,g,n){var m,U,F,y,V=c;if(2!==M){M=2;j&&clearTimeout(j);h=a;f=n||"";r.readyState=0<b?4:0;if(g){y=w;n=r;var B,x,W,ja,v=y.contents,R=y.dataTypes,K=y.responseFields;for(x in K)x in g&&(n[K[x]]=g[x]);for(;"*"===R[0];)R.shift(),B===a&&(B=y.mimeType||n.getResponseHeader("content-type"));if(B)for(x in v)if(v[x]&&v[x].test(B)){R.unshift(x);break}if(R[0]in g)W=R[0];else{for(x in g){if(!R[0]||y.converters[x+" "+R[0]]){W=x;break}ja||(ja=x)}W=W||ja}W?(W!==R[0]&&R.unshift(W),y=g[W]):y=void 0}if(200<=
b&&300>b||304===b)if(w.ifModified&&((g=r.getResponseHeader("Last-Modified"))&&(k.lastModified[e]=g),(g=r.getResponseHeader("Etag"))&&(k.etag[e]=g)),304===b)V="notmodified",m=!0;else{a:{U=w;F=y;var ha,za,V=U.dataTypes.slice();B=V[0];x={};W=0;U.dataFilter&&(F=U.dataFilter(F,U.dataType));if(V[1])for(ha in U.converters)x[ha.toLowerCase()]=U.converters[ha];for(;g=V[++W];)if("*"!==g){if("*"!==B&&B!==g){ha=x[B+" "+g]||x["* "+g];if(!ha)for(za in x)if(m=za.split(" "),m[1]===g&&(ha=x[B+" "+m[0]]||x["* "+m[0]])){!0===
ha?ha=x[za]:!0!==x[za]&&(g=m[0],V.splice(W--,0,g));break}if(!0!==ha)if(ha&&U["throws"])F=ha(F);else try{F=ha(F)}catch(qa){m={state:"parsererror",error:ha?qa:"No conversion from "+B+" to "+g};break a}}B=g}m={state:"success",data:F}}V=m.state;U=m.data;F=m.error;m=!F}else if(F=V,!V||b)V="error",0>b&&(b=0);r.status=b;r.statusText=(c||V)+"";m?Q.resolveWith(s,[U,V,r]):Q.rejectWith(s,[r,V,F]);r.statusCode(A);A=a;q&&p.trigger("ajax"+(m?"Success":"Error"),[r,w,m?U:F]);u.fireWith(s,[r,V]);q&&(p.trigger("ajaxComplete",
[r,w]),--k.active||k.event.trigger("ajaxStop"))}}"object"===typeof b&&(c=b,b=a);c=c||{};var e,f,g,h,j,n,q,m,w=k.ajaxSetup({},c),s=w.context||w,p=s!==w&&(s.nodeType||s instanceof k)?k(s):k.event,Q=k.Deferred(),u=k.Callbacks("once memory"),A=w.statusCode||{},F={},y={},M=0,V="canceled",r={readyState:0,setRequestHeader:function(a,b){if(!M){var c=a.toLowerCase();a=y[c]=y[c]||a;F[a]=b}return this},getAllResponseHeaders:function(){return 2===M?f:null},getResponseHeader:function(b){var c;if(2===M){if(!g)for(g=
{};c=wd.exec(f);)g[c[1].toLowerCase()]=c[2];c=g[b.toLowerCase()]}return c===a?null:c},overrideMimeType:function(a){M||(w.mimeType=a);return this},abort:function(a){a=a||V;h&&h.abort(a);d(0,a);return this}};Q.promise(r);r.success=r.done;r.error=r.fail;r.complete=u.add;r.statusCode=function(a){if(a){var b;if(2>M)for(b in a)A[b]=[A[b],a[b]];else b=a[r.status],r.always(b)}return this};w.url=((b||w.url)+"").replace(vd,"").replace(yd,Pa[1]+"//");w.dataTypes=k.trim(w.dataType||"*").toLowerCase().split(U);
null==w.crossDomain&&(n=xc.exec(w.url.toLowerCase()),w.crossDomain=!(!n||!(n[1]!==Pa[1]||n[2]!==Pa[2]||(n[3]||("http:"===n[1]?80:443))!=(Pa[3]||("http:"===Pa[1]?80:443)))));w.data&&(w.processData&&"string"!==typeof w.data)&&(w.data=k.param(w.data,w.traditional));J(zb,w,c,r);if(2===M)return r;q=w.global;w.type=w.type.toUpperCase();w.hasContent=!xd.test(w.type);q&&0===k.active++&&k.event.trigger("ajaxStart");if(!w.hasContent&&(w.data&&(w.url+=(wc.test(w.url)?"&":"?")+w.data,delete w.data),e=w.url,!1===
w.cache)){n=k.now();var B=w.url.replace(Ad,"$1_="+n);w.url=B+(B===w.url?(wc.test(w.url)?"&":"?")+"_="+n:"")}(w.data&&w.hasContent&&!1!==w.contentType||c.contentType)&&r.setRequestHeader("Content-Type",w.contentType);w.ifModified&&(e=e||w.url,k.lastModified[e]&&r.setRequestHeader("If-Modified-Since",k.lastModified[e]),k.etag[e]&&r.setRequestHeader("If-None-Match",k.etag[e]));r.setRequestHeader("Accept",w.dataTypes[0]&&w.accepts[w.dataTypes[0]]?w.accepts[w.dataTypes[0]]+("*"!==w.dataTypes[0]?", "+Ac+
"; q=0.01":""):w.accepts["*"]);for(m in w.headers)r.setRequestHeader(m,w.headers[m]);if(w.beforeSend&&(!1===w.beforeSend.call(s,r,w)||2===M))return r.abort();V="abort";for(m in{success:1,error:1,complete:1})r[m](w[m]);if(h=J(zc,w,c,r)){r.readyState=1;q&&p.trigger("ajaxSend",[r,w]);w.async&&0<w.timeout&&(j=setTimeout(function(){r.abort("timeout")},w.timeout));try{M=1,h.send(F,d)}catch(x){if(2>M)d(-1,x);else throw x;}}else d(-1,"No Transport");return r},active:0,lastModified:{},etag:{}});var Bc=[],
Bd=/\?/,wb=/(=)\?(?=&|$)|\?\?/,Cd=k.now();k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Bc.pop()||k.expando+"_"+Cd++;this[a]=!0;return a}});k.ajaxPrefilter("json jsonp",function(b,d,e){var f,g,h,j=b.data,n=b.url,q=!1!==b.jsonp,w=q&&wb.test(n),m=q&&!w&&"string"===typeof j&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&wb.test(j);if("jsonp"===b.dataTypes[0]||w||m)return f=b.jsonpCallback=k.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,g=c[f],w?b.url=
n.replace(wb,"$1"+f):m?b.data=j.replace(wb,"$1"+f):q&&(b.url+=(Bd.test(n)?"&":"?")+b.jsonp+"="+f),b.converters["script json"]=function(){h||k.error(f+" was not called");return h[0]},b.dataTypes[0]="json",c[f]=function(){h=arguments},e.always(function(){c[f]=g;b[f]&&(b.jsonpCallback=d.jsonpCallback,Bc.push(f));h&&k.isFunction(g)&&g(h[0]);h=g=a}),"script"});k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},
converters:{"text script":function(a){k.globalEval(a);return a}}});k.ajaxPrefilter("script",function(b){b.cache===a&&(b.cache=!1);b.crossDomain&&(b.type="GET",b.global=!1)});k.ajaxTransport("script",function(b){if(b.crossDomain){var c,d=G.head||G.getElementsByTagName("head")[0]||G.documentElement;return{send:function(e,f){c=G.createElement("script");c.async="async";b.scriptCharset&&(c.charset=b.scriptCharset);c.src=b.url;c.onload=c.onreadystatechange=function(b,e){if(e||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=
c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=a,e||f(200,"success")};d.insertBefore(c,d.firstChild)},abort:function(){if(c)c.onload(0,1)}}}});var Za,Ub=c.ActiveXObject?function(){for(var a in Za)Za[a](0,1)}:!1,Dd=0;k.ajaxSettings.xhr=c.ActiveXObject?function(){var a;if(!(a=!this.isLocal&&F()))a:{try{a=new c.ActiveXObject("Microsoft.XMLHTTP");break a}catch(b){}a=void 0}return a}:F;var Vb=k.ajaxSettings.xhr();k.extend(k.support,{ajax:!!Vb,cors:!!Vb&&"withCredentials"in Vb});k.support.ajax&&
k.ajaxTransport(function(b){if(!b.crossDomain||k.support.cors){var d;return{send:function(e,f){var g,h,j=b.xhr();b.username?j.open(b.type,b.url,b.async,b.username,b.password):j.open(b.type,b.url,b.async);if(b.xhrFields)for(h in b.xhrFields)j[h]=b.xhrFields[h];b.mimeType&&j.overrideMimeType&&j.overrideMimeType(b.mimeType);!b.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)j.setRequestHeader(h,e[h])}catch(n){}j.send(b.hasContent&&b.data||null);d=function(c,
e){var h,n,q,w,m;try{if(d&&(e||4===j.readyState))if(d=a,g&&(j.onreadystatechange=k.noop,Ub&&delete Za[g]),e)4!==j.readyState&&j.abort();else{h=j.status;q=j.getAllResponseHeaders();w={};if((m=j.responseXML)&&m.documentElement)w.xml=m;try{w.text=j.responseText}catch(s){}try{n=j.statusText}catch(p){n=""}!h&&b.isLocal&&!b.crossDomain?h=w.text?200:404:1223===h&&(h=204)}}catch(Q){e||f(-1,Q)}w&&f(h,n,w,q)};b.async?4===j.readyState?setTimeout(d,0):(g=++Dd,Ub&&(Za||(Za={},k(c).unload(Ub)),Za[g]=d),j.onreadystatechange=
d):d()},abort:function(){d&&d(0,1)}}}});var Ta,xb,Ed=/^(?:toggle|show|hide)$/,Fd=RegExp("^(?:([-+])=|)("+ea+")([a-z%]*)$","i"),Gd=/queueHooks$/,hb=[function(a,b,c){var d,e,f,g,h,j,n=this,q=a.style,w={},m=[],s=a.nodeType&&A(a);c.queue||(h=k._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,j=h.empty.fire,h.empty.fire=function(){h.unqueued||j()}),h.unqueued++,n.always(function(){n.always(function(){h.unqueued--;k.queue(a,"fx").length||h.empty.fire()})}));if(1===a.nodeType&&("height"in b||"width"in
b))c.overflow=[q.overflow,q.overflowX,q.overflowY],"inline"===k.css(a,"display")&&"none"===k.css(a,"float")&&(!k.support.inlineBlockNeedsLayout||"inline"===I(a.nodeName)?q.display="inline-block":q.zoom=1);c.overflow&&(q.overflow="hidden",k.support.shrinkWrapBlocks||n.done(function(){q.overflow=c.overflow[0];q.overflowX=c.overflow[1];q.overflowY=c.overflow[2]}));for(d in b)f=b[d],Ed.exec(f)&&(delete b[d],e=e||"toggle"===f,f!==(s?"hide":"show")&&m.push(d));if(b=m.length){f=k._data(a,"fxshow")||k._data(a,
"fxshow",{});"hidden"in f&&(s=f.hidden);e&&(f.hidden=!s);s?k(a).show():n.done(function(){k(a).hide()});n.done(function(){var b;k.removeData(a,"fxshow",!0);for(b in w)k.style(a,b,w[b])});for(d=0;d<b;d++)e=m[d],g=n.createTween(e,s?f[e]:0),w[e]=f[e]||k.style(a,e),e in f||(f[e]=g.start,s&&(g.end=g.start,g.start="width"===e||"height"===e?1:0))}}],$a={"*":[function(a,b){var c,d,e=this.createTween(a,b),f=Fd.exec(b),g=e.cur(),h=+g||0,j=1,n=20;if(f){c=+f[2];d=f[3]||(k.cssNumber[a]?"":"px");if("px"!==d&&h){h=
k.css(e.elem,a,!0)||c||1;do j=j||".5",h/=j,k.style(e.elem,a,h+d);while(j!==(j=e.cur()/g)&&1!==j&&--n)}e.unit=d;e.start=h;e.end=f[1]?h+(f[1]+1)*c:c}return e}]};k.Animation=k.extend(K,{tweener:function(a,b){k.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;d<e;d++)c=a[d],$a[c]=$a[c]||[],$a[c].unshift(b)},prefilter:function(a,b){b?hb.unshift(a):hb.push(a)}});k.Tween=H;H.prototype={constructor:H,init:function(a,b,c,d,e,f){this.elem=a;this.prop=c;this.easing=e||"swing";this.options=
b;this.start=this.now=this.cur();this.end=d;this.unit=f||(k.cssNumber[c]?"":"px")},cur:function(){var a=H.propHooks[this.prop];return a&&a.get?a.get(this):H.propHooks._default.get(this)},run:function(a){var b,c=H.propHooks[this.prop];this.pos=this.options.duration?b=k.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);c&&c.set?c.set(this):H.propHooks._default.set(this);
return this}};H.prototype.init.prototype=H.prototype;H.propHooks={_default:{get:function(a){if(null!=a.elem[a.prop]&&(!a.elem.style||null==a.elem.style[a.prop]))return a.elem[a.prop];a=k.css(a.elem,a.prop,!1,"");return!a||"auto"===a?0:a},set:function(a){if(k.fx.step[a.prop])k.fx.step[a.prop](a);else a.elem.style&&(null!=a.elem.style[k.cssProps[a.prop]]||k.cssHooks[a.prop])?k.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&
a.elem.parentNode&&(a.elem[a.prop]=a.now)}};k.each(["toggle","show","hide"],function(a,b){var c=k.fn[b];k.fn[b]=function(d,e,f){return null==d||"boolean"===typeof d||!a&&k.isFunction(d)&&k.isFunction(e)?c.apply(this,arguments):this.animate(L(b,!0),d,e,f)}});k.fn.extend({fadeTo:function(a,b,c,d){return this.filter(A).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=k.isEmptyObject(a),f=k.speed(b,c,d);b=function(){var b=K(this,k.extend({},a),f);e&&b.stop(!0)};
return e||!1===f.queue?this.each(b):this.queue(f.queue,b)},stop:function(b,c,d){var e=function(a){var b=a.stop;delete a.stop;b(d)};"string"!==typeof b&&(d=c,c=b,b=a);c&&!1!==b&&this.queue(b||"fx",[]);return this.each(function(){var a=!0,c=null!=b&&b+"queueHooks",f=k.timers,g=k._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&(g[c].stop&&Gd.test(c))&&e(g[c]);for(c=f.length;c--;)if(f[c].elem===this&&(null==b||f[c].queue===b))f[c].anim.stop(d),a=!1,f.splice(c,1);(a||!d)&&k.dequeue(this,
b)})}});k.each({slideDown:L("show"),slideUp:L("hide"),slideToggle:L("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){k.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});k.speed=function(a,b,c){var d=a&&"object"===typeof a?k.extend({},a):{complete:c||!c&&b||k.isFunction(a)&&a,duration:a,easing:c&&b||b&&!k.isFunction(b)&&b};d.duration=k.fx.off?0:"number"===typeof d.duration?d.duration:d.duration in k.fx.speeds?k.fx.speeds[d.duration]:k.fx.speeds._default;
if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;d.complete=function(){k.isFunction(d.old)&&d.old.call(this);d.queue&&k.dequeue(this,d.queue)};return d};k.easing={linear:function(a){return a},swing:function(a){return 0.5-Math.cos(a*Math.PI)/2}};k.timers=[];k.fx=H.prototype.init;k.fx.tick=function(){var b,c=k.timers,d=0;for(Ta=k.now();d<c.length;d++)b=c[d],!b()&&c[d]===b&&c.splice(d--,1);c.length||k.fx.stop();Ta=a};k.fx.timer=function(a){a()&&(k.timers.push(a)&&!xb)&&(xb=setInterval(k.fx.tick,
k.fx.interval))};k.fx.interval=13;k.fx.stop=function(){clearInterval(xb);xb=null};k.fx.speeds={slow:600,fast:200,_default:400};k.fx.step={};k.expr&&k.expr.filters&&(k.expr.filters.animated=function(a){return k.grep(k.timers,function(b){return a===b.elem}).length});var Cc=/^(?:body|html)$/i;k.fn.offset=function(b){if(arguments.length)return b===a?this:this.each(function(a){k.offset.setOffset(this,b,a)});var c,d,e,f,g,h={top:0,left:0};if(e=(f=this[0])&&f.ownerDocument){if((d=e.body)===f)return k.offset.bodyOffset(f);
c=e.documentElement;if(!k.contains(c,f))return h;"undefined"!==typeof f.getBoundingClientRect&&(h=f.getBoundingClientRect());e=P(e);f=c.clientTop||d.clientTop||0;d=c.clientLeft||d.clientLeft||0;g=e.pageYOffset||c.scrollTop;c=e.pageXOffset||c.scrollLeft;return{top:h.top+g-f,left:h.left+c-d}}};k.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;k.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(k.css(a,"marginTop"))||0,c+=parseFloat(k.css(a,"marginLeft"))||0);return{top:b,left:c}},
setOffset:function(a,b,c){var d=k.css(a,"position");"static"===d&&(a.style.position="relative");var e=k(a),f=e.offset(),g=k.css(a,"top"),h=k.css(a,"left"),j={},n={};("absolute"===d||"fixed"===d)&&-1<k.inArray("auto",[g,h])?(n=e.position(),d=n.top,h=n.left):(d=parseFloat(g)||0,h=parseFloat(h)||0);k.isFunction(b)&&(b=b.call(a,c,f));null!=b.top&&(j.top=b.top-f.top+d);null!=b.left&&(j.left=b.left-f.left+h);"using"in b?b.using.call(a,j):e.css(j)}};k.fn.extend({position:function(){if(this[0]){var a=this[0],
b=this.offsetParent(),c=this.offset(),d=Cc.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(k.css(a,"marginTop"))||0;c.left-=parseFloat(k.css(a,"marginLeft"))||0;d.top+=parseFloat(k.css(b[0],"borderTopWidth"))||0;d.left+=parseFloat(k.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||G.body;a&&!Cc.test(a.nodeName)&&"static"===k.css(a,"position");)a=a.offsetParent;return a||G.body})}});
k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d=/Y/.test(c);k.fn[b]=function(e){return k.access(this,function(b,e,f){var g=P(b);if(f===a)return g?c in g?g[c]:g.document.documentElement[e]:b[e];g?g.scrollTo(!d?f:k(g).scrollLeft(),d?f:k(g).scrollTop()):b[e]=f},b,e,arguments.length,null)}});k.each({Height:"height",Width:"width"},function(b,c){k.each({padding:"inner"+b,content:c,"":"outer"+b},function(d,e){k.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!==typeof e),
h=d||(!0===e||!0===f?"margin":"border");return k.access(this,function(c,d,e){return k.isWindow(c)?c.document.documentElement["client"+b]:9===c.nodeType?(d=c.documentElement,Math.max(c.body["scroll"+b],d["scroll"+b],c.body["offset"+b],d["offset"+b],d["client"+b])):e===a?k.css(c,d,e,h):k.style(c,d,e,h)},c,g?e:a,g,null)}})});c.jQuery=c.$=k;"function"===typeof define&&(define.amd&&define.amd.jQuery)&&define("jquery",[],function(){return k})})(window);
$.browser.msie&&function(){var c;c=window.console=new function(){function a(){this.__buffer.push(arguments)}var b=setInterval(function(){var a;if(window.console&&console.log&&!console.__buffer){clearInterval(b);a=Function.prototype.bind?Function.prototype.bind.call(console.log,console):console.log;for(var e=0;e<c.__buffer.length;e++)a.apply(console,c.__buffer[e])}},1E3);this.timeEnd=this.time=this.info=this.warn=this.error=this.log=a;this.__buffer=[]}}();
var var_widthMAX=1390,var_widthMID=1290,var_widthMIN=1E3,var_valueMAX=var_widthMAX-var_widthMID,var_valueMIN=var_widthMID-var_widthMIN,var_widthLeftBlockMAX=295,var_widthLeftBlockMID=295,var_widthLeftBlockMIN=255,var_widthMiddleBlockOneMAX=935,var_widthMiddleBlockMAX=855,var_widthMiddleBlockMID=755,var_widthMiddleBlockMIN=585,var_widthFilterMAX=240,var_widthFilterMID=240,var_widthFilterMIN=200,var_paddingLeftMAX=12,var_paddingLeftMID=12,var_paddingLeftMIN=12,var_paddingRightSlideMAX=305,var_paddingRightSlideMID=
305,var_paddingRightSlideMIN=65,var_paddingLeftTelefonMAX=250,var_paddingLeftTelefonMID=250,var_paddingLeftTelefonMIN=220,var_widthMainBlockMAX=695,var_widthMainBlockMIN=530,var_iphone=0;window.hotelsScrollCallback=function(){};
function ResizeCenterBlock(){var c=$(".center-block");if(c.length){var a=$(".left-block");$(".head");var b=c.find(".main-block"),d=c.find(".main-block").find("#content"),e=c.find(".filter-block"),f=c.find(".logo"),h=c.find(".about"),j=$(".slide-turn-mode"),m=$(".telefon"),p=$(".ticket-content");$(".head-content");var g=$(".hotels-tickets"),n=$(".calenderWindow"),q=$(".allTrip .info"),u=$("#descr"),s,A,y,x=32,v,C,I,r,E,J,D,F,B,K,H,L,c=c.width(),P=0<a.length&&a.is(":visible"),N=0<b.length&&b.is(":visible"),
O=0<e.length&&e.is(":visible"),n=0<n.length&&n.is(":visible"),u=0<u.length&&u.is(":visible");!P&&!O&&N?c>=var_widthMAX?(A=var_widthMiddleBlockOneMAX,r=I="auto",x=var_paddingLeftMAX,v=var_paddingRightSlideMAX,C=var_paddingLeftTelefonMAX,B=A,v+=165):c<var_widthMAX&&c>=var_widthMID?(A=var_widthMiddleBlockOneMAX,r=I="auto",x=var_paddingLeftMID,v=var_paddingRightSlideMID,C=var_paddingLeftTelefonMID,B=A,v+=165):c<var_widthMID&&c>=var_widthMIN&&(A=var_widthMiddleBlockOneMAX,r=I="auto",x=Math.floor(var_paddingLeftMIN+
(c-var_widthMIN)/(var_valueMIN/(var_paddingLeftMID-var_paddingLeftMIN))),v=Math.floor(var_paddingRightSlideMIN+(c-var_widthMIN)/(var_valueMIN/(var_paddingRightSlideMID-var_paddingRightSlideMIN))),C=Math.floor(var_paddingLeftTelefonMIN+(c-var_widthMIN)/(var_valueMIN/(var_paddingLeftTelefonMID-var_paddingLeftTelefonMIN))),B=A,v+=100):!P&&O&&N?c>=var_widthMAX?(A=var_widthMiddleBlockMAX,y=var_widthFilterMAX,I=x=Math.floor((c-(A+y))/2),r=y+x,E=x,x=var_paddingLeftMAX,v=var_paddingRightSlideMAX,C=var_paddingLeftTelefonMAX,
B=var_widthMainBlockMAX,D=F="auto",v+=165):c<var_widthMAX&&c>=var_widthMID?(A=Math.floor(var_widthMiddleBlockMID+(c-var_widthMID)/1),y=var_widthFilterMID,I=x=Math.floor((c-(A+y))/2),r=y+x,E=x,x=var_paddingLeftMID,v=var_paddingRightSlideMID,C=var_paddingLeftTelefonMID,B=var_widthMainBlockMAX,D=F="auto",v+=165):c<var_widthMID&&c>=var_widthMIN&&(y=Math.floor(220+(c-var_widthMIN)/(var_valueMIN/(var_widthFilterMID-220))),A=Math.floor(c-y-40),A>var_widthMiddleBlockMID&&(A=var_widthMiddleBlockMID),I=x=Math.floor((c-
(A+y))/2),r=y+x,E=x,x=Math.floor(var_paddingLeftMIN+(c-var_widthMIN)/(var_valueMIN/(var_paddingLeftMID-var_paddingLeftMIN))),v=Math.floor(var_paddingRightSlideMIN+(c-var_widthMIN)/(var_valueMIN/(var_paddingRightSlideMID-var_paddingRightSlideMIN))),C=Math.floor(var_paddingLeftTelefonMIN+(c-var_widthMIN)/(var_valueMIN/(var_paddingLeftTelefonMID-var_paddingLeftTelefonMIN))),B=var_widthMainBlockMAX,D=F="auto",v+=100):P&&O&&N?c>=var_widthMAX?(s=var_widthLeftBlockMAX,A=var_widthMiddleBlockMAX,y=var_widthFilterMAX,
x=Math.floor((c-(A+y+s))/2),I=s,r=y,J=E=0,x=var_paddingLeftMAX,v=var_paddingRightSlideMAX,C=var_paddingLeftTelefonMAX,B=var_widthMainBlockMAX,v+=165):c<var_widthMAX&&c>=var_widthMID?(s=var_widthLeftBlockMID,A=Math.floor(var_widthMiddleBlockMID+(c-var_widthMID)/1),y=var_widthFilterMID,I=s,r=y,J=E=0,x=var_paddingLeftMID,v=var_paddingRightSlideMID,C=var_paddingLeftTelefonMID,B=var_widthMainBlockMAX,v+=165):c<var_widthMID&&c>=var_widthMIN&&(s=Math.floor(220+(c-var_widthMIN)/(var_valueMIN/(var_widthLeftBlockMID-
220))),A=Math.floor(var_widthMiddleBlockMIN+(c-var_widthMIN)/(var_valueMIN/(var_widthMiddleBlockMID-var_widthMiddleBlockMIN))),y=Math.floor(var_widthFilterMIN+(c-var_widthMIN)/(var_valueMIN/(var_widthFilterMID-var_widthFilterMIN))),x=Math.floor(var_paddingLeftMIN+(c-var_widthMIN)/(var_valueMIN/(var_paddingLeftMID-var_paddingLeftMIN))),v=Math.floor(var_paddingRightSlideMIN+(c-var_widthMIN)/(var_valueMIN/(var_paddingRightSlideMID-var_paddingRightSlideMIN))),C=Math.floor(var_paddingLeftTelefonMIN+(c-
var_widthMIN)/(var_valueMIN/(var_paddingLeftTelefonMID-var_paddingLeftTelefonMIN))),I=s,r=y,J=E=0,B=Math.floor(var_widthMainBlockMIN+(c-var_widthMIN)/(var_valueMIN/(var_widthMainBlockMAX-var_widthMainBlockMIN))),v+=100):P&&N&&!O?c>=var_widthMAX?(s=var_widthLeftBlockMAX,A=var_widthMiddleBlockOneMAX,r=x=80,I=s+x,J=0,x=var_paddingLeftMAX,v=var_paddingRightSlideMAX,C=var_paddingLeftTelefonMAX,F=0,B=A-F,D=0,K="auto",v+=165,H="auto",L="112px"):c<var_widthMAX&&c>=var_widthMID?(A=Math.floor(910+(c-var_widthMID)/
(var_valueMAX/25)),s=var_widthLeftBlockMID,r=x=Math.floor(30+(c-var_widthMID)/(var_valueMAX/50)),I=s+x,J=0,x=var_paddingLeftMID,v=var_paddingRightSlideMID,C=var_paddingLeftTelefonMID,F=0,B=A-F,D=0,K="auto",v+=165,H="auto",L="112px"):c<var_widthMID&&c>=var_widthMIN&&(s=Math.floor(220+(c-var_widthMIN)/(var_valueMIN/(var_widthLeftBlockMID-220))-3),A=Math.floor(685+(c-var_widthMIN)/(var_valueMIN/225)),r=x=39,I=s+x,J=0,x=Math.floor(var_paddingLeftMIN+(c-var_widthMIN)/(var_valueMIN/(var_paddingLeftMID-
var_paddingLeftMIN))),v=Math.floor(var_paddingRightSlideMIN+(c-var_widthMIN)/(var_valueMIN/(var_paddingRightSlideMID-var_paddingRightSlideMIN))),C=Math.floor(var_paddingLeftTelefonMIN+(c-var_widthMIN)/(var_valueMIN/(var_paddingLeftTelefonMID-var_paddingLeftTelefonMIN))),F=0,B=A-F,D=0,K="210px",v+=100,H=Math.floor(585+(c-var_widthMIN)/(var_valueMIN/149)),H+="px",L=Math.floor(36+(c-var_widthMIN)/(var_valueMIN/76))):c>=var_widthMAX?(x=var_paddingLeftMAX,v=var_paddingRightSlideMAX,C=var_paddingLeftTelefonMAX,
v+=165):c<var_widthMAX&&c>=var_widthMID?(x=var_paddingLeftMID,v=var_paddingRightSlideMID,C=var_paddingLeftTelefonMID,v+=165):c<var_widthMID&&c>=var_widthMIN&&(x=Math.floor(var_paddingLeftMIN+(c-var_widthMIN)/(var_valueMIN/(var_paddingLeftMID-var_paddingLeftMIN))),v=Math.floor(var_paddingRightSlideMIN+(c-var_widthMIN)/(var_valueMIN/(var_paddingRightSlideMID-var_paddingRightSlideMIN))),C=Math.floor(var_paddingLeftTelefonMIN+(c-var_widthMIN)/(var_valueMIN/(var_paddingLeftTelefonMID-var_paddingLeftTelefonMIN))),
v+=100);"auto"!=I&&(I+="px");"auto"!=r&&(r+="px");"auto"!=F&&(F+="px");"auto"!=D&&(D+="px");"auto"!=E&&(E+="px");"auto"!=J&&(J+="px");N&&(b.css("width",A+"px").css("margin-left",I).css("margin-right",r),d.css("width",B+"px").css("margin-left",F).css("margin-right",D),q.css("width",H),$(".costItAll").css("padding-right",L),$(".calToursInner").css("padding-right",L));O&&e.css("width",y+"px").css("margin-right",E);P&&a.css("width",s+"px").css("margin-left",J);n&&$(".innerCalendar, #voyanga-calendar").css("width",
c+"px");u&&($("#descr").find(".left").find(".descr-text .text").dotdotdot({watch:"window"}),$("#content .place-buy .street").css("width",K));0<$(".description .text").length&&$(".description .text").is(":visible")&&$(".description .text").dotdotdot({watch:"window"});f.css("left",x+"px");h.css("left",122+x+"px");j.css("right",v+"px");a.find(".left-content").css("margin-left",x+"px");m.css("left",C+"px");690>B?(a=Math.floor(253+(c-var_widthMIN)/(var_valueMIN/65)),$(".recommended-ticket").css("width",
a+"px"),$(".recommended-ticket").find(".ticket-items").addClass("small"),d.find("h1").find(".hideTitle").hide(),p.find(".ticket-items").addClass("small"),$(".block").find(".ticket-items").addClass("small"),g.addClass("small")):($(".recommended-ticket").find(".ticket-items").removeClass("small"),$(".recommended-ticket").css("width","318px"),p.find(".ticket-items").removeClass("small"),$(".block").find(".ticket-items").removeClass("small"),g.removeClass("small"),d.find("h1").find(".hideTitle").show());
1E3>$("body").width()?$("body").addClass("scrollYes"):$("body").removeClass("scrollYes");resizeLeftStage();resizeMainStage()}$(".second-path").focus(function(){$(this).select()}).mouseup(function(a){a.preventDefault()});$(".voyasha td").hover(function(){$(".ico-voyasha").addClass("active")},function(){$(".ico-voyasha").removeClass("active")})}
function smallTicketHeight(){if(0<$(".recommended-ticket").length&&$(".recommended-ticket").is(":visible")){var c=$(".recomended-content"),a=c.find(".recommended-ticket .ticket-items .content").height(),b=0,b="none"!==$(".two-way").css("display")?(a-24)/2:a-24,b=Math.floor(b);c.find(".prices-of-3days .ticket .schedule-of-prices").css("height",b+"px");c=b-65;$(".prices-of-3days .ticket  .schedule-of-prices")[0]&&(a=ko.contextFor($(".prices-of-3days .ticket  .schedule-of-prices")[0]),a=a.$data,a.graphHeight&&
a.graphHeight(c))}}function resizeLeftStage(){var c=$(".left-block"),a=c.width();c.find(".date");var b;b=a-215;b=75>b?b/1.3+100:170;105>b?c.find(".path").css("width","95px"):c.find(".path").css("width",b+"px");250>a?c.addClass("smallBlock"):c.removeClass("smallBlock")}
function resizeMainStage(){var c=$(".prices-of-3days"),a=$(".recommended-ticket").width();if(318>a){var b;b=Math.floor(a/7);a=7*b;c.find(".schedule-of-prices").css("width",a+"px");c.find(".schedule-of-prices li").css("width",b+"px");c.css("width",a+"px");c.find(".total-td .text").hide();c.find(".total-td").css("margin-left","-15px");c.find(".look-td").css("margin-right","-15px")}else c.find(".schedule-of-prices").css("width","318px"),c.find(".schedule-of-prices li").css("width","45px"),c.css("width",
"318px"),c.find(".total-td").css("margin-left","0px"),c.find(".look-td").css("margin-right","0px"),c.find(".total-td .text").show();290>a&&280<a?c.find(".schedule-of-prices li").find(".price").css("left","-1px"):280>a&&270<a?c.find(".schedule-of-prices li").find(".price").css("left","-2px"):270>a&&260<a?c.find(".schedule-of-prices li").find(".price").css("left","-3px"):260>a&&255<a?c.find(".schedule-of-prices li").find(".price").css("left","-4px"):255>a?c.find(".schedule-of-prices li").find(".price").css("left",
"-5px"):c.find(".schedule-of-prices li").find(".price").css("left","0px")}function ResizeAvia(){window.lastResizeCall||(window.lastResizeCall=0);var c=(new Date).getTime()-window.lastResizeCall;window.resizeAviaThrottle&&(clearTimeout(window.resizeAviaThrottle),window.resizeAviaThrottle=null);100>c?window.resizeAviaThrottle=setTimeout(ResizeAviaClb,100):ResizeAviaClb()}
function ResizeAviaClb(){window.lastResizeCall=(new Date).getTime();ResizeCenterBlock();inTheTwoLines();smallTicketHeight();CenterIMGResize();slideToursSlide();smallIMGresizeIndex();mapAllPageView();gradientResize();resizePanel();startIE()}function ResizeFun(){ResizeAvia()}$(window).load(function(){$(window).scroll(function(c){scrollValue("avia",c);scrollValue("hotel",c);window.hotelsScrollCallback()})});
function readMoreService(c){$(c).hasClass("active")?($(".hideService").animate({height:"34px"},300),$(c).text("\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"),$(c).removeClass("active")):($(".hideService").animate({height:"100%"},300),$(c).text("\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c"),$(c).addClass("active"))}
function mapAllPageView(){var c=$("#all-hotels-map");if(0<c.length&&c.is(":visible")&&0<c.length&&c.is(":visible")){var a=$("#content").width();$("#content").height();var b=$(".main-block").width();if(0<$(".left-block").length&&$(".left-block").is(":visible")){var a=(b-a)/2,d=670>$(window).height()?670:$(window).height(),e=$("#content").offset();$("#content").css("height",d-70+"px");c.css("height",d-123+"px");c.css("width",b+"px").css("margin-left","-"+a+"px")}else d=670>$(window).height()?670:$(window).height(),
e=$("#content").offset(),$("#content").css("height",d-70+"px"),c.css("height",d-123+"px"),c.css("width",$(window).width()+"px").css("margin-left","-"+e.left+"px")}}var _GoOnScroll=!0,_jScrollingBootom=!1,_jScrollNonBottomInitted=!1;
function jsPaneScrollHeight(){var c=0<$("#all-hotels-map").length&&$("#all-hotels-map").is(":visible"),a=0<$(".left-block").length&&$(".left-block").is(":visible");if(!c||a){c=$("#content");c.css("height","auto");var a=$(window).height(),a=670<a?$(window).height()-132:538,b=c.innerHeight(),d=0;$(".scrollBlock").find(".div-filter").each(function(){d+=$(this).innerHeight()});d>b&&b>a&&d>a?(c.css("height",d+"px"),$(".filter-content").css("position","relative").css("top","auto").css("bottom","auto"),
$(".innerFilter").css("height",d+"px"),_GoOnScroll=!1):d<b&&b>a&&d>a?(c.css("height","auto"),$(".filter-content").css("position","relative").css("top","auto").css("bottom","auto"),$(".innerFilter").css("height",d+"px"),_GoOnScroll=!0):d>b&&b<a&&d>a?(c.css("height",d+"px"),$(".filter-content").css("position","relative").css("top","auto").css("bottom","auto"),$(".innerFilter").css("height",d+"px"),_GoOnScroll=!1):d>b&&b>a&&d<a?(c.css("height",d+"px"),$(".filter-content").css("position","relative").css("top",
"auto").css("bottom","auto"),$(".innerFilter").css("height",d+"px"),_GoOnScroll=!1):d<b&&b<a&&d>a?(c.css("height",a-70+"px"),$(".filter-content").css("position","relative").css("top","auto").css("bottom","auto"),$(".innerFilter").css("height",d+"px"),_GoOnScroll=!1):d>b&&b<a&&d<a?(c.css("height",a-70+"px"),$(".filter-content").css("position","relative").css("top","auto").css("bottom","auto"),$(".innerFilter").css("height",d+"px"),_GoOnScroll=!1):d<b&&b>a&&d<a?(c.css("height","auto"),$(".filter-content").css("position",
"relative").css("top","auto").css("bottom","auto"),$(".innerFilter").css("height",d+"px"),_GoOnScroll=!0):d<b&&b<a&&d<a?(c.css("height",a-70+"px"),$(".filter-content").css("position","relative").css("top","auto").css("bottom","auto"),$(".innerFilter").css("height",d+"px"),_GoOnScroll=!1):($(".innerFilter").css("height","100%"),_GoOnScroll=!0)}}
function scrollValue(c,a){if(!DetectMobileQuick()&&!DetectTierTablet()){var b=$(".filter-content."+c),d;d=a.target==document?!1:$(a.target).is("#scroll-pane");if(0<b.length&&b.is(":visible")&&!d){d=b.find(".innerFilter");$(".sub-head").css("margin-top");var e=$(window).scrollTop(),f=$(window).height();$("#content").height();if("avia"==c)var h=73,j="-67px"!=$(".sub-head").css("margin-top")?173:110;else h=23,j="-67px"!=$(".sub-head").css("margin-top")?125:61;if(_GoOnScroll){var m=!1;0==e?(m=!0,b.css("position",
"relative").css("top","auto").css("bottom","auto")):0<e&&e<j?(m=!0,b.css("position","relative").css("top","auto").css("bottom","auto")):e>j&&(e>$(".wrapper").height()-f-30?(b.css("position","fixed").css("top","-"+h+"px").css("bottom","auto"),b=30>e-($(".wrapper").height()-f-30)?e-($(".wrapper").height()-f-30):30,d.css("height",f-b+"px"),$("#scroll-pane").data("jsp")||$("#scroll-pane").jScrollPane({contentWidth:d.width()}),$("#scroll-pane").jScrollPane({contentWidth:d.width()}),!_jScrollingBootom&&
e==$(".wrapper").height()-$("body").height()&&(_jScrollingBootom=!0,window.setTimeout(function(){$("#scroll-pane").data("jsp").scrollToBottom()},50),window.setTimeout(function(){_jScrollNonBottomInitted=_jScrollingBootom=!1},500))):(b.css("position","fixed").css("top","-"+h+"px").css("bottom","auto"),d.css("height",f+"px"),$("#scroll-pane").data("jsp")||$("#scroll-pane").jScrollPane({contentWidth:d.width()}),_jScrollNonBottomInitted||(_jScrollNonBottomInitted=!0,$("#scroll-pane").jScrollPane({contentWidth:d.width()}))));
m&&$("#scroll-pane").data("jsp")&&$("#scroll-pane").data("jsp").destroy()}else return b=0<$("#all-hotels-map").length&&$("#all-hotels-map").is(":visible"),d=0<$(".left-block").length&&$(".left-block").is(":visible"),(!b||d)&&$("#scroll-pane").data("jsp")&&$("#scroll-pane").data("jsp").destroy(),!1}else return!1}}function reInitJScrollPane(){$("#scroll-pane").data("jsp")&&$("#scroll-pane").data("jsp").reinitialise()}
function minimizeFilter(){var c=0<$("#all-hotels-map").length&&$("#all-hotels-map").is(":visible"),a=0<$(".left-block").length&&$(".left-block").is(":visible");if(c&&!a)$(".innerFilter").find(".div-filter").each(function(a){1<a&&$(this).hide()}),$(".innerFilter").css("height","162px"),$(".filter-block").css("height","185px"),0<$(".filter-minimize").length&&$(".filter-minimize").is(":visible")?($(".filter-minimize").removeClass("hide").attr("onclick","filterShow()"),$("#scroll-pane").data("jsp")&&
$("#scroll-pane").data("jsp").destroy()):$(".filter-content").append('<div class="filter-minimize" onclick="filterShow()"></div>'),_GoOnScroll=!1;else return!1}
function filterShow(){$(".filter-block").css("height","100%");$(".innerFilter").css("height",$(".wrapper").height()-175+"px");$(".innerFilter").find(".div-filter").show();_GoOnScroll=!1;$("#scroll-pane").data("jsp")||$("#scroll-pane").jScrollPane({contentWidth:$(".innerFilter").width()});$(".filter-minimize").addClass("hide").attr("onclick","minimizeFilter()")}
function removeFilterShow(){$(".filter-minimize").remove();$(".filter-block").css("height","100%");$(".innerFilter").css("height","100%");$(".innerFilter").find(".div-filter").show();$(window).load(function(c){scrollValue("hotel",c)})}
function loadPayFly(){var c=$("#loadPayFly");if(0<c.length&&c.is(":visible")){var a=c.offset(),c=c.width()-290,b=$(".loadJet"),d=b.find(".jetFly");b.css("margin-left","-"+a.left+"px").css("width",a.left+c+"px");b.find(".overflowBlock").css("width",a.left+c+"px");b.find(".pathBlock").clone().prependTo(".loadJet").addClass("blue");b.find(".pathBlock").eq(1).attr("id","grey");var e=function(){d.animate({right:"0%"},2E4,"linear",function(){$(this).animate({right:"-241px"},4E3,"linear",function(){$(this).css("right",
"100%")})});setTimeout(function(){b.find("#grey").animate({width:"0%"},2E4,"linear",function(){b.find("#grey").css("opacity","0").css("width","100%");setTimeout(function(){b.find("#grey").animate({opacity:"1"},1E3,function(){e()})},4500)})},500)};e()}}var clickYes=!1;function closeAllPopup(){closePopUpProj();closePopUpContact()}
function openPopUpProj(){clickYes=!0;$(".mainWrapBg").show();$("body").css("overflow","hidden");var c=$(".textSlideProj"),a=$(".mainWrapBg").find(".centerImg"),b=$(".mainWrapBg").find(".itemsProj"),d=c.find("li").length;a.empty();c.find("li").each(function(){a.append('<img src="'+$(this).attr("rel")+'">')});c.find("li").eq(0).attr("rel");c=c.find("li").eq(0).html();$(".bgCount").empty().append("<span>1</span>/"+d);$(".mainWrapBg").find(".centerImg").find("img").hide().eq(0).show();b.empty().append(c);
$(".naviProj").find(".left").addClass("inactive");var e=!0;$(".projectPopUp").hover(function(){e=!1},function(){e=!0});$(".naviProj").hover(function(){e=!1},function(){e=!0});$(".mainWrapBg").mouseup(function(){e&&closeAllPopup()});$(window).on("keydown",function(a){if(clickYes)if(27==a.which)closeAllPopup();else if(39==a.which)ClikRightProj();else if(37==a.which)ClikLeftProj();else return!0});$(".mainWrapBg").find(".centerImg").click(function(){ClikRightProj()})}
function closePopUpProj(){$(".mainWrapBg").hide();$("body").css("overflow","auto");clickYes=!1}
function ClikRightProj(){var c=$(".textSlideProj").find("li").length,a=$(".bgCount").find("span").text();if(a>=c)return!1;a++;$(".naviProj").find(".left").removeClass("inactive");$(".naviProj").find(".right").removeClass("inactive");$(".mainWrapBg").find(".centerImg").find("img").hide().eq(a-1).show();var b=$(".textSlideProj").find("li").eq(a-1).html();$(".mainWrapBg").find(".itemsProj").empty().append(b);$(".bgCount").find("span").text(a);a==c&&$(".naviProj").find(".right").addClass("inactive")}
function ClikLeftProj(){var c=$(".bgCount").find("span").text();if(1>=c)return!1;c--;$(".naviProj").find(".left").removeClass("inactive");$(".naviProj").find(".right").removeClass("inactive");$(".mainWrapBg").find(".centerImg").find("img").hide().eq(c-1).show();var a=$(".textSlideProj").find("li").eq(c-1).html();$(".mainWrapBg").find(".itemsProj").empty().append(a);$(".bgCount").find("span").text(c);1==c&&$(".naviProj").find(".left").addClass("inactive")}
function PopUpInfoPath(){$(document).on("mousemove",".tooltip",function(c){var a=$(this).attr("rel");0<$(".PopUpInfoPath").length&&$(".PopUpInfoPath").is(":visible")||$("body").prepend('<div class="PopUpInfoPath">'+a+"</div> ");$(".PopUpInfoPath").css("left",c.pageX+8+"px").css("top",c.pageY+5+"px")});$(document).on("mouseout",".tooltip",function(){$(".PopUpInfoPath").remove()});$(document).on("mouseout",".close",function(){$(".PopUpInfoPath").remove()})}$(window).load(PopUpInfoPath);
function PopUpInfo(){var c=$(".tooltipClose"),a=!0;$(c).click(function(b){var c=$(this).attr("rel");0<$(".PopUpInfo").length&&$(".PopUpInfoPath").is(":visible")?($(".PopUpInfo").remove(),a=!0):($("body").prepend('<div class="PopUpInfo">'+c+'<div class="close"></div></div> '),c=b.pageX<$(".PopUpInfo").width()?5:b.pageX-300,$(".PopUpInfo").css("left",c+"px").css("top",b.pageY-10+"px"));$(".PopUpInfo").hover(function(){a=!1},function(){a=!0});$("body").mouseup(function(){if(a)$(".PopUpInfo").remove(),
a=!0;else return!1});$(".PopUpInfo").find(".close").click(function(){$(".PopUpInfo").remove();a=!0});$(window).on("keydown",function(b){27==b.which&&($(".PopUpInfo").remove(),a=!0)})})}$(window).load(PopUpInfo);
function openPopUpContact(){clickYes=!0;$(".contentWrapBg").show();$("body").css("overflow","hidden");var c=!0;$(".wrapDiv").hover(function(){c=!1},function(){c=!0});$(".contentWrapBg").mouseup(function(){c&&closeAllPopup()});var a=$(".contentWrapBg").scrollTop(),b=$(window).height(),d=$(".contentWrapBg .wrapDiv").innerHeight(),e=$(".contentWrapBg .wrapDiv").offset(),f=d+e.top-b;$(window).on("keydown",function(b){if(clickYes)if(27==b.which)closeAllPopup();else if(38==b.which)a-=15,-14<a?$(".contentWrapBg").scrollTop(a):
a=0;else if(40==b.which)a+=15,f+15>a?$(".contentWrapBg").scrollTop(a):a=f;else return!0})}function closePopUpContact(){$(".contentWrapBg").hide();$("body").css("overflow","auto");clickYes=!1}var scrollTrue=!0;
function resizeFAQ(){var c;1E3>=$(window).width()?c=10:1E3<$(window).width()&&(c=($(window).width()-977)/2.615);$(".wrapFAQ").css("margin-left",c+"px");$(".tableFAQ").each(function(a){$(".listFAQ").find("li").eq(a).attr("rel",$(this).offset().top)});scrollFAQ();$(".listFAQ").find("li").find("a").click(function(){scrollTrue=!1;$(".listFAQ").find("li").removeClass("active");$(this).parent().addClass("active");setTimeout(function(){scrollTrue=!0},650)})}
function scrollFAQ(){64<$(window).scrollTop()?$(".listFAQ").css("position","fixed").css("top","4px"):$(".listFAQ").css("position","absolute");$(".listFAQ").find("li").each(function(){scrollTrue&&$(window).scrollTop()+68>=$(this).attr("rel")&&($(".listFAQ").find("li").removeClass("active"),$(this).addClass("active"))})}$(window).load(resizeFAQ);$(window).resize(resizeFAQ);$(window).scroll(scrollFAQ);
function gradientResize(){if(!DetectMobileQuick()&&!DetectTierTablet()&&0<$(".wrapper .main-block").find("#content").length&&$(".wrapper .main-block").find("#content").is(":visible")){var c=$(".wrapper .main-block").find("#content"),a=c.offset(),b=$(window).width()-a.left,c=a.left+c.width();$(".gShR").show().css("left",c-180+"px").css("width",$(window).width()-(c-180)+"px");$(".gShL").show().css("right",b-40+"px").css("width",a.left+40+"px")}}
function openPopUpLogIn(c){clickYes=!0;0<$(".loginWrapBg").length&&$(".loginWrapBg").is(":visible")||($(".loginWrapBg").show(),$("body").css("overflow","hidden"));$(".loginWrapBg").find(".wrapContent > div:not(.boxClose)").hide();$(".loginWrapBg").find(".wrapContent > div."+c).show();var a=!0;$(".wrapDiv").hover(function(){a=!1},function(){a=!0});$(".loginWrapBg").mouseup(function(){a&&closePopUpLogIn()});$("div."+c).find("input").eq(0).focus();$(window).height();$(".contentWrapBg .wrapDiv").innerHeight();
$(".contentWrapBg .wrapDiv").offset();$(window).on("keydown",function(a){clickYes&&27==a.which&&closePopUpLogIn()});$(".registerOpen").click(function(){$(".enter").fadeOut();$(".fogoten").fadeOut();$(".reapetPass").fadeOut();$(".registrate").fadeIn()});$(".enterOpen").click(function(){$(".registrate").fadeOut();$(".fogoten").fadeOut();$(".reapetPass").fadeOut();$(".enter").fadeIn()});$(".fogotenOpen").click(function(){$(".registrate").fadeOut();$(".enter").fadeOut();$(".reapetPass").fadeOut();$(".fogoten").fadeIn()})}
function closePopUpLogIn(){$(".loginWrapBg").hide();$("body").css("overflow","auto");clickYes=!1}function hoverPayCard(){$(".paycard > div").hover(function(){$(this).find(".black").animate({opacity:0},400);$(this).find(".color").animate({opacity:1},400)},function(){$(this).find(".black").animate({opacity:1},300);$(this).find(".color").animate({opacity:0},300)})}$(window).load(hoverPayCard);
$(function(){$(".btnEnterLogin").on("click",function(){$("#login-errors").html("").hide();$.ajax({url:"/user/validate",dataType:"json",data:$("#login-form").serialize(),type:"POST"}).done(function(c){"ok"!=c.status?$("#login-errors").html("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d/\u043f\u0430\u0440\u043e\u043b\u044c").show():$("#login-form").submit()}).error(function(){$("#login-errors").html("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0435 \u043b\u043e\u0433\u0438\u043d\u0430/\u043f\u0430\u0440\u043e\u043b\u044f.").show()});
return!1})});
$(function(){$(".btnFogLogin").on("click",function(){$("#forget-errors").html("").hide();$.ajax({url:"/user/validateForgetPassword",dataType:"json",data:$("#forget-pwd-form").serialize(),type:"POST"}).done(function(c){"ok"!=c.status?$("#forget-errors").html(c.errors).show():$.ajax({url:"/user/newPassword",data:$("#forget-pwd-form").serialize(),type:"POST"}).done(function(){$("#forget-pwd-form").html("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f \u0432\u044b\u0441\u043b\u0430\u043d \u043d\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 e-mail")}).error(function(){$("#forget-errors").html("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u043f\u0430\u0440\u043e\u043b\u044f.").show()})}).error(function(){$("#forget-errors").html("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u043f\u0430\u0440\u043e\u043b\u044f.").show()});return!1})});
$(function(){$(".btnRegLogin").on("click",function(){$("#signup-errors").html("").hide();$.ajax({url:"/user/signup",dataType:"json",data:$("#signup-form").serialize(),type:"POST"}).done(function(c){"ok"!=c.status?$("#signup-errors").html(c.error).show():$("#signup-form").html("\u0412\u044b \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u043d\u0430 \u0441\u0430\u0439\u0442\u0435 \u0438 \u043c\u043e\u0436\u0435\u0442\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u0432\u0430\u0448 \u043b\u043e\u0433\u0438\u043d \u0438 \u043f\u0430\u0440\u043e\u043b\u044c")}).error(function(){$("#signup-errors").html("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438.").show()});
return!1})});
$(function(){$(".btnNewPwd").on("click",function(){$("#new-pwd-errors").html("").hide();$.ajax({url:"/user/newPassword/key/"+window.pwdKey,dataType:"json",data:$("#new-pwd-form").serialize(),type:"POST"}).done(function(c){"ok"!=c.status?$("#new-pwd-errors").html(c.errors).show():$("#new-pwd-form").html("\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d")}).error(function(){$("#new-pwd-form").html("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u043f\u0430\u0440\u043e\u043b\u044f").show()});return!1})});
function resizePanel(){$(".panelTable").each(function(){var c=$(this),a,b;if(c.hasClass("avia")){a=c.find(".tdTumblr").innerWidth();var d=c.find(".tdPeople").innerWidth(),e=c.find(".tdButton").innerWidth(),f=c.find(".tdCityStart").innerWidth(),h=0,j=2}else c.hasClass("constructorTable")?($(this).find(".tdPeople").hasClass("notFinal")?$(this).find(".tdPeople.notFinal").css("width",$(".tdPeople.final").width()+"px"):$(this).find(".tdPeople").hasClass("final"),a=0,d=c.find(".tdPeople").innerWidth(),
e=c.find(".tdButton").innerWidth(),f=c.find(".tdCityStart").innerWidth(),h=c.find(".tdAddTour").innerWidth(),j=1):c.hasClass("hotel")&&(a=0,d=c.find(".tdPeople").innerWidth(),e=c.find(".tdButton").innerWidth(),f=c.find(".tdCityStart").innerWidth(),h=117,j=1);b=$(window).width();var m=c.innerWidth();c.find(".tdCity").find(".data");c.find(".tdCity").find(".data").find("input");b=1130>=b&&1E3<=b?b-230:1E3>b?770:900;a=m>=b?(b-a-d-e-f-h)/j:m<b?(b-a-d-e-f-h)/j:(m-a-d-e-f-h)/j;c.find(".tdCity").find(".data").css("width",
a+"px");c.find(".tdCity").find(".data").find("input").css("width",a-20+"px");c.innerWidth()})}function startIE(){if($.browser.msie)$(document).on("click",".data",function(){$(this).find(".second-path").focus()})}
(function(c,a){function b(a,b,c){var d=p[b.type]||{};if(null==a)return c||!b.def?null:b.def;a=d.floor?~~a:parseFloat(a);return isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:d.max<a?d.max:a}function d(a){var b=j(),d=b._rgba=[];a=a.toLowerCase();u(h,function(c,e){var f,g=e.re.exec(a);f=g&&e.parse(g);g=e.space||"rgba";if(f)return f=b[g](f),b[m[g].cache]=f[m[g].cache],d=b._rgba=f._rgba,!1});return d.length?("0,0,0,0"===d.join()&&c.extend(d,q.transparent),b):q[a]}function e(a,b,c){c=(c+1)%1;return 1>6*c?
a+6*(b-a)*c:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a}var f=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),
parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],j=c.Color=function(a,b,d,e){return new c.Color.fn.parse(a,b,d,e)},m={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,
type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},p={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},g=j.support={},n=c("<p>")[0],q,u=c.each;n.style.cssText="background-color:rgba(1,1,1,.5)";g.rgba=-1<n.style.backgroundColor.indexOf("rgba");u(m,function(a,b){b.cache="_"+a;b.props.alpha={idx:3,type:"percent",def:1}});j.fn=c.extend(j.prototype,{parse:function(e,f,g,h){if(e===a)return this._rgba=[null,null,null,null],this;if(e.jquery||e.nodeType)e=
c(e).css(f),f=a;var n=this,p=c.type(e),I=this._rgba=[];f!==a&&(e=[e,f,g,h],p="array");if("string"===p)return this.parse(d(e)||q._default);if("array"===p)return u(m.rgba.props,function(a,c){I[c.idx]=b(e[c.idx],c)}),this;if("object"===p)return e instanceof j?u(m,function(a,b){e[b.cache]&&(n[b.cache]=e[b.cache].slice())}):u(m,function(a,d){var f=d.cache;u(d.props,function(a,c){if(!n[f]&&d.to){if("alpha"===a||null==e[a])return;n[f]=d.to(n._rgba)}n[f][c.idx]=b(e[a],c,!0)});n[f]&&0>c.inArray(null,n[f].slice(0,
3))&&(n[f][3]=1,d.from&&(n._rgba=d.from(n[f])))}),this},is:function(a){var b=j(a),c=!0,d=this;u(m,function(a,e){var f,g=b[e.cache];g&&(f=d[e.cache]||e.to&&e.to(d._rgba)||[],u(e.props,function(a,b){if(null!=g[b.idx])return c=g[b.idx]===f[b.idx]}));return c});return c},_space:function(){var a=[],b=this;u(m,function(c,d){b[d.cache]&&a.push(c)});return a.pop()},transition:function(a,c){var d=j(a),e=d._space(),f=m[e],g=0===this.alpha()?j("transparent"):this,h=g[f.cache]||f.to(g._rgba),n=h.slice(),d=d[f.cache];
u(f.props,function(a,e){var f=e.idx,g=h[f],j=d[f],q=p[e.type]||{};null!==j&&(null===g?n[f]=j:(q.mod&&(j-g>q.mod/2?g+=q.mod:g-j>q.mod/2&&(g-=q.mod)),n[f]=b((j-g)*c+g,e)))});return this[e](n)},blend:function(a){if(1===this._rgba[3])return this;var b=this._rgba.slice(),d=b.pop(),e=j(a)._rgba;return j(c.map(b,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var a="rgba(",b=c.map(this._rgba,function(a,b){return null==a?2<b?1:0:a});1===b[3]&&(b.pop(),a="rgb(");return a+b.join()+")"},toHslaString:function(){var a=
"hsla(",b=c.map(this.hsla(),function(a,b){null==a&&(a=2<b?1:0);b&&3>b&&(a=Math.round(100*a)+"%");return a});1===b[3]&&(b.pop(),a="hsl(");return a+b.join()+")"},toHexString:function(a){var b=this._rgba.slice(),d=b.pop();a&&b.push(~~(255*d));return"#"+c.map(b,function(a){a=(a||0).toString(16);return 1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}});j.fn.parse.prototype=j.fn;m.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,
null,null,a[3]];var b=a[0]/255,c=a[1]/255,d=a[2]/255;a=a[3];var e=Math.max(b,c,d),f=Math.min(b,c,d),g=e-f,h=e+f,j=0.5*h;return[Math.round(f===e?0:b===e?60*(c-d)/g+360:c===e?60*(d-b)/g+120:60*(b-c)/g+240)%360,0===j||1===j?j:0.5>=j?g/h:g/(2-h),j,null==a?1:a]};m.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2];a=a[3];c=0.5>=d?d*(1+c):d+c-d*c;d=2*d-c;return[Math.round(255*e(d,c,b+1/3)),Math.round(255*e(d,c,b)),Math.round(255*e(d,c,b-
1/3)),a]};u(m,function(d,e){var g=e.props,h=e.cache,n=e.to,q=e.from;j.fn[d]=function(d){n&&!this[h]&&(this[h]=n(this._rgba));if(d===a)return this[h].slice();var e,f=c.type(d),m="array"===f||"object"===f?d:arguments,p=this[h].slice();u(g,function(a,c){var d=m["object"===f?a:c.idx];null==d&&(d=p[c.idx]);p[c.idx]=b(d,c)});return q?(e=j(q(p)),e[h]=p,e):j(p)};u(g,function(a,b){j.fn[a]||(j.fn[a]=function(e){var g=c.type(e),h="alpha"===a?this._hsla?"hsla":"rgba":d,j=this[h](),n=j[b.idx];if("undefined"===
g)return n;"function"===g&&(e=e.call(this,n),g=c.type(e));if(null==e&&b.empty)return this;"string"===g&&(g=f.exec(e))&&(e=n+parseFloat(g[2])*("+"===g[1]?1:-1));j[b.idx]=e;return this[h](j)})})});j.hook=function(a){a=a.split(" ");u(a,function(a,b){c.cssHooks[b]={set:function(a,e){var f,h="";if("string"!==c.type(e)||(f=d(e))){e=j(f||e);if(!g.rgba&&1!==e._rgba[3]){for(f="backgroundColor"===b?a.parentNode:a;(""===h||"transparent"===h)&&f&&f.style;)try{h=c.css(f,"backgroundColor"),f=f.parentNode}catch(n){}e=
e.blend(h&&"transparent"!==h?h:"_default")}e=e.toRgbaString()}try{a.style[b]=e}catch(q){}}};c.fx.step[b]=function(a){a.colorInit||(a.start=j(a.elem,b),a.end=j(a.end),a.colorInit=!0);c.cssHooks[b].set(a.elem,a.start.transition(a.end,a.pos))}})};j.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor");c.cssHooks.borderColor={expand:function(a){var b={};u(["Top","Right","Bottom","Left"],function(c,
d){b["border"+d+"Color"]=a});return b}};q=c.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery);function SizeBox(c){$("#"+c);0<$("#"+c).length&&$("#"+c).is(":visible")&&$("body").css("overflow","hidden")}
function ResizeBox(c){var a=$("#"+c),b=a.find("#layer");c=$(window).width();var d=$(window).height(),e=a.find(".pv_cont"),f=e.height(),d=(d-f)/2;10>=d&&(d=10);a.css("width",c+"px");b.css("width",c-16+"px");e.css("padding-top",d+"px");$(window).resize(function(){var c=$(window).width(),d=$(window).height(),e=a.find(".pv_cont"),f=e.height(),d=(d-f)/2;10>=d&&(d=10);a.css("width",c+"px");b.css("width",c-16+"px");e.css("padding-top",d+"px")})}function btnClosePopUp(){$("body").css("overflow","auto")}$(document).ready(function(){});
function resizePhotoWinHandler(){console.log("kk");var c=$("#imgContent").height(),a=$("#imgContent img").innerWidth();$(window).width();c=($(window).height()-(c+84)-78)/2;0>c&&(c=0);Math.round(c);$(".countAndClose").css("width",a+"px")}function resizePhotoWin(){console.log("try start");var c=$("#body-popup-Photo img").attr("src");(new Image).src=c}
function resizeLoad(){var c=$("#hotel-img-load").width(),a=$("#hotel-img-load").height(),b=$(window).width(),d=$(window).height(),c=(b-c)/2,a=(d-a)/2;0>a&&(a=0);$("#hotel-img-load").css("left",c-20+"px").css("top",a-20+"px")}$(window).resize(function(){resizeLoad()});
var var_marginHowLong=20,var_marginHowLongSmall=5,var_paddingDateTime=15,MAX_BIG_CITY_NAME_SMALL_TICKET=16,MAX_BIG_CITY_NAME=16,MAX_BIG_AIRPORT_NAME_SMALL_TICKET=16,MAX_BIG_AIRPORT_NAME=16,MIN_BIG_CITY_NAME_SMALL_TICKET=12,MIN_BIG_CITY_NAME=12,MIN_BIG_AIRPORT_NAME_SMALL_TICKET=12,MIN_BIG_AIRPORT_NAME=12;function minimizeListTime(){}
function inTheTwoLines(){var c=$(".recommended-ticket .ticket-items .other-time");0<c.length&&c.is(":visible")&&c.each(function(){var a=$(this).find("ul.minimize li").length,b=$(this).find("ul.minimize").height();30<b&&40>b?$(this).find(".variation").css("margin-top","0px"):40<b?($(this).find(".variation").css("margin-top","0px"),b=($(this).height()-40)/2,$(this).find(".left").css("top",b+"px"),$(this).find(".right").css("top",b+"px")):$(this).find(".variation").css("margin-top","10px");for(i=0;i<
a;i++)b=$(this).find("ul.minimize li").eq(i),!0==b.hasClass("active")&&1==i?$(this).find(".left").addClass("none"):!0==b.hasClass("active")&&i==a-1&&$(this).find(".right").addClass("none")})}function ratingHoverActive(c){$(c).parent().addClass("hover")}function ratingHoverNoActive(c){$(c).parent().removeClass("hover")}
function hideRecomendedBlockTicket(){$(this).hasClass("show")?($(this).removeClass("show"),$(".recomended-content").slideDown(function(){jsPaneScrollHeight()}),$(window).load(inTheTwoLines),setTimeout(smallTicketHeight,100)):($(".recomended-content").slideUp(function(){jsPaneScrollHeight()}),$(this).addClass("show"))}
$(function(){bindActions=function(){$(".minimize-rcomended .btn-minimizeRecomended").click(function(){});$(".order-show").click(function(){$(".recomended-content").slideDown();$(".minimize-rcomended .btn-minimizeRecomended").animate({top:"-19px"},500);$(window).load(inTheTwoLines);otherTimeSlide();widthHowLong();setTimeout(smallTicketHeight,100)});$(".descr").eq(1).hide();$(".place-buy .tmblr li a").click(function(a){a.preventDefault();$(this).hasClass("active")||(a=$(this).attr("href"),a=a.slice(1),
$(".place-buy .tmblr li").removeClass("active"),$(this).parent().addClass("active"),$(".descr").hide(),$("#"+a).show())});$(".read-more").click(function(){$(this).hasClass("active")?($(this).prev().css("height","54px"),$("#descr").find(".left").find(".descr-text .text").dotdotdot({watch:"window"}),$(this).removeClass("active").text("\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")):($(this).prev().css("height","auto"),$("#descr").find(".left").find(".descr-text .text").dotdotdot({watch:"window"}),
$(this).addClass("active").text("\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c"))});$(".stars-li input").each(function(){"checked"==$(this).attr("checked")&&$(this).next().addClass("active")});$(".stars-li label").click(function(){$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")});var c=$(".calendarSlide").height();$(".calendarSlide").css("top","-"+c+"px");$(".input-path").click(function(){$(".calendarSlide").animate({top:"0px"},400)});$(".cityStart .to a").click(function(){var a=
$(this).parent().parent();a.parent().find(".from").addClass("overflow").animate({width:"125px"},300);a.find(".startInputTo").show();a.animate({width:"261px"},300,function(){a.find(".startInputTo").find("input").focus()})});$(".board-content .from input").click(function(){$(this).parent().hasClass("overflow")&&($(this).parent().animate({width:"271px"},300,function(){$(this).removeClass("overflow")}),$(".cityStart").animate({width:"115px"},300),$(".cityStart").find(".startInputTo").animate({opacity:"1"},
300,function(){$(this).hide()}))})}});function deletePopUp(c){c=$(c).offset();$("body").prepend('<div class="deletePopUp">\u0423\u0434\u0430\u043b\u0438\u0442\u044c?</div>');$(".deletePopUp").css("top",c.top-28+"px").css("left",c.left-6+"px")}function deletePopUpHide(){$(".deletePopUp").remove()}
function telefonLoad(){if(0<$("#contactPhone").length&&$("#contactPhone").is(":visible")&&($("#contactPhone").mask("+7 (999) 999-99-99"),0<$(".allTicketsDIV .ticketBox").length&&$(".allTicketsDIV .ticketBox").is(":visible"))){var c=$(".allTicketsDIV .ticketBox").length;if(1==c)$(".allTicketsDIV .ticketBox").addClass("first-child").addClass("last-child");else for(i=0;i<c;i++)if(0==i)$(".allTicketsDIV .ticketBox").eq(i).addClass("first-child");else if(i==c-1)$(".allTicketsDIV .ticketBox").eq(i).addClass("last-child");
else return!0;$(".infoPassengers:eq(0) tbody .tdName:eq(0) input").focus(function(){Utils.scrollTo("#tableStartRun")})}}$(window).load(telefonLoad);
function onFocusInput(){"checked"==$(".male input").attr("checked")&&$(".male input").closest("label").addClass("active");"checked"==$(".female input").attr("checked")&&$(".female input").closest("label").addClass("active");$(".male input").focus(function(){$(this).parent().addClass("focus");var c=this;$(window).unbind("keypress");$(window).bind("keypress",function(a){9==a.which&&"checked"==$(c).attr("checked")?$(c).parent().parent().next().find("input.dd").focus():9==a.which&&"checked"!=$(c).attr("checked")?
$(".female input").focus():32==a.which&&($(".male").removeClass("active error"),$(".female").removeClass("active error"),$(c).parent().addClass("active"),$(c).parent().parent().next().find("input.dd").focus(),$(c).attr("checked","checked"))})});$(".male input").blur(function(){$(this).parent().removeClass("focus");$(this).removeAttr("disabled");$(".female input").removeAttr("disabled")});$(".male input").change(function(){"checked"==$(this).attr("checked")?($(this).parent().addClass("active"),$(".female").removeClass("active error")):
$(this).parent().removeClass("active")});$(".female input").focus(function(){$(this).parent().addClass("focus");var c=this;$(window).unbind("keypress");$(window).bind("keypress",function(a){9==a.which&&"checked"==$(c).attr("checked")?$(c).parent().parent().next().find("input.dd").focus():9==a.which&&"checked"!=$(c).attr("checked")?$(c).parent().parent().next().find("input.dd").focus():32==a.which&&($(".male").removeClass("active error"),$(".female").removeClass("active error"),$(c).parent().addClass("active"),
$(c).parent().parent().next().find("input.dd").focus(),$(c).attr("checked","checked"))})});$(".female input").blur(function(){$(this).parent().removeClass("focus");$(this).removeAttr("disabled");$(".male input").removeAttr("disabled")});$(".female input").change(function(){"checked"==$(this).attr("checked")?($(this).parent().addClass("active"),$(".male").removeClass("active error")):$(this).parent().removeClass("active")})}$(window).load(onFocusInput);
function showUserMenu(){$(".popupDown").slideDown(200,function(){$(".login-window").attr("onclick"," ")});var c=!0;$(".popupDown").hover(function(){c=!1},function(){c=!0});$("body").mouseup(function(){if(c)console.log(c),$(".popupDown").slideUp(100,function(){$(".login-window").attr("onclick","showUserMenu()")});else return!1})}
function hideFromCityInput(c){if(0<!$(c.target).parents(".cityStart").length){var a,b;if($(".startInputTo").is(":visible")&&(c=$(".cityStart").find(".second-path"),c=c.closest(".cityStart"),c.closest(".tdCityStart").animate({width:"-=130",300:300}),c.closest(".tdCityStart").find(".bgInput").animate({width:"-=150",300:300}),c.closest(".tdCityStart").next().find(".data").animate({width:"+=130",300:300}),$(".startInputTo .second-path"),a=$("div.startInputTo"),b=$("div.overflow"),a.is(":visible")))return b.animate({width:"271px"},
300,function(){return b.removeClass("overflow")}),$(".cityStart").animate({width:"115px"},300),a.animate({opacity:"1"},300,function(){return a.hide()})}else return!0}$(function(){$("html").on("click",function(c){hideFromCityInput(c)})});function nextSlideDownRules(c){$(c).hasClass("active")?$(c).next().slideUp():($(c).next().slideDown(),$(c).addClass("active"))}
function getLink(){$("body").click(function(c){0<$(c.target).parents("#followLink").length?($("#followLink").find(".text").hide(),$("#followLink").find(".getLink").show()):($("#followLink").find(".text").show(),$("#followLink").find(".getLink").hide())})}$(window).load(getLink);
(function(c){c.selectSlider={init:function(a,b){var d=c(a),e=d.attr("class");d.data("options",b);d.hide();var f=c('<div class="'+e+' jsslidecheckbox"><div class="slidecheckbox"><ul class="selectList" /><div class="switch"><i class="left"></i><i class="right"></i></div><i class="left"></i><i class="right"></i></div></div>');f.data("select",d);d.data("selectDiv",f);e=100/d.find("option").length;f.data("elementWidth",e);f.find(".switch").css("width",e+"%");d.find("option").each(function(a){var b=c('<li><a href="#" onclick="return false">'+
c(this).text()+"</a></li>");b.data("original_option",c(this));b.data("ind",a);b.data("option-value",c(this).val());b.css("width",f.data("elementWidth")+"%");b.click(function(){d.val()!=b.data("option-value")&&(d.val(b.data("option-value")),f.find(".switch").animate({left:f.data("elementWidth")*b.data("ind")+"%"}),f.data("active").find("a").css("text-shadow","none"),f.data("active").find("a").animate({color:"#2e333b"},function(){c(this).css("text-shadow","0px 1px 0px #FFF")}),f.data("active").removeClass("active"),
b.find("a").css("text-shadow","none"),b.find("a").animate({color:"white"},function(){c(this).css("text-shadow","0px 1px 0px #0b5b88");c(this).parent().addClass("active");d.change()}),f.data("active",b))});f.find(".selectList").append(b);0<b.data("original_option").filter(":selected").length&&(b.addClass("active"),f.data("active",b),f.find(".switch").css("left",f.data("elementWidth")*b.data("ind")+"%"))});d.after(f)},reSize:function(){c(this).show();c(this);c(this)}};c.fn.selectSlider=function(a,b){"string"!=
typeof a&&(b=a,b=c.extend({},{kg:"am"},b),c(this).each(function(){c.selectSlider.init(this,b)}))}})(jQuery);
(function(c){c.fn.syncTranslit=function(a){var b=c.extend({},c.fn.syncTranslit.defaults,a);return this.each(function(){$this=c(this);var a=c.meta?c.extend({},b,$this.data()):b,e=c("#"+b.destination);a.destinationObject=e;Array.indexOf||(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]==a)return b;return-1});$this.keyup(function(){for(var b=c(this).val(),h="",j=0;j<b.length;j++)h+=c.fn.syncTranslit.transliterate(b.charAt(j),a);h=h.replace(RegExp("["+a.urlSeparator+"]{2,}",
"g"),a.urlSeparator);e.val(h)})})};c.fn.syncTranslit.transliterate=function(a,b){var c=!0,e;a.toLowerCase()!=a&&(c=!1);a=a.toLowerCase();e=b.dictOriginal.indexOf(a);e=-1==e?a:b.dictTranslate[e];if("url"==b.type){var f=e.charCodeAt(0);if(33<=f&&47>=f&&45!=f||58<=f&&64>=f||91<=f&&96>=f||123<=f&&126>=f||1072<=f)return"";if(" "==e||"-"==e)return b.urlSeparator}return"upper"==b.caseStyle?e.toUpperCase():"normal"==b.caseStyle?c?e.toLowerCase():e.toUpperCase():e};c.fn.syncTranslit.defaults={dictOriginal:"\u0430\u0431\u0432\u0433\u0434\u0435\u0451\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e\u044f\u0456\u0454\u0457\u0491".split(""),
dictTranslate:"a b v g d e e zh z i j k l m n o p r s t u f h ts ch sh sch  y  e ju ja i je ji g".split(" "),caseStyle:"lower",urlSeparator:" ",type:"raw"}})(jQuery);
var Hashtable=function(){function c(a){var b;if("string"==typeof a)return a;if(typeof a.hashCode==p)return b=a.hashCode(),"string"==typeof b?b:c(b);if(typeof a.toString==p)return a.toString();try{return String(a)}catch(d){return Object.prototype.toString.call(a)}}function a(a,b){return a.equals(b)}function b(a,b){return typeof b.equals==p?b.equals(a):a===b}function d(a){return function(b){if(null===b)throw Error("null is not a valid "+a);if("undefined"==typeof b)throw Error(a+" must not be undefined");
}}function e(a,b,c,d){this[0]=a;this.entries=[];this.addEntry(b,c);null!==d&&(this.getEqualityFunction=function(){return d})}function f(a){return function(b){for(var c=this.entries.length,d,e=this.getEqualityFunction(b);c--;)if(d=this.entries[c],e(b,d[0]))switch(a){case u:return!0;case s:return d;case A:return[c,d[1]]}return!1}}function h(a){return function(b){for(var c=b.length,d=0,e=this.entries.length;d<e;++d)b[c+d]=this.entries[d][a]}}function j(a,b){var c=a[b];return c&&c instanceof e?c:null}
function m(a,b){var d=this,f=[],h={},s=typeof a==p?a:c,u=typeof b==p?b:null;this.put=function(a,b){n(a);q(b);var c=s(a),d,g;return d=j(h,c),d?(g=d.getEntryForKey(a),g?g[1]=b:d.addEntry(a,b)):(d=new e(c,a,b,u),f[f.length]=d,h[c]=d),null};this.get=function(a){n(a);var b=s(a);if(b=j(h,b))if(a=b.getEntryForKey(a))return a[1];return null};this.containsKey=function(a){n(a);var b=s(a);return(b=j(h,b))?b.containsKey(a):!1};this.containsValue=function(a){q(a);for(var b=f.length;b--;)if(f[b].containsValue(a))return!0;
return!1};this.clear=function(){f.length=0;h={}};this.isEmpty=function(){return!f.length};var A=function(a){return function(){for(var b=[],c=f.length;c--;)f[c][a](b);return b}};this.keys=A("keys");this.values=A("values");this.entries=A("getEntries");this.remove=function(a){n(a);var b=s(a),c=null,d=j(h,b);if(d&&(c=d.removeEntryForKey(a),null!==c&&!d.entries.length)){a:{for(a=f.length;a--;)if(d=f[a],b===d[0])break a;a=null}g(f,a);delete h[b]}return c};this.size=function(){for(var a=0,b=f.length;b--;)a+=
f[b].entries.length;return a};this.each=function(a){for(var b=d.entries(),c=b.length,e;c--;)e=b[c],a(e[0],e[1])};this.putAll=function(a,b){for(var c=a.entries(),e,f,g,h=c.length,j=typeof b==p;h--;)e=c[h],f=e[0],e=e[1],j&&(g=d.get(f))&&(e=b(f,g,e)),d.put(f,e)};this.clone=function(){var c=new m(a,b);return c.putAll(d),c}}var p="function",g=typeof Array.prototype.splice==p?function(a,b){a.splice(b,1)}:function(a,b){var c,d,e;if(b===a.length-1)a.length=b;else{c=a.slice(b+1);a.length=b;d=0;for(e=c.length;d<
e;++d)a[b+d]=c[d]}},n=d("key"),q=d("value"),u=0,s=1,A=2;return e.prototype={getEqualityFunction:function(c){return typeof c.equals==p?a:b},getEntryForKey:f(s),getEntryAndIndexForKey:f(A),removeEntryForKey:function(a){return(a=this.getEntryAndIndexForKey(a))?(g(this.entries,a[0]),a[1]):null},addEntry:function(a,b){this.entries[this.entries.length]=[a,b]},keys:h(0),values:h(1),getEntries:function(a){for(var b=a.length,c=0,d=this.entries.length;c<d;++c)a[b+c]=this.entries[c].slice(0)},containsKey:f(u),
containsValue:function(a){for(var b=this.entries.length;b--;)if(a===this.entries[b][1])return!0;return!1}},m}();
(function(c){function a(a,b,c){this.dec=a;this.group=b;this.neg=c}function b(b,c){if(0==d.size())for(var m=0;m<f.length;m++){localeGroup=f[m];for(var p=0;p<localeGroup.length;p++)d.put(localeGroup[p],m)}m=".";p=",";0==c&&(-1!=b.indexOf("_")?b=b.split("_")[1].toLowerCase():-1!=b.indexOf("-")&&(b=b.split("-")[1].toLowerCase()));var g=d.get(b);g&&(g=e[g])&&(m=g[0],p=g[1]);return new a(m,p,"-")}var d=new Hashtable,e=[[".",","],[",","."],[","," "],[".","'"]],f=["ae au ca cn eg gb hk il in jp sk th tw us".split(" "),
"at br de dk es gr it nl pt tr vn".split(" "),"cz fi fr ru se pl".split(" "),["ch"]];c.fn.formatNumber=function(a,b,d){return this.each(function(){null==b&&(b=!0);null==d&&(d=!0);var e;c(this).is(":input")?e=new String(c(this).val()):e=new String(c(this).text());e=c.formatNumber(e,a);b&&(c(this).is(":input")?c(this).val(e):c(this).text(e));if(d)return e})};c.formatNumber=function(a,d){d=c.extend({},c.fn.formatNumber.defaults,d);b(d.locale.toLowerCase(),d.isFullLocale);for(var e="",f=!1,g=0;g<d.format.length;g++){if(-1!=
"0#-,.".indexOf(d.format.charAt(g))){if(0==g&&"-"==d.format.charAt(g)){f=!0;continue}break}e+=d.format.charAt(g)}for(var n="",g=d.format.length-1;0<=g&&-1=="0#-,.".indexOf(d.format.charAt(g));g--)n=d.format.charAt(g)+n;d.format=d.format.substring(e.length);d.format=d.format.substring(0,d.format.length-n.length);g=new Number(a);return c._formatNumber(g,d,n,e,f)};c._formatNumber=function(a,d,e,f,g){d=c.extend({},c.fn.formatNumber.defaults,d);var n=b(d.locale.toLowerCase(),d.isFullLocale),q=n.dec,u=
n.group,n=n.neg,s=!1;if(isNaN(a)){if(1!=d.nanForceZero)return null;a=0;s=!0}"%"==e&&(a*=100);var A="";if(-1<d.format.indexOf(".")){var y=q,x=d.format.substring(d.format.lastIndexOf(".")+1);1==d.round?a=new Number(a.toFixed(x.length)):(a=a.toString(),a=a.substring(0,a.lastIndexOf(".")+x.length+1),a=new Number(a));for(var v=new String((a%1).toFixed(x.length)),v=v.substring(v.lastIndexOf(".")+1),C=0;C<x.length;C++)if("#"==x.charAt(C)&&"0"!=v.charAt(C))y+=v.charAt(C);else{if("#"==x.charAt(C)&&"0"==v.charAt(C)){if(v.substring(C).match("[1-9]")){y+=
v.charAt(C);continue}break}"0"==x.charAt(C)&&(y+=v.charAt(C))}A+=y}else a=Math.round(a);C=Math.floor(a);0>a&&(C=Math.ceil(a));y="";-1==d.format.indexOf(".")?y=d.format:y=d.format.substring(0,d.format.indexOf("."));x="";if(0!=C||"#"!=y.substr(y.length-1)||s){s=new String(Math.abs(C));v=9999;-1!=y.lastIndexOf(",")&&(v=y.length-y.lastIndexOf(",")-1);for(var I=0,C=s.length-1;-1<C;C--)x=s.charAt(C)+x,I++,I==v&&0!=C&&(x=u+x,I=0);if(y.length>x.length&&(C=y.indexOf("0"),-1!=C)){C=y.length-C;for(s=y.length-
x.length-1;x.length<C;)v=y.charAt(s),","==v&&(v=u),x=v+x,s--}}return!x&&-1!==y.indexOf("0",y.length-1)&&(x="0"),A=x+A,0>a&&g&&0<f.length?f=n+f:0>a&&(A=n+A),d.decimalSeparatorAlwaysShown||A.lastIndexOf(q)==A.length-1&&(A=A.substring(0,A.length-1)),A=f+A+e,A};c.fn.parseNumber=function(a,b,d){null==b&&(b=!0);null==d&&(d=!0);var e;c(this).is(":input")?e=new String(c(this).val()):e=new String(c(this).text());if(a=c.parseNumber(e,a))if(b&&(c(this).is(":input")?c(this).val(a.toString()):c(this).text(a.toString())),
d)return a};c.parseNumber=function(a,d){d=c.extend({},c.fn.parseNumber.defaults,d);for(var e=b(d.locale.toLowerCase(),d.isFullLocale),f=e.dec,g=e.group,e=e.neg;-1<a.indexOf(g);)a=a.replace(g,"");a=a.replace(f,".").replace(e,"-");f="";g=!1;if("%"==a.charAt(a.length-1)||1==d.isPercentage)g=!0;for(e=0;e<a.length;e++)-1<"1234567890.-".indexOf(a.charAt(e))&&(f+=a.charAt(e));e=new Number(f);g&&(e/=100,g=f.indexOf("."),e=-1!=g?e.toFixed(f.length-g-1+2):e.toFixed(f.length-1));return e};c.fn.parseNumber.defaults=
{locale:"us",decimalSeparatorAlwaysShown:!1,isPercentage:!1,isFullLocale:!1};c.fn.formatNumber.defaults={format:"#,###.00",locale:"us",decimalSeparatorAlwaysShown:!1,nanForceZero:!0,round:!0,isFullLocale:!1};Number.prototype.toFixed=function(a){return c._roundNumber(this,a)};c._roundNumber=function(a,b){var c=Math.pow(10,b||0),c=String(Math.round(a*c)/c);if(0<b){var d=c.indexOf(".");for(-1==d?(c+=".",d=0):d=c.length-(d+1);d<b;)c+="0",d++}return c}})(jQuery);
(function(){var c={};this.tmpl=function b(d,e){var f=/\W/.test(d)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+d.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):c[d]=c[d]||b(document.getElementById(d).innerHTML);return e?f(e):f}})();
(function(c){c.baseClass=function(a){return a=c(a),a.get(0).className.match(/([^ ]+)/)[1]};c.fn.addDependClass=function(a,b){var d=b?b:"-";return this.each(function(){var b=c.baseClass(this);b&&c(this).addClass(b+d+a)})};c.fn.removeDependClass=function(a,b){var d=b?b:"-";return this.each(function(){var b=c.baseClass(this);b&&c(this).removeClass(b+d+a)})};c.fn.toggleDependClass=function(a,b){var d=b?b:"-";return this.each(function(){var b=c.baseClass(this);b&&(c(this).is("."+b+d+a)?c(this).removeClass(b+
d+a):c(this).addClass(b+d+a))})}})(jQuery);
(function(c){function a(){this._init.apply(this,arguments)}a.prototype.oninit=function(){};a.prototype.events=function(){};a.prototype.onmousedown=function(){this.ptr.css({position:"absolute"})};a.prototype.onmousemove=function(a,c,e){this.ptr.css({left:c,top:e})};a.prototype.onmouseup=function(){};a.prototype.isDefault={drag:!1,clicked:!1,toclick:!0,mouseup:!1};a.prototype._init=function(){if(0<arguments.length){this.ptr=c(arguments[0]);this.outer=c(".draggable-outer");this.is={};c.extend(this.is,
this.isDefault);var a=this.ptr.offset();this.d={left:a.left,top:a.top,width:this.ptr.width(),height:this.ptr.height()};this.oninit.apply(this,arguments);this._events()}};a.prototype._getPageCoords=function(a){return a.targetTouches&&a.targetTouches[0]?{x:a.targetTouches[0].pageX,y:a.targetTouches[0].pageY}:{x:a.pageX,y:a.pageY}};a.prototype._bindEvent=function(a,c,e){this.supportTouches_?a.get(0).addEventListener(this.events_[c],e,!1):a.bind(this.events_[c],e)};a.prototype._events=function(){var a=
this;this.supportTouches_=c.browser.webkit&&-1!=navigator.userAgent.indexOf("Mobile");this.events_={click:this.supportTouches_?"touchstart":"click",down:this.supportTouches_?"touchstart":"mousedown",move:this.supportTouches_?"touchmove":"mousemove",up:this.supportTouches_?"touchend":"mouseup"};this._bindEvent(c(document),"move",function(c){a.is.drag&&(c.stopPropagation(),c.preventDefault(),a._mousemove(c))});this._bindEvent(c(document),"down",function(c){a.is.drag&&(c.stopPropagation(),c.preventDefault())});
this._bindEvent(c(document),"up",function(c){a._mouseup(c)});this._bindEvent(this.ptr,"down",function(c){return a._mousedown(c),!1});this._bindEvent(this.ptr,"up",function(c){a._mouseup(c)});this.ptr.find("a").click(function(){a.is.clicked=!0;if(!a.is.toclick)return a.is.toclick=!0,!1}).mousedown(function(c){return a._mousedown(c),!1});this.events()};a.prototype._mousedown=function(a){this.is.drag=!0;this.is.clicked=!1;this.is.mouseup=!1;var d=this.ptr.offset(),e=this._getPageCoords(a);this.cx=e.x-
d.left;this.cy=e.y-d.top;c.extend(this.d,{left:d.left,top:d.top,width:this.ptr.width(),height:this.ptr.height()});this.outer&&this.outer.get(0)&&this.outer.css({height:Math.max(this.outer.height(),c(document.body).height()),overflow:"hidden"});this.onmousedown(a)};a.prototype._mousemove=function(a){this.is.toclick=!1;var c=this._getPageCoords(a);this.onmousemove(a,c.x-this.cx,c.y-this.cy)};a.prototype._mouseup=function(a){this.is.drag&&(this.is.drag=!1,this.outer&&this.outer.get(0)&&(c.browser.mozilla?
this.outer.css({overflow:"hidden"}):this.outer.css({overflow:"visible"}),c.browser.msie&&"6.0"==c.browser.version?this.outer.css({height:"100%"}):this.outer.css({height:"auto"})),this.onmouseup(a))};window.Draggable=a})(jQuery);
(function(c){function a(a){return"undefined"==typeof a?!1:a instanceof Array||!(a instanceof Object)&&"[object Array]"==Object.prototype.toString.call(a)||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice")?!0:!1}function b(){return this.init.apply(this,arguments)}function d(){Draggable.apply(this,arguments)}c.jslider=function(a,d){var e=c(a);return e.data("jslider")||e.data("jslider",new b(a,d)),e.data("jslider")};
c.fn.jslider=function(b,d){var e,m=arguments;return this.each(function(){var p=c.jslider(this,b);if("string"==typeof b)switch(b){case "value":void 0!==m[1]&&void 0!==m[2]?(p=p.getPointers(),null!=p[0]&&null!=m[1]&&(p[0].set(m[1]),p[0].setIndexOver()),null!=p[1]&&null!=m[2]&&(p[1].set(m[2]),p[1].setIndexOver())):void 0!==m[1]?(p=p.getPointers(),null!=p[0]&&null!=m[1]&&(p[0].set(m[1]),p[0].setIndexOver())):e=p.getValue();break;case "prc":void 0!==m[1]&&void 0!==m[2]?(p=p.getPointers(),null!=p[0]&&null!=
m[1]&&(p[0]._set(m[1]),p[0].setIndexOver()),null!=p[1]&&null!=m[2]&&(p[1]._set(m[2]),p[1].setIndexOver())):void 0!==m[1]?(p=p.getPointers(),null!=p[0]&&null!=m[1]&&(p[0]._set(m[1]),p[0].setIndexOver())):e=p.getPrcValue();break;case "calculatedValue":var g=p.getValue().split(";");e="";for(var n=0;n<g.length;n++)e+=(0<n?";":"")+p.nice(g[n]);break;case "skin":p.setSkin(m[1])}else!b&&!d&&(a(e)||(e=[]),e.push(p))}),a(e)&&1==e.length&&(e=e[0]),e||this};var e={settings:{from:1,to:10,step:1,smooth:!0,limits:!0,
round:0,format:{format:"#,##0.##"},value:"5;7",dimension:""},className:"jslider",selector:".jslider-",template:tmpl('<span class="<%=className%>"><table><tr><td><div class="<%=className%>-bg"><i class="l"></i><i class="r"></i><i class="v"></i></div><div class="<%=className%>-pointer"></div><div class="<%=className%>-pointer <%=className%>-pointer-to"></div><div class="<%=className%>-label"><span><%=settings.from%></span></div><div class="<%=className%>-label <%=className%>-label-to"><span><%=settings.to%></span><%=settings.dimension%></div><div class="<%=className%>-value"><span></span><%=settings.dimension%></div><div class="<%=className%>-value <%=className%>-value-to"><span></span><%=settings.dimension%></div><div class="<%=className%>-scale"><%=scale%></div></td></tr></table></span>')};
b.prototype.init=function(a,b){this.settings=c.extend(!0,{},e.settings,b?b:{});this.inputNode=c(a).hide();this.settings.interval=this.settings.to-this.settings.from;this.settings.value=this.inputNode.attr("value");this.settings.calculate&&c.isFunction(this.settings.calculate)&&(this.nice=this.settings.calculate);this.settings.onstatechange&&c.isFunction(this.settings.onstatechange)&&(this.onstatechange=this.settings.onstatechange);this.is={init:!1};this.o={};this.create()};b.prototype.onstatechange=
function(){};b.prototype.create=function(){var a=this;this.domNode=c(e.template({className:e.className,settings:{from:this.nice(this.settings.from),to:this.nice(this.settings.to),dimension:this.settings.dimension},scale:this.generateScale()}));this.inputNode.after(this.domNode);this.drawScale();this.settings.skin&&0<this.settings.skin.length&&this.setSkin(this.settings.skin);this.sizes={domWidth:this.domNode.width(),domOffset:this.domNode.offset()};c.extend(this.o,{pointers:{},labels:{"0":{o:this.domNode.find(e.selector+
"value").not(e.selector+"value-to")},1:{o:this.domNode.find(e.selector+"value").filter(e.selector+"value-to")}},limits:{"0":this.domNode.find(e.selector+"label").not(e.selector+"label-to"),1:this.domNode.find(e.selector+"label").filter(e.selector+"label-to")}});c.extend(this.o.labels[0],{value:this.o.labels[0].o.find("span")});c.extend(this.o.labels[1],{value:this.o.labels[1].o.find("span")});a.settings.value.split(";")[1]||(this.settings.single=!0,this.domNode.addDependClass("single"));a.settings.limits||
this.domNode.addDependClass("limitless");this.domNode.find(e.selector+"pointer").each(function(b){var c=a.settings.value.split(";")[b];if(c){a.o.pointers[b]=new d(this,b,a);var e=a.settings.value.split(";")[b-1];e&&new Number(c)<new Number(e)&&(c=e);c=c<a.settings.from?a.settings.from:c;c=c>a.settings.to?a.settings.to:c;a.o.pointers[b].set(c,!0)}});this.o.value=this.domNode.find(".v");this.is.init=!0;c.each(this.o.pointers,function(){a.redraw(this)});var b=this;c(window).resize(function(){b.onresize()})};
b.prototype.setSkin=function(a){this.skin_&&this.domNode.removeDependClass(this.skin_,"_");this.domNode.addDependClass(this.skin_=a,"_")};b.prototype.setPointersIndex=function(){c.each(this.getPointers(),function(a){this.index(a)})};b.prototype.getPointers=function(){return this.o.pointers};b.prototype.generateScale=function(){if(this.settings.scale&&0<this.settings.scale.length){for(var a="",b=this.settings.scale,c=Math.round(10*(100/(b.length-1)))/10,d=0;d<b.length;d++)a+='<span style="left: '+
d*c+'%">'+("|"!=b[d]?"<ins>"+b[d]+"</ins>":"")+"</span>";return a}return""};b.prototype.drawScale=function(){this.domNode.find(e.selector+"scale span ins").each(function(){c(this).css({marginLeft:-c(this).outerWidth()/2})})};b.prototype.onresize=function(){var a=this;this.sizes={domWidth:this.domNode.width(),domOffset:this.domNode.offset()};c.each(this.o.pointers,function(){a.redraw(this)})};b.prototype.update=function(){this.onresize();this.drawScale()};b.prototype.limits=function(a,b){if(!this.settings.smooth){var c=
100*this.settings.step/this.settings.interval;a=Math.round(a/c)*c}c=this.o.pointers[1-b.uid];return c&&b.uid&&a<c.value.prc&&(a=c.value.prc),c&&!b.uid&&a>c.value.prc&&(a=c.value.prc),0>a&&(a=0),100<a&&(a=100),Math.round(10*a)/10};b.prototype.redraw=function(a){if(!this.is.init)return!1;this.setValue();this.o.pointers[0]&&this.o.pointers[1]&&this.o.value.css({left:this.o.pointers[0].value.prc+"%",width:this.o.pointers[1].value.prc-this.o.pointers[0].value.prc+"%"});this.o.labels[a.uid].value.html(this.nice(a.value.origin));
this.redrawLabels(a)};b.prototype.redrawLabels=function(a){function b(a,d,e){return d.margin=-d.label/2,label_left=d.border+d.margin,0>label_left&&(d.margin-=label_left),d.border+d.label/2>c.sizes.domWidth?(d.margin=0,d.right=!0):d.right=!1,a.o.css({left:e+"%",marginLeft:d.margin,right:"auto"}),d.right&&a.o.css({left:"auto",right:0}),d}var c=this,d=this.o.labels[a.uid],e=a.value.prc,g={label:d.o.outerWidth(),right:!1,border:e*this.sizes.domWidth/100};if(!this.settings.single){var n=this.o.pointers[1-
a.uid],q=this.o.labels[n.uid];switch(a.uid){case 0:g.border+g.label/2>q.o.offset().left-this.sizes.domOffset.left?(q.o.css({visibility:"hidden"}),q.value.html(this.nice(n.value.origin)),d.o.css({visibility:"visible"}),e=(n.value.prc-e)/2+e,n.value.prc!=a.value.prc&&(d.value.html(this.nice(a.value.origin)+"&nbsp;&ndash;&nbsp;"+this.nice(n.value.origin)),g.label=d.o.outerWidth(),g.border=e*this.sizes.domWidth/100)):q.o.css({visibility:"visible"});break;case 1:g.border-g.label/2<q.o.offset().left-this.sizes.domOffset.left+
q.o.outerWidth()?(q.o.css({visibility:"hidden"}),q.value.html(this.nice(n.value.origin)),d.o.css({visibility:"visible"}),e=(e-n.value.prc)/2+n.value.prc,n.value.prc!=a.value.prc&&(d.value.html(this.nice(n.value.origin)+"&nbsp;&ndash;&nbsp;"+this.nice(a.value.origin)),g.label=d.o.outerWidth(),g.border=e*this.sizes.domWidth/100)):q.o.css({visibility:"visible"})}}g=b(d,g,e);q&&(g={label:q.o.outerWidth(),right:!1,border:n.value.prc*this.sizes.domWidth/100},g=b(q,g,n.value.prc));this.redrawLimits()};b.prototype.redrawLimits=
function(){if(this.settings.limits){var a=[!0,!0];for(key in this.o.pointers)if(!this.settings.single||0==key){var b=this.o.labels[this.o.pointers[key].uid],c=b.o.offset().left-this.sizes.domOffset.left,d=this.o.limits[0];c<d.outerWidth()&&(a[0]=!1);d=this.o.limits[1];c+b.o.outerWidth()>this.sizes.domWidth-d.outerWidth()&&(a[1]=!1)}for(b=0;b<a.length;b++)a[b]?this.o.limits[b].fadeIn("fast"):this.o.limits[b].fadeOut("fast")}};b.prototype.setValue=function(){var a=this.getValue();this.inputNode.attr("value",
a);this.onstatechange.call(this,a)};b.prototype.getValue=function(){if(!this.is.init)return!1;var a=this,b="";return c.each(this.o.pointers,function(c){void 0!=this.value.prc&&!isNaN(this.value.prc)&&(b+=(0<c?";":"")+a.prcToValue(this.value.prc))}),b};b.prototype.getPrcValue=function(){if(!this.is.init)return!1;var a="";return c.each(this.o.pointers,function(b){void 0!=this.value.prc&&!isNaN(this.value.prc)&&(a+=(0<b?";":"")+this.value.prc)}),a};b.prototype.prcToValue=function(a){if(this.settings.heterogeneity&&
0<this.settings.heterogeneity.length)for(var b=this.settings.heterogeneity,c=0,d=this.settings.from,e=0;e<=b.length;e++){var g=b[e]?b[e].split("/"):[100,this.settings.to];g[0]=new Number(g[0]);g[1]=new Number(g[1]);if(a>=c&&a<=g[0])var n=d+(a-c)*(g[1]-d)/(g[0]-c);c=g[0];d=g[1]}else n=this.settings.from+a*this.settings.interval/100;return this.round(n)};b.prototype.valueToPrc=function(a,b){if(this.settings.heterogeneity&&0<this.settings.heterogeneity.length)for(var c=this.settings.heterogeneity,d=
0,e=this.settings.from,g=0;g<=c.length;g++){var n=c[g]?c[g].split("/"):[100,this.settings.to];n[0]=new Number(n[0]);n[1]=new Number(n[1]);if(a>=e&&a<=n[1])var q=b.limits(d+(a-e)*(n[0]-d)/(n[1]-e));d=n[0];e=n[1]}else q=b.limits(100*(a-this.settings.from)/this.settings.interval);return q};b.prototype.round=function(a){return a=Math.round(a/this.settings.step)*this.settings.step,this.settings.round?a=Math.round(a*Math.pow(10,this.settings.round))/Math.pow(10,this.settings.round):a=Math.round(a),a};b.prototype.nice=
function(a){return a=a.toString().replace(/,/gi,".").replace(/ /gi,""),c.formatNumber?c.formatNumber(new Number(a),this.settings.format||{}).replace(/-/gi,"&minus;"):new Number(a)};d.prototype=new Draggable;d.prototype.oninit=function(a,b,c){this.uid=b;this.parent=c;this.value={};this.settings=this.parent.settings};d.prototype.onmousedown=function(){this._parent={offset:this.parent.domNode.offset(),width:this.parent.domNode.width()};this.ptr.addDependClass("hover");this.setIndexOver()};d.prototype.onmousemove=
function(a){a=this._getPageCoords(a);this._set(this.calc(a.x))};d.prototype.onmouseup=function(){this.parent.settings.callback&&c.isFunction(this.parent.settings.callback)&&this.parent.settings.callback.call(this.parent,this.parent.getValue());this.ptr.removeDependClass("hover")};d.prototype.setIndexOver=function(){this.parent.setPointersIndex(1);this.index(2)};d.prototype.index=function(a){this.ptr.css({zIndex:a})};d.prototype.limits=function(a){return this.parent.limits(a,this)};d.prototype.calc=
function(a){return this.limits(100*(a-this._parent.offset.left)/this._parent.width)};d.prototype.set=function(a,b){this.value.origin=this.parent.round(a);this._set(this.parent.valueToPrc(a,this),b)};d.prototype._set=function(a,b){b||(this.value.origin=this.parent.prcToValue(a));this.value.prc=a;this.ptr.css({left:a+"%"});this.parent.redraw(this)}})(jQuery);
(function(c){function a(a){return"undefined"==typeof a?!1:a instanceof Array||!(a instanceof Object)&&"[object Array]"==Object.prototype.toString.call(a)||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice")?!0:!1}function b(){return this.init.apply(this,arguments)}function d(){Draggable.apply(this,arguments)}c.jslider=function(a,d){var e=c(a);e.data("jslider")||e.data("jslider",new b(a,d));return e.data("jslider")};
c.fn.jslider=function(b,d){var e,m=arguments;this.each(function(){var p=c.jslider(this,b);if("string"==typeof b)switch(b){case "value":void 0!==m[1]&&void 0!==m[2]?(p=p.getPointers(),null!=p[0]&&null!=m[1]&&(p[0].set(m[1]),p[0].setIndexOver()),null!=p[1]&&null!=m[2]&&(p[1].set(m[2]),p[1].setIndexOver())):void 0!==m[1]?(p=p.getPointers(),null!=p[0]&&null!=m[1]&&(p[0].set(m[1]),p[0].setIndexOver())):e=p.getValue();break;case "prc":void 0!==m[1]&&void 0!==m[2]?(p=p.getPointers(),null!=p[0]&&null!=m[1]&&
(p[0]._set(m[1]),p[0].setIndexOver()),null!=p[1]&&null!=m[2]&&(p[1]._set(m[2]),p[1].setIndexOver())):void 0!==m[1]?(p=p.getPointers(),null!=p[0]&&null!=m[1]&&(p[0]._set(m[1]),p[0].setIndexOver())):e=p.getPrcValue();break;case "calculatedValue":var g=p.getValue().split(";");e="";for(var n=0;n<g.length;n++)e+=(0<n?";":"")+p.nice(g[n]);break;case "skin":p.setSkin(m[1])}else!b&&!d&&(a(e)||(e=[]),e.push(p))});a(e)&&1==e.length&&(e=e[0]);return e||this};var e={settings:{from:1,to:10,step:1,smooth:!0,limits:!0,
minInterval:0,round:0,format:{format:"#,##0.##"},value:"5;7",dimension:""},className:"jslider",selector:".jslider-",template:tmpl('<span class="<%=className%>"><table><tr><td><div class="<%=className%>-bg"><i class="l"></i><i class="r"></i><i class="v"></i></div><div class="<%=className%>-pointer"></div><div class="<%=className%>-pointer <%=className%>-pointer-to"></div><div class="<%=className%>-label"><span><%=settings.from%></span></div><div class="<%=className%>-label <%=className%>-label-to"><span><%=settings.to%></span><%=settings.dimension%></div><div class="<%=className%>-value"><span></span><%=settings.dimension%></div><div class="<%=className%>-value <%=className%>-value-to"><span></span><%=settings.dimension%></div><div class="<%=className%>-scale"><%=scale%></div></td></tr></table></span>')};
b.prototype.init=function(a,b){this.settings=c.extend(!0,{},e.settings,b?b:{});this.inputNode=c(a).hide();this.settings.interval=this.settings.to-this.settings.from;this.settings.value=this.inputNode.attr("value");this.settings.calculate&&c.isFunction(this.settings.calculate)&&(this.nice=this.settings.calculate);this.settings.onstatechange&&c.isFunction(this.settings.onstatechange)&&(this.onstatechange=this.settings.onstatechange);this.is={init:!1};this.o={};this.create()};b.prototype.onstatechange=
function(){};b.prototype.create=function(){var a=this;this.domNode=c(e.template({className:e.className,settings:{from:this.nice(this.settings.from),to:this.nice(this.settings.to),dimension:this.settings.dimension},scale:this.generateScale()}));this.inputNode.after(this.domNode);this.drawScale();this.settings.skin&&0<this.settings.skin.length&&this.setSkin(this.settings.skin);this.sizes={domWidth:this.domNode.width(),domOffset:this.domNode.offset()};c.extend(this.o,{pointers:{},labels:{"0":{o:this.domNode.find(e.selector+
"value").not(e.selector+"value-to")},1:{o:this.domNode.find(e.selector+"value").filter(e.selector+"value-to")}},limits:{"0":this.domNode.find(e.selector+"label").not(e.selector+"label-to"),1:this.domNode.find(e.selector+"label").filter(e.selector+"label-to")}});c.extend(this.o.labels[0],{value:this.o.labels[0].o.find("span")});c.extend(this.o.labels[1],{value:this.o.labels[1].o.find("span")});a.settings.value.split(";")[1]||(this.settings.single=!0,this.domNode.addDependClass("single"));a.settings.limits||
this.domNode.addDependClass("limitless");this.domNode.find(e.selector+"pointer").each(function(b){var c=a.settings.value.split(";")[b];if(c){a.o.pointers[b]=new d(this,b,a);var e=a.settings.value.split(";")[b-1];e&&new Number(c)<new Number(e)&&(c=e);c=c<a.settings.from?a.settings.from:c;c=c>a.settings.to?a.settings.to:c;a.o.pointers[b].set(c,!0)}});this.o.value=this.domNode.find(".v");this.is.init=!0;c.each(this.o.pointers,function(){a.redraw(this)});var b=this;c(window).resize(function(){b.onresize()});
var j=this;c(window).load(function(){j.onresize()})};b.prototype.setSkin=function(a){this.skin_&&this.domNode.removeDependClass(this.skin_,"_");this.domNode.addDependClass(this.skin_=a,"_")};b.prototype.setPointersIndex=function(){c.each(this.getPointers(),function(a){this.index(a)})};b.prototype.getPointers=function(){return this.o.pointers};b.prototype.generateScale=function(){if(this.settings.scale&&0<this.settings.scale.length){for(var a="",b=this.settings.scale,c=Math.round(10*(100/(b.length-
1)))/10,d=0;d<b.length;d++)a+='<span style="left: '+d*c+'%">'+("|"!=b[d]?"<ins>"+b[d]+"</ins>":"")+"</span>";return a}return""};b.prototype.drawScale=function(){this.domNode.find(e.selector+"scale span ins").each(function(){c(this).css({marginLeft:-c(this).outerWidth()/2})})};b.prototype.onresize=function(){var a=this;this.sizes={domWidth:this.domNode.width(),domOffset:this.domNode.offset()};c.each(this.o.pointers,function(){a.redraw(this)})};b.prototype.update=function(){this.onresize();this.drawScale()};
b.prototype.limits=function(a,b){if(!this.settings.smooth){var c=100*this.settings.step/this.settings.interval;a=Math.round(a/c)*c}c=this.o.pointers[1-b.uid];this.prcToValue(a);var d=Math.round(1E3*(this.settings.minInterval/(this.settings.to-this.settings.from)))/10;c&&(b.uid&&a<c.value.prc+d)&&(a=c.value.prc+d);c&&(!b.uid&&a>c.value.prc-d)&&(a=c.value.prc-d);0>a&&(a=0);100<a&&(a=100);return Math.round(10*a)/10};b.prototype.redraw=function(a){if(!this.is.init)return!1;this.setValue();this.o.pointers[0]&&
this.o.pointers[1]?this.o.value.css({left:this.o.pointers[0].value.prc+"%",width:this.o.pointers[1].value.prc-this.o.pointers[0].value.prc+"%"}):this.settings.single&&this.o.value.css({width:this.o.pointers[0].value.prc+"%"});this.o.labels[a.uid].value.html(this.nice(a.value.origin));this.redrawLabels(a)};b.prototype.redrawLabels=function(a){function b(a,d,e){d.margin=-d.label/2;label_left=d.border+d.margin;d.border+d.label/2>c.sizes.domWidth||(d.right=!1);var f=a.o.css("marginLeft"),f=f.substr(0,
f.length-2);if(0.7>Math.abs(f-d.margin))return d.margin=f,a.o.css({left:e+"%",right:"auto"}),d;a.o.css({left:e+"%",marginLeft:d.margin,right:"auto"});return d}var c=this,d=this.o.labels[a.uid],e=a.value.prc,g={label:d.o.outerWidth(),right:!1,border:e*this.sizes.domWidth/100};if(!this.settings.single){var n=this.o.pointers[1-a.uid],q=this.o.labels[n.uid];switch(a.uid){case 0:g.border+g.label/2>q.o.offset().left-this.sizes.domOffset.left?(q.o.css({visibility:"hidden"}),q.value.html(this.nice(n.value.origin)),
d.o.css({visibility:"visible"}),e=(n.value.prc-e)/2+e,n.value.prc!=a.value.prc&&(d.value.html(this.nice(a.value.origin)+"-"+this.nice(n.value.origin)),g.label=d.o.outerWidth(),g.border=e*this.sizes.domWidth/100)):q.o.css({visibility:"visible"});break;case 1:g.border-g.label/2<q.o.offset().left-this.sizes.domOffset.left+q.o.outerWidth()?(q.o.css({visibility:"hidden"}),q.value.html(this.nice(n.value.origin)),d.o.css({visibility:"visible"}),e=(e-n.value.prc)/2+n.value.prc,n.value.prc!=a.value.prc&&(d.value.html(this.nice(n.value.origin)+
"-"+this.nice(a.value.origin)),g.label=d.o.outerWidth(),g.border=e*this.sizes.domWidth/100)):q.o.css({visibility:"visible"})}}g=b(d,g,e);q&&(g={label:q.o.outerWidth(),right:!1,border:n.value.prc*this.sizes.domWidth/100},g=b(q,g,n.value.prc));this.redrawLimits()};b.prototype.redrawLimits=function(){if(this.settings.limits){var a=[!0,!0];for(key in this.o.pointers)if(!this.settings.single||0==key){var b=this.o.labels[this.o.pointers[key].uid],c=b.o.offset().left-this.sizes.domOffset.left,d=this.o.limits[0];
c<d.outerWidth()&&(a[0]=!1);d=this.o.limits[1];c+b.o.outerWidth()>this.sizes.domWidth-d.outerWidth()&&(a[1]=!1)}for(b=0;b<a.length;b++)a[b]?this.o.limits[b].fadeIn("fast"):this.o.limits[b].fadeOut("fast")}};b.prototype.setValue=function(){var a=this.getValue();this.inputNode.attr("value",a);this.onstatechange.call(this,a)};b.prototype.getValue=function(){if(!this.is.init)return!1;var a=this,b="";c.each(this.o.pointers,function(c){void 0!=this.value.prc&&!isNaN(this.value.prc)&&(b+=(0<c?";":"")+a.prcToValue(this.value.prc))});
return b};b.prototype.getPrcValue=function(){if(!this.is.init)return!1;var a="";c.each(this.o.pointers,function(b){void 0!=this.value.prc&&!isNaN(this.value.prc)&&(a+=(0<b?";":"")+this.value.prc)});return a};b.prototype.prcToValue=function(a){if(this.settings.heterogeneity&&0<this.settings.heterogeneity.length)for(var b=this.settings.heterogeneity,c=0,d=this.settings.from,e=0;e<=b.length;e++){var g=b[e]?b[e].split("/"):[100,this.settings.to];g[0]=new Number(g[0]);g[1]=new Number(g[1]);if(a>=c&&a<=
g[0])var n=d+(a-c)*(g[1]-d)/(g[0]-c);c=g[0];d=g[1]}else n=this.settings.from+a*this.settings.interval/100;return this.round(n)};b.prototype.valueToPrc=function(a,b){if(this.settings.heterogeneity&&0<this.settings.heterogeneity.length)for(var c=this.settings.heterogeneity,d=0,e=this.settings.from,g=0;g<=c.length;g++){var n=c[g]?c[g].split("/"):[100,this.settings.to];n[0]=new Number(n[0]);n[1]=new Number(n[1]);if(a>=e&&a<=n[1])var q=b.limits(d+(a-e)*(n[0]-d)/(n[1]-e));d=n[0];e=n[1]}else q=b.limits(100*
(a-this.settings.from)/this.settings.interval);return q};b.prototype.round=function(a){a=Math.round(a/this.settings.step)*this.settings.step;return a=this.settings.round?Math.round(a*Math.pow(10,this.settings.round))/Math.pow(10,this.settings.round):Math.round(a)};b.prototype.nice=function(a){a=a.toString().replace(/,/gi,".").replace(/ /gi,"");return c.formatNumber?c.formatNumber(new Number(a),this.settings.format||{}).replace(/-/gi,"&minus;"):new Number(a)};d.prototype=new Draggable;d.prototype.oninit=
function(a,b,c){this.uid=b;this.parent=c;this.value={};this.settings=this.parent.settings};d.prototype.onmousedown=function(){this._parent={offset:this.parent.domNode.offset(),width:this.parent.domNode.width()};this.ptr.addDependClass("hover");this.setIndexOver()};d.prototype.onmousemove=function(a){a=this._getPageCoords(a);this._set(this.calc(a.x))};d.prototype.onmouseup=function(){this.parent.settings.callback&&c.isFunction(this.parent.settings.callback)&&this.parent.settings.callback.call(this.parent,
this.parent.getValue());this.ptr.removeDependClass("hover")};d.prototype.setIndexOver=function(){this.parent.setPointersIndex(1);this.index(2)};d.prototype.index=function(a){this.ptr.css({zIndex:a})};d.prototype.limits=function(a){return this.parent.limits(a,this)};d.prototype.calc=function(a){return this.limits(100*(a-this._parent.offset.left)/this._parent.width)};d.prototype.set=function(a,b){this.value.origin=this.parent.round(a);this._set(this.parent.valueToPrc(a,this),b)};d.prototype._set=function(a,
b){b||(this.value.origin=this.parent.prcToValue(a));this.value.prc=a;this.ptr.css({left:a+"%"});this.parent.redraw(this)}})(jQuery);
(function(c){c.photoSlider={init:function(a,b){var d=c(a);d.attr("class");d.data("options",b);var e=this;e.obj=d;e.unloadedImages=0;e.totalImages=0;e.leftNavi=c('<div class="left-navi"></div>');e.leftNavi.hide();e.rightNavi=c('<div class="right-navi"></div>');e.rightNavi.hide();e.obj.after(e.rightNavi);e.obj.after(e.leftNavi);e.leftNavi.click(function(){e.leftClick()});e.rightNavi.click(function(){e.rightClick()});console.log("initing photoslider!!!!");console.log(d);console.log(e);d.find("img").each(function(a,
b){e.unloadedImages++;e.totalImages++;var d=new Image,m=c(b).attr("src");c(d).bind("load error",function(){console.log("image is loaded",this);e.unloadedImages--;0>=e.unloadedImages&&e.allImagesLoaded()});d.src=m})},testLimits:function(){var a="none"!=this.rightNavi.css("display");this.fullWidth-this.leftPosition>this.visibleWidth&&!a?this.rightNavi.fadeIn():this.fullWidth-this.leftPosition<=this.visibleWidth&&a&&this.rightNavi.fadeOut();a="none"!=this.leftNavi.css("display");0<this.indexPosition&&
!a?this.leftNavi.fadeIn():0>=this.indexPosition&&a&&this.leftNavi.fadeOut()},allImagesLoaded:function(){var a=this;console.log("allImages loaded");a.fullWidth=0;var b=a.obj.find("li:last").position(),d=a.obj.find("li:last").width();a.fullWidth=b.left+d;a.indexPosition=0;a.leftPosition=0;a.transitionProcess=!1;a.visibleWidth=a.obj.parent().width();a.testLimits();c(window).resize(function(){a.onresize()});console.log(a)},transit:function(){var a=this,b=a.obj.find("li:eq("+a.indexPosition+")").position();
0<a.indexPosition&&a.fullWidth-b.left<a.visibleWidth&&(b.left=a.fullWidth-a.visibleWidth);a.leftPosition=b.left;a.obj.animate({left:-b.left+"px"},200,function(){a.transitionProcess=!1;a.testLimits()})},rightClick:function(){!this.transitionProcess&&(this.fullWidth-this.leftPosition>this.visibleWidth&&this.indexPosition<this.totalImages)&&(this.transitionProcess=!0,this.indexPosition++,this.transit())},leftClick:function(){!this.transitionProcess&&0<this.indexPosition&&(this.transitionProcess=!0,this.indexPosition--,
this.transit())},onresize:function(){var a=this.fullWidth-this.leftPosition==this.visibleWidth;this.visibleWidth=this.obj.parent().width();a&&(this.leftPosition=this.fullWidth-this.visibleWidth,this.obj.css({left:-this.leftPosition+"px"}))}};c.fn.photoSlider=function(a,b){"string"!=typeof a&&(b=a,b=c.extend({},{kg:"am"},b),c(this).each(function(){var a=this;window.setTimeout(function(){c.photoSlider.init(a,b)},100)}))}})(jQuery);
var arr_textLoad=["\u042d\u0442\u043e \u0437\u0430\u0439\u043c\u0435\u0442 \u043e\u0442 5 \u0434\u043e 30 \u0441\u0435\u043a\u0443\u043d\u0434","\u041c\u044b \u0438\u0449\u0435\u043c \u0441\u0440\u0435\u0434\u0438 500 \u0430\u0432\u0438\u0430\u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0439","\u0423\u0436\u0435 \u043f\u043e\u0447\u0442\u0438 \u0433\u043e\u0442\u043e\u0432\u043e","\u0415\u0449\u0451 \u0441\u0435\u043a\u0443\u043d\u0434\u043e\u0447\u043a\u0443","\u041d\u0435\u043c\u043d\u043e\u0433\u043e \u0442\u0435\u0440\u043f\u0435\u043d\u0438\u044f"],
pointsInterval,textInterval,started=!1,var_loadTextCounts;function loaderChange(c){var a=$("#changeText");c?started||(var_loadTextCounts=0,a.text(arr_textLoad[var_loadTextCounts]),pointsInterval=setInterval(runPoints,500),textInterval=setInterval(runText,12E3),started=!0):(clearInterval(pointsInterval),clearInterval(textInterval),started=!1)}
function runPoints(){var c=$("#loadLight"),a=c.find("li.active").index(),a=a+1;a==c.find("li").length&&(a=0);c.find("li").removeClass("active");c.find("li").eq(a).addClass("active")}function runText(){var c=$("#changeText");var_loadTextCounts+=1;var_loadTextCounts==arr_textLoad.length&&(var_loadTextCounts=0);c.text(arr_textLoad[var_loadTextCounts])}var speedAnimateChangePic=500;
function slideToursSlide(){if(0<$(".innerBlockMain").length&&$(".innerBlockMain").is(":visible")){var c=$(window).width(),a=$(".slideTours"),b=$(".centerTours"),d;1E3>=c?d=1E3:1E3<c&&1050>c?d=c:1050<c&&1290>c?d=Math.floor(1050+(c-1050)/(240/155)):1290<c&&1390>c?d=1205:1390<c&&1490>c?d=Math.floor(1205+(c-1390)/(100/185)):1490<c&&(d=1390);b.css("width",d+"px");$(".slideTours .center").css("width",d+"px");var c=$(".slideTours .center").width(),e;1390<=c?e=Math.floor(c/8-2):1390>c&&1290<=c?e=Math.floor(c/
7-2):1290>c&&1E3<c?e=Math.floor(c/6-2):1E3>=c&&(e=Math.floor(c/5-2));a.find(".toursTicketsMain").css("width",e+"px")}}
function CenterIMGResize(c){void 0==c&&(c=0);if(0<$(".innerBlockMain").length&&$(".innerBlockMain").is(":visible")){var a=$(window).height();800>a?(a=a-38-158,$(".slideTours").addClass("small")):(a=a-38-214,$(".slideTours").removeClass("small"));$(".innerBlockMain").css("height",a+"px");var b=$(".innerBlockMain .IMGmain").eq(c).find("img"),d=0,e=$(".slideTours .center").width(),a=($("div.IMGmain").eq(c).find("img").height()-a)/2;console.log("!!!! "+a);0>a?(b.css("top","0px"),b.css("height",$(".innerBlockMain .IMGmain").eq(c).height()+
"px").css("width","auto")):b.css("top","-"+a+"px");1390<=e?d=(1390-e)/2:1390>e&&1290<=e?d=(1390-e)/2:1290>e&&1E3<e?d=(1390-e)/2:1E3>=e&&(d=(1390-e)/2);b.css("left","-"+d+"px")}}function smallIMGresizeIndex(){var c=$(".imgTours");0<c.length&&c.is(":visible")&&(c.find("img"),c.each(function(){var a=$(this).find("img"),b=a.height();a.width();var c=$(this).height();$(this).width();b<c&&a.css("height",c+"px")}))}
function indexIMGresizeCenter(c){c=$(".IMGmain").eq(c).find("img");c.css("width","100%");var a=c.height(),b=$(".innerBlockMain").height();b>a&&c.css("height",b+"px").css("width","auto")}
function WidthMine(){var c=$(".slide-turn-mode ul").find(".active"),a=c.index();if(!(0>a)){var b=$(".slide-turn-mode").find(".switch"),d=[[143,0],[135,155],[95,295],[148,403]];b.css("width",d[a][0]+"px").css("left",d[a][1]+"px");b.find(".c").css("width",d[a][0]-27+"px");$(".slide-turn-mode .btn").click(function(e){e.preventDefault();$(this).hasClass("active")||($(".btn").removeClass("active"),$(this).addClass("active"),c=$(".slide-turn-mode ul").find(".active"),a=c.index(),b.animate({width:d[a][0]+
"px",left:d[a][1]+"px"},400,function(){$(this).addClass("active")}),b.find(".c").animate({width:d[a][0]-27+"px"},400))})}}
function googleInfoDiv(){this.extend(googleInfoDiv,google.maps.OverlayView);this.show=__bind(this.show,this);this.hide=__bind(this.hide,this);this.getPosFromLatLng_=__bind(this.getPosFromLatLng_,this);this.onAdd=__bind(this.onAdd,this);this.draw=__bind(this.draw,this);this.setContent=__bind(this.setContent,this);this.setPosition=__bind(this.setPosition,this);this.latLng=this.div_=null;this.content="";googleInfoDiv.prototype.getProjection=google.maps.OverlayView.prototype.getProjection}
googleInfoDiv.prototype.extend=function(c,a){return function(a){for(var c in a.prototype)this.prototype[c]=a.prototype[c];return this}.apply(c,[a])};googleInfoDiv.prototype.setPosition=function(c){this.latLng=c;c=this.getPosFromLatLng_(this.latLng);this.div_&&this.div_.css({top:c.y+"px",left:c.x+"px"})};googleInfoDiv.prototype.setContent=function(c){this.content=c;this.div_&&this.div_.html(this.content)};
googleInfoDiv.prototype.draw=function(){var c;if(this.div_)return c=this.getPosFromLatLng_(this.latLng),this.div_.css({top:c.y+"px",left:c.x+"px"})};googleInfoDiv.prototype.onAdd=function(){var c,a;a=this.getPosFromLatLng_(this.latLng);c=$('<div style=" width: 5px; height: 5px;position: absolute">'+this.content+"</div>");c.css({top:a.y-20+"px",left:a.x+"px"});this.div_=c;a=this.getPanes();$(a.overlayMouseTarget).append(c)};
googleInfoDiv.prototype.getPosFromLatLng_=function(c){var a;this.getProjection()&&(a=this.getProjection().fromLatLngToDivPixel(c));return a};googleInfoDiv.prototype.hide=function(){this.div_&&this.div_.hide()};googleInfoDiv.prototype.show=function(){this.div_&&this.div_.show()};
(function(c){var a=(c.browser.msie?"paste":"input")+".mask",b=void 0!=window.orientation;c.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn"};c.fn.extend({caret:function(a,b){if(0!=this.length){if("number"==typeof a)return b="number"==typeof b?b:a,this.each(function(){if(this.setSelectionRange)this.setSelectionRange(a,b);else if(this.createTextRange){var c=this.createTextRange();c.collapse(!0);c.moveEnd("character",b);c.moveStart("character",a);c.select()}});if(this[0].setSelectionRange)a=
this[0].selectionStart,b=this[0].selectionEnd;else if(document.selection&&document.selection.createRange){var c=document.selection.createRange();a=0-c.duplicate().moveStart("character",-1E5);b=a+c.text.length}return{begin:a,end:b}}},unmask:function(){return this.trigger("unmask")},mask:function(d,e){if(!d&&0<this.length)return c(this[0]).data(c.mask.dataName)();e=c.extend({placeholder:"_",completed:null},e);var f=c.mask.definitions,h=[],j=d.length,m=null,p=d.length;c.each(d.split(""),function(a,b){"?"==
b?(p--,j=a):f[b]?(h.push(RegExp(f[b])),null==m&&(m=h.length-1)):h.push(null)});return this.trigger("unmask").each(function(){function g(a){for(;++a<=p&&!h[a];);return a}function n(a,b){if(!(0>a)){for(var c=a,d=g(b);c<p;c++)if(h[c]){if(d<p&&h[c].test(v[d]))v[c]=v[d],v[d]=e.placeholder;else break;d=g(d)}A();x.caret(Math.max(m,a))}}function q(a){a=a.which;if(8==a||46==a||b&&127==a){var c=x.caret(),d=c.begin,c=c.end;if(0==c-d){if(46!=a)for(;0<=--d&&!h[d];);else d=c=g(d-1);c=46==a?g(c):c}s(d,c);n(d,c-
1);return!1}if(27==a)return x.val(C),x.caret(0,y()),!1}function u(a){var b=a.which,c=x.caret();if(a.ctrlKey||a.altKey||a.metaKey||32>b)return!0;if(b){0!=c.end-c.begin&&(s(c.begin,c.end),n(c.begin,c.end-1));a=g(c.begin-1);if(a<p&&(b=String.fromCharCode(b),h[a].test(b))){for(var c=a,d=e.placeholder;c<p;c++)if(h[c]){var f=g(c),j=v[c];v[c]=d;if(f<p&&h[f].test(j))d=j;else break}v[a]=b;A();a=g(a);x.caret(a);e.completed&&a>=p&&e.completed.call(x)}return!1}}function s(a,b){for(var c=a;c<b&&c<p;c++)h[c]&&
(v[c]=e.placeholder)}function A(){return x.val(v.join("")).val()}function y(a){for(var b=x.val(),c=-1,d=0,f=0;d<p;d++)if(h[d]){for(v[d]=e.placeholder;f++<b.length;){var g=b.charAt(f-1);if(h[d].test(g)){v[d]=g;c=d;break}}if(f>b.length)break}else v[d]==b.charAt(f)&&d!=j&&(f++,c=d);if(!a&&c+1<j)x.val(""),s(0,p);else if(a||c+1>=j)A(),a||x.val(x.val().substring(0,c+1));return j?d:m}var x=c(this),v=c.map(d.split(""),function(a){if("?"!=a)return f[a]?e.placeholder:a}),C=x.val();x.data(c.mask.dataName,function(){return c.map(v,
function(a,b){return h[b]&&a!=e.placeholder?a:null}).join("")});x.attr("readonly")||x.one("unmask",function(){x.unbind(".mask").removeData(c.mask.dataName)}).bind("focus.mask",function(){C=x.val();var a=y();A();var b=function(){a==d.length?x.caret(0,a):x.caret(a)};(c.browser.msie?b:function(){setTimeout(b,0)})()}).bind("blur.mask",function(){y();x.val()!=C&&x.change()}).bind("keydown.mask",q).bind("keypress.mask",u).bind(a,function(){setTimeout(function(){x.caret(y(!0))},0)});y()})}})})(jQuery);
(function(){var c=!0,a=window,b=document,d=navigator,e=window.jQuery,f=void 0,h=function(h){function m(a,b,c,d){g.bindingHandlers[a]={init:function(a){g.utils.domData.set(a,M,{});return{controlsDescendantBindings:!0}},update:function(a,e,f,h,j){f=g.utils.domData.get(a,M);e=g.utils.unwrapObservable(e());h=!c!==!e;var n=!f.savedNodes;if(n||b||h!==f.didDisplayOnLastUpdate)n&&(f.savedNodes=g.utils.cloneNodes(g.virtualElements.childNodes(a),!0)),h?(n||g.virtualElements.setDomNodeChildren(a,g.utils.cloneNodes(f.savedNodes)),
g.applyBindingsToDescendants(d?d(j,e):j,a)):g.virtualElements.emptyNode(a),f.didDisplayOnLastUpdate=h}};g.expressionRewriting.bindingRewriteValidators[a]=!1;g.virtualElements.allowedBindings[a]=!0}function p(a,b,c){c&&b!==g.selectExtensions.readValue(a)&&g.selectExtensions.writeValue(a,b);b!==g.selectExtensions.readValue(a)&&g.dependencyDetection.ignore(g.utils.triggerEvent,null,[a,"change"])}var g="undefined"!==typeof h?h:{};g.exportSymbol=function(a,b){for(var c=a.split("."),d=g,e=0;e<c.length-
1;e++)d=d[c[e]];d[c[c.length-1]]=b};g.exportProperty=function(a,b,c){a[b]=c};g.version="2.2.0";g.exportSymbol("version",g.version);g.utils=new function(){function c(a,b){if("input"!==g.utils.tagNameLower(a)||!a.type||"click"!=b.toLowerCase())return!1;var d=a.type;return"checkbox"==d||"radio"==d}var h=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,j={},n={},q=/Firefox\/2/i.test(d.userAgent)?"KeyboardEvent":"UIEvents";j[q]=["keyup","keydown","keypress"];j.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" ");
for(var k in j)if(q=j[k],q.length)for(var m=0,p=q.length;m<p;m++)n[q[m]]=k;var s={propertychange:!0},u,j=3;k=b.createElement("div");for(q=k.getElementsByTagName("i");k.innerHTML="\x3c!--[if gt IE "+ ++j+"]><i></i><![endif]--\x3e",q[0];);u=4<j?j:f;return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c])},arrayIndexOf:function(a,b){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(a,
b);for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},arrayFirst:function(a,b,c){for(var d=0,e=a.length;d<e;d++)if(b.call(c,a[d]))return a[d];return null},arrayRemoveItem:function(a,b){var c=g.utils.arrayIndexOf(a,b);0<=c&&a.splice(c,1)},arrayGetDistinctValues:function(a){a=a||[];for(var b=[],c=0,d=a.length;c<d;c++)0>g.utils.arrayIndexOf(b,a[c])&&b.push(a[c]);return b},arrayMap:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;d<e;d++)c.push(b(a[d]));return c},arrayFilter:function(a,b){a=
a||[];for(var c=[],d=0,e=a.length;d<e;d++)b(a[d])&&c.push(a[d]);return c},arrayPushAll:function(a,b){if(b instanceof Array)a.push.apply(a,b);else for(var c=0,d=b.length;c<d;c++)a.push(b[c]);return a},extend:function(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},emptyDomNode:function(a){for(;a.firstChild;)g.removeNode(a.firstChild)},moveCleanedNodesToContainerElement:function(a){a=g.utils.makeArray(a);for(var c=b.createElement("div"),d=0,e=a.length;d<e;d++){var f=a[d];3==f.nodeType&&
""==f.textContent.trim()?f.parentNode.removeChild(f):c.appendChild(g.cleanNode(f))}return c},cloneNodes:function(a,b){for(var c=0,d=a.length,e=[];c<d;c++){var f=a[c].cloneNode(!0);e.push(b?g.cleanNode(f):f)}return e},setDomNodeChildren:function(a,b){g.utils.emptyDomNode(a);if(b)for(var c=0,d=b.length;c<d;c++)a.appendChild(b[c])},replaceDomNodes:function(a,b){var c=a.nodeType?[a]:a;if(0<c.length){for(var d=c[0],e=d.parentNode,f=0,h=b.length;f<h;f++)e.insertBefore(b[f],d);f=0;for(h=c.length;f<h;f++)g.removeNode(c[f])}},
setOptionNodeSelectionState:function(a,b){7>u?a.setAttribute("selected",b):a.selected=b},stringTrim:function(a){return(a||"").replace(h,"")},stringTokenize:function(a,b){for(var c=[],d=(a||"").split(b),e=0,f=d.length;e<f;e++){var h=g.utils.stringTrim(d[e]);""!==h&&c.push(h)}return c},stringStartsWith:function(a,b){a=a||"";return b.length>a.length?!1:a.substring(0,b.length)===b},domNodeIsContainedBy:function(a,b){if(b.compareDocumentPosition)return 16==(b.compareDocumentPosition(a)&16);for(;null!=
a;){if(a==b)return!0;a=a.parentNode}return!1},domNodeIsAttachedToDocument:function(a){return g.utils.domNodeIsContainedBy(a,a.ownerDocument)},anyDomNodeIsAttachedToDocument:function(a){return!!g.utils.arrayFirst(a,g.utils.domNodeIsAttachedToDocument)},tagNameLower:function(a){return a&&a.tagName&&a.tagName.toLowerCase()},registerEventHandler:function(a,b,d){var f=u&&s[b];if(!f&&"undefined"!=typeof e){if(c(a,b)){var g=d;d=function(a,b){var c=this.checked;b&&(this.checked=!0!==b.checkedStateBeforeEvent);
g.call(this,a);this.checked=c}}e(a).bind(b,d)}else if(!f&&"function"==typeof a.addEventListener)a.addEventListener(b,d,!1);else if("undefined"!=typeof a.attachEvent)a.attachEvent("on"+b,function(b){d.call(a,b)});else throw Error("Browser doesn't support addEventListener or attachEvent");},triggerEvent:function(d,f){if(!d||!d.nodeType)throw Error("element must be a DOM node when calling triggerEvent");if("undefined"!=typeof e){var g=[];c(d,f)&&g.push({checkedStateBeforeEvent:d.checked});e(d).trigger(f,
g)}else if("function"==typeof b.createEvent)if("function"==typeof d.dispatchEvent)g=b.createEvent(n[f]||"HTMLEvents"),g.initEvent(f,!0,!0,a,0,0,0,0,0,!1,!1,!1,!1,0,d),d.dispatchEvent(g);else throw Error("The supplied element doesn't support dispatchEvent");else if("undefined"!=typeof d.fireEvent)c(d,f)&&(d.checked=!0!==d.checked),d.fireEvent("on"+f);else throw Error("Browser doesn't support triggering events");},unwrapObservable:function(a){return g.isObservable(a)?a():a},peekObservable:function(a){return g.isObservable(a)?
a.peek():a},toggleDomNodeCssClass:function(a,b,c){if(b){var d=/[\w-]+/g,e=a.className.match(d)||[];g.utils.arrayForEach(b.match(d),function(a){var b=g.utils.arrayIndexOf(e,a);0<=b?c||e.splice(b,1):c&&e.push(a)});a.className=e.join(" ")}},setTextContent:function(a,c){var d=g.utils.unwrapObservable(c);if(null===d||d===f)d="";if(3===a.nodeType)a.data=d;else{var e=g.virtualElements.firstChild(a);!e||3!=e.nodeType||g.virtualElements.nextSibling(e)?g.virtualElements.setDomNodeChildren(a,[b.createTextNode(d)]):
e.data=d;g.utils.forceRefresh(a)}},setElementName:function(a,c){a.name=c;if(7>=u)try{a.mergeAttributes(b.createElement("<input name='"+a.name+"'/>"),!1)}catch(d){}},forceRefresh:function(a){9<=u&&(a=1==a.nodeType?a:a.parentNode,a.style&&(a.style.zoom=a.style.zoom))},ensureSelectElementIsRenderedCorrectly:function(a){if(9<=u){var b=a.style.width;a.style.width=0;a.style.width=b}},range:function(a,b){a=g.utils.unwrapObservable(a);b=g.utils.unwrapObservable(b);for(var c=[],d=a;d<=b;d++)c.push(d);return c},
makeArray:function(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b},isIe6:6===u,isIe7:7===u,ieVersion:u,getFormFields:function(a,b){for(var c=g.utils.makeArray(a.getElementsByTagName("input")).concat(g.utils.makeArray(a.getElementsByTagName("textarea"))),d="string"==typeof b?function(a){return a.name===b}:function(a){return b.test(a.name)},e=[],f=c.length-1;0<=f;f--)d(c[f])&&e.push(c[f]);return e},parseJson:function(b){return"string"==typeof b&&(b=g.utils.stringTrim(b))?a.JSON&&a.JSON.parse?
a.JSON.parse(b):(new Function("return "+b))():null},stringifyJson:function(a,b,c){if("undefined"==typeof JSON||"undefined"==typeof JSON.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return JSON.stringify(g.utils.unwrapObservable(a),b,c)},postJson:function(a,c,d){d=d||{};var e=d.params||{},f=d.includeFields||this.fieldsIncludedWithJsonPost,
h=a;if("object"==typeof a&&"form"===g.utils.tagNameLower(a))for(var h=a.action,j=f.length-1;0<=j;j--)for(var n=g.utils.getFormFields(a,f[j]),q=n.length-1;0<=q;q--)e[n[q].name]=n[q].value;c=g.utils.unwrapObservable(c);var k=b.createElement("form");k.style.display="none";k.action=h;k.method="post";for(var w in c)a=b.createElement("input"),a.name=w,a.value=g.utils.stringifyJson(g.utils.unwrapObservable(c[w])),k.appendChild(a);for(w in e)a=b.createElement("input"),a.name=w,a.value=e[w],k.appendChild(a);
b.body.appendChild(k);d.submitter?d.submitter(k):k.submit();setTimeout(function(){k.parentNode.removeChild(k)},0)}}};g.exportSymbol("utils",g.utils);g.exportSymbol("utils.arrayForEach",g.utils.arrayForEach);g.exportSymbol("utils.arrayFirst",g.utils.arrayFirst);g.exportSymbol("utils.arrayFilter",g.utils.arrayFilter);g.exportSymbol("utils.arrayGetDistinctValues",g.utils.arrayGetDistinctValues);g.exportSymbol("utils.arrayIndexOf",g.utils.arrayIndexOf);g.exportSymbol("utils.arrayMap",g.utils.arrayMap);
g.exportSymbol("utils.arrayPushAll",g.utils.arrayPushAll);g.exportSymbol("utils.arrayRemoveItem",g.utils.arrayRemoveItem);g.exportSymbol("utils.extend",g.utils.extend);g.exportSymbol("utils.fieldsIncludedWithJsonPost",g.utils.fieldsIncludedWithJsonPost);g.exportSymbol("utils.getFormFields",g.utils.getFormFields);g.exportSymbol("utils.peekObservable",g.utils.peekObservable);g.exportSymbol("utils.postJson",g.utils.postJson);g.exportSymbol("utils.parseJson",g.utils.parseJson);g.exportSymbol("utils.registerEventHandler",
g.utils.registerEventHandler);g.exportSymbol("utils.stringifyJson",g.utils.stringifyJson);g.exportSymbol("utils.range",g.utils.range);g.exportSymbol("utils.toggleDomNodeCssClass",g.utils.toggleDomNodeCssClass);g.exportSymbol("utils.triggerEvent",g.utils.triggerEvent);g.exportSymbol("utils.unwrapObservable",g.utils.unwrapObservable);Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice.call(arguments);a=c.shift();return function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}});
g.utils.domData=new function(){var a=0,b="__ko__"+(new Date).getTime(),c={};return{get:function(a,b){var c=g.utils.domData.getAll(a,!1);return c===f?f:c[b]},set:function(a,b,c){c===f&&g.utils.domData.getAll(a,!1)===f||(g.utils.domData.getAll(a,!0)[b]=c)},getAll:function(d,e){var g=d[b];if(!g||!("null"!==g&&c[g])){if(!e)return f;g=d[b]="ko"+a++;c[g]={}}return c[g]},clear:function(a){var d=a[b];return d?(delete c[d],a[b]=null,!0):!1}}};g.exportSymbol("utils.domData",g.utils.domData);g.exportSymbol("utils.domData.clear",
g.utils.domData.clear);g.utils.domNodeDisposal=new function(){function a(b,d){var e=g.utils.domData.get(b,c);e===f&&d&&(e=[],g.utils.domData.set(b,c,e));return e}function b(c){var d=a(c,!1);if(d)for(var d=d.slice(0),f=0;f<d.length;f++)d[f](c);g.utils.domData.clear(c);"function"==typeof e&&"function"==typeof e.cleanData&&e.cleanData([c]);if(h[c.nodeType])for(d=c.firstChild;c=d;)d=c.nextSibling,8===c.nodeType&&b(c)}var c="__ko_domNodeDisposal__"+(new Date).getTime(),d={1:!0,8:!0,9:!0},h={1:!0,9:!0};
return{addDisposeCallback:function(b,c){if("function"!=typeof c)throw Error("Callback must be a function");a(b,!0).push(c)},removeDisposeCallback:function(b,d){var e=a(b,!1);e&&(g.utils.arrayRemoveItem(e,d),0==e.length&&g.utils.domData.set(b,c,f))},cleanNode:function(a){if(d[a.nodeType]&&(b(a),h[a.nodeType])){var c=[];g.utils.arrayPushAll(c,a.getElementsByTagName("*"));for(var e=0,f=c.length;e<f;e++)b(c[e])}return a},removeNode:function(a){g.cleanNode(a);a.parentNode&&a.parentNode.removeChild(a)}}};
g.cleanNode=g.utils.domNodeDisposal.cleanNode;g.removeNode=g.utils.domNodeDisposal.removeNode;g.exportSymbol("cleanNode",g.cleanNode);g.exportSymbol("removeNode",g.removeNode);g.exportSymbol("utils.domNodeDisposal",g.utils.domNodeDisposal);g.exportSymbol("utils.domNodeDisposal.addDisposeCallback",g.utils.domNodeDisposal.addDisposeCallback);g.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",g.utils.domNodeDisposal.removeDisposeCallback);g.utils.parseHtmlFragment=function(c){var d;if("undefined"!=
typeof e){if((d=e.clean([c]))&&d[0]){for(c=d[0];c.parentNode&&11!==c.parentNode.nodeType;)c=c.parentNode;c.parentNode&&c.parentNode.removeChild(c)}}else{var f=g.utils.stringTrim(c).toLowerCase();d=b.createElement("div");f=f.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!f.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!f.indexOf("<td")||!f.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""];c="ignored<div>"+f[1]+c+f[2]+"</div>";for("function"==typeof a.innerShiv?
d.appendChild(a.innerShiv(c)):d.innerHTML=c;f[0]--;)d=d.lastChild;d=g.utils.makeArray(d.lastChild.childNodes)}return d};g.utils.setHtml=function(a,b){g.utils.emptyDomNode(a);b=g.utils.unwrapObservable(b);if(null!==b&&b!==f)if("string"!=typeof b&&(b=b.toString()),"undefined"!=typeof e)e(a).html(b);else for(var c=g.utils.parseHtmlFragment(b),d=0;d<c.length;d++)a.appendChild(c[d])};g.exportSymbol("utils.parseHtmlFragment",g.utils.parseHtmlFragment);g.exportSymbol("utils.setHtml",g.utils.setHtml);var n=
function(a,b){if(a)if(8==a.nodeType){var c=g.memoization.parseMemoText(a.nodeValue);null!=c&&b.push({domNode:a,memoId:c})}else if(1==a.nodeType)for(var c=0,d=a.childNodes,e=d.length;c<e;c++)n(d[c],b)},q={};g.memoization={memoize:function(a){if("function"!=typeof a)throw Error("You can only pass a function to ko.memoization.memoize()");var b=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);q[b]=a;return"\x3c!--[ko_memo:"+b+"]--\x3e"},
unmemoize:function(a,b){var c=q[a];if(c===f)throw Error("Couldn't find any memo with ID "+a+". Perhaps it's already been unmemoized.");try{return c.apply(null,b||[]),!0}finally{delete q[a]}},unmemoizeDomNodeAndDescendants:function(a,b){var c=[];n(a,c);for(var d=0,e=c.length;d<e;d++){var f=c[d].domNode,h=[f];b&&g.utils.arrayPushAll(h,b);g.memoization.unmemoize(c[d].memoId,h);f.nodeValue="";f.parentNode&&f.parentNode.removeChild(f)}},parseMemoText:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?
a[1]:null}};g.exportSymbol("memoization",g.memoization);g.exportSymbol("memoization.memoize",g.memoization.memoize);g.exportSymbol("memoization.unmemoize",g.memoization.unmemoize);g.exportSymbol("memoization.parseMemoText",g.memoization.parseMemoText);g.exportSymbol("memoization.unmemoizeDomNodeAndDescendants",g.memoization.unmemoizeDomNodeAndDescendants);g.extenders={throttle:function(a,b){a.throttleEvaluation=b;var c=null;return g.dependentObservable({read:a,write:function(d){clearTimeout(c);c=
setTimeout(function(){a(d)},b)}})},notify:function(a,b){a.equalityComparer="always"==b?function(){return!1}:g.observable.fn.equalityComparer;return a}};g.exportSymbol("extenders",g.extenders);g.subscription=function(a,b,c){this.target=a;this.callback=b;this.disposeCallback=c;g.exportProperty(this,"dispose",this.dispose)};g.subscription.prototype.dispose=function(){this.isDisposed=!0;this.disposeCallback()};g.subscribable=function(){this._subscriptions={};g.utils.extend(this,g.subscribable.fn);g.exportProperty(this,
"subscribe",this.subscribe);g.exportProperty(this,"extend",this.extend);g.exportProperty(this,"getSubscriptionsCount",this.getSubscriptionsCount)};g.subscribable.fn={subscribe:function(a,b,c){c=c||"change";a=b?a.bind(b):a;var d=new g.subscription(this,a,function(){g.utils.arrayRemoveItem(this._subscriptions[c],d)}.bind(this));this._subscriptions[c]||(this._subscriptions[c]=[]);this._subscriptions[c].push(d);return d},notifySubscribers:function(a,b){b=b||"change";this._subscriptions[b]&&g.dependencyDetection.ignore(function(){g.utils.arrayForEach(this._subscriptions[b].slice(0),
function(b){b&&!0!==b.isDisposed&&b.callback(a)})},this)},getSubscriptionsCount:function(){var a=0,b;for(b in this._subscriptions)this._subscriptions.hasOwnProperty(b)&&(a+=this._subscriptions[b].length);return a},extend:function(a){var b=this;if(a)for(var c in a){var d=g.extenders[c];"function"==typeof d&&(b=d(b,a[c]))}return b}};g.isSubscribable=function(a){return"function"==typeof a.subscribe&&"function"==typeof a.notifySubscribers};g.exportSymbol("subscribable",g.subscribable);g.exportSymbol("isSubscribable",
g.isSubscribable);var u=[];g.dependencyDetection={begin:function(a){u.push({callback:a,distinctDependencies:[]})},end:function(){u.pop()},registerDependency:function(a){if(!g.isSubscribable(a))throw Error("Only subscribable things can act as dependencies");if(0<u.length){var b=u[u.length-1];b&&!(0<=g.utils.arrayIndexOf(b.distinctDependencies,a))&&(b.distinctDependencies.push(a),b.callback(a))}},ignore:function(a,b,c){try{return u.push(null),a.apply(b,c||[])}finally{u.pop()}}};var s={undefined:!0,
"boolean":!0,number:!0,string:!0};g.observable=function(a){function b(){if(0<arguments.length){if(!b.equalityComparer||!b.equalityComparer(d,arguments[0]))b.valueWillMutate(),d=arguments[0],c&&(b._latestValue=d),b.valueHasMutated();return this}g.dependencyDetection.registerDependency(b);return d}var d=a;c&&(b._latestValue=d);g.subscribable.call(b);b.peek=function(){return d};b.valueHasMutated=function(){b.notifySubscribers(d)};b.valueWillMutate=function(){b.notifySubscribers(d,"beforeChange")};g.utils.extend(b,
g.observable.fn);g.exportProperty(b,"peek",b.peek);g.exportProperty(b,"valueHasMutated",b.valueHasMutated);g.exportProperty(b,"valueWillMutate",b.valueWillMutate);return b};g.observable.fn={equalityComparer:function(a,b){return null===a||typeof a in s?a===b:!1}};var A=g.observable.protoProperty="__ko_proto__";g.observable.fn[A]=g.observable;g.hasPrototype=function(a,b){return null===a||a===f||a[A]===f?!1:a[A]===b?!0:g.hasPrototype(a[A],b)};g.isObservable=function(a){return g.hasPrototype(a,g.observable)};
g.isWriteableObservable=function(a){return"function"==typeof a&&a[A]===g.observable||"function"==typeof a&&a[A]===g.dependentObservable&&a.hasWriteFunction?!0:!1};g.exportSymbol("observable",g.observable);g.exportSymbol("isObservable",g.isObservable);g.exportSymbol("isWriteableObservable",g.isWriteableObservable);g.observableArray=function(a){0==arguments.length&&(a=[]);if(null!==a&&a!==f&&!("length"in a))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");
var b=g.observable(a);g.utils.extend(b,g.observableArray.fn);return b};g.observableArray.fn={remove:function(a){for(var b=this.peek(),c=[],d="function"==typeof a?a:function(b){return b===a},e=0;e<b.length;e++){var f=b[e];d(f)&&(0===c.length&&this.valueWillMutate(),c.push(f),b.splice(e,1),e--)}c.length&&this.valueHasMutated();return c},removeAll:function(a){if(a===f){var b=this.peek(),c=b.slice(0);this.valueWillMutate();b.splice(0,b.length);this.valueHasMutated();return c}return!a?[]:this.remove(function(b){return 0<=
g.utils.arrayIndexOf(a,b)})},destroy:function(a){var b=this.peek(),c="function"==typeof a?a:function(b){return b===a};this.valueWillMutate();for(var d=b.length-1;0<=d;d--)c(b[d])&&(b[d]._destroy=!0);this.valueHasMutated()},destroyAll:function(a){return a===f?this.destroy(function(){return!0}):!a?[]:this.destroy(function(b){return 0<=g.utils.arrayIndexOf(a,b)})},indexOf:function(a){var b=this();return g.utils.arrayIndexOf(b,a)},replace:function(a,b){var c=this.indexOf(a);0<=c&&(this.valueWillMutate(),
this.peek()[c]=b,this.valueHasMutated())}};g.utils.arrayForEach("pop push reverse shift sort splice unshift".split(" "),function(a){g.observableArray.fn[a]=function(){var b=this.peek();this.valueWillMutate();b=b[a].apply(b,arguments);this.valueHasMutated();return b}});g.utils.arrayForEach(["slice"],function(a){g.observableArray.fn[a]=function(){var b=this();return b[a].apply(b,arguments)}});g.exportSymbol("observableArray",g.observableArray);g.dependentObservable=function(a,b,d){function e(){g.utils.arrayForEach(r,
function(a){a.dispose()});r=[]}function h(){var a=n.throttleEvaluation;a&&0<=a?(clearTimeout(y),y=setTimeout(j,a)):j()}function j(){if(!p)if(m&&A())F();else{p=!0;try{var a=g.utils.arrayMap(r,function(a){return a.target});g.dependencyDetection.begin(function(b){var c;0<=(c=g.utils.arrayIndexOf(a,b))?a[c]=f:r.push(b.subscribe(h))});for(var d=s.call(b),e=a.length-1;0<=e;e--)a[e]&&r.splice(e,1)[0].dispose();m=!0;n.notifySubscribers(k,"beforeChange");k=d;c&&(n._latestValue=k)}finally{g.dependencyDetection.end()}n.notifySubscribers(k);
p=!1;r.length||F()}}function n(){if(0<arguments.length){if("function"===typeof u)u.apply(b,arguments);else throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return this}m||j();g.dependencyDetection.registerDependency(n);return k}function q(){return!m||0<r.length}var k,m=!1,p=!1,s=a;s&&"object"==typeof s?(d=s,s=d.read):(d=d||{},s||(s=d.read));if("function"!=typeof s)throw Error("Pass a function that returns the value of the ko.computed");
var u=d.write,M=d.disposeWhenNodeIsRemoved||d.disposeWhenNodeIsRemoved||null,A=d.disposeWhen||d.disposeWhen||function(){return!1},F=e,r=[],y=null;b||(b=d.owner);n.peek=function(){m||j();return k};n.getDependenciesCount=function(){return r.length};n.hasWriteFunction="function"===typeof d.write;n.dispose=function(){F()};n.isActive=q;g.subscribable.call(n);g.utils.extend(n,g.dependentObservable.fn);g.exportProperty(n,"peek",n.peek);g.exportProperty(n,"dispose",n.dispose);g.exportProperty(n,"isActive",
n.isActive);g.exportProperty(n,"getDependenciesCount",n.getDependenciesCount);!0!==d.deferEvaluation&&j();if(M&&q()){F=function(){g.utils.domNodeDisposal.removeDisposeCallback(M,arguments.callee);e()};g.utils.domNodeDisposal.addDisposeCallback(M,F);var B=A,A=function(){return!g.utils.domNodeIsAttachedToDocument(M)||B()}}return n};g.isComputed=function(a){return g.hasPrototype(a,g.dependentObservable)};h=g.observable.protoProperty;g.dependentObservable[h]=g.observable;g.dependentObservable.fn={};g.dependentObservable.fn[h]=
g.dependentObservable;g.exportSymbol("dependentObservable",g.dependentObservable);g.exportSymbol("computed",g.dependentObservable);g.exportSymbol("isComputed",g.isComputed);var y=function(a,b,c){c=c||new x;a=b(a);if(!("object"==typeof a&&null!==a&&a!==f&&!(a instanceof Date)))return a;var d=a instanceof Array?[]:{};c.save(a,d);var e=a,g=function(e){var g=b(a[e]);switch(typeof g){case "boolean":case "number":case "string":case "function":d[e]=g;break;case "object":case "undefined":var h=c.get(g);d[e]=
h!==f?h:y(g,b,c)}};if(e instanceof Array){for(var h=0;h<e.length;h++)g(h);"function"==typeof e.toJSON&&g("toJSON")}else for(h in e)g(h);return d},x=function(){var a=[],b=[];this.save=function(c,d){var e=g.utils.arrayIndexOf(a,c);0<=e?b[e]=d:(a.push(c),b.push(d))};this.get=function(c){c=g.utils.arrayIndexOf(a,c);return 0<=c?b[c]:f}};g.toJS=function(a){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return y(a,function(a){for(var b=0;g.isObservable(a)&&
10>b;b++)a=a();return a})};g.toJSON=function(a,b,c){a=g.toJS(a);return g.utils.stringifyJson(a,b,c)};g.exportSymbol("toJS",g.toJS);g.exportSymbol("toJSON",g.toJSON);g.selectExtensions={readValue:function(a){switch(g.utils.tagNameLower(a)){case "option":return!0===a.__ko__hasDomDataOptionValue__?g.utils.domData.get(a,g.bindingHandlers.options.optionValueDomDataKey):7>=g.utils.ieVersion?a.getAttributeNode("value").specified?a.value:a.text:a.value;case "select":return 0<=a.selectedIndex?g.selectExtensions.readValue(a.options[a.selectedIndex]):
f;default:return a.value}},writeValue:function(a,b){switch(g.utils.tagNameLower(a)){case "option":switch(typeof b){case "string":g.utils.domData.set(a,g.bindingHandlers.options.optionValueDomDataKey,f);"__ko__hasDomDataOptionValue__"in a&&delete a.__ko__hasDomDataOptionValue__;a.value=b;break;default:g.utils.domData.set(a,g.bindingHandlers.options.optionValueDomDataKey,b),a.__ko__hasDomDataOptionValue__=!0,a.value="number"===typeof b?b:""}break;case "select":for(var c=a.options.length-1;0<=c;c--)if(g.selectExtensions.readValue(a.options[c])==
b){a.selectedIndex=c;break}break;default:if(null===b||b===f)b="";a.value=b}}};g.exportSymbol("selectExtensions",g.selectExtensions);g.exportSymbol("selectExtensions.readValue",g.selectExtensions.readValue);g.exportSymbol("selectExtensions.writeValue",g.selectExtensions.writeValue);var v=function(a,b){for(var c=null;a!=c;)c=a,a=a.replace(C,function(a,c){return b[c]});return a},C=/\@ko_token_(\d+)\@/g,I=["true","false"],r=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i;g.expressionRewriting=
{bindingRewriteValidators:[],parseObjectLiteral:function(a){var b=g.utils.stringTrim(a);if(3>b.length)return[];"{"===b.charAt(0)&&(b=b.substring(1,b.length-1));a=[];for(var c=null,d,e=0;e<b.length;e++){var f=b.charAt(e);if(null===c)switch(f){case '"':case "'":case "/":c=e,d=f}else if(f==d&&"\\"!==b.charAt(e-1)){f=b.substring(c,e+1);a.push(f);var h="@ko_token_"+(a.length-1)+"@",b=b.substring(0,c)+h+b.substring(e+1),e=e-(f.length-h.length),c=null}}d=c=null;for(var j=0,n=null,e=0;e<b.length;e++){f=b.charAt(e);
if(null===c)switch(f){case "{":c=e;n=f;d="}";break;case "(":c=e;n=f;d=")";break;case "[":c=e,n=f,d="]"}f===n?j++:f===d&&(j--,0===j&&(f=b.substring(c,e+1),a.push(f),h="@ko_token_"+(a.length-1)+"@",b=b.substring(0,c)+h+b.substring(e+1),e-=f.length-h.length,c=null))}d=[];b=b.split(",");c=0;for(e=b.length;c<e;c++)n=b[c],f=n.indexOf(":"),0<f&&f<n.length-1?(j=n.substring(0,f),n=n.substring(f+1),d.push({key:v(j,a),value:v(n,a)})):d.push({unknown:v(n,a)});return d},preProcessBindings:function(a){var b="string"===
typeof a?g.expressionRewriting.parseObjectLiteral(a):a,c=[];a=[];for(var d,e=0;d=b[e];e++)if(0<c.length&&c.push(","),d.key){var f;a:{f=d.key;var h=g.utils.stringTrim(f);switch(h.length&&h.charAt(0)){case "'":case '"':break a;default:f="'"+h+"'"}}d=d.value;c.push(f);c.push(":");c.push(d);d=g.utils.stringTrim(d);0<=g.utils.arrayIndexOf(I,g.utils.stringTrim(d).toLowerCase())?d=!1:(h=d.match(r),d=null===h?!1:h[1]?"Object("+h[1]+")"+h[2]:d);d&&(0<a.length&&a.push(", "),a.push(f+" : function(__ko_value) { "+
d+" = __ko_value; }"))}else d.unknown&&c.push(d.unknown);b=c.join("");0<a.length&&(a=a.join(""),b=b+", '_ko_property_writers' : { "+a+" } ");return b},keyValueArrayContainsKey:function(a,b){for(var c=0;c<a.length;c++)if(g.utils.stringTrim(a[c].key)==b)return!0;return!1},writeValueToProperty:function(a,b,c,d,e){if(!a||!g.isWriteableObservable(a)){if((a=b()._ko_property_writers)&&a[c])a[c](d)}else(!e||a.peek()!==d)&&a(d)}};g.exportSymbol("expressionRewriting",g.expressionRewriting);g.exportSymbol("expressionRewriting.bindingRewriteValidators",
g.expressionRewriting.bindingRewriteValidators);g.exportSymbol("expressionRewriting.parseObjectLiteral",g.expressionRewriting.parseObjectLiteral);g.exportSymbol("expressionRewriting.preProcessBindings",g.expressionRewriting.preProcessBindings);g.exportSymbol("jsonExpressionRewriting",g.expressionRewriting);g.exportSymbol("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",g.expressionRewriting.preProcessBindings);var E=function(a){return 8==a.nodeType&&(B?a.text:a.nodeValue).match(K)},J=function(a){return 8==
a.nodeType&&(B?a.text:a.nodeValue).match(H)},D=function(a,b){for(var c=a,d=1,e=[];c=c.nextSibling;){if(J(c)&&(d--,0===d))return e;e.push(c);E(c)&&d++}if(!b)throw Error("Cannot find closing comment tag to match: "+a.nodeValue);return null},F=function(a,b){var c=D(a,b);return c?0<c.length?c[c.length-1].nextSibling:a.nextSibling:null},B="\x3c!--test--\x3e"===b.createComment("test").text,K=B?/^\x3c!--\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*--\x3e$/:/^\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*$/,H=B?/^\x3c!--\s*\/ko\s*--\x3e$/:
/^\s*\/ko\s*$/,L={ul:!0,ol:!0};g.virtualElements={allowedBindings:{},childNodes:function(a){return E(a)?D(a):a.childNodes},emptyNode:function(a){if(E(a)){a=g.virtualElements.childNodes(a);for(var b=0,c=a.length;b<c;b++)g.removeNode(a[b])}else g.utils.emptyDomNode(a)},setDomNodeChildren:function(a,b){if(E(a)){g.virtualElements.emptyNode(a);for(var c=a.nextSibling,d=0,e=b.length;d<e;d++)c.parentNode.insertBefore(b[d],c)}else g.utils.setDomNodeChildren(a,b)},prepend:function(a,b){E(a)?a.parentNode.insertBefore(b,
a.nextSibling):a.firstChild?a.insertBefore(b,a.firstChild):a.appendChild(b)},insertAfter:function(a,b,c){c?E(a)?a.parentNode.insertBefore(b,c.nextSibling):c.nextSibling?a.insertBefore(b,c.nextSibling):a.appendChild(b):g.virtualElements.prepend(a,b)},firstChild:function(a){return!E(a)?a.firstChild:!a.nextSibling||J(a.nextSibling)?null:a.nextSibling},nextSibling:function(a){E(a)&&(a=F(a));return a.nextSibling&&J(a.nextSibling)?null:a.nextSibling},virtualNodeBindingValue:function(a){return(a=E(a))?a[1]:
null},normaliseVirtualElementDomStructure:function(a){if(L[g.utils.tagNameLower(a)]){var b=a.firstChild;if(b){do if(1===b.nodeType){var c;c=b.firstChild;var d=null;if(c){do if(d)d.push(c);else if(E(c)){var e=F(c,!0);e?c=e:d=[c]}else J(c)&&(d=[c]);while(c=c.nextSibling)}if(c=d){d=b.nextSibling;for(e=0;e<c.length;e++)d?a.insertBefore(c[e],d):a.appendChild(c[e])}}while(b=b.nextSibling)}}}};g.exportSymbol("virtualElements",g.virtualElements);g.exportSymbol("virtualElements.allowedBindings",g.virtualElements.allowedBindings);
g.exportSymbol("virtualElements.emptyNode",g.virtualElements.emptyNode);g.exportSymbol("virtualElements.insertAfter",g.virtualElements.insertAfter);g.exportSymbol("virtualElements.prepend",g.virtualElements.prepend);g.exportSymbol("virtualElements.setDomNodeChildren",g.virtualElements.setDomNodeChildren);g.bindingProvider=function(){this.bindingCache={}};g.utils.extend(g.bindingProvider.prototype,{nodeHasBindings:function(a){switch(a.nodeType){case 1:return null!=a.getAttribute("data-bind");case 8:return null!=
g.virtualElements.virtualNodeBindingValue(a);default:return!1}},getBindings:function(a,b){var c=this.getBindingsString(a,b);return c?this.parseBindingsString(c,b,a):null},getBindingsString:function(a){switch(a.nodeType){case 1:return a.getAttribute("data-bind");case 8:return g.virtualElements.virtualNodeBindingValue(a);default:return null}},parseBindingsString:function(a,b,c){try{var d;if(!(d=this.bindingCache[a])){var e=this.bindingCache,f,h="with($context){with($data||{}){return{"+g.expressionRewriting.preProcessBindings(a)+
"}}}";f=new Function("$context","$element",h);d=e[a]=f}return d(b,c)}catch(j){throw Error("Unable to parse bindings.\nMessage: "+j+";\nBindings value: "+a);}}});g.bindingProvider.instance=new g.bindingProvider;g.exportSymbol("bindingProvider",g.bindingProvider);var P=function(a,b,c){for(var d=g.virtualElements.firstChild(b);b=d;)d=g.virtualElements.nextSibling(b),N(a,b,c)},N=function(a,b,c){var d=!0,e=1===b.nodeType;e&&g.virtualElements.normaliseVirtualElementDomStructure(b);if(e&&c||g.bindingProvider.instance.nodeHasBindings(b))d=
O(b,null,a,c).shouldBindDescendants;d&&P(a,b,!e)},O=function(a,b,c,d){function e(a){return function(){return n[a]}}function h(){return n}var j=0,n,q;g.dependentObservable(function(){var k=c&&c instanceof g.bindingContext?c:new g.bindingContext(g.utils.unwrapObservable(c)),m=k.$data;d&&g.storedBindingContextForNode(a,k);if(n=("function"==typeof b?b(k,a):b)||g.bindingProvider.instance.getBindings(a,k)){if(0===j){j=1;for(var p in n){var s=g.bindingHandlers[p];if(s&&8===a.nodeType&&!g.virtualElements.allowedBindings[p])throw Error("The binding '"+
p+"' cannot be used with virtual elements");if(s&&"function"==typeof s.init&&(s=(0,s.init)(a,e(p),h,m,k))&&s.controlsDescendantBindings){if(q!==f)throw Error("Multiple bindings ("+q+" and "+p+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");q=p}}j=2}if(2===j)for(p in n)(s=g.bindingHandlers[p])&&"function"==typeof s.update&&(0,s.update)(a,e(p),h,m,k)}},null,{disposeWhenNodeIsRemoved:a});return{shouldBindDescendants:q===
f}};g.bindingHandlers={};g.bindingContext=function(a,b,c){b?(g.utils.extend(this,b),this.$parentContext=b,this.$parent=b.$data,this.$parents=(b.$parents||[]).slice(0),this.$parents.unshift(this.$parent)):(this.$parents=[],this.$root=a,this.ko=g);this.$data=a;c&&(this[c]=a)};g.bindingContext.prototype.createChildContext=function(a,b){return new g.bindingContext(a,this,b)};g.bindingContext.prototype.extend=function(a){var b=g.utils.extend(new g.bindingContext,this);return g.utils.extend(b,a)};g.storedBindingContextForNode=
function(a,b){if(2==arguments.length)g.utils.domData.set(a,"__ko_bindingContext__",b);else return g.utils.domData.get(a,"__ko_bindingContext__")};g.applyBindingsToNode=function(a,b,c){1===a.nodeType&&g.virtualElements.normaliseVirtualElementDomStructure(a);return O(a,b,c,!0)};g.applyBindingsToDescendants=function(a,b){(1===b.nodeType||8===b.nodeType)&&P(a,b,!0)};g.applyBindings=function(b,c){if(c&&1!==c.nodeType&&8!==c.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");
c=c||a.document.body;N(b,c,!0)};g.contextFor=function(a){switch(a.nodeType){case 1:case 8:var b=g.storedBindingContextForNode(a);if(b)return b;if(a.parentNode)return g.contextFor(a.parentNode)}return f};g.dataFor=function(a){return(a=g.contextFor(a))?a.$data:f};g.exportSymbol("bindingHandlers",g.bindingHandlers);g.exportSymbol("applyBindings",g.applyBindings);g.exportSymbol("applyBindingsToDescendants",g.applyBindingsToDescendants);g.exportSymbol("applyBindingsToNode",g.applyBindingsToNode);g.exportSymbol("contextFor",
g.contextFor);g.exportSymbol("dataFor",g.dataFor);var G={"class":"className","for":"htmlFor"};g.bindingHandlers.attr={update:function(a,b){var c=g.utils.unwrapObservable(b())||{},d;for(d in c)if("string"==typeof d){var e=g.utils.unwrapObservable(c[d]),h=!1===e||null===e||e===f;h&&a.removeAttribute(d);8>=g.utils.ieVersion&&d in G?(d=G[d],h?a.removeAttribute(d):a[d]=e):h||a.setAttribute(d,e.toString());"name"===d&&g.utils.setElementName(a,h?"":e.toString())}}};g.bindingHandlers.checked={init:function(a,
b,c){g.utils.registerEventHandler(a,"click",function(){var d;if("checkbox"==a.type)d=a.checked;else if("radio"==a.type&&a.checked)d=a.value;else return;var e=b(),f=g.utils.unwrapObservable(e);"checkbox"==a.type&&f instanceof Array?(d=g.utils.arrayIndexOf(f,a.value),a.checked&&0>d?e.push(a.value):!a.checked&&0<=d&&e.splice(d,1)):g.expressionRewriting.writeValueToProperty(e,c,"checked",d,!0)});"radio"==a.type&&!a.name&&g.bindingHandlers.uniqueName.init(a,function(){return!0})},update:function(a,b){var c=
g.utils.unwrapObservable(b());"checkbox"==a.type?a.checked=c instanceof Array?0<=g.utils.arrayIndexOf(c,a.value):c:"radio"==a.type&&(a.checked=a.value==c)}};g.bindingHandlers.css={update:function(a,b){var c=g.utils.unwrapObservable(b());if("object"==typeof c)for(var d in c){var e=g.utils.unwrapObservable(c[d]);g.utils.toggleDomNodeCssClass(a,d,e)}else c=String(c||""),g.utils.toggleDomNodeCssClass(a,a.__ko__cssValue,!1),a.__ko__cssValue=c,g.utils.toggleDomNodeCssClass(a,c,!0)}};g.bindingHandlers.enable=
{update:function(a,b){var c=g.utils.unwrapObservable(b());c&&a.disabled?a.removeAttribute("disabled"):!c&&!a.disabled&&(a.disabled=!0)}};g.bindingHandlers.disable={update:function(a,b){g.bindingHandlers.enable.update(a,function(){return!g.utils.unwrapObservable(b())})}};g.bindingHandlers.event={init:function(a,b,c,d){var e=b()||{},f;for(f in e)(function(){var e=f;"string"==typeof e&&g.utils.registerEventHandler(a,e,function(a){var f,h=b()[e];if(h){var j=c();try{var n=g.utils.makeArray(arguments);
n.unshift(d);f=h.apply(d,n)}finally{!0!==f&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}!1===j[e+"Bubble"]&&(a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation())}})})()}};g.bindingHandlers.foreach={makeTemplateValueAccessor:function(a){return function(){var b=a(),c=g.utils.peekObservable(b);if(!c||"number"==typeof c.length)return{foreach:b,templateEngine:g.nativeTemplateEngine.instance};g.utils.unwrapObservable(b);return{foreach:c.data,as:c.as,includeDestroyed:c.includeDestroyed,afterAdd:c.afterAdd,
beforeRemove:c.beforeRemove,afterRender:c.afterRender,beforeMove:c.beforeMove,afterMove:c.afterMove,templateEngine:g.nativeTemplateEngine.instance}}},init:function(a,b){return g.bindingHandlers.template.init(a,g.bindingHandlers.foreach.makeTemplateValueAccessor(b))},update:function(a,b,c,d,e){return g.bindingHandlers.template.update(a,g.bindingHandlers.foreach.makeTemplateValueAccessor(b),c,d,e)}};g.expressionRewriting.bindingRewriteValidators.foreach=!1;g.virtualElements.allowedBindings.foreach=
!0;g.bindingHandlers.hasfocus={init:function(a,b,c){var d=function(d){a.__ko_hasfocusUpdating=!0;var e=a.ownerDocument;"activeElement"in e&&(d=e.activeElement===a);e=b();g.expressionRewriting.writeValueToProperty(e,c,"hasfocus",d,!0);a.__ko_hasfocusLastValue=d;a.__ko_hasfocusUpdating=!1},e=d.bind(null,!0),d=d.bind(null,!1);g.utils.registerEventHandler(a,"focus",e);g.utils.registerEventHandler(a,"focusin",e);g.utils.registerEventHandler(a,"blur",d);g.utils.registerEventHandler(a,"focusout",d)},update:function(a,
b){var c=!!g.utils.unwrapObservable(b());!a.__ko_hasfocusUpdating&&a.__ko_hasfocusLastValue!==c&&(c?a.focus():a.blur(),g.dependencyDetection.ignore(g.utils.triggerEvent,null,[a,c?"focusin":"focusout"]))}};g.bindingHandlers.hasFocus=g.bindingHandlers.hasfocus;g.bindingHandlers.html={init:function(){return{controlsDescendantBindings:!0}},update:function(a,b){g.utils.setHtml(a,b())}};var M="__ko_withIfBindingData";m("if");m("ifnot",!1,!0);m("with",!0,!1,function(a,b){return a.createChildContext(b)});
g.bindingHandlers.options={update:function(a,c,d){if("select"!==g.utils.tagNameLower(a))throw Error("options binding applies only to SELECT elements");for(var e=0==a.length,h=g.utils.arrayMap(g.utils.arrayFilter(a.childNodes,function(a){return a.tagName&&"option"===g.utils.tagNameLower(a)&&a.selected}),function(a){return g.selectExtensions.readValue(a)||a.innerText||a.textContent}),j=a.scrollTop,n=g.utils.unwrapObservable(c());0<a.length;)g.cleanNode(a.options[0]),a.remove(0);if(n){d=d();var q=d.optionsIncludeDestroyed;
"number"!=typeof n.length&&(n=[n]);if(d.optionsCaption){var k=b.createElement("option");g.utils.setHtml(k,d.optionsCaption);g.selectExtensions.writeValue(k,f);a.appendChild(k)}c=0;for(var m=n.length;c<m;c++){var s=n[c];if(!s||!s._destroy||q){var k=b.createElement("option"),u=function(a,b,c){var d=typeof b;return"function"==d?b(a):"string"==d?a[b]:c},M=u(s,d.optionsValue,s);g.selectExtensions.writeValue(k,g.utils.unwrapObservable(M));s=u(s,d.optionsText,M);g.utils.setTextContent(k,s);a.appendChild(k)}}n=
a.getElementsByTagName("option");c=q=0;for(m=n.length;c<m;c++)0<=g.utils.arrayIndexOf(h,g.selectExtensions.readValue(n[c]))&&(g.utils.setOptionNodeSelectionState(n[c],!0),q++);a.scrollTop=j;e&&"value"in d&&p(a,g.utils.peekObservable(d.value),!0);g.utils.ensureSelectElementIsRenderedCorrectly(a)}}};g.bindingHandlers.options.optionValueDomDataKey="__ko.optionValueDomData__";g.bindingHandlers.selectedOptions={init:function(a,b,c){g.utils.registerEventHandler(a,"change",function(){var d=b(),e=[];g.utils.arrayForEach(a.getElementsByTagName("option"),
function(a){a.selected&&e.push(g.selectExtensions.readValue(a))});g.expressionRewriting.writeValueToProperty(d,c,"value",e)})},update:function(a,b){if("select"!=g.utils.tagNameLower(a))throw Error("values binding applies only to SELECT elements");var c=g.utils.unwrapObservable(b());c&&"number"==typeof c.length&&g.utils.arrayForEach(a.getElementsByTagName("option"),function(a){var b=0<=g.utils.arrayIndexOf(c,g.selectExtensions.readValue(a));g.utils.setOptionNodeSelectionState(a,b)})}};g.bindingHandlers.style=
{update:function(a,b){var c=g.utils.unwrapObservable(b()||{}),d;for(d in c)if("string"==typeof d){var e=g.utils.unwrapObservable(c[d]);a.style[d]=e||""}}};g.bindingHandlers.submit={init:function(a,b,c,d){if("function"!=typeof b())throw Error("The value for a submit binding must be a function");g.utils.registerEventHandler(a,"submit",function(c){var e,f=b();try{e=f.call(d,a)}finally{!0!==e&&(c.preventDefault?c.preventDefault():c.returnValue=!1)}})}};g.bindingHandlers.text={update:function(a,b){g.utils.setTextContent(a,
b())}};g.virtualElements.allowedBindings.text=!0;g.bindingHandlers.uniqueName={init:function(a,b){if(b()){var c="ko_unique_"+ ++g.bindingHandlers.uniqueName.currentIndex;g.utils.setElementName(a,c)}}};g.bindingHandlers.uniqueName.currentIndex=0;g.bindingHandlers.value={init:function(a,b,c){var d=["change"],e=c().valueUpdate,f=!1;e&&("string"==typeof e&&(e=[e]),g.utils.arrayPushAll(d,e),d=g.utils.arrayGetDistinctValues(d));var h=function(){f=!1;var d=b(),e=g.selectExtensions.readValue(a);g.expressionRewriting.writeValueToProperty(d,
c,"value",e)};if(g.utils.ieVersion&&("input"==a.tagName.toLowerCase()&&"text"==a.type&&"off"!=a.autocomplete&&(!a.form||"off"!=a.form.autocomplete))&&-1==g.utils.arrayIndexOf(d,"propertychange"))g.utils.registerEventHandler(a,"propertychange",function(){f=!0}),g.utils.registerEventHandler(a,"blur",function(){f&&h()});g.utils.arrayForEach(d,function(b){var c=h;g.utils.stringStartsWith(b,"after")&&(c=function(){setTimeout(h,0)},b=b.substring(5));g.utils.registerEventHandler(a,b,c)})},update:function(a,
b){var c="select"===g.utils.tagNameLower(a),d=g.utils.unwrapObservable(b()),e=g.selectExtensions.readValue(a),f=d!=e;0===d&&(0!==e&&"0"!==e)&&(f=!0);f&&(e=function(){g.selectExtensions.writeValue(a,d)},e(),c&&setTimeout(e,0));c&&0<a.length&&p(a,d,!1)}};g.bindingHandlers.visible={update:function(a,b){var c=g.utils.unwrapObservable(b()),d="none"!=a.style.display;c&&!d?a.style.display="":!c&&d&&(a.style.display="none")}};g.bindingHandlers.click={init:function(a,b,c,d){return g.bindingHandlers.event.init.call(this,
a,function(){var a={};a.click=b();return a},c,d)}};g.templateEngine=function(){};g.templateEngine.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource");};g.templateEngine.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock");};g.templateEngine.prototype.makeTemplateSource=function(a,c){if("string"==typeof a){c=c||b;var d=c.getElementById(a);if(!d)throw Error("Cannot find template with ID "+a);return new g.templateSources.domElement(d)}if(1==
a.nodeType||8==a.nodeType)return new g.templateSources.anonymousTemplate(a);throw Error("Unknown template type: "+a);};g.templateEngine.prototype.renderTemplate=function(a,b,c,d){a=this.makeTemplateSource(a,d);return this.renderTemplateSource(a,b,c)};g.templateEngine.prototype.isTemplateRewritten=function(a,b){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(a,b).data("isRewritten")};g.templateEngine.prototype.rewriteTemplate=function(a,b,c){a=this.makeTemplateSource(a,c);b=b(a.text());
a.text(b);a.data("isRewritten",!0)};g.exportSymbol("templateEngine",g.templateEngine);var R=function(a,b,c){a=g.expressionRewriting.parseObjectLiteral(a);for(var d=g.expressionRewriting.bindingRewriteValidators,e=0;e<a.length;e++){var f=a[e].key;if(d.hasOwnProperty(f)){var h=d[f];if("function"===typeof h){if(f=h(a[e].value))throw Error(f);}else if(!h)throw Error("This template engine does not support the '"+f+"' binding within its templates");}}a="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+
g.expressionRewriting.preProcessBindings(a)+" } })()})";return c.createJavaScriptEvaluatorBlock(a)+b},ga=/(<[a-z]+\d*(\s+(?!data-bind=)[a-z0-9\-]+(=(\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind=(["'])([\s\S]*?)\5/gi,la=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;g.templateRewriting={ensureTemplateIsRewritten:function(a,b,c){b.isTemplateRewritten(a,c)||b.rewriteTemplate(a,function(a){return g.templateRewriting.memoizeBindingAttributeSyntax(a,b)},c)},memoizeBindingAttributeSyntax:function(a,b){return a.replace(ga,
function(a,c,d,e,f,g,h){return R(h,c,b)}).replace(la,function(a,c){return R(c,"\x3c!-- ko --\x3e",b)})},applyMemoizedBindingsToNextSibling:function(a){return g.memoization.memoize(function(b,c){b.nextSibling&&g.applyBindingsToNode(b.nextSibling,a,c)})}};g.exportSymbol("__tr_ambtns",g.templateRewriting.applyMemoizedBindingsToNextSibling);g.templateSources={};g.templateSources.domElement=function(a){this.domElement=a};g.templateSources.domElement.prototype.text=function(){var a=g.utils.tagNameLower(this.domElement),
a="script"===a?"text":"textarea"===a?"value":"innerHTML";if(0==arguments.length)return this.domElement[a];var b=arguments[0];"innerHTML"===a?g.utils.setHtml(this.domElement,b):this.domElement[a]=b};g.templateSources.domElement.prototype.data=function(a){if(1===arguments.length)return g.utils.domData.get(this.domElement,"templateSourceData_"+a);g.utils.domData.set(this.domElement,"templateSourceData_"+a,arguments[1])};g.templateSources.anonymousTemplate=function(a){this.domElement=a};g.templateSources.anonymousTemplate.prototype=
new g.templateSources.domElement;g.templateSources.anonymousTemplate.prototype.text=function(){if(0==arguments.length){var a=g.utils.domData.get(this.domElement,"__ko_anon_template__")||{};a.textData===f&&a.containerData&&(a.textData=a.containerData.innerHTML);return a.textData}g.utils.domData.set(this.domElement,"__ko_anon_template__",{textData:arguments[0]})};g.templateSources.domElement.prototype.nodes=function(){if(0==arguments.length)return(g.utils.domData.get(this.domElement,"__ko_anon_template__")||
{}).containerData;g.utils.domData.set(this.domElement,"__ko_anon_template__",{containerData:arguments[0]})};g.exportSymbol("templateSources",g.templateSources);g.exportSymbol("templateSources.domElement",g.templateSources.domElement);g.exportSymbol("templateSources.anonymousTemplate",g.templateSources.anonymousTemplate);var Y=function(a,b,c){var d;for(b=g.virtualElements.nextSibling(b);a&&(d=a)!==b;)a=g.virtualElements.nextSibling(d),(1===d.nodeType||8===d.nodeType)&&c(d)},Z=function(a,b){if(a.length){var c=
a[0],d=a[a.length-1];Y(c,d,function(a){g.applyBindings(b,a)});Y(c,d,function(a){g.memoization.unmemoizeDomNodeAndDescendants(a,[b])})}},ia=function(a){return a.nodeType?a:0<a.length?a[0]:null},aa=function(a,b,c,d,e){e=e||{};var f=a&&ia(a),f=f&&f.ownerDocument,h=e.templateEngine||ma;g.templateRewriting.ensureTemplateIsRewritten(c,h,f);c=h.renderTemplate(c,d,e,f);if("number"!=typeof c.length||0<c.length&&"number"!=typeof c[0].nodeType)throw Error("Template engine must return an array of DOM nodes");
f=!1;switch(b){case "replaceChildren":g.virtualElements.setDomNodeChildren(a,c);f=!0;break;case "replaceNode":g.utils.replaceDomNodes(a,c);f=!0;break;case "ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+b);}f&&(Z(c,d),e.afterRender&&g.dependencyDetection.ignore(e.afterRender,null,[c,d.$data]));return c},ma;g.setTemplateEngine=function(a){if(a!=f&&!(a instanceof g.templateEngine))throw Error("templateEngine must inherit from ko.templateEngine");ma=a};g.renderTemplate=function(a,
b,c,d,e){c=c||{};if((c.templateEngine||ma)==f)throw Error("Set a template engine before calling renderTemplate");e=e||"replaceChildren";if(d){var h=ia(d);return g.dependentObservable(function(){var f=b&&b instanceof g.bindingContext?b:new g.bindingContext(g.utils.unwrapObservable(b)),n="function"==typeof a?a(f.$data,f):a,f=aa(d,e,n,f,c);"replaceNode"==e&&(d=f,h=ia(d))},null,{disposeWhen:function(){return!h||!g.utils.domNodeIsAttachedToDocument(h)},disposeWhenNodeIsRemoved:h&&"replaceNode"==e?h.parentNode:
h})}return g.memoization.memoize(function(d){g.renderTemplate(a,b,c,d,"replaceNode")})};g.renderTemplateForEach=function(a,b,c,d,e){var h,n=g.dependentObservable(function(){return(g.utils.unwrapObservable(b)||[]).length},null,{disposeWhenNodeIsRemoved:d}),j=function(b,d){h=e.createChildContext(g.utils.unwrapObservable(b),c.as);h.$index=d;h.$length=n;var f="function"==typeof a?a(b,h):a;return aa(null,"ignoreTargetNode",f,h,c)},q=function(a,b){Z(b,h);c.afterRender&&c.afterRender(b,a)};return g.dependentObservable(function(){var a=
g.utils.unwrapObservable(b)||[];"undefined"==typeof a.length&&(a=[a]);a=g.utils.arrayFilter(a,function(a){return c.includeDestroyed||a===f||null===a||!g.utils.unwrapObservable(a._destroy)});g.dependencyDetection.ignore(g.utils.setDomNodeChildrenFromArrayMapping,null,[d,a,j,c,q])},null,{disposeWhenNodeIsRemoved:d})};g.bindingHandlers.template={init:function(a,b){var c=g.utils.unwrapObservable(b());if("string"!=typeof c&&!c.name&&(1==a.nodeType||8==a.nodeType))c=1==a.nodeType?a.childNodes:g.virtualElements.childNodes(a),
c=g.utils.moveCleanedNodesToContainerElement(c),(new g.templateSources.anonymousTemplate(a)).nodes(c);return{controlsDescendantBindings:!0}},update:function(a,b,c,d,e){b=g.utils.unwrapObservable(b());c={};d=!0;var h,n=null;"string"!=typeof b&&(c=b,b=c.name,"if"in c&&(d=g.utils.unwrapObservable(c["if"])),d&&"ifnot"in c&&(d=!g.utils.unwrapObservable(c.ifnot)),h=g.utils.unwrapObservable(c.data));"foreach"in c?n=g.renderTemplateForEach(b||a,d&&c.foreach||[],c,a,e):d?(e="data"in c?e.createChildContext(h,
c.as):e,n=g.renderTemplate(b||a,e,c,a)):g.virtualElements.emptyNode(a);e=n;(h=g.utils.domData.get(a,"__ko__templateComputedDomDataKey__"))&&"function"==typeof h.dispose&&h.dispose();g.utils.domData.set(a,"__ko__templateComputedDomDataKey__",e&&e.isActive()?e:f)}};g.expressionRewriting.bindingRewriteValidators.template=function(a){a=g.expressionRewriting.parseObjectLiteral(a);return 1==a.length&&a[0].unknown||g.expressionRewriting.keyValueArrayContainsKey(a,"name")?null:"This template engine does not support anonymous templates nested within its templates"};
g.virtualElements.allowedBindings.template=!0;g.exportSymbol("setTemplateEngine",g.setTemplateEngine);g.exportSymbol("renderTemplate",g.renderTemplate);var da=function(a,b,c,d,e){var f=Math.min,g=Math.max,h=[],n,j=a.length,q,k=b.length,m=k-j||1,p=j+k+1,s,u,M;for(n=0;n<=j;n++){u=s;h.push(s=[]);M=f(k,n+m);for(q=g(0,n-1);q<=M;q++)s[q]=q?n?a[n-1]===b[q-1]?u[q-1]:f(u[q]||p,s[q-1]||p)+1:q+1:n+1}f=[];g=[];m=[];n=j;for(q=k;n||q;)k=h[n][q]-1,q&&k===h[n][q-1]?g.push(f[f.length]={status:c,value:b[--q],index:q}):
n&&k===h[n-1][q]?m.push(f[f.length]={status:d,value:a[--n],index:n}):(f.push({status:"retained",value:b[--q]}),--n);if(g.length&&m.length){a=10*j;var A;for(b=c=0;(e||b<a)&&(A=g[c]);c++){for(d=0;h=m[d];d++)if(A.value===h.value){A.moved=h.index;h.moved=A.index;m.splice(d,1);b=d=0;break}b+=d}}return f.reverse()};g.utils.compareArrays=function(a,b,c){a=a||[];b=b||[];return a.length<=b.length?da(a,b,"added","deleted",c):da(b,a,"deleted","added",c)};g.exportSymbol("utils.compareArrays",g.utils.compareArrays);
var k=function(a){for(;a.length&&!g.utils.domNodeIsAttachedToDocument(a[0]);)a.splice(0,1);if(1<a.length){for(var b=a[0],c=a[a.length-1],d=[b];b!==c;){b=b.nextSibling;if(!b)return;d.push(b)}Array.prototype.splice.apply(a,[0,a.length].concat(d))}return a},ea=function(a,b,c,d,e){var h=[];a=g.dependentObservable(function(){var a=b(c,e)||[];0<h.length&&(g.utils.replaceDomNodes(k(h),a),d&&g.dependencyDetection.ignore(d,null,[c,a,e]));h.splice(0,h.length);g.utils.arrayPushAll(h,a)},null,{disposeWhenNodeIsRemoved:a,
disposeWhen:function(){return!g.utils.anyDomNodeIsAttachedToDocument(h)}});return{mappedNodes:h,dependentObservable:a.isActive()?a:f}};g.utils.setDomNodeChildrenFromArrayMapping=function(a,b,c,d,e){function h(a,b){y=q[b];M!==b&&(r[a]=y);y.indexObservable(M++);k(y.mappedNodes);s.push(y);F.push(y)}function n(a,b){if(a)for(var c=0,d=b.length;c<d;c++)b[c]&&g.utils.arrayForEach(b[c].mappedNodes,function(d){a(d,c,b[c].arrayEntry)})}b=b||[];d=d||{};var j=g.utils.domData.get(a,"setDomNodeChildrenFromArrayMapping_lastMappingResult")===
f,q=g.utils.domData.get(a,"setDomNodeChildrenFromArrayMapping_lastMappingResult")||[],m=g.utils.arrayMap(q,function(a){return a.arrayEntry}),p=g.utils.compareArrays(m,b),s=[],u=0,M=0,A=[],F=[];b=[];for(var r=[],m=[],y,B=0,R,x;R=p[B];B++)switch(x=R.moved,R.status){case "deleted":x===f&&(y=q[u],y.dependentObservable&&y.dependentObservable.dispose(),A.push.apply(A,k(y.mappedNodes)),d.beforeRemove&&(b[B]=y,F.push(y)));u++;break;case "retained":h(B,u++);break;case "added":x!==f?h(B,x):(y={arrayEntry:R.value,
indexObservable:g.observable(M++)},s.push(y),F.push(y),j||(m[B]=y))}n(d.beforeMove,r);g.utils.arrayForEach(A,d.beforeRemove?g.cleanNode:g.removeNode);for(var B=0,j=g.virtualElements.firstChild(a),v;y=F[B];B++){y.mappedNodes||g.utils.extend(y,ea(a,c,y.arrayEntry,e,y.indexObservable));for(u=0;p=y.mappedNodes[u];j=p.nextSibling,v=p,u++)p!==j&&g.virtualElements.insertAfter(a,p,v);!y.initialized&&e&&(e(y.arrayEntry,y.mappedNodes,y.indexObservable),y.initialized=!0)}n(d.beforeRemove,b);n(d.afterMove,r);
n(d.afterAdd,m);g.utils.domData.set(a,"setDomNodeChildrenFromArrayMapping_lastMappingResult",s)};g.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",g.utils.setDomNodeChildrenFromArrayMapping);g.nativeTemplateEngine=function(){this.allowTemplateRewriting=!1};g.nativeTemplateEngine.prototype=new g.templateEngine;g.nativeTemplateEngine.prototype.renderTemplateSource=function(a){var b=!(9>g.utils.ieVersion)&&a.nodes?a.nodes():null;if(b)return g.utils.makeArray(b.cloneNode(!0).childNodes);a=a.text();
return g.utils.parseHtmlFragment(a)};g.nativeTemplateEngine.instance=new g.nativeTemplateEngine;g.setTemplateEngine(g.nativeTemplateEngine.instance);g.exportSymbol("nativeTemplateEngine",g.nativeTemplateEngine);g.jqueryTmplTemplateEngine=function(){var a=this.jQueryTmplVersion=function(){if("undefined"==typeof e||!e.tmpl)return 0;try{if(0<=e.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(a){}return 1}();this.renderTemplateSource=function(c,d,f){f=f||{};if(2>a)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");
var g=c.data("precompiled");g||(g=c.text()||"",g=e.template(null,"{{ko_with $item.koBindingContext}}"+g+"{{/ko_with}}"),c.data("precompiled",g));c=[d.$data];d=e.extend({koBindingContext:d},f.templateOptions);d=e.tmpl(g,c,d);d.appendTo(b.createElement("div"));e.fragments={};return d};this.createJavaScriptEvaluatorBlock=function(a){return"{{ko_code ((function() { return "+a+" })()) }}"};this.addTemplate=function(a,c){b.write("<script type='text/html' id='"+a+"'>"+c+"\x3c/script>")};0<a&&(e.tmpl.tag.ko_code=
{open:"__.push($1 || '');"},e.tmpl.tag.ko_with={open:"with($1) {",close:"} "})};g.jqueryTmplTemplateEngine.prototype=new g.templateEngine;h=new g.jqueryTmplTemplateEngine;0<h.jQueryTmplVersion&&g.setTemplateEngine(h);g.exportSymbol("jqueryTmplTemplateEngine",g.jqueryTmplTemplateEngine)};"function"===typeof require&&"object"===typeof exports&&"object"===typeof module?h(module.exports||exports):"function"===typeof define&&define.amd?define(["exports"],h):h(a.ko={});!0})();
(function(c){"function"===typeof define&&define.amd?define(["knockout"],c):c(window.ko)})(function(c){c.bindingFlags||(c.bindingFlags={});var a;a:{var b=c.observable.fn,d=c.observable,e;for(e in b)if(b.hasOwnProperty(e)&&b[e]===d){a=e;break a}a=void 0}c.bindingHandlers.repeat={flags:c.bindingFlags.contentBind,init:function(b,d,e,m,p){if((e=c.utils.unwrapObservable(d()))&&"object"==typeof e&&!("length"in e))var g=e.index,n=e.item,q=e.step,u=e.reverse,s=e.bind,A=e.init,y=e.update;g=g||"$index";n=n||
c.bindingHandlers.repeat.itemName||"$item";q=q||1;u=u||!1;c.cleanNode(b);b.removeAttribute("data-bind");s||(s=b.getAttribute("data-repeat-bind"))&&b.removeAttribute("data-repeat-bind");var x=b.cloneNode(!0);"string"==typeof s&&(x.setAttribute("data-bind",s),s=null);var v=b.parentNode,C=document.createComment("ko_repeatplaceholder");v.replaceChild(C,b);var I=0,r=c.observable(),E;A&&A(v);return{controlsDescendantBindings:!0,subscribable:c.dependentObservable(function(){function b(d){var e=function(a){var b=
E[d];if(arguments.length){if(c.isObservable(b))return b(a);E[d]=a}else return r(),c.utils.unwrapObservable(b)};e[a]=c.observable;return e}function e(a,b,c){return E?function(){return s.call(m,a,b,c)}:function(){return s.call(m,b,c)}}var f=c.utils.unwrapObservable(d()),j=0;f&&"object"==typeof f?"length"in f?(E=f,j=E.length):("foreach"in f&&(j=(E=c.utils.unwrapObservable(f.foreach))&&E.length||0),"count"in f&&(j=c.utils.unwrapObservable(f.count)||j),"limit"in f&&(j=Math.min(j,c.utils.unwrapObservable(f.limit))||
j)):j=f||0;for(;I>j;I-=q)c.removeNode(u?C.nextSibling:C.previousSibling);for(r.notifySubscribers();I<j;I+=q){f=x.cloneNode(!0);v.insertBefore(f,u?C.nextSibling:C);f.setAttribute("data-repeat-index",I);if(E&&"$data"==n)var A=p.createChildContext(b(I));else A=p.extend?p.extend():c.utils.extend(new p.constructor,p),E&&(A[n]=b(I));A[g]=I;if(s)var H=c.applyBindingsToNode(f,e(A[n],I,A),A,!0),L=H&&H.shouldBindDescendants;(!s||H&&!1!==L)&&c.applyBindings(A,f)}y&&y(v)},null,{disposeWhenNodeIsRemoved:C})}}}});
(function(c,a){function b(a,b){for(var c in a)if(a.hasOwnProperty(c)&&0<=a[c].toString().indexOf(b))return c}function d(a,b){for(var c in a)if(a.hasOwnProperty(c)&&a[c]===b)return c}var e=function(b){try{for(var c=b||0;c<m.length;c++){g=c;var d=m[c],e=d.evaluator;d.processed||(d.processed=!0,e.apply(d.object,d.args||[]))}}finally{b?m.splice(b,m.length):(m=[],j=a),g=a}},f=function(){e()},h=window.setImmediate?"setImmediate":"setTimeout",j,m=[],p=[],g,n={processImmediate:function(a,b,c){p.push(m.length);
try{return a.apply(b,c||[])}finally{a=p.pop(),m.length>a&&e(a)}},processDelayed:function(b,d,e){if(d=d||d===a)a:{d=g||(p.length?p[p.length-1]:0);for(var n=m.length;d<n;d++)if(m[d].evaluator==b&&!m[d].processed){e&&c.utils.extend(m[d],e);d=!0;break a}d=!1}if(d)return!1;m.push(c.utils.extend({evaluator:b},e||{}));!p.length&&!j&&(j=window[h](f));return!0},makeProcessedCallback:function(a){return function(){return n.processImmediate(a,this,arguments)}}};c.processDeferredBindingUpdatesForNode=c.processAllDeferredBindingUpdates=
function(){for(var a=0;a<m.length;a++){var b=m[a];b.node&&!b.processed&&(b.processed=!0,b=m[a].evaluator,b())}};c.processAllDeferredUpdates=f;c.evaluateAsynchronously=function(a,b){return setTimeout(n.makeProcessedCallback(a),b)};c.tasks=n;var q;a:{var u=c,s;for(s in u)if(u.hasOwnProperty(s)&&u[s]&&u[s].end){q=u[s];break a}q=void 0}var A=b(q,".push({"),y=b(q,".length"),u=c.computed;s=d(c,u);var x=d(u.fn,u),v=c.computed(function(){}),C=d(v,v.peek)||"peek",I=d(v,v.isActive)||"isActive",r=d(v,v.getDependenciesCount),
E=d(v,!1),J=d(v,v.dispose),D="disposeWhenNodeIsRemoved",F="disposeWhen";if("hasWriteFunction"!=E){var v=u.toString(),B;if(B=v.match(/.\.disposeWhenNodeIsRemoved\|\|.\.([^|]+)\|\|/))D=B[1];if(v=v.match(/.\.disposeWhen\|\|.\.([^|]+)\|\|/))F=v[1]}var K=b(c.utils,"ocument)"),v=c.subscribable.fn;B=b(v,".bind(");var H=(new c.subscribable).subscribe(),L=H.constructor.prototype,P=d(L,H.dispose),N=L[P];H.dispose();H=null;c.ignoreDependencies=function(a,b,c){try{return q[A](function(){}),a.apply(b,c||[])}finally{q.end()}};
v.oldSubscribe=v[B];v[B]=function(a,b,d,e,f){d=d||"change";if(f)g=function(b){a(b,d)},"change"==d&&(this.dependents=this.dependents||[],this.dependents.push(f));else var g=function(f){(O.deferUpdates&&!1!==e||e)&&"change"==d?c.tasks.processDelayed(a,!1,{object:b,args:[f,d]}):c.ignoreDependencies(a,b,[f,d])};g=this.oldSubscribe(g,null,d);g.target=this;g.event=d;g.dependent=f;return g};v.getDependents=function(){return this.dependents?this.dependents.slice(0):[]};L[P]=function(){N.call(this);this.dependent&&
"change"==this.event&&c.utils.arrayRemoveItem(this.target.dependents,this.dependent)};var O=function(b,d,e){function f(){c.utils.arrayForEach(Q,function(a){a.dispose()});Q=[];k=u=!1}function g(a,b){var d="dirty"==b,e=d&&!k&&!u;d?k=!0:u=!0;(d=m.throttleEvaluation)&&0<=d?(clearTimeout(W),W=c.evaluateAsynchronously(j,d)):O.deferUpdates&&!1!==m.deferUpdates||m.deferUpdates?e=c.tasks.processDelayed(j,!0,{node:L}):u&&(e=j());e&&m.notifySubscribers&&(m.notifySubscribers(s,"dirty"),!k&&d&&clearTimeout(W))}
function h(){u=!0}function n(a){var b="change";a[x]===O&&(Q.push(a.subscribe(h,null,"change",!1,m)),b="dirty");Q.push(a.subscribe(g,null,b,!1,m))}function j(b){if(B||!u&&!0!==b)return k=u,!1;if(N&&N())return m.dispose(),!1;B=!0;try{var e=c.utils.arrayMap(Q,function(a){return a.target});q[A](function(b){for(var d,f=!1;0<=(d=c.utils.arrayIndexOf(e,b));)e[d]=a,f=!0;f||n(b)});for(var f=v.call(d),g=e.length-1;0<=g;g--)e[g]&&Q.splice(g,1)[0].dispose();k=u=!1;m.notifySubscribers(s,"beforeChange");s=f}finally{q.end()}m.notifySubscribers(s);
B=!1;return!0}function m(){if(0<arguments.length){if("function"===typeof H){var a=m.deferUpdates;m.deferUpdates=!1;H.apply(d,arguments);m.deferUpdates=a}else throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return this}(u||k)&&j(!0);q[y](m);return s}function p(){return u||k||0<Q.length}var s,k=!1,u=!0,B=!1,v=b;v&&"object"==typeof v?(e=v,v=e.read):(e=e||{},v||(v=e.read));if("function"!=typeof v)throw Error("Pass a function that returns the value of the ko.computed");
var H=e.write;d||(d=e.owner);var Q=[],W=null,L=e[D]||e.disposeWhenNodeIsRemoved||null;if(!0!==e.deferEvaluation){B=!0;try{q[A](n),s=v.call(d)}finally{q.end()}u=B=!1}var P=f,N=e[F]||e.disposeWhen||function(){return!1};if(L&&p()){P=function(){c.utils.domNodeDisposal.removeDisposeCallback(L,arguments.callee);f()};c.utils.domNodeDisposal.addDisposeCallback(L,P);var Aa=N,N=function(){return!c.utils[K](L)||Aa()}}c.subscribable.call(m);c.utils.extend(m,O.fn);m[C]=m.peek=function(){(u||k)&&j(!0);return s};
m[r]=m.getDependenciesCount=function(){return Q.length};m[E]=m.hasWriteFunction="function"===typeof H;m[J]=m.dispose=function(){P()};m[I]=m.isActive=p;m.getDependencies=function(){return c.utils.arrayMap(c.utils.arrayFilter(Q,function(a){return"change"==a.event}),function(a){return a.target})};return m};O[x]=u[x];O.fn=u.fn;O.fn[x]=O;O.deferUpdates=!0;c[s]=c.computed=c.dependentObservable=O;u=v=null;c.extenders.throttle=function(a,b){if(c.isWriteableObservable(a)){var d=null;return c.dependentObservable({read:a,
write:function(e){clearTimeout(d);d=c.evaluateAsynchronously(function(){a(e)},b)}})}a.throttleEvaluation=b;return a}})(ko);
(function(){function c(a,b,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a._chain&&(a=a._wrapped);b._chain&&(b=b._wrapped);if(a.isEqual&&r.isFunction(a.isEqual))return a.isEqual(b);if(b.isEqual&&r.isFunction(b.isEqual))return b.isEqual(a);var e=m.call(a);if(e!=m.call(b))return!1;switch(e){case "[object String]":return a==String(b);case "[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case "[object Date]":case "[object Boolean]":return+a==+b;case "[object RegExp]":return a.source==
b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=d.length;f--;)if(d[f]==a)return!0;d.push(a);var f=0,g=!0;if("[object Array]"==e){if(f=a.length,g=f==b.length)for(;f--&&(g=f in a==f in b&&c(a[f],b[f],d)););}else{if("constructor"in a!="constructor"in b||a.constructor!=b.constructor)return!1;for(var h in a)if(r.has(a,h)&&(f++,!(g=r.has(b,h)&&c(a[h],b[h],d))))break;if(g){for(h in b)if(r.has(b,h)&&!f--)break;
g=!f}}d.pop();return g}var a=this,b=a._,d={},e=Array.prototype,f=Object.prototype,h=e.slice,j=e.unshift,m=f.toString,p=f.hasOwnProperty,g=e.forEach,n=e.map,q=e.reduce,u=e.reduceRight,s=e.filter,A=e.every,y=e.some,x=e.indexOf,v=e.lastIndexOf,f=Array.isArray,C=Object.keys,I=Function.prototype.bind,r=function(a){return new O(a)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=r),exports._=r):a._=r;r.VERSION="1.3.3";var E=r.each=r.forEach=function(a,
b,c){if(null!=a)if(g&&a.forEach===g)a.forEach(b,c);else if(a.length===+a.length)for(var e=0,f=a.length;e<f&&!(e in a&&b.call(c,a[e],e,a)===d);e++);else for(e in a)if(r.has(a,e)&&b.call(c,a[e],e,a)===d)break};r.map=r.collect=function(a,b,c){var d=[];if(null==a)return d;if(n&&a.map===n)return a.map(b,c);E(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)});a.length===+a.length&&(d.length=a.length);return d};r.reduce=r.foldl=r.inject=function(a,b,c,d){var e=2<arguments.length;null==a&&(a=[]);if(q&&a.reduce===
q)return d&&(b=r.bind(b,d)),e?a.reduce(b,c):a.reduce(b);E(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c};r.reduceRight=r.foldr=function(a,b,c,d){var e=2<arguments.length;null==a&&(a=[]);if(u&&a.reduceRight===u)return d&&(b=r.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=r.toArray(a).reverse();d&&!e&&(b=r.bind(b,d));return e?r.reduce(f,b,c,d):r.reduce(f,b)};r.find=r.detect=function(a,b,c){var d;J(a,function(a,
e,f){if(b.call(c,a,e,f))return d=a,!0});return d};r.filter=r.select=function(a,b,c){var d=[];if(null==a)return d;if(s&&a.filter===s)return a.filter(b,c);E(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)});return d};r.reject=function(a,b,c){var d=[];if(null==a)return d;E(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)});return d};r.every=r.all=function(a,b,c){var e=!0;if(null==a)return e;if(A&&a.every===A)return a.every(b,c);E(a,function(a,f,g){if(!(e=e&&b.call(c,a,f,g)))return d});return!!e};
var J=r.some=r.any=function(a,b,c){b||(b=r.identity);var e=!1;if(null==a)return e;if(y&&a.some===y)return a.some(b,c);E(a,function(a,f,g){if(e||(e=b.call(c,a,f,g)))return d});return!!e};r.include=r.contains=function(a,b){var c=!1;return null==a?c:x&&a.indexOf===x?-1!=a.indexOf(b):c=J(a,function(a){return a===b})};r.invoke=function(a,b){var c=h.call(arguments,2);return r.map(a,function(a){return(r.isFunction(b)?b||a:a[b]).apply(a,c)})};r.pluck=function(a,b){return r.map(a,function(a){return a[b]})};
r.max=function(a,b,c){if(!b&&r.isArray(a)&&a[0]===+a[0])return Math.max.apply(Math,a);if(!b&&r.isEmpty(a))return-Infinity;var d={computed:-Infinity};E(a,function(a,e,f){e=b?b.call(c,a,e,f):a;e>=d.computed&&(d={value:a,computed:e})});return d.value};r.min=function(a,b,c){if(!b&&r.isArray(a)&&a[0]===+a[0])return Math.min.apply(Math,a);if(!b&&r.isEmpty(a))return Infinity;var d={computed:Infinity};E(a,function(a,e,f){e=b?b.call(c,a,e,f):a;e<d.computed&&(d={value:a,computed:e})});return d.value};r.shuffle=
function(a){var b=[],c;E(a,function(a,d){c=Math.floor(Math.random()*(d+1));b[d]=b[c];b[c]=a});return b};r.sortBy=function(a,b,c){var d=r.isFunction(b)?b:function(a){return a[b]};return r.pluck(r.map(a,function(a,b,e){return{value:a,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return void 0===c?1:void 0===d?-1:c<d?-1:c>d?1:0}),"value")};r.groupBy=function(a,b){var c={},d=r.isFunction(b)?b:function(a){return a[b]};E(a,function(a,b){var e=d(a,b);(c[e]||(c[e]=[])).push(a)});
return c};r.sortedIndex=function(a,b,c){c||(c=r.identity);for(var d=0,e=a.length;d<e;){var f=d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d};r.toArray=function(a){return!a?[]:r.isArray(a)||r.isArguments(a)?h.call(a):a.toArray&&r.isFunction(a.toArray)?a.toArray():r.values(a)};r.size=function(a){return r.isArray(a)?a.length:r.keys(a).length};r.first=r.head=r.take=function(a,b,c){return null!=b&&!c?h.call(a,0,b):a[0]};r.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))};r.last=function(a,
b,c){return null!=b&&!c?h.call(a,Math.max(a.length-b,0)):a[a.length-1]};r.rest=r.tail=function(a,b,c){return h.call(a,null==b||c?1:b)};r.compact=function(a){return r.filter(a,function(a){return!!a})};r.flatten=function(a,b){return r.reduce(a,function(a,c){if(r.isArray(c))return a.concat(b?c:r.flatten(c));a[a.length]=c;return a},[])};r.without=function(a){return r.difference(a,h.call(arguments,1))};r.uniq=r.unique=function(a,b,c){c=c?r.map(a,c):a;var d=[];3>a.length&&(b=!0);r.reduce(c,function(c,e,
f){if(b?r.last(c)!==e||!c.length:!r.include(c,e))c.push(e),d.push(a[f]);return c},[]);return d};r.union=function(){return r.uniq(r.flatten(arguments,!0))};r.intersection=r.intersect=function(a){var b=h.call(arguments,1);return r.filter(r.uniq(a),function(a){return r.every(b,function(b){return 0<=r.indexOf(b,a)})})};r.difference=function(a){var b=r.flatten(h.call(arguments,1),!0);return r.filter(a,function(a){return!r.include(b,a)})};r.zip=function(){for(var a=h.call(arguments),b=r.max(r.pluck(a,"length")),
c=Array(b),d=0;d<b;d++)c[d]=r.pluck(a,""+d);return c};r.indexOf=function(a,b,c){if(null==a)return-1;var d;if(c)return c=r.sortedIndex(a,b),a[c]===b?c:-1;if(x&&a.indexOf===x)return a.indexOf(b);c=0;for(d=a.length;c<d;c++)if(c in a&&a[c]===b)return c;return-1};r.lastIndexOf=function(a,b){if(null==a)return-1;if(v&&a.lastIndexOf===v)return a.lastIndexOf(b);for(var c=a.length;c--;)if(c in a&&a[c]===b)return c;return-1};r.range=function(a,b,c){1>=arguments.length&&(b=a||0,a=0);c=arguments[2]||1;for(var d=
Math.max(Math.ceil((b-a)/c),0),e=0,f=Array(d);e<d;)f[e++]=a,a+=c;return f};var D=function(){};r.bind=function(a,b){var c,d;if(a.bind===I&&I)return I.apply(a,h.call(arguments,1));if(!r.isFunction(a))throw new TypeError;d=h.call(arguments,2);return c=function(){if(!(this instanceof c))return a.apply(b,d.concat(h.call(arguments)));D.prototype=a.prototype;var e=new D,f=a.apply(e,d.concat(h.call(arguments)));return Object(f)===f?f:e}};r.bindAll=function(a){var b=h.call(arguments,1);0==b.length&&(b=r.functions(a));
E(b,function(b){a[b]=r.bind(a[b],a)});return a};r.memoize=function(a,b){var c={};b||(b=r.identity);return function(){var d=b.apply(this,arguments);return r.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}};r.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)};r.defer=function(a){return r.delay.apply(r,[a,1].concat(h.call(arguments,1)))};r.throttle=function(a,b){var c,d,e,f,g,h,n=r.debounce(function(){g=f=!1},b);return function(){c=this;d=arguments;e||
(e=setTimeout(function(){e=null;g&&a.apply(c,d);n()},b));f?g=!0:h=a.apply(c,d);n();f=!0;return h}};r.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments;c&&!d&&a.apply(e,f);clearTimeout(d);d=setTimeout(function(){d=null;c||a.apply(e,f)},b)}};r.once=function(a){var b=!1,c;return function(){if(b)return c;b=!0;return c=a.apply(this,arguments)}};r.wrap=function(a,b){return function(){var c=[a].concat(h.call(arguments,0));return b.apply(this,c)}};r.compose=function(){var a=arguments;
return function(){for(var b=arguments,c=a.length-1;0<=c;c--)b=[a[c].apply(this,b)];return b[0]}};r.after=function(a,b){return 0>=a?b():function(){if(1>--a)return b.apply(this,arguments)}};r.keys=C||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[],c;for(c in a)r.has(a,c)&&(b[b.length]=c);return b};r.values=function(a){return r.map(a,r.identity)};r.functions=r.methods=function(a){var b=[],c;for(c in a)r.isFunction(a[c])&&b.push(c);return b.sort()};r.extend=function(a){E(h.call(arguments,
1),function(b){for(var c in b)a[c]=b[c]});return a};r.pick=function(a){var b={};E(r.flatten(h.call(arguments,1)),function(c){c in a&&(b[c]=a[c])});return b};r.defaults=function(a){E(h.call(arguments,1),function(b){for(var c in b)null==a[c]&&(a[c]=b[c])});return a};r.clone=function(a){return!r.isObject(a)?a:r.isArray(a)?a.slice():r.extend({},a)};r.tap=function(a,b){b(a);return a};r.isEqual=function(a,b){return c(a,b,[])};r.isEmpty=function(a){if(null==a)return!0;if(r.isArray(a)||r.isString(a))return 0===
a.length;for(var b in a)if(r.has(a,b))return!1;return!0};r.isElement=function(a){return!!(a&&1==a.nodeType)};r.isArray=f||function(a){return"[object Array]"==m.call(a)};r.isObject=function(a){return a===Object(a)};r.isArguments=function(a){return"[object Arguments]"==m.call(a)};r.isArguments(arguments)||(r.isArguments=function(a){return!(!a||!r.has(a,"callee"))});r.isFunction=function(a){return"[object Function]"==m.call(a)};r.isString=function(a){return"[object String]"==m.call(a)};r.isNumber=function(a){return"[object Number]"==
m.call(a)};r.isFinite=function(a){return r.isNumber(a)&&isFinite(a)};r.isNaN=function(a){return a!==a};r.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==m.call(a)};r.isDate=function(a){return"[object Date]"==m.call(a)};r.isRegExp=function(a){return"[object RegExp]"==m.call(a)};r.isNull=function(a){return null===a};r.isUndefined=function(a){return void 0===a};r.has=function(a,b){return p.call(a,b)};r.noConflict=function(){a._=b;return this};r.identity=function(a){return a};r.times=
function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)};r.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};r.result=function(a,b){if(null==a)return null;var c=a[b];return r.isFunction(c)?c.call(a):c};r.mixin=function(a){E(r.functions(a),function(b){var c=r[b]=a[b];O.prototype[b]=function(){var a=h.call(arguments);j.call(a,this._wrapped);return G(c.apply(r,a),this._chain)}})};var F=0;r.uniqueId=
function(a){var b=F++;return a?a+b:b};r.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var B=/.^/,K={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},H;for(H in K)K[K[H]]=H;var L=/\\|'|\r|\n|\t|\u2028|\u2029/g,P=/\\(\\|'|r|n|t|u2028|u2029)/g,N=function(a){return a.replace(P,function(a,b){return K[b]})};r.template=function(a,b,c){c=r.defaults(c||{},r.templateSettings);a="__p+='"+a.replace(L,function(a){return"\\"+K[a]}).replace(c.escape||
B,function(a,b){return"'+\n_.escape("+N(b)+")+\n'"}).replace(c.interpolate||B,function(a,b){return"'+\n("+N(b)+")+\n'"}).replace(c.evaluate||B,function(a,b){return"';\n"+N(b)+"\n;__p+='"})+"';\n";c.variable||(a="with(obj||{}){\n"+a+"}\n");a="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+a+"return __p;\n";var d=new Function(c.variable||"obj","_",a);if(b)return d(b,r);b=function(a){return d.call(this,a,r)};b.source="function("+(c.variable||"obj")+"){\n"+a+"}";return b};
r.chain=function(a){return r(a).chain()};var O=function(a){this._wrapped=a};r.prototype=O.prototype;var G=function(a,b){return b?r(a).chain():a};r.mixin(r);E("pop push reverse shift sort splice unshift".split(" "),function(a){var b=e[a];O.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);var d=c.length;("shift"==a||"splice"==a)&&0===d&&delete c[0];return G(c,this._chain)}});E(["concat","join","slice"],function(a){var b=e[a];O.prototype[a]=function(){return G(b.apply(this._wrapped,arguments),
this._chain)}});O.prototype.chain=function(){this._chain=!0;return this};O.prototype.value=function(){return this._wrapped}}).call(this);
(function(){var c=this,a=c.Backbone,b=Array.prototype.slice,d=Array.prototype.splice,e;e="undefined"!==typeof exports?exports:c.Backbone={};e.VERSION="0.9.2";var f=c._;!f&&"undefined"!==typeof require&&(f=require("underscore"));var h=c.jQuery||c.Zepto||c.ender;e.setDomLibrary=function(a){h=a};e.noConflict=function(){c.Backbone=a;return this};e.emulateHTTP=!1;e.emulateJSON=!1;var j=/\s+/,m=e.Events={on:function(a,b,c){var d,e,f,g,h;if(!b)return this;a=a.split(j);for(d=this._callbacks||(this._callbacks=
{});e=a.shift();)f=(h=d[e])?h.tail:{},f.next=g={},f.context=c,f.callback=b,d[e]={tail:g,next:h?h.next:f};return this},off:function(a,b,c){var d,e,g,h,n,q;if(e=this._callbacks){if(!a&&!b&&!c)return delete this._callbacks,this;for(a=a?a.split(j):f.keys(e);d=a.shift();)if(g=e[d],delete e[d],g&&(b||c))for(h=g.tail;(g=g.next)!==h;)if(n=g.callback,q=g.context,b&&n!==b||c&&q!==c)this.on(d,n,q);return this}},trigger:function(a){var c,d,e,f,g,h;if(!(e=this._callbacks))return this;g=e.all;a=a.split(j);for(h=
b.call(arguments,1);c=a.shift();){if(d=e[c])for(f=d.tail;(d=d.next)!==f;)d.callback.apply(d.context||this,h);if(d=g){f=d.tail;for(c=[c].concat(h);(d=d.next)!==f;)d.callback.apply(d.context||this,c)}}return this}};m.bind=m.on;m.unbind=m.off;var p=e.Model=function(a,b){var c;a||(a={});b&&b.parse&&(a=this.parse(a));if(c=J(this,"defaults"))a=f.extend({},c,a);b&&b.collection&&(this.collection=b.collection);this.attributes={};this._escapedAttributes={};this.cid=f.uniqueId("c");this.changed={};this._silent=
{};this._pending={};this.set(a,{silent:!0});this.changed={};this._silent={};this._pending={};this._previousAttributes=f.clone(this.attributes);this.initialize.apply(this,arguments)};f.extend(p.prototype,m,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(){return f.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var b;if(b=this._escapedAttributes[a])return b;b=this.get(a);return this._escapedAttributes[a]=f.escape(null==
b?"":""+b)},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,e;f.isObject(a)||null==a?(d=a,c=b):(d={},d[a]=b);c||(c={});if(!d)return this;d instanceof p&&(d=d.attributes);if(c.unset)for(e in d)d[e]=void 0;if(!this._validate(d,c))return!1;this.idAttribute in d&&(this.id=d[this.idAttribute]);b=c.changes={};var g=this.attributes,h=this._escapedAttributes,n=this._previousAttributes||{};for(e in d){a=d[e];if(!f.isEqual(g[e],a)||c.unset&&f.has(g,e))delete h[e],(c.silent?this._silent:
b)[e]=!0;c.unset?delete g[e]:g[e]=a;!f.isEqual(n[e],a)||f.has(g,e)!=f.has(n,e)?(this.changed[e]=a,c.silent||(this._pending[e]=!0)):(delete this.changed[e],delete this._pending[e])}c.silent||this.change(c);return this},unset:function(a,b){(b||(b={})).unset=!0;return this.set(a,null,b)},clear:function(a){(a||(a={})).unset=!0;return this.set(f.clone(this.attributes),a)},fetch:function(a){a=a?f.clone(a):{};var b=this,c=a.success;a.success=function(d,e,f){if(!b.set(b.parse(d,f),a))return!1;c&&c(b,d)};
a.error=e.wrapError(a.error,b,a);return(this.sync||e.sync).call(this,"read",this,a)},save:function(a,b,c){var d,g;f.isObject(a)||null==a?(d=a,c=b):(d={},d[a]=b);c=c?f.clone(c):{};if(c.wait){if(!this._validate(d,c))return!1;g=f.clone(this.attributes)}a=f.extend({},c,{silent:!0});if(d&&!this.set(d,c.wait?a:c))return!1;var h=this,n=c.success;c.success=function(a,b,e){b=h.parse(a,e);c.wait&&(delete c.wait,b=f.extend(d||{},b));if(!h.set(b,c))return!1;n?n(h,a):h.trigger("sync",h,a,c)};c.error=e.wrapError(c.error,
h,c);b=this.isNew()?"create":"update";b=(this.sync||e.sync).call(this,b,this,c);c.wait&&this.set(g,a);return b},destroy:function(a){a=a?f.clone(a):{};var b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};if(this.isNew())return d(),!1;a.success=function(e){a.wait&&d();c?c(b,e):b.trigger("sync",b,e,a)};a.error=e.wrapError(a.error,b,a);var g=(this.sync||e.sync).call(this,"delete",this,a);a.wait||d();return g},url:function(){var a=J(this,"urlRoot")||J(this.collection,"url")||D();
return this.isNew()?a:a+("/"==a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(a){a||(a={});var b=this._changing;this._changing=!0;for(var c in this._silent)this._pending[c]=!0;var d=f.extend({},a.changes,this._silent);this._silent={};for(c in d)this.trigger("change:"+c,this,this.get(c),a);if(b)return this;for(;!f.isEmpty(this._pending);){this._pending=
{};this.trigger("change",this,a);for(c in this.changed)!this._pending[c]&&!this._silent[c]&&delete this.changed[c];this._previousAttributes=f.clone(this.attributes)}this._changing=!1;return this},hasChanged:function(a){return!arguments.length?!f.isEmpty(this.changed):f.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?f.clone(this.changed):!1;var b,c=!1,d=this._previousAttributes,e;for(e in a)if(!f.isEqual(d[e],b=a[e]))(c||(c={}))[e]=b;return c},previous:function(a){return!arguments.length||
!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return f.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(a,b){if(b.silent||!this.validate)return!0;a=f.extend({},this.attributes,a);var c=this.validate(a,b);if(!c)return!0;b&&b.error?b.error(this,c,b):this.trigger("error",this,c,b);return!1}});var g=e.Collection=function(a,b){b||(b={});b.model&&(this.model=b.model);b.comparator&&(this.comparator=b.comparator);
this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,{silent:!0,parse:b.parse})};f.extend(g.prototype,m,{model:p,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},add:function(a,b){var c,e,g,h,n,j={},q={},m=[];b||(b={});a=f.isArray(a)?a.slice():[a];c=0;for(e=a.length;c<e;c++){if(!(g=a[c]=this._prepareModel(a[c],b)))throw Error("Can't add an invalid model to a collection");h=g.cid;n=g.id;j[h]||this._byCid[h]||null!=n&&(q[n]||this._byId[n])?
m.push(c):j[h]=q[n]=g}for(c=m.length;c--;)a.splice(m[c],1);c=0;for(e=a.length;c<e;c++)(g=a[c]).on("all",this._onModelEvent,this),this._byCid[g.cid]=g,null!=g.id&&(this._byId[g.id]=g);this.length+=e;d.apply(this.models,[null!=b.at?b.at:this.models.length,0].concat(a));this.comparator&&this.sort({silent:!0});if(b.silent)return this;c=0;for(e=this.models.length;c<e;c++)if(j[(g=this.models[c]).cid])b.index=c,g.trigger("add",g,this,b);return this},remove:function(a,b){var c,d,e,g;b||(b={});a=f.isArray(a)?
a.slice():[a];c=0;for(d=a.length;c<d;c++)if(g=this.getByCid(a[c])||this.get(a[c]))delete this._byId[g.id],delete this._byCid[g.cid],e=this.indexOf(g),this.models.splice(e,1),this.length--,b.silent||(b.index=e,g.trigger("remove",g,this,b)),this._removeReference(g);return this},push:function(a,b){a=this._prepareModel(a,b);this.add(a,b);return a},pop:function(a){var b=this.at(this.length-1);this.remove(b,a);return b},unshift:function(a,b){a=this._prepareModel(a,b);this.add(a,f.extend({at:0},b));return a},
shift:function(a){var b=this.at(0);this.remove(b,a);return b},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},where:function(a){return f.isEmpty(a)?[]:this.filter(function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},sort:function(a){a||(a={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");var b=f.bind(this.comparator,this);1==this.comparator.length?
this.models=this.sortBy(b):this.models.sort(b);a.silent||this.trigger("reset",this,a);return this},pluck:function(a){return f.map(this.models,function(b){return b.get(a)})},reset:function(a,b){a||(a=[]);b||(b={});for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c]);this._reset();this.add(a,f.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return this},fetch:function(a){a=a?f.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;a.success=function(d,
e,f){b[a.add?"add":"reset"](b.parse(d,f),a);c&&c(b,d)};a.error=e.wrapError(a.error,b,a);return(this.sync||e.sync).call(this,"read",this,a)},create:function(a,b){var c=this;b=b?f.clone(b):{};a=this._prepareModel(a,b);if(!a)return!1;b.wait||c.add(a,b);var d=b.success;b.success=function(e,f){b.wait&&c.add(e,b);d?d(e,f):e.trigger("sync",a,f,b)};a.save(null,b);return a},parse:function(a){return a},chain:function(){return f(this.models).chain()},_reset:function(){this.length=0;this.models=[];this._byId=
{};this._byCid={}},_prepareModel:function(a,b){b||(b={});a instanceof p?a.collection||(a.collection=this):(b.collection=this,a=new this.model(a,b),a._validate(a.attributes,b)||(a=!1));return a},_removeReference:function(a){this==a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"==a||"remove"==a)&&c!=this||("destroy"==a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],this._byId[b.id]=b),this.trigger.apply(this,
arguments))}});f.each("forEach each map reduce reduceRight find detect filter select reject every all some any include contains invoke max min sortBy sortedIndex toArray size first initial rest last without indexOf shuffle lastIndexOf isEmpty groupBy".split(" "),function(a){g.prototype[a]=function(){return f[a].apply(f,[this.models].concat(f.toArray(arguments)))}});var n=e.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},q=/:\w+/g,
u=/\*\w+/g,s=/[-[\]{}()+?.,\\^$|#\s]/g;f.extend(n.prototype,m,{initialize:function(){},route:function(a,b,c){e.history||(e.history=new A);f.isRegExp(a)||(a=this._routeToRegExp(a));c||(c=this[b]);e.history.route(a,f.bind(function(d){d=this._extractParameters(a,d);c&&c.apply(this,d);this.trigger.apply(this,["route:"+b].concat(d));e.history.trigger("route",this,b,d)},this));return this},navigate:function(a,b){e.history.navigate(a,b)},_bindRoutes:function(){if(this.routes){var a=[],b;for(b in this.routes)a.unshift([b,
this.routes[b]]);b=0;for(var c=a.length;b<c;b++)this.route(a[b][0],a[b][1],this[a[b][1]])}},_routeToRegExp:function(a){a=a.replace(s,"\\$&").replace(q,"([^/]+)").replace(u,"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}});var A=e.History=function(){this.handlers=[];f.bindAll(this,"checkUrl")},y=/^[#\/]/,x=/msie [\w.]+/;A.started=!1;f.extend(A.prototype,m,{interval:50,getHash:function(a){return(a=(a?a.location:window.location).href.match(/#(.*)$/))?a[1]:
""},getFragment:function(a,b){if(null==a)if(this._hasPushState||b){a=window.location.pathname;var c=window.location.search;c&&(a+=c)}else a=this.getHash();a.indexOf(this.options.root)||(a=a.substr(this.options.root.length));return a.replace(y,"")},start:function(a){if(A.started)throw Error("Backbone.history has already been started");A.started=!0;this.options=f.extend({},{root:"/"},this.options,a);this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=
!(!this.options.pushState||!window.history||!window.history.pushState);a=this.getFragment();var b=document.documentMode;if(b=x.exec(navigator.userAgent.toLowerCase())&&(!b||7>=b))this.iframe=h('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a);this._hasPushState?h(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!b?h(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,
this.interval));this.fragment=a;a=window.location;b=a.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!b)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&(this._hasPushState&&b&&a.hash)&&(this.fragment=this.getHash().replace(y,""),window.history.replaceState({},document.title,a.protocol+"//"+a.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},
stop:function(){h(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);A.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();a==this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a==this.fragment)return!1;this.iframe&&this.navigate(a);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return f.any(this.handlers,
function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,b){if(!A.started)return!1;if(!b||!0===b)b={trigger:b};var c=(a||"").replace(y,"");this.fragment!=c&&(this._hasPushState?(0!=c.indexOf(this.options.root)&&(c=this.options.root+c),this.fragment=c,window.history[b.replace?"replaceState":"pushState"]({},document.title,c)):this._wantsHashChange?(this.fragment=c,this._updateHash(window.location,c,b.replace),this.iframe&&c!=this.getFragment(this.getHash(this.iframe))&&(b.replace||
this.iframe.document.open().close(),this._updateHash(this.iframe.location,c,b.replace))):window.location.assign(this.options.root+a),b.trigger&&this.loadUrl(a))},_updateHash:function(a,b,c){c?a.replace(a.toString().replace(/(javascript:|#).*$/,"")+"#"+b):a.hash=b}});var v=e.View=function(a){this.cid=f.uniqueId("view");this._configure(a||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},C=/^(\S+)\s*(.*)$/,I="model collection el id attributes className tagName".split(" ");
f.extend(v.prototype,m,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();return this},make:function(a,b,c){a=document.createElement(a);b&&h(a).attr(b);c&&h(a).html(c);return a},setElement:function(a,b){this.$el&&this.undelegateEvents();this.$el=a instanceof h?a:h(a);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(a||(a=J(this,"events"))){this.undelegateEvents();
for(var b in a){var c=a[b];f.isFunction(c)||(c=this[a[b]]);if(!c)throw Error('Method "'+a[b]+'" does not exist');var d=b.match(C),e=d[1],d=d[2],c=f.bind(c,this),e=e+(".delegateEvents"+this.cid);""===d?this.$el.bind(e,c):this.$el.delegate(d,e,c)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(a){this.options&&(a=f.extend({},this.options,a));for(var b=0,c=I.length;b<c;b++){var d=I[b];a[d]&&(this[d]=a[d])}this.options=a},_ensureElement:function(){if(this.el)this.setElement(this.el,
!1);else{var a=J(this,"attributes")||{};this.id&&(a.id=this.id);this.className&&(a["class"]=this.className);this.setElement(this.make(this.tagName,a),!1)}}});p.extend=g.extend=n.extend=v.extend=function(a,b){var c=this,d;d=a&&a.hasOwnProperty("constructor")?a.constructor:function(){c.apply(this,arguments)};f.extend(d,c);E.prototype=c.prototype;d.prototype=new E;a&&f.extend(d.prototype,a);b&&f.extend(d,b);d.prototype.constructor=d;d.__super__=c.prototype;d.extend=this.extend;return d};var r={create:"POST",
update:"PUT","delete":"DELETE",read:"GET"};e.sync=function(a,b,c){var d=r[a];c||(c={});var g={type:d,dataType:"json"};c.url||(g.url=J(b,"url")||D());if(!c.data&&b&&("create"==a||"update"==a))g.contentType="application/json",g.data=JSON.stringify(b.toJSON());e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{});if(e.emulateHTTP&&("PUT"===d||"DELETE"===d))e.emulateJSON&&(g.data._method=d),g.type="POST",g.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",
d)};"GET"!==g.type&&!e.emulateJSON&&(g.processData=!1);return h.ajax(f.extend(g,c))};e.wrapError=function(a,b,c){return function(d,e){e=d===b?e:d;a?a(b,e,c):b.trigger("error",b,e,c)}};var E=function(){},J=function(a,b){return!a||!a[b]?null:f.isFunction(a[b])?a[b]():a[b]},D=function(){throw Error('A "url" property or function must be specified');}}).call(this);
(function(c,a){function b(a,b){var h=a.nodeName.toLowerCase();if("area"===h){var h=a.parentNode,j=h.name,m;return!a.href||!j||"map"!==h.nodeName.toLowerCase()?!1:(m=c("img[usemap=#"+j+"]")[0],!!m&&d(m))}return(/input|select|textarea|button|object/.test(h)?!a.disabled:"a"==h?a.href||b:b)&&d(a)}function d(a){return!c(a).parents().andSelf().filter(function(){return"hidden"===c.curCSS(this,"visibility")||c.expr.filters.hidden(this)}).length}c.ui=c.ui||{};c.ui.version||(c.extend(c.ui,{version:"1.8.22",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),c.fn.extend({propAttr:c.fn.prop||c.fn.attr,_focus:c.fn.focus,focus:function(a,b){return"number"==typeof a?this.each(function(){var d=
this;setTimeout(function(){c(d).focus();b&&b.call(d)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;return c.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?a=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(c.curCSS(this,"position",1))&&/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0):a=this.parents().filter(function(){return/(auto|scroll)/.test(c.curCSS(this,
"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!a.length?c(document):a},zIndex:function(b){if(b!==a)return this.css("zIndex",b);if(this.length){b=c(this[0]);for(var d;b.length&&b[0]!==document;){d=b.css("position");if("absolute"===d||"relative"===d||"fixed"===d)if(d=parseInt(b.css("zIndex"),10),!isNaN(d)&&0!==d)return d;b=b.parent()}}return 0},disableSelection:function(){return this.bind((c.support.selectstart?"selectstart":"mousedown")+
".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),c("<a>").outerWidth(1).jquery||c.each(["Width","Height"],function(b,d){function h(a,b,d,e){return c.each(j,function(){b-=parseFloat(c.curCSS(a,"padding"+this,!0))||0;d&&(b-=parseFloat(c.curCSS(a,"border"+this+"Width",!0))||0);e&&(b-=parseFloat(c.curCSS(a,"margin"+this,!0))||0)}),b}var j="Width"===d?["Left","Right"]:["Top","Bottom"],m=d.toLowerCase(),p={innerWidth:c.fn.innerWidth,
innerHeight:c.fn.innerHeight,outerWidth:c.fn.outerWidth,outerHeight:c.fn.outerHeight};c.fn["inner"+d]=function(b){return b===a?p["inner"+d].call(this):this.each(function(){c(this).css(m,h(this,b)+"px")})};c.fn["outer"+d]=function(a,b){return"number"!=typeof a?p["outer"+d].call(this,a):this.each(function(){c(this).css(m,h(this,a,!0,b)+"px")})}}),c.extend(c.expr[":"],{data:c.expr.createPseudo?c.expr.createPseudo(function(a){return function(b){return!!c.data(b,a)}}):function(a,b,d){return!!c.data(a,
d[3])},focusable:function(a){return b(a,!isNaN(c.attr(a,"tabindex")))},tabbable:function(a){var d=c.attr(a,"tabindex"),h=isNaN(d);return(h||0<=d)&&b(a,!h)}}),c(function(){var a=document.body,b=a.appendChild(b=document.createElement("div"));b.offsetHeight;c.extend(b.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});c.support.minHeight=100===b.offsetHeight;c.support.selectstart="onselectstart"in b;a.removeChild(b).style.display="none"}),c.curCSS||(c.curCSS=c.css),c.extend(c.ui,{plugin:{add:function(a,
b,d){a=c.ui[a].prototype;for(var j in d)a.plugins[j]=a.plugins[j]||[],a.plugins[j].push([b,d[j]])},call:function(a,b,c){if((b=a.plugins[b])&&a.element[0].parentNode)for(var d=0;d<b.length;d++)a.options[b[d][0]]&&b[d][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(a,b){if("hidden"===c(a).css("overflow"))return!1;var d=b&&"left"===b?"scrollLeft":"scrollTop";return 0<a[d]?!0:(a[d]=1,a[d]=
0,!1)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(a,b,d,j,m,p){return c.ui.isOverAxis(a,d,m)&&c.ui.isOverAxis(b,j,p)}}))})(jQuery);
(function(c,a){if(c.cleanData){var b=c.cleanData;c.cleanData=function(a){for(var d=0,h;null!=(h=a[d]);d++)try{c(h).triggerHandler("remove")}catch(j){}b(a)}}else{var d=c.fn.remove;c.fn.remove=function(a,b){return this.each(function(){return b||(!a||c.filter(a,[this]).length)&&c("*",this).add([this]).each(function(){try{c(this).triggerHandler("remove")}catch(a){}}),d.call(c(this),a,b)})}}c.widget=function(a,b,d){var j=a.split(".")[0],m;a=a.split(".")[1];m=j+"-"+a;d||(d=b,b=c.Widget);c.expr[":"][m]=
function(b){return!!c.data(b,a)};c[j]=c[j]||{};c[j][a]=function(a,b){arguments.length&&this._createWidget(a,b)};b=new b;b.options=c.extend(!0,{},b.options);c[j][a].prototype=c.extend(!0,b,{namespace:j,widgetName:a,widgetEventPrefix:c[j][a].prototype.widgetEventPrefix||a,widgetBaseClass:m},d);c.widget.bridge(a,c[j][a])};c.widget.bridge=function(b,d){c.fn[b]=function(h){var j="string"==typeof h,m=Array.prototype.slice.call(arguments,1),p=this;return h=!j&&m.length?c.extend.apply(null,[!0,h].concat(m)):
h,j&&"_"===h.charAt(0)?p:(j?this.each(function(){var d=c.data(this,b),f=d&&c.isFunction(d[h])?d[h].apply(d,m):d;if(f!==d&&f!==a)return p=f,!1}):this.each(function(){var a=c.data(this,b);a?a.option(h||{})._init():c.data(this,b,new d(h,this))}),p)}};c.Widget=function(a,b){arguments.length&&this._createWidget(a,b)};c.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(a,b){c.data(b,this.widgetName,this);this.element=c(b);this.options=c.extend(!0,{},
this.options,this._getCreateOptions(),a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return c.metadata&&c.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(b,d){var h=b;if(0===arguments.length)return c.extend({},this.options);if("string"==typeof b){if(d===a)return this.options[b];h={};h[b]=d}return this._setOptions(h),this},_setOptions:function(a){var b=this;return c.each(a,function(a,c){b._setOption(a,c)}),this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(a,b,d){var j,m=this.options[a];d=d||{};b=c.Event(b);b.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();b.target=this.element[0];if(a=b.originalEvent)for(j in a)j in b||(b[j]=a[j]);return this.element.trigger(b,d),!(c.isFunction(m)&&!1===m.call(this.element[0],b,d)||b.isDefaultPrevented())}}})(jQuery);
(function(c){var a=!1;c(document).mouseup(function(){a=!1});c.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(c){return a._mouseDown(c)}).bind("click."+this.widgetName,function(d){if(!0===c.data(d.target,a.widgetName+".preventClickEvent"))return c.removeData(d.target,a.widgetName+".preventClickEvent"),d.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName);c(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!a){this._mouseStarted&&this._mouseUp(b);this._mouseDownEvent=b;var d=this,e=1==b.which,f="string"==typeof this.options.cancel&&b.target.nodeName?c(b.target).closest(this.options.cancel).length:!1;if(!e||f||!this._mouseCapture(b))return!0;(this.mouseDelayMet=!this.options.delay)||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=
!0},this.options.delay));return this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted)?(b.preventDefault(),!0):(!0===c.data(b.target,this.widgetName+".preventClickEvent")&&c.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},c(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,
this._mouseUpDelegate),b.preventDefault(),a=!0,!0)}},_mouseMove:function(a){return!c.browser.msie||9<=document.documentMode||a.button?this._mouseStarted?(this._mouseDrag(a),a.preventDefault()):(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,a),this._mouseStarted?this._mouseDrag(a):this._mouseUp(a)),!this._mouseStarted):this._mouseUp(a)},_mouseUp:function(a){return c(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+
this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,a.target==this._mouseDownEvent.target&&c.data(a.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(a)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(c){c.ui=c.ui||{};var a=/left|center|right/,b=/top|center|bottom/,d={},e=c.fn.position,f=c.fn.offset;c.fn.position=function(f){if(!f||!f.of)return e.apply(this,arguments);f=c.extend({},f);var g=c(f.of),h=g[0],j=(f.collision||"flip").split(" "),m=f.offset?f.offset.split(" "):[0,0],p,x,v;return 9===h.nodeType?(p=g.width(),x=g.height(),v={top:0,left:0}):h.setTimeout?(p=g.width(),x=g.height(),v={top:g.scrollTop(),left:g.scrollLeft()}):h.preventDefault?(f.at="left top",p=x=0,v={top:f.of.pageY,
left:f.of.pageX}):(p=g.outerWidth(),x=g.outerHeight(),v=g.offset()),c.each(["my","at"],function(){var c=(f[this]||"").split(" ");1===c.length&&(c=a.test(c[0])?c.concat(["center"]):b.test(c[0])?["center"].concat(c):["center","center"]);c[0]=a.test(c[0])?c[0]:"center";c[1]=b.test(c[1])?c[1]:"center";f[this]=c}),1===j.length&&(j[1]=j[0]),m[0]=parseInt(m[0],10)||0,1===m.length&&(m[1]=m[0]),m[1]=parseInt(m[1],10)||0,"right"===f.at[0]?v.left+=p:"center"===f.at[0]&&(v.left+=p/2),"bottom"===f.at[1]?v.top+=
x:"center"===f.at[1]&&(v.top+=x/2),v.left+=m[0],v.top+=m[1],this.each(function(){var a=c(this),b=a.outerWidth(),e=a.outerHeight(),g=parseInt(c.curCSS(this,"marginLeft",!0))||0,h=parseInt(c.curCSS(this,"marginTop",!0))||0,q=b+g+(parseInt(c.curCSS(this,"marginRight",!0))||0),u=e+h+(parseInt(c.curCSS(this,"marginBottom",!0))||0),B=c.extend({},v),K;"right"===f.my[0]?B.left-=b:"center"===f.my[0]&&(B.left-=b/2);"bottom"===f.my[1]?B.top-=e:"center"===f.my[1]&&(B.top-=e/2);d.fractions||(B.left=Math.round(B.left),
B.top=Math.round(B.top));K={left:B.left-g,top:B.top-h};c.each(["left","top"],function(a,d){c.ui.position[j[a]]&&c.ui.position[j[a]][d](B,{targetWidth:p,targetHeight:x,elemWidth:b,elemHeight:e,collisionPosition:K,collisionWidth:q,collisionHeight:u,offset:m,my:f.my,at:f.at})});c.fn.bgiframe&&a.bgiframe();a.offset(c.extend(B,{using:f.using}))})};c.ui.position={fit:{left:function(a,b){var d=c(window),d=b.collisionPosition.left+b.collisionWidth-d.width()-d.scrollLeft();a.left=0<d?a.left-d:Math.max(a.left-
b.collisionPosition.left,a.left)},top:function(a,b){var d=c(window),d=b.collisionPosition.top+b.collisionHeight-d.height()-d.scrollTop();a.top=0<d?a.top-d:Math.max(a.top-b.collisionPosition.top,a.top)}},flip:{left:function(a,b){if("center"!==b.at[0]){var d=c(window),d=b.collisionPosition.left+b.collisionWidth-d.width()-d.scrollLeft(),e="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,f="left"===b.at[0]?b.targetWidth:-b.targetWidth,g=-2*b.offset[0];a.left+=0>b.collisionPosition.left?e+
f+g:0<d?e+f+g:0}},top:function(a,b){if("center"!==b.at[1]){var d=c(window),d=b.collisionPosition.top+b.collisionHeight-d.height()-d.scrollTop(),e="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,f="top"===b.at[1]?b.targetHeight:-b.targetHeight,g=-2*b.offset[1];a.top+=0>b.collisionPosition.top?e+f+g:0<d?e+f+g:0}}}};c.offset.setOffset||(c.offset.setOffset=function(a,b){/static/.test(c.curCSS(a,"position"))&&(a.style.position="relative");var d=c(a),e=d.offset(),f=parseInt(c.curCSS(a,"top",
!0),10)||0,g=parseInt(c.curCSS(a,"left",!0),10)||0,e={top:b.top-e.top+f,left:b.left-e.left+g};"using"in b?b.using.call(a,e):d.css(e)},c.fn.offset=function(a){var b=this[0];return!b||!b.ownerDocument?null:a?c.isFunction(a)?this.each(function(b){c(this).offset(a.call(this,b,c(this).offset()))}):this.each(function(){c.offset.setOffset(this,a)}):f.call(this)});var h=document.getElementsByTagName("body")[0],j=document.createElement("div"),m,p;m=document.createElement(h?"div":"body");p={visibility:"hidden",
width:0,height:0,border:0,margin:0,background:"none"};h&&c.extend(p,{position:"absolute",left:"-1000px",top:"-1000px"});for(var g in p)m.style[g]=p[g];m.appendChild(j);p=h||document.documentElement;p.insertBefore(m,p.firstChild);j.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;";j=c(j).offset(function(a,b){return b}).offset();m.innerHTML="";p.removeChild(m);h=j.top+j.left+(h?2E3:0);d.fractions=21<h&&22>h})(jQuery);
(function(c){c.widget("ui.draggable",c.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&
(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(a){var b=this.options;return this.helper||b.disabled||c(a.target).is(".ui-resizable-handle")?
!1:(this.handle=this._getHandle(a),this.handle?(b.iframeFix&&c(!0===b.iframeFix?"iframe":b.iframeFix).each(function(){c('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(c(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(a){var b=this.options;return this.helper=this._createHelper(a),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),
c.ui.ddmanager&&(c.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},c.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(a),
this.originalPageX=a.pageX,this.originalPageY=a.pageY,b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt),b.containment&&this._setContainment(),!1===this._trigger("start",a)?(this._clear(),!1):(this._cacheHelperProportions(),c.ui.ddmanager&&!b.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,a),this._mouseDrag(a,!0),c.ui.ddmanager&&c.ui.ddmanager.dragStart(this,a),!0)},_mouseDrag:function(a,b){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");if(!b){var d=
this._uiHash();if(!1===this._trigger("drag",a,d))return this._mouseUp({}),!1;this.position=d.position}if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";return c.ui.ddmanager&&c.ui.ddmanager.drag(this,a),!1},_mouseStop:function(a){var b=!1;c.ui.ddmanager&&!this.options.dropBehaviour&&(b=c.ui.ddmanager.drop(this,a));this.dropped&&(b=this.dropped,this.dropped=!1);
for(var d=this.element[0],e=!1;d&&(d=d.parentNode);)d==document&&(e=!0);if(!e&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!b||"valid"==this.options.revert&&b||!0===this.options.revert||c.isFunction(this.options.revert)&&this.options.revert.call(this.element,b)){var f=this;c(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==f._trigger("stop",a)&&f._clear()})}else!1!==this._trigger("stop",a)&&this._clear();return!1},
_mouseUp:function(a){return!0===this.options.iframeFix&&c("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),c.ui.ddmanager&&c.ui.ddmanager.dragStop(this,a),c.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(a){var b=!this.options.handle||!c(this.options.handle,this.element).length?!0:!1;return c(this.options.handle,this.element).find("*").andSelf().each(function(){this==
a.target&&(b=!0)}),b},_createHelper:function(a){var b=this.options;a=c.isFunction(b.helper)?c(b.helper.apply(this.element[0],[a])):"clone"==b.helper?this.element.clone().removeAttr("id"):this.element;return a.parents("body").length||a.appendTo("parent"==b.appendTo?this.element[0].parentNode:b.appendTo),a[0]!=this.element[0]&&!/(fixed|absolute)/.test(a.css("position"))&&a.css("position","absolute"),a},_adjustOffsetFromHelper:function(a){"string"==typeof a&&(a=a.split(" "));c.isArray(a)&&(a={left:+a[0],
top:+a[1]||0});"left"in a&&(this.offset.click.left=a.left+this.margins.left);"right"in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left);"top"in a&&(this.offset.click.top=a.top+this.margins.top);"bottom"in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],
this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&c.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.element.position();return{top:a.top-
(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),
height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;"parent"==a.containment&&(a.containment=this.helper[0].parentNode);if("document"==a.containment||"window"==a.containment)this.containment=["document"==a.containment?0:c(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==a.containment?0:c(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==a.containment?0:c(window).scrollLeft())+c("document"==a.containment?document:
window).width()-this.helperProportions.width-this.margins.left,("document"==a.containment?0:c(window).scrollTop())+(c("document"==a.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){var a=c(a.containment),b=a[0];if(b){a.offset();var d="hidden"!=c(b).css("overflow");this.containment=[(parseInt(c(b).css("borderLeftWidth"),10)||0)+(parseInt(c(b).css("paddingLeft"),
10)||0),(parseInt(c(b).css("borderTopWidth"),10)||0)+(parseInt(c(b).css("paddingTop"),10)||0),(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(c(b).css("borderLeftWidth"),10)||0)-(parseInt(c(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(c(b).css("borderTopWidth"),10)||0)-(parseInt(c(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];
this.relative_container=a}}else a.containment.constructor==Array&&(this.containment=a.containment)},_convertPositionTo:function(a,b){b||(b=this.position);var d="absolute"==a?1:-1,e="absolute"==this.cssPosition&&(this.scrollParent[0]==document||!c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(e[0].tagName);return{top:b.top+this.offset.relative.top*d+this.offset.parent.top*d-(c.browser.safari&&526>c.browser.version&&"fixed"==this.cssPosition?
0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d),left:b.left+this.offset.relative.left*d+this.offset.parent.left*d-(c.browser.safari&&526>c.browser.version&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d)}},_generatePosition:function(a){var b=this.options,d="absolute"==this.cssPosition&&(this.scrollParent[0]==document||!c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,
e=/(html|body)/i.test(d[0].tagName),f=a.pageX,h=a.pageY;if(this.originalPosition){var j;this.containment&&(this.relative_container?(j=this.relative_container.offset(),j=[this.containment[0]+j.left,this.containment[1]+j.top,this.containment[2]+j.left,this.containment[3]+j.top]):j=this.containment,a.pageX-this.offset.click.left<j[0]&&(f=j[0]+this.offset.click.left),a.pageY-this.offset.click.top<j[1]&&(h=j[1]+this.offset.click.top),a.pageX-this.offset.click.left>j[2]&&(f=j[2]+this.offset.click.left),
a.pageY-this.offset.click.top>j[3]&&(h=j[3]+this.offset.click.top));b.grid&&(h=b.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/b.grid[1])*b.grid[1]:this.originalPageY,h=j?h-this.offset.click.top<j[1]||h-this.offset.click.top>j[3]?h-this.offset.click.top<j[1]?h+b.grid[1]:h-b.grid[1]:h:h,f=b.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/b.grid[0])*b.grid[0]:this.originalPageX,f=j?f-this.offset.click.left<j[0]||f-this.offset.click.left>j[2]?f-this.offset.click.left<j[0]?
f+b.grid[0]:f-b.grid[0]:f:f)}return{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(c.browser.safari&&526>c.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(c.browser.safari&&526>c.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");
this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(a,b,d){return d=d||this._uiHash(),c.ui.plugin.call(this,a,[b,d]),"drag"==a&&(this.positionAbs=this._convertPositionTo("absolute")),c.Widget.prototype._trigger.call(this,a,b,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});c.extend(c.ui.draggable,{version:"1.8.22"});
c.ui.plugin.add("draggable","connectToSortable",{start:function(a,b){var d=c(this).data("draggable"),e=d.options,f=c.extend({},b,{item:d.element});d.sortables=[];c(e.connectToSortable).each(function(){var b=c.data(this,"sortable");b&&!b.options.disabled&&(d.sortables.push({instance:b,shouldRevert:b.options.revert}),b.refreshPositions(),b._trigger("activate",a,f))})},stop:function(a,b){var d=c(this).data("draggable"),e=c.extend({},b,{item:d.element});c.each(d.sortables,function(){this.instance.isOver?
(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(a),this.instance.options.helper=this.instance.options._helper,"original"==d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",a,e))})},drag:function(a,b){var d=c(this).data("draggable"),e=this;c.each(d.sortables,function(){this.instance.positionAbs=
d.positionAbs;this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=c(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return b.helper[0]},a.target=this.instance.currentItem[0],this.instance._mouseCapture(a,
!0),this.instance._mouseStart(a,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",a),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(a)):this.instance.isOver&&
(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",a,this.instance._uiHash(this.instance)),this.instance._mouseStop(a,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",a),d.dropped=!1)})}});c.ui.plugin.add("draggable","cursor",{start:function(){var a=c("body"),b=c(this).data("draggable").options;
a.css("cursor")&&(b._cursor=a.css("cursor"));a.css("cursor",b.cursor)},stop:function(){var a=c(this).data("draggable").options;a._cursor&&c("body").css("cursor",a._cursor)}});c.ui.plugin.add("draggable","opacity",{start:function(a,b){var d=c(b.helper),e=c(this).data("draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity"));d.css("opacity",e.opacity)},stop:function(a,b){var d=c(this).data("draggable").options;d._opacity&&c(b.helper).css("opacity",d._opacity)}});c.ui.plugin.add("draggable",
"scroll",{start:function(){var a=c(this).data("draggable");a.scrollParent[0]!=document&&"HTML"!=a.scrollParent[0].tagName&&(a.overflowOffset=a.scrollParent.offset())},drag:function(a){var b=c(this).data("draggable"),d=b.options,e=!1;if(b.scrollParent[0]!=document&&"HTML"!=b.scrollParent[0].tagName){if(!d.axis||"x"!=d.axis)b.overflowOffset.top+b.scrollParent[0].offsetHeight-a.pageY<d.scrollSensitivity?b.scrollParent[0].scrollTop=e=b.scrollParent[0].scrollTop+d.scrollSpeed:a.pageY-b.overflowOffset.top<
d.scrollSensitivity&&(b.scrollParent[0].scrollTop=e=b.scrollParent[0].scrollTop-d.scrollSpeed);if(!d.axis||"y"!=d.axis)b.overflowOffset.left+b.scrollParent[0].offsetWidth-a.pageX<d.scrollSensitivity?b.scrollParent[0].scrollLeft=e=b.scrollParent[0].scrollLeft+d.scrollSpeed:a.pageX-b.overflowOffset.left<d.scrollSensitivity&&(b.scrollParent[0].scrollLeft=e=b.scrollParent[0].scrollLeft-d.scrollSpeed)}else{if(!d.axis||"x"!=d.axis)a.pageY-c(document).scrollTop()<d.scrollSensitivity?e=c(document).scrollTop(c(document).scrollTop()-
d.scrollSpeed):c(window).height()-(a.pageY-c(document).scrollTop())<d.scrollSensitivity&&(e=c(document).scrollTop(c(document).scrollTop()+d.scrollSpeed));if(!d.axis||"y"!=d.axis)a.pageX-c(document).scrollLeft()<d.scrollSensitivity?e=c(document).scrollLeft(c(document).scrollLeft()-d.scrollSpeed):c(window).width()-(a.pageX-c(document).scrollLeft())<d.scrollSensitivity&&(e=c(document).scrollLeft(c(document).scrollLeft()+d.scrollSpeed))}!1!==e&&c.ui.ddmanager&&!d.dropBehaviour&&c.ui.ddmanager.prepareOffsets(b,
a)}});c.ui.plugin.add("draggable","snap",{start:function(){var a=c(this).data("draggable"),b=a.options;a.snapElements=[];c(b.snap.constructor!=String?b.snap.items||":data(draggable)":b.snap).each(function(){var b=c(this),e=b.offset();this!=a.element[0]&&a.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:e.top,left:e.left})})},drag:function(a,b){for(var d=c(this).data("draggable"),e=d.options,f=e.snapTolerance,h=b.offset.left,j=h+d.helperProportions.width,m=b.offset.top,
p=m+d.helperProportions.height,g=d.snapElements.length-1;0<=g;g--){var n=d.snapElements[g].left,q=n+d.snapElements[g].width,u=d.snapElements[g].top,s=u+d.snapElements[g].height;if(n-f<h&&h<q+f&&u-f<m&&m<s+f||n-f<h&&h<q+f&&u-f<p&&p<s+f||n-f<j&&j<q+f&&u-f<m&&m<s+f||n-f<j&&j<q+f&&u-f<p&&p<s+f){if("inner"!=e.snapMode){var A=Math.abs(u-p)<=f,y=Math.abs(s-m)<=f,x=Math.abs(n-j)<=f,v=Math.abs(q-h)<=f;A&&(b.position.top=d._convertPositionTo("relative",{top:u-d.helperProportions.height,left:0}).top-d.margins.top);
y&&(b.position.top=d._convertPositionTo("relative",{top:s,left:0}).top-d.margins.top);x&&(b.position.left=d._convertPositionTo("relative",{top:0,left:n-d.helperProportions.width}).left-d.margins.left);v&&(b.position.left=d._convertPositionTo("relative",{top:0,left:q}).left-d.margins.left)}var C=A||y||x||v;"outer"!=e.snapMode&&(A=Math.abs(u-m)<=f,y=Math.abs(s-p)<=f,x=Math.abs(n-h)<=f,v=Math.abs(q-j)<=f,A&&(b.position.top=d._convertPositionTo("relative",{top:u,left:0}).top-d.margins.top),y&&(b.position.top=
d._convertPositionTo("relative",{top:s-d.helperProportions.height,left:0}).top-d.margins.top),x&&(b.position.left=d._convertPositionTo("relative",{top:0,left:n}).left-d.margins.left),v&&(b.position.left=d._convertPositionTo("relative",{top:0,left:q-d.helperProportions.width}).left-d.margins.left));!d.snapElements[g].snapping&&(A||y||x||v||C)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,a,c.extend(d._uiHash(),{snapItem:d.snapElements[g].item}));d.snapElements[g].snapping=A||y||x||v||C}else d.snapElements[g].snapping&&
d.options.snap.release&&d.options.snap.release.call(d.element,a,c.extend(d._uiHash(),{snapItem:d.snapElements[g].item})),d.snapElements[g].snapping=!1}}});c.ui.plugin.add("draggable","stack",{start:function(){var a=c(this).data("draggable").options,a=c.makeArray(c(a.stack)).sort(function(a,b){return(parseInt(c(a).css("zIndex"),10)||0)-(parseInt(c(b).css("zIndex"),10)||0)});if(a.length){var b=parseInt(a[0].style.zIndex)||0;c(a).each(function(a){this.style.zIndex=b+a});this[0].style.zIndex=b+a.length}}});
c.ui.plugin.add("draggable","zIndex",{start:function(a,b){var d=c(b.helper),e=c(this).data("draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex"));d.css("zIndex",e.zIndex)},stop:function(a,b){var d=c(this).data("draggable").options;d._zIndex&&c(b.helper).css("zIndex",d._zIndex)}})})(jQuery);
(function(c){c.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var a=this.options,b=a.accept;this.isover=0;this.isout=1;this.accept=c.isFunction(b)?b:function(a){return a.is(b)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};c.ui.ddmanager.droppables[a.scope]=c.ui.ddmanager.droppables[a.scope]||[];c.ui.ddmanager.droppables[a.scope].push(this);
a.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var a=c.ui.ddmanager.droppables[this.options.scope],b=0;b<a.length;b++)a[b]==this&&a.splice(b,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(a,b){"accept"==a&&(this.accept=c.isFunction(b)?b:function(a){return a.is(b)});c.Widget.prototype._setOption.apply(this,arguments)},_activate:function(a){var b=c.ui.ddmanager.current;this.options.activeClass&&
this.element.addClass(this.options.activeClass);b&&this._trigger("activate",a,this.ui(b))},_deactivate:function(a){var b=c.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);b&&this._trigger("deactivate",a,this.ui(b))},_over:function(a){var b=c.ui.ddmanager.current;if(b&&(b.currentItem||b.element)[0]!=this.element[0])this.accept.call(this.element[0],b.currentItem||b.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",
a,this.ui(b)))},_out:function(a){var b=c.ui.ddmanager.current;if(b&&(b.currentItem||b.element)[0]!=this.element[0])this.accept.call(this.element[0],b.currentItem||b.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",a,this.ui(b)))},_drop:function(a,b){var d=b||c.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0])return!1;var e=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var a=
c.data(this,"droppable");if(a.options.greedy&&!a.options.disabled&&a.options.scope==d.options.scope&&a.accept.call(a.element[0],d.currentItem||d.element)&&c.ui.intersect(d,c.extend(a,{offset:a.element.offset()}),a.options.tolerance))return e=!0,!1}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",a,this.ui(d)),
this.element):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}});c.extend(c.ui.droppable,{version:"1.8.22"});c.ui.intersect=function(a,b,d){if(!b.offset)return!1;var e=(a.positionAbs||a.position.absolute).left,f=e+a.helperProportions.width,h=(a.positionAbs||a.position.absolute).top,j=h+a.helperProportions.height,m=b.offset.left,p=m+b.proportions.width,g=b.offset.top,n=g+b.proportions.height;switch(d){case "fit":return m<=e&&f<=
p&&g<=h&&j<=n;case "intersect":return m<e+a.helperProportions.width/2&&f-a.helperProportions.width/2<p&&g<h+a.helperProportions.height/2&&j-a.helperProportions.height/2<n;case "pointer":return c.ui.isOver((a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top,(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left,g,m,b.proportions.height,b.proportions.width);case "touch":return(h>=g&&h<=n||j>=g&&j<=n||h<g&&j>n)&&(e>=m&&e<=p||f>=m&&f<=p||e<m&&f>p);default:return!1}};
c.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(a,b){var d=c.ui.ddmanager.droppables[a.options.scope]||[],e=b?b.type:null,f=(a.currentItem||a.element).find(":data(droppable)").andSelf(),h=0;a:for(;h<d.length;h++)if(!(d[h].options.disabled||a&&!d[h].accept.call(d[h].element[0],a.currentItem||a.element))){for(var j=0;j<f.length;j++)if(f[j]==d[h].element[0]){d[h].proportions.height=0;continue a}d[h].visible="none"!=d[h].element.css("display");d[h].visible&&("mousedown"==
e&&d[h]._activate.call(d[h],b),d[h].offset=d[h].element.offset(),d[h].proportions={width:d[h].element[0].offsetWidth,height:d[h].element[0].offsetHeight})}},drop:function(a,b){var d=!1;return c.each(c.ui.ddmanager.droppables[a.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&c.ui.intersect(a,this,this.options.tolerance)&&(d=this._drop.call(this,b)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],a.currentItem||a.element)&&(this.isout=1,this.isover=
0,this._deactivate.call(this,b)))}),d},dragStart:function(a,b){a.element.parents(":not(body,html)").bind("scroll.droppable",function(){a.options.refreshPositions||c.ui.ddmanager.prepareOffsets(a,b)})},drag:function(a,b){a.options.refreshPositions&&c.ui.ddmanager.prepareOffsets(a,b);c.each(c.ui.ddmanager.droppables[a.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d=c.ui.intersect(a,this,this.options.tolerance);if(d=!d&&1==this.isover?"isout":d&&0==this.isover?
"isover":null){var e;if(this.options.greedy){var f=this.element.parents(":data(droppable):eq(0)");f.length&&(e=c.data(f[0],"droppable"),e.greedyChild="isover"==d?1:0)}e&&"isover"==d&&(e.isover=0,e.isout=1,e._out.call(e,b));this[d]=1;this["isout"==d?"isover":"isout"]=0;this["isover"==d?"_over":"_out"].call(this,b);e&&"isout"==d&&(e.isout=0,e.isover=1,e._over.call(e,b))}}})},dragStop:function(a,b){a.element.parents(":not(body,html)").unbind("scroll.droppable");a.options.refreshPositions||c.ui.ddmanager.prepareOffsets(a,
b)}}})(jQuery);
(function(c){c.widget("ui.resizable",c.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var a=this,b=this.options;this.element.addClass("ui-resizable");c.extend(this,{_aspectRatio:!!b.aspectRatio,aspectRatio:b.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],
_helper:b.helper||b.ghost||b.animate?b.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(c('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=
!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,
display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=b.handles||(c(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var f=this.handles.split(",");this.handles=
{};for(var h=0;h<f.length;h++){var j=c.trim(f[h]),m=c('<div class="ui-resizable-handle ui-resizable-'+j+'"></div>');m.css({zIndex:b.zIndex});"se"==j&&m.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[j]=".ui-resizable-"+j;this.element.append(m)}}this._renderAxis=function(a){a=a||this.element;for(var b in this.handles){this.handles[b].constructor==String&&(this.handles[b]=c(this.handles[b],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=
c(this.handles[b],this.element),e=0,e=/sw|ne|nw|se|n|s/.test(b)?d.outerHeight():d.outerWidth(),d=["padding",/ne|nw|n/.test(b)?"Top":/se|sw|s/.test(b)?"Bottom":/^e$/.test(b)?"Right":"Left"].join("");a.css(d,e);this._proportionallyResize()}c(this.handles[b])}};this._renderAxis(this.element);this._handles=c(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!a.resizing){if(this.className)var b=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);a.axis=
b&&b[1]?b[1]:"se"}});b.autoHide&&(this._handles.hide(),c(this.element).addClass("ui-resizable-autohide").hover(function(){b.disabled||(c(this).removeClass("ui-resizable-autohide"),a._handles.show())},function(){b.disabled||a.resizing||(c(this).addClass("ui-resizable-autohide"),a._handles.hide())}));this._mouseInit()},destroy:function(){this._mouseDestroy();var a=function(a){c(a).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};
if(this.elementIsWrapper){a(this.element);var b=this.element;b.after(this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),a(this.originalElement),this},_mouseCapture:function(a){var b=!1,f;for(f in this.handles)c(this.handles[f])[0]==a.target&&(b=!0);return!this.options.disabled&&b},_mouseStart:function(b){var e=this.options,f=this.element.position(),
h=this.element;this.resizing=!0;this.documentScroll={top:c(document).scrollTop(),left:c(document).scrollLeft()};(h.is(".ui-draggable")||/absolute/.test(h.css("position")))&&h.css({position:"absolute",top:f.top,left:f.left});this._renderProxy();var f=a(this.helper.css("left")),j=a(this.helper.css("top"));e.containment&&(f+=c(e.containment).scrollLeft()||0,j+=c(e.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:f,top:j};this.size=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:
{width:h.width(),height:h.height()};this.originalSize=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()};this.originalPosition={left:f,top:j};this.sizeDiff={width:h.outerWidth()-h.width(),height:h.outerHeight()-h.height()};this.originalMousePosition={left:b.pageX,top:b.pageY};this.aspectRatio="number"==typeof e.aspectRatio?e.aspectRatio:this.originalSize.width/this.originalSize.height||1;e=c(".ui-resizable-"+this.axis).css("cursor");return c("body").css("cursor",
"auto"==e?this.axis+"-resize":e),h.addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(a){var b=this.helper,c=this.originalMousePosition,h=this._change[this.axis];if(!h)return!1;c=h.apply(this,[a,a.pageX-c.left||0,a.pageY-c.top||0]);this._updateVirtualBoundaries(a.shiftKey);if(this._aspectRatio||a.shiftKey)c=this._updateRatio(c,a);return c=this._respectSize(c,a),this._propagate("resize",a),b.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+
"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(c),this._trigger("resize",a,this.ui()),!1},_mouseStop:function(a){this.resizing=!1;var b=this.options;if(this._helper){var f=this._proportionallyResizeElements,h=f.length&&/textarea/i.test(f[0].nodeName),f=h&&c.ui.hasScroll(f[0],"left")?0:this.sizeDiff.height,h=h?0:this.sizeDiff.width,h={width:this.helper.width()-h,height:this.helper.height()-f},f=parseInt(this.element.css("left"),
10)+(this.position.left-this.originalPosition.left)||null,j=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;b.animate||this.element.css(c.extend(h,{top:j,left:f}));this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!b.animate&&this._proportionallyResize()}return c("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",a),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var c=
this.options,f,h,j,c={minWidth:b(c.minWidth)?c.minWidth:0,maxWidth:b(c.maxWidth)?c.maxWidth:Infinity,minHeight:b(c.minHeight)?c.minHeight:0,maxHeight:b(c.maxHeight)?c.maxHeight:Infinity};if(this._aspectRatio||a)a=c.minHeight*this.aspectRatio,h=c.minWidth/this.aspectRatio,f=c.maxHeight*this.aspectRatio,j=c.maxWidth/this.aspectRatio,a>c.minWidth&&(c.minWidth=a),h>c.minHeight&&(c.minHeight=h),f<c.maxWidth&&(c.maxWidth=f),j<c.maxHeight&&(c.maxHeight=j);this._vBoundaries=c},_updateCache:function(a){this.offset=
this.helper.offset();b(a.left)&&(this.position.left=a.left);b(a.top)&&(this.position.top=a.top);b(a.height)&&(this.size.height=a.height);b(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var c=this.position,f=this.size,h=this.axis;return b(a.height)?a.width=a.height*this.aspectRatio:b(a.width)&&(a.height=a.width/this.aspectRatio),"sw"==h&&(a.left=c.left+(f.width-a.width),a.top=null),"nw"==h&&(a.top=c.top+(f.height-a.height),a.left=c.left+(f.width-a.width)),a},_respectSize:function(a){var c=
this._vBoundaries,f=this.axis,h=b(a.width)&&c.maxWidth&&c.maxWidth<a.width,j=b(a.height)&&c.maxHeight&&c.maxHeight<a.height,m=b(a.width)&&c.minWidth&&c.minWidth>a.width,p=b(a.height)&&c.minHeight&&c.minHeight>a.height;m&&(a.width=c.minWidth);p&&(a.height=c.minHeight);h&&(a.width=c.maxWidth);j&&(a.height=c.maxHeight);var g=this.originalPosition.left+this.originalSize.width,n=this.position.top+this.size.height,q=/sw|nw|w/.test(f),f=/nw|ne|n/.test(f);m&&q&&(a.left=g-c.minWidth);h&&q&&(a.left=g-c.maxWidth);
p&&f&&(a.top=n-c.minHeight);j&&f&&(a.top=n-c.maxHeight);c=!a.width&&!a.height;return c&&!a.left&&a.top?a.top=null:c&&!a.top&&a.left&&(a.left=null),a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var a=this.helper||this.element,b=0;b<this._proportionallyResizeElements.length;b++){var f=this._proportionallyResizeElements[b];if(!this.borderDif){var h=[f.css("borderTopWidth"),f.css("borderRightWidth"),f.css("borderBottomWidth"),f.css("borderLeftWidth")],j=[f.css("paddingTop"),
f.css("paddingRight"),f.css("paddingBottom"),f.css("paddingLeft")];this.borderDif=c.map(h,function(a,b){var c=parseInt(a,10)||0,d=parseInt(j[b],10)||0;return c+d})}if(!c.browser.msie||!c(a).is(":hidden")&&!c(a).parents(":hidden").length)f.css({height:a.height()-this.borderDif[0]-this.borderDif[2]||0,width:a.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var a=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||c('<div style="overflow:hidden;"></div>');
var b=c.browser.msie&&7>c.browser.version,f=b?1:0,b=b?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+b,height:this.element.outerHeight()+b,position:"absolute",left:this.elementOffset.left-f+"px",top:this.elementOffset.top-f+"px",zIndex:++a.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){return{left:this.originalPosition.left+b,width:this.originalSize.width-
b}},n:function(a,b,c){return{top:this.originalPosition.top+c,height:this.originalSize.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(a,b,f){return c.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[a,b,f]))},sw:function(a,b,f){return c.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[a,b,f]))},ne:function(a,b,f){return c.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[a,b,f]))},nw:function(a,b,
f){return c.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[a,b,f]))}},_propagate:function(a,b){c.ui.plugin.call(this,a,[b,this.ui()]);"resize"!=a&&this._trigger(a,b,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});c.extend(c.ui.resizable,{version:"1.8.22"});c.ui.plugin.add("resizable","alsoResize",
{start:function(){var a=c(this).data("resizable").options,b=function(a){c(a).each(function(){var a=c(this);a.data("resizable-alsoresize",{width:parseInt(a.width(),10),height:parseInt(a.height(),10),left:parseInt(a.css("left"),10),top:parseInt(a.css("top"),10)})})};"object"==typeof a.alsoResize&&!a.alsoResize.parentNode?a.alsoResize.length?(a.alsoResize=a.alsoResize[0],b(a.alsoResize)):c.each(a.alsoResize,function(a){b(a)}):b(a.alsoResize)},resize:function(a,b){var f=c(this).data("resizable"),h=f.options,
j=f.originalSize,m=f.originalPosition,p={height:f.size.height-j.height||0,width:f.size.width-j.width||0,top:f.position.top-m.top||0,left:f.position.left-m.left||0},g=function(a,d){c(a).each(function(){var a=c(this),f=c(this).data("resizable-alsoresize"),g={},h=d&&d.length?d:a.parents(b.originalElement[0]).length?["width","height"]:["width","height","top","left"];c.each(h,function(a,b){var c=(f[b]||0)+(p[b]||0);c&&0<=c&&(g[b]=c||null)});a.css(g)})};"object"==typeof h.alsoResize&&!h.alsoResize.nodeType?
c.each(h.alsoResize,function(a,b){g(a,b)}):g(h.alsoResize)},stop:function(){c(this).removeData("resizable-alsoresize")}});c.ui.plugin.add("resizable","animate",{stop:function(a){var b=c(this).data("resizable"),f=b.options,h=b._proportionallyResizeElements,j=h.length&&/textarea/i.test(h[0].nodeName),m=j&&c.ui.hasScroll(h[0],"left")?0:b.sizeDiff.height,j={width:b.size.width-(j?0:b.sizeDiff.width),height:b.size.height-m},m=parseInt(b.element.css("left"),10)+(b.position.left-b.originalPosition.left)||
null,p=parseInt(b.element.css("top"),10)+(b.position.top-b.originalPosition.top)||null;b.element.animate(c.extend(j,p&&m?{top:p,left:m}:{}),{duration:f.animateDuration,easing:f.animateEasing,step:function(){var f={width:parseInt(b.element.css("width"),10),height:parseInt(b.element.css("height"),10),top:parseInt(b.element.css("top"),10),left:parseInt(b.element.css("left"),10)};h&&h.length&&c(h[0]).css({width:f.width,height:f.height});b._updateCache(f);b._propagate("resize",a)}})}});c.ui.plugin.add("resizable",
"containment",{start:function(){var b=c(this).data("resizable"),e=b.element,f=b.options.containment;if(e=f instanceof c?f.get(0):/parent/.test(f)?e.parent().get(0):f)if(b.containerElement=c(e),/document/.test(f)||f==document)b.containerOffset={left:0,top:0},b.containerPosition={left:0,top:0},b.parentData={element:c(document),left:0,top:0,width:c(document).width(),height:c(document).height()||document.body.parentNode.scrollHeight};else{var h=c(e),j=[];c(["Top","Right","Left","Bottom"]).each(function(b,
c){j[b]=a(h.css("padding"+c))});b.containerOffset=h.offset();b.containerPosition=h.position();b.containerSize={height:h.innerHeight()-j[3],width:h.innerWidth()-j[1]};var f=b.containerOffset,m=b.containerSize.height,p=b.containerSize.width,p=c.ui.hasScroll(e,"left")?e.scrollWidth:p,m=c.ui.hasScroll(e)?e.scrollHeight:m;b.parentData={element:e,left:f.left,top:f.top,width:p,height:m}}},resize:function(a){var b=c(this).data("resizable"),f=b.options,h=b.containerOffset,j=b.position;a=b._aspectRatio||a.shiftKey;
var m={top:0,left:0},p=b.containerElement;p[0]!=document&&/static/.test(p.css("position"))&&(m=h);j.left<(b._helper?h.left:0)&&(b.size.width+=b._helper?b.position.left-h.left:b.position.left-m.left,a&&(b.size.height=b.size.width/b.aspectRatio),b.position.left=f.helper?h.left:0);j.top<(b._helper?h.top:0)&&(b.size.height+=b._helper?b.position.top-h.top:b.position.top,a&&(b.size.width=b.size.height*b.aspectRatio),b.position.top=b._helper?h.top:0);b.offset.left=b.parentData.left+b.position.left;b.offset.top=
b.parentData.top+b.position.top;f=Math.abs(b.offset.left-m.left+b.sizeDiff.width);h=Math.abs((b._helper?b.offset.top-m.top:b.offset.top-h.top)+b.sizeDiff.height);j=b.containerElement.get(0)==b.element.parent().get(0);m=/relative|absolute/.test(b.containerElement.css("position"));j&&m&&(f-=b.parentData.left);f+b.size.width>=b.parentData.width&&(b.size.width=b.parentData.width-f,a&&(b.size.height=b.size.width/b.aspectRatio));h+b.size.height>=b.parentData.height&&(b.size.height=b.parentData.height-h,
a&&(b.size.width=b.size.height*b.aspectRatio))},stop:function(){var a=c(this).data("resizable"),b=a.options,f=a.containerOffset,h=a.containerPosition,j=a.containerElement,m=c(a.helper),p=m.offset(),g=m.outerWidth()-a.sizeDiff.width,m=m.outerHeight()-a.sizeDiff.height;a._helper&&!b.animate&&/relative/.test(j.css("position"))&&c(this).css({left:p.left-h.left-f.left,width:g,height:m});a._helper&&!b.animate&&/static/.test(j.css("position"))&&c(this).css({left:p.left-h.left-f.left,width:g,height:m})}});
c.ui.plugin.add("resizable","ghost",{start:function(){var a=c(this).data("resizable"),b=a.options,f=a.size;a.ghost=a.originalElement.clone();a.ghost.css({opacity:0.25,display:"block",position:"relative",height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof b.ghost?b.ghost:"");a.ghost.appendTo(a.helper)},resize:function(){var a=c(this).data("resizable");a.ghost&&a.ghost.css({position:"relative",height:a.size.height,width:a.size.width})},stop:function(){var a=
c(this).data("resizable");a.ghost&&a.helper&&a.helper.get(0).removeChild(a.ghost.get(0))}});c.ui.plugin.add("resizable","grid",{resize:function(){var a=c(this).data("resizable"),b=a.options,f=a.size,h=a.originalSize,j=a.originalPosition,m=a.axis;b.grid="number"==typeof b.grid?[b.grid,b.grid]:b.grid;var p=Math.round((f.width-h.width)/(b.grid[0]||1))*(b.grid[0]||1),b=Math.round((f.height-h.height)/(b.grid[1]||1))*(b.grid[1]||1);/^(se|s|e)$/.test(m)?(a.size.width=h.width+p,a.size.height=h.height+b):
/^(ne)$/.test(m)?(a.size.width=h.width+p,a.size.height=h.height+b,a.position.top=j.top-b):/^(sw)$/.test(m)?(a.size.width=h.width+p,a.size.height=h.height+b,a.position.left=j.left-p):(a.size.width=h.width+p,a.size.height=h.height+b,a.position.top=j.top-b,a.position.left=j.left-p)}});var a=function(a){return parseInt(a,10)||0},b=function(a){return!isNaN(parseInt(a,10))}})(jQuery);
(function(c){c.widget("ui.selectable",c.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var a=this;this.element.addClass("ui-selectable");this.dragged=!1;var b;this.refresh=function(){b=c(a.options.filter,a.element[0]);b.addClass("ui-selectee");b.each(function(){var a=c(this),b=a.offset();c.data(this,"selectable-item",{element:this,$element:a,left:b.left,top:b.top,right:b.left+a.outerWidth(),bottom:b.top+a.outerHeight(),startselected:!1,
selected:a.hasClass("ui-selected"),selecting:a.hasClass("ui-selecting"),unselecting:a.hasClass("ui-unselecting")})})};this.refresh();this.selectees=b.addClass("ui-selectee");this._mouseInit();this.helper=c("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(a){var b=
this;this.opos=[a.pageX,a.pageY];if(!this.options.disabled){var d=this.options;this.selectees=c(d.filter,this.element[0]);this._trigger("start",a);c(d.appendTo).append(this.helper);this.helper.css({left:a.clientX,top:a.clientY,width:0,height:0});d.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var d=c.data(this,"selectable-item");d.startselected=!0;!a.metaKey&&!a.ctrlKey&&(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),
d.unselecting=!0,b._trigger("unselecting",a,{unselecting:d.element}))});c(a.target).parents().andSelf().each(function(){var d=c.data(this,"selectable-item");if(d){var f=!a.metaKey&&!a.ctrlKey||!d.$element.hasClass("ui-selected");return d.$element.removeClass(f?"ui-unselecting":"ui-selected").addClass(f?"ui-selecting":"ui-unselecting"),d.unselecting=!f,d.selecting=f,d.selected=f,f?b._trigger("selecting",a,{selecting:d.element}):b._trigger("unselecting",a,{unselecting:d.element}),!1}})}},_mouseDrag:function(a){var b=
this;this.dragged=!0;if(!this.options.disabled){var d=this.options,e=this.opos[0],f=this.opos[1],h=a.pageX,j=a.pageY;if(e>h)var m=h,h=e,e=m;f>j&&(m=j,j=f,f=m);return this.helper.css({left:e,top:f,width:h-e,height:j-f}),this.selectees.each(function(){var m=c.data(this,"selectable-item");if(m&&m.element!=b.element[0]){var g=!1;"touch"==d.tolerance?g=!(m.left>h||m.right<e||m.top>j||m.bottom<f):"fit"==d.tolerance&&(g=m.left>e&&m.right<h&&m.top>f&&m.bottom<j);g?(m.selected&&(m.$element.removeClass("ui-selected"),
m.selected=!1),m.unselecting&&(m.$element.removeClass("ui-unselecting"),m.unselecting=!1),m.selecting||(m.$element.addClass("ui-selecting"),m.selecting=!0,b._trigger("selecting",a,{selecting:m.element}))):(m.selecting&&((a.metaKey||a.ctrlKey)&&m.startselected?(m.$element.removeClass("ui-selecting"),m.selecting=!1,m.$element.addClass("ui-selected"),m.selected=!0):(m.$element.removeClass("ui-selecting"),m.selecting=!1,m.startselected&&(m.$element.addClass("ui-unselecting"),m.unselecting=!0),b._trigger("unselecting",
a,{unselecting:m.element}))),m.selected&&!a.metaKey&&!a.ctrlKey&&!m.startselected&&(m.$element.removeClass("ui-selected"),m.selected=!1,m.$element.addClass("ui-unselecting"),m.unselecting=!0,b._trigger("unselecting",a,{unselecting:m.element})))}}),!1}},_mouseStop:function(a){var b=this;this.dragged=!1;return c(".ui-unselecting",this.element[0]).each(function(){var d=c.data(this,"selectable-item");d.$element.removeClass("ui-unselecting");d.unselecting=!1;d.startselected=!1;b._trigger("unselected",
a,{unselected:d.element})}),c(".ui-selecting",this.element[0]).each(function(){var d=c.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected");d.selecting=!1;d.selected=!0;d.startselected=!0;b._trigger("selected",a,{selected:d.element})}),this._trigger("stop",a),this.helper.remove(),!1}});c.extend(c.ui.selectable,{version:"1.8.22"})})(jQuery);
(function(c){c.widget("ui.sortable",c.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");
this.refresh();this.floating=this.items.length?"x"===a.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1;this.offset=this.element.offset();this._mouseInit();this.ready=!0},destroy:function(){c.Widget.prototype.destroy.call(this);this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var a=this.items.length-1;0<=a;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(a,
b){"disabled"===a?(this.options[a]=b,this.widget()[b?"addClass":"removeClass"]("ui-sortable-disabled")):c.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(a,b){var d=this;if(this.reverting||this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(a);var e=null,f=this;c(a.target).parents().each(function(){if(c.data(this,d.widgetName+"-item")==f)return e=c(this),!1});c.data(a.target,d.widgetName+"-item")==f&&(e=c(a.target));if(!e)return!1;if(this.options.handle&&
!b){var h=!1;c(this.options.handle,e).find("*").andSelf().each(function(){this==a.target&&(h=!0)});if(!h)return!1}return this.currentItem=e,this._removeCurrentsFromItems(),!0},_mouseStart:function(a,b,d){b=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(a);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-
this.margins.left};c.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};
this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();b.containment&&this._setContainment();b.cursor&&(c("body").css("cursor")&&(this._storedCursor=c("body").css("cursor")),c("body").css("cursor",b.cursor));b.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",b.opacity));b.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",b.zIndex));this.scrollParent[0]!=
document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());this._trigger("start",a,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!d)for(d=this.containers.length-1;0<=d;d--)this.containers[d]._trigger("activate",a,this._uiHash(this));return c.ui.ddmanager&&(c.ui.ddmanager.current=this),c.ui.ddmanager&&!b.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,a),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(a),
!0},_mouseDrag:function(a){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var b=this.options,d=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-a.pageY<b.scrollSensitivity?this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+b.scrollSpeed:a.pageY-this.overflowOffset.top<b.scrollSensitivity&&
(this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-b.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-a.pageX<b.scrollSensitivity?this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+b.scrollSpeed:a.pageX-this.overflowOffset.left<b.scrollSensitivity&&(this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-b.scrollSpeed)):(a.pageY-c(document).scrollTop()<b.scrollSensitivity?d=c(document).scrollTop(c(document).scrollTop()-b.scrollSpeed):c(window).height()-
(a.pageY-c(document).scrollTop())<b.scrollSensitivity&&(d=c(document).scrollTop(c(document).scrollTop()+b.scrollSpeed)),a.pageX-c(document).scrollLeft()<b.scrollSensitivity?d=c(document).scrollLeft(c(document).scrollLeft()-b.scrollSpeed):c(window).width()-(a.pageX-c(document).scrollLeft())<b.scrollSensitivity&&(d=c(document).scrollLeft(c(document).scrollLeft()+b.scrollSpeed)));!1!==d&&c.ui.ddmanager&&!b.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,a)}this.positionAbs=this._convertPositionTo("absolute");
if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";for(b=this.items.length-1;0<=b;b--){var d=this.items[b],e=d.item[0],f=this._intersectsWithPointer(d);if(f&&e!=this.currentItem[0]&&this.placeholder[1==f?"next":"prev"]()[0]!=e&&!c.ui.contains(this.placeholder[0],e)&&("semi-dynamic"==this.options.type?!c.ui.contains(this.element[0],e):1)){this.direction=1==f?"down":
"up";if("pointer"==this.options.tolerance||this._intersectsWithSides(d))this._rearrange(a,d);else break;this._trigger("change",a,this._uiHash());break}}return this._contactContainers(a),c.ui.ddmanager&&c.ui.ddmanager.drag(this,a),this._trigger("sort",a,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(a,b){if(a){c.ui.ddmanager&&!this.options.dropBehaviour&&c.ui.ddmanager.drop(this,a);if(this.options.revert){var d=this,e=d.placeholder.offset();d.reverting=!0;c(this.helper).animate({left:e.left-
this.offset.parent.left-d.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-d.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(a)})}else this._clear(a,b);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();
for(var a=this.containers.length-1;0<=a;a--)this.containers[a]._trigger("deactivate",null,this._uiHash(this)),this.containers[a].containerCache.over&&(this.containers[a]._trigger("out",null,this._uiHash(this)),this.containers[a].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),c.extend(this,{helper:null,dragging:!1,
reverting:!1,_noFinalSort:null}),this.domPosition.prev?c(this.domPosition.prev).after(this.currentItem):c(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(a){var b=this._getItemsAsjQuery(a&&a.connected),d=[];return a=a||{},c(b).each(function(){var b=(c(a.item||this).attr(a.attribute||"id")||"").match(a.expression||/(.+)[-=_](.+)/);b&&d.push((a.key||b[1]+"[]")+"="+(a.key&&a.expression?b[1]:b[2]))}),!d.length&&a.key&&d.push(a.key+"="),d.join("&")},toArray:function(a){var b=
this._getItemsAsjQuery(a&&a.connected),d=[];return a=a||{},b.each(function(){d.push(c(a.item||this).attr(a.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,e=this.positionAbs.top,f=e+this.helperProportions.height,h=a.left,j=h+a.width,m=a.top,p=m+a.height,g=this.offset.click.top,n=this.offset.click.left;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?
"width":"height"]>a[this.floating?"width":"height"]?e+g>m&&e+g<p&&b+n>h&&b+n<j:h<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<j&&m<e+this.helperProportions.height/2&&f-this.helperProportions.height/2<p},_intersectsWithPointer:function(a){var b="x"===this.options.axis||c.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height);a="y"===this.options.axis||c.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width);b=b&&a;a=this._getDragVerticalDirection();
var d=this._getDragHorizontalDirection();return b?this.floating?d&&"right"==d||"down"==a?2:1:a&&("down"==a?2:1):!1},_intersectsWithSides:function(a){var b=c.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height);a=c.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width);var d=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?"right"==e&&a||"left"==e&&!a:d&&("down"==d&&b||"up"==d&&!b)},_getDragVerticalDirection:function(){var a=
this.positionAbs.top-this.lastPositionAbs.top;return 0!=a&&(0<a?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!=a&&(0<a?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(a){var b=[],d=[],e=this._connectWith();if(e&&a)for(a=e.length-1;0<=a;a--)for(var f=
c(e[a]),h=f.length-1;0<=h;h--){var j=c.data(f[h],this.widgetName);j&&j!=this&&!j.options.disabled&&d.push([c.isFunction(j.options.items)?j.options.items.call(j.element):c(j.options.items,j.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),j])}d.push([c.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):c(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(a=d.length-
1;0<=a;a--)d[a][0].each(function(){b.push(this)});return c(b)},_removeCurrentsFromItems:function(){for(var a=this.currentItem.find(":data("+this.widgetName+"-item)"),b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(a){this.items=[];this.containers=[this];var b=this.items,d=[[c.isFunction(this.options.items)?this.options.items.call(this.element[0],a,{item:this.currentItem}):c(this.options.items,this.element),this]],e=
this._connectWith();if(e&&this.ready)for(var f=e.length-1;0<=f;f--)for(var h=c(e[f]),j=h.length-1;0<=j;j--){var m=c.data(h[j],this.widgetName);m&&m!=this&&!m.options.disabled&&(d.push([c.isFunction(m.options.items)?m.options.items.call(m.element[0],a,{item:this.currentItem}):c(m.options.items,m.element),m]),this.containers.push(m))}for(f=d.length-1;0<=f;f--){a=d[f][1];e=d[f][0];j=0;for(h=e.length;j<h;j++)m=c(e[j]),m.data(this.widgetName+"-item",a),b.push({item:m,instance:a,width:0,height:0,left:0,
top:0})}},refreshPositions:function(a){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var b=this.items.length-1;0<=b;b--){var d=this.items[b];if(!(d.instance!=this.currentContainer&&this.currentContainer&&d.item[0]!=this.currentItem[0])){var e=this.options.toleranceElement?c(this.options.toleranceElement,d.item):d.item;a||(d.width=e.outerWidth(),d.height=e.outerHeight());e=e.offset();d.left=e.left;d.top=e.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);
else for(b=this.containers.length-1;0<=b;b--)e=this.containers[b].element.offset(),this.containers[b].containerCache.left=e.left,this.containers[b].containerCache.top=e.top,this.containers[b].containerCache.width=this.containers[b].element.outerWidth(),this.containers[b].containerCache.height=this.containers[b].element.outerHeight();return this},_createPlaceholder:function(a){var b=a||this,d=b.options;if(!d.placeholder||d.placeholder.constructor==String){var e=d.placeholder;d.placeholder={element:function(){var a=
c(document.createElement(b.currentItem[0].nodeName)).addClass(e||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return e||(a.style.visibility="hidden"),a},update:function(a,c){if(!e||d.forcePlaceholderSize)c.height()||c.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),c.width()||c.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||
0,10))}}}b.placeholder=c(d.placeholder.element.call(b.element,b.currentItem));b.currentItem.after(b.placeholder);d.placeholder.update(b,b.placeholder)},_contactContainers:function(a){for(var b=null,d=null,e=this.containers.length-1;0<=e;e--)if(!c.ui.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(!b||!c.ui.contains(this.containers[e].element[0],b.element[0]))b=this.containers[e],d=e}else this.containers[e].containerCache.over&&
(this.containers[e]._trigger("out",a,this._uiHash(this)),this.containers[e].containerCache.over=0);if(b)if(1===this.containers.length)this.containers[d]._trigger("over",a,this._uiHash(this)),this.containers[d].containerCache.over=1;else if(this.currentContainer!=this.containers[d]){for(var b=1E4,e=null,f=this.positionAbs[this.containers[d].floating?"left":"top"],h=this.items.length-1;0<=h;h--)if(c.ui.contains(this.containers[d].element[0],this.items[h].item[0])){var j=this.containers[d].floating?
this.items[h].item.offset().left:this.items[h].item.offset().top;Math.abs(j-f)<b&&(b=Math.abs(j-f),e=this.items[h],this.direction=0<j-f?"down":"up")}if(e||this.options.dropOnEmpty)this.currentContainer=this.containers[d],e?this._rearrange(a,e,null,!0):this._rearrange(a,null,this.containers[d].element,!0),this._trigger("change",a,this._uiHash()),this.containers[d]._trigger("change",a,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",
a,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(a){var b=this.options;a=c.isFunction(b.helper)?c(b.helper.apply(this.element[0],[a,this.currentItem])):"clone"==b.helper?this.currentItem.clone():this.currentItem;return a.parents("body").length||c("parent"!=b.appendTo?b.appendTo:this.currentItem[0].parentNode)[0].appendChild(a[0]),a[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),
top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==a[0].style.width||b.forceHelperSize)&&a.width(this.currentItem.width()),(""==a[0].style.height||b.forceHelperSize)&&a.height(this.currentItem.height()),a},_adjustOffsetFromHelper:function(a){"string"==typeof a&&(a=a.split(" "));c.isArray(a)&&(a={left:+a[0],top:+a[1]||0});"left"in a&&(this.offset.click.left=a.left+this.margins.left);"right"in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left);"top"in
a&&(this.offset.click.top=a.top+this.margins.top);"bottom"in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&
"html"==this.offsetParent[0].tagName.toLowerCase()&&c.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,
left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;"parent"==a.containment&&(a.containment=this.helper[0].parentNode);if("document"==a.containment||"window"==a.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,
0-this.offset.relative.top-this.offset.parent.top,c("document"==a.containment?document:window).width()-this.helperProportions.width-this.margins.left,(c("document"==a.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)){var b=c(a.containment)[0],a=c(a.containment).offset(),d="hidden"!=c(b).css("overflow");this.containment=[a.left+(parseInt(c(b).css("borderLeftWidth"),10)||
0)+(parseInt(c(b).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(c(b).css("borderTopWidth"),10)||0)+(parseInt(c(b).css("paddingTop"),10)||0)-this.margins.top,a.left+(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(c(b).css("borderLeftWidth"),10)||0)-(parseInt(c(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,a.top+(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(c(b).css("borderTopWidth"),10)||0)-(parseInt(c(b).css("paddingBottom"),
10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(a,b){b||(b=this.position);var d="absolute"==a?1:-1,e="absolute"==this.cssPosition&&(this.scrollParent[0]==document||!c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(e[0].tagName);return{top:b.top+this.offset.relative.top*d+this.offset.parent.top*d-(c.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():
f?0:e.scrollTop())*d),left:b.left+this.offset.relative.left*d+this.offset.parent.left*d-(c.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d)}},_generatePosition:function(a){var b=this.options,d="absolute"==this.cssPosition&&(this.scrollParent[0]==document||!c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(d[0].tagName);"relative"==this.cssPosition&&(this.scrollParent[0]==
document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var f=a.pageX,h=a.pageY;this.originalPosition&&(this.containment&&(a.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),a.pageY-this.offset.click.top<this.containment[1]&&(h=this.containment[1]+this.offset.click.top),a.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),a.pageY-this.offset.click.top>this.containment[3]&&
(h=this.containment[3]+this.offset.click.top)),b.grid&&(h=this.originalPageY+Math.round((h-this.originalPageY)/b.grid[1])*b.grid[1],h=this.containment?h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3]?h-this.offset.click.top<this.containment[1]?h+b.grid[1]:h-b.grid[1]:h:h,f=this.originalPageX+Math.round((f-this.originalPageX)/b.grid[0])*b.grid[0],f=this.containment?f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2]?f-this.offset.click.left<
this.containment[0]?f+b.grid[0]:f-b.grid[0]:f:f));return{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(c.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(c.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_rearrange:function(a,b,c,e){c?c[0].appendChild(this.placeholder[0]):
b.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?b.item[0]:b.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var f=this,h=this.counter;window.setTimeout(function(){h==f.counter&&f.refreshPositions(!e)},0)},_clear:function(a,b){this.reverting=!1;var d=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var e in this._storedCSS)if("auto"==this._storedCSS[e]||
"static"==this._storedCSS[e])this._storedCSS[e]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!b&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!b&&d.push(function(a){this._trigger("update",a,this._uiHash())});if(!c.ui.contains(this.element[0],
this.currentItem[0])){b||d.push(function(a){this._trigger("remove",a,this._uiHash())});for(e=this.containers.length-1;0<=e;e--)c.ui.contains(this.containers[e].element[0],this.currentItem[0])&&!b&&(d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.containers[e])),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.containers[e])))}for(e=this.containers.length-1;0<=e;e--)b||d.push(function(a){return function(b){a._trigger("deactivate",
b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over=0);this._storedCursor&&c("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex);this.dragging=!1;if(this.cancelHelperRemoval){if(!b){this._trigger("beforeStop",
a,this._uiHash());for(e=0;e<d.length;e++)d[e].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!1}b||this._trigger("beforeStop",a,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!b){for(e=0;e<d.length;e++)d[e].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){!1===c.Widget.prototype._trigger.apply(this,arguments)&&
this.cancel()},_uiHash:function(a){var b=a||this;return{helper:b.helper,placeholder:b.placeholder||c([]),position:b.position,originalPosition:b.originalPosition,offset:b.positionAbs,item:b.currentItem,sender:a?a.element:null}}});c.extend(c.ui.sortable,{version:"1.8.22"})})(jQuery);
(function(c){c.widget("ui.slider",c.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var a=this,b=this.options,d=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),e=b.values&&b.values.length||1,f=[];this._mouseSliding=this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+
this.orientation+" ui-widget ui-widget-content ui-corner-all"+(b.disabled?" ui-slider-disabled ui-disabled":""));this.range=c([]);b.range&&(!0===b.range&&(b.values||(b.values=[this._valueMin(),this._valueMin()]),b.values.length&&2!==b.values.length&&(b.values=[b.values[0],b.values[0]])),this.range=c("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===b.range||"max"===b.range?" ui-slider-range-"+b.range:"")));for(var h=d.length;h<e;h+=1)f.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
this.handles=d.add(c(f.join("")).appendTo(a.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){b.disabled||c(this).addClass("ui-state-hover")},function(){c(this).removeClass("ui-state-hover")}).focus(function(){b.disabled?c(this).blur():(c(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),c(this).addClass("ui-state-focus"))}).blur(function(){c(this).removeClass("ui-state-focus")});this.handles.each(function(a){c(this).data("index.ui-slider-handle",
a)});this.handles.keydown(function(b){var d=c(this).data("index.ui-slider-handle"),e,f,h;if(!a.options.disabled){switch(b.keyCode){case c.ui.keyCode.HOME:case c.ui.keyCode.END:case c.ui.keyCode.PAGE_UP:case c.ui.keyCode.PAGE_DOWN:case c.ui.keyCode.UP:case c.ui.keyCode.RIGHT:case c.ui.keyCode.DOWN:case c.ui.keyCode.LEFT:if(b.preventDefault(),!a._keySliding&&(a._keySliding=!0,c(this).addClass("ui-state-active"),e=a._start(b,d),!1===e))return}e=a.options.step;a.options.values&&a.options.values.length?
f=h=a.values(d):f=h=a.value();switch(b.keyCode){case c.ui.keyCode.HOME:h=a._valueMin();break;case c.ui.keyCode.END:h=a._valueMax();break;case c.ui.keyCode.PAGE_UP:h=a._trimAlignValue(f+(a._valueMax()-a._valueMin())/5);break;case c.ui.keyCode.PAGE_DOWN:h=a._trimAlignValue(f-(a._valueMax()-a._valueMin())/5);break;case c.ui.keyCode.UP:case c.ui.keyCode.RIGHT:if(f===a._valueMax())return;h=a._trimAlignValue(f+e);break;case c.ui.keyCode.DOWN:case c.ui.keyCode.LEFT:if(f===a._valueMin())return;h=a._trimAlignValue(f-
e)}a._slide(b,d,h)}}).keyup(function(b){var d=c(this).data("index.ui-slider-handle");a._keySliding&&(a._keySliding=!1,a._stop(b,d),a._change(b,d),c(this).removeClass("ui-state-active"))});this._refreshValue();this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},
_mouseCapture:function(a){var b=this.options,d,e,f,h,j,m,p,g,n;return b.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),d={x:a.pageX,y:a.pageY},e=this._normValueFromMouse(d),f=this._valueMax()-this._valueMin()+1,j=this,this.handles.each(function(a){var b=Math.abs(e-j.values(a));f>b&&(f=b,h=c(this),m=a)}),!0===b.range&&this.values(1)===b.min&&(m+=1,h=c(this.handles[m])),p=this._start(a,m),!1===p?!1:(this._mouseSliding=
!0,j._handleIndex=m,h.addClass("ui-state-active").focus(),g=h.offset(),n=!c(a.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=n?{left:0,top:0}:{left:a.pageX-g.left-h.width()/2,top:a.pageY-g.top-h.height()/2-(parseInt(h.css("borderTopWidth"),10)||0)-(parseInt(h.css("borderBottomWidth"),10)||0)+(parseInt(h.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(a,m,e),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b=
this._normValueFromMouse({x:a.pageX,y:a.pageY});return this._slide(a,this._handleIndex,b),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,e,f,h;return"horizontal"===
this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),e=c/b,1<e&&(e=1),0>e&&(e=0),"vertical"===this.orientation&&(e=1-e),f=this._valueMax()-this._valueMin(),h=this._valueMin()+e*f,this._trimAlignValue(h)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=
this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var e,f,h;this.options.values&&this.options.values.length?(e=this.values(b?0:1),2===this.options.values.length&&!0===this.options.range&&(0===b&&c>e||1===b&&c<e)&&(c=e),c!==this.values(b)&&(f=this.values(),f[b]=c,h=this._trigger("slide",a,{handle:this.handles[b],value:c,values:f}),this.values(b?0:1),!1!==h&&this.values(b,c,!0))):c!==this.value()&&(h=this._trigger("slide",a,{handle:this.handles[b],value:c}),!1!==
h&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values());this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values());this._trigger("change",a,c)}},value:function(a){if(arguments.length)this.options.value=
this._trimAlignValue(a),this._refreshValue(),this._change(null,0);else return this._value()},values:function(a,b){var d,e,f;if(1<arguments.length)this.options.values[a]=this._trimAlignValue(b),this._refreshValue(),this._change(null,a);else{if(!arguments.length)return this._values();if(!c.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(a):this.value();d=this.options.values;e=arguments[0];for(f=0;f<d.length;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,
f);this._refreshValue()}},_setOption:function(a,b){var d,e=0;c.isArray(this.options.values)&&(e=this.options.values.length);c.Widget.prototype._setOption.apply(this,arguments);switch(a){case "disabled":b?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+
this.orientation);this._refreshValue();break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(d=0;d<e;d+=1)this._change(null,d);this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a),a},_values:function(a){var b,c;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b),b;b=this.options.values.slice();for(c=0;c<b.length;c+=1)b[c]=
this._trimAlignValue(b[c]);return b},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=0<this.options.step?this.options.step:1,c=(a-this._valueMin())%b;a-=c;return 2*Math.abs(c)>=b&&(a+=0<c?b:-b),parseFloat(a.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var a=this.options.range,b=this.options,d=this,e=this._animateOff?!1:b.animate,f,h={},
j,m,p,g;this.options.values&&this.options.values.length?this.handles.each(function(a){f=100*((d.values(a)-d._valueMin())/(d._valueMax()-d._valueMin()));h["horizontal"===d.orientation?"left":"bottom"]=f+"%";c(this).stop(1,1)[e?"animate":"css"](h,b.animate);!0===d.options.range&&("horizontal"===d.orientation?(0===a&&d.range.stop(1,1)[e?"animate":"css"]({left:f+"%"},b.animate),1===a&&d.range[e?"animate":"css"]({width:f-j+"%"},{queue:!1,duration:b.animate})):(0===a&&d.range.stop(1,1)[e?"animate":"css"]({bottom:f+
"%"},b.animate),1===a&&d.range[e?"animate":"css"]({height:f-j+"%"},{queue:!1,duration:b.animate})));j=f}):(m=this.value(),p=this._valueMin(),g=this._valueMax(),f=g!==p?100*((m-p)/(g-p)):0,h["horizontal"===d.orientation?"left":"bottom"]=f+"%",this.handle.stop(1,1)[e?"animate":"css"](h,b.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[e?"animate":"css"]({width:f+"%"},b.animate),"max"===a&&"horizontal"===this.orientation&&this.range[e?"animate":"css"]({width:100-f+"%"},{queue:!1,
duration:b.animate}),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[e?"animate":"css"]({height:f+"%"},b.animate),"max"===a&&"vertical"===this.orientation&&this.range[e?"animate":"css"]({height:100-f+"%"},{queue:!1,duration:b.animate}))}});c.extend(c.ui.slider,{version:"1.8.22"})})(jQuery);
jQuery.effects||function(c,a){function b(a){var b;return a&&a.constructor==Array&&3==a.length?a:(b=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3],10)]:(b=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))?[2.55*parseFloat(b[1]),2.55*parseFloat(b[2]),2.55*parseFloat(b[3])]:(b=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))?[parseInt(b[1],16),parseInt(b[2],
16),parseInt(b[3],16)]:(b=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))?[parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16),parseInt(b[3]+b[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(a)?m.transparent:m[c.trim(a).toLowerCase()]}function d(){var a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={},c,d;if(a&&a.length&&a[0]&&a[a[0]])for(var e=a.length;e--;)c=a[e],"string"==typeof a[c]&&(d=c.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),b[d]=a[c]);else for(c in a)"string"==
typeof a[c]&&(b[c]=a[c]);return b}function e(a){var b,d;for(b in a)d=a[b],(null==d||c.isFunction(d)||b in g||/scrollbar/.test(b)||!/color/i.test(b)&&isNaN(parseFloat(d)))&&delete a[b];return a}function f(a,b){var c={_:0},d;for(d in b)a[d]!=b[d]&&(c[d]=b[d]);return c}function h(a,b,d,e){"object"==typeof a&&(e=b,d=null,b=a,a=b.effect);c.isFunction(b)&&(e=b,d=null,b={});if("number"==typeof b||c.fx.speeds[b])e=d,d=b,b={};return c.isFunction(d)&&(e=d,d=null),b=b||{},d=d||b.duration,d=c.fx.off?0:"number"==
typeof d?d:d in c.fx.speeds?c.fx.speeds[d]:c.fx.speeds._default,e=e||b.complete,[a,b,d,e]}function j(a){return!a||"number"==typeof a||c.fx.speeds[a]?!0:"string"==typeof a&&!c.effects[a]?!0:!1}c.effects={};c.each("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor borderColor color outlineColor".split(" "),function(a,d){c.fx.step[d]=function(a){if(!a.colorInit){var e;e=a.elem;var f=d,g;do{g=(c.curCSS||c.css)(e,f);if(""!=g&&"transparent"!=g||c.nodeName(e,"body"))break;
f="backgroundColor"}while(e=e.parentNode);e=b(g);a.start=e;a.end=b(a.end);a.colorInit=!0}a.elem.style[d]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var m={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,
0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,
255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},p=["add","remove","toggle"],g={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};c.effects.animateClass=function(a,b,g,h){return c.isFunction(g)&&(h=g,g=null),this.queue(function(){var j=
c(this),m=j.attr("style")||" ",x=e(d.call(this)),v,C=j.attr("class")||"";c.each(p,function(b,c){a[c]&&j[c+"Class"](a[c])});v=e(d.call(this));j.attr("class",C);j.animate(f(x,v),{queue:!1,duration:b,easing:g,complete:function(){c.each(p,function(b,c){a[c]&&j[c+"Class"](a[c])});"object"==typeof j.attr("style")?(j.attr("style").cssText="",j.attr("style").cssText=m):j.attr("style",m);h&&h.apply(this,arguments);c.dequeue(this)}})})};c.fn.extend({_addClass:c.fn.addClass,addClass:function(a,b,d,e){return b?
c.effects.animateClass.apply(this,[{add:a},b,d,e]):this._addClass(a)},_removeClass:c.fn.removeClass,removeClass:function(a,b,d,e){return b?c.effects.animateClass.apply(this,[{remove:a},b,d,e]):this._removeClass(a)},_toggleClass:c.fn.toggleClass,toggleClass:function(b,d,e,f,g){return"boolean"==typeof d||d===a?e?c.effects.animateClass.apply(this,[d?{add:b}:{remove:b},e,f,g]):this._toggleClass(b,d):c.effects.animateClass.apply(this,[{toggle:b},d,e,f])},switchClass:function(a,b,d,e,f){return c.effects.animateClass.apply(this,
[{add:b,remove:a},d,e,f])}});c.extend(c.effects,{version:"1.8.22",save:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){return"toggle"==b&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case "top":c=0;break;case "middle":c=0.5;break;case "bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case "left":d=
0;break;case "center":d=0.5;break;case "right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(a){if(a.parent().is(".ui-effects-wrapper"))return a.parent();var b={width:a.outerWidth(!0),height:a.outerHeight(!0),"float":a.css("float")},d=c("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;try{e.id}catch(f){e=document.body}return a.wrap(d),(a[0]===e||c.contains(a[0],e))&&c(e).focus(),
d=a.parent(),"static"==a.css("position")?(d.css({position:"relative"}),a.css({position:"relative"})):(c.extend(b,{position:a.css("position"),zIndex:a.css("z-index")}),c.each(["top","left","bottom","right"],function(c,d){b[d]=a.css(d);isNaN(parseInt(b[d],10))&&(b[d]="auto")}),a.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),d.css(b).show()},removeWrapper:function(a){var b,d=document.activeElement;return a.parent().is(".ui-effects-wrapper")?(b=a.parent().replaceWith(a),(a[0]===
d||c.contains(a[0],d))&&c(d).focus(),b):a},setTransition:function(a,b,d,e){return e=e||{},c.each(b,function(b,c){var f=a.cssUnit(c);0<f[0]&&(e[c]=f[0]*d+f[1])}),e}});c.fn.extend({effect:function(a,b,d,e){var f=h.apply(this,arguments),g={options:f[1],duration:f[2],callback:f[3]},f=g.options.mode,j=c.effects[a];return c.fx.off||!j?f?this[f](g.duration,g.callback):this.each(function(){g.callback&&g.callback.call(this)}):j.call(this,g)},_show:c.fn.show,show:function(a){if(j(a))return this._show.apply(this,
arguments);var b=h.apply(this,arguments);return b[1].mode="show",this.effect.apply(this,b)},_hide:c.fn.hide,hide:function(a){if(j(a))return this._hide.apply(this,arguments);var b=h.apply(this,arguments);return b[1].mode="hide",this.effect.apply(this,b)},__toggle:c.fn.toggle,toggle:function(a){if(j(a)||"boolean"==typeof a||c.isFunction(a))return this.__toggle.apply(this,arguments);var b=h.apply(this,arguments);return b[1].mode="toggle",this.effect.apply(this,b)},cssUnit:function(a){var b=this.css(a),
d=[];return c.each(["em","px","%","pt"],function(a,c){0<b.indexOf(c)&&(d=[parseFloat(b),c])}),d}});c.easing.jswing=c.easing.swing;c.extend(c.easing,{def:"easeOutQuad",swing:function(a,b,d,e,f){return c.easing[c.easing.def](a,b,d,e,f)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return 1>(b/=e/2)?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,
b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return 1>(b/=e/2)?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return 1>(b/=e/2)?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return 1>
(b/=e/2)?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return 0==b?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return 0==b?c:b==e?c+d:1>(b/=e/2)?d/2*Math.pow(2,10*
(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return 1>(b/=e/2)?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){a=1.70158;var f=0,g=d;if(0==b)return c;if(1==(b/=e))return c+d;f||(f=0.3*e);g<Math.abs(d)?(g=d,a=f/4):a=f/(2*Math.PI)*Math.asin(d/g);return-(g*Math.pow(2,10*(b-=1))*Math.sin(2*
(b*e-a)*Math.PI/f))+c},easeOutElastic:function(a,b,c,d,e){a=1.70158;var f=0,g=d;if(0==b)return c;if(1==(b/=e))return c+d;f||(f=0.3*e);g<Math.abs(d)?(g=d,a=f/4):a=f/(2*Math.PI)*Math.asin(d/g);return g*Math.pow(2,-10*b)*Math.sin(2*(b*e-a)*Math.PI/f)+d+c},easeInOutElastic:function(a,b,c,d,e){a=1.70158;var f=0,g=d;if(0==b)return c;if(2==(b/=e/2))return c+d;f||(f=1.5*0.3*e);g<Math.abs(d)?(g=d,a=f/4):a=f/(2*Math.PI)*Math.asin(d/g);return 1>b?-0.5*g*Math.pow(2,10*(b-=1))*Math.sin(2*(b*e-a)*Math.PI/f)+c:
0.5*g*Math.pow(2,-10*(b-=1))*Math.sin(2*(b*e-a)*Math.PI/f)+d+c},easeInBack:function(b,c,d,e,f,g){return g==a&&(g=1.70158),e*(c/=f)*c*((g+1)*c-g)+d},easeOutBack:function(b,c,d,e,f,g){return g==a&&(g=1.70158),e*((c=c/f-1)*c*((g+1)*c+g)+1)+d},easeInOutBack:function(b,c,d,e,f,g){return g==a&&(g=1.70158),1>(c/=f/2)?e/2*c*c*(((g*=1.525)+1)*c-g)+d:e/2*((c-=2)*c*(((g*=1.525)+1)*c+g)+2)+d},easeInBounce:function(a,b,d,e,f){return e-c.easing.easeOutBounce(a,f-b,0,e,f)+d},easeOutBounce:function(a,b,c,d,e){return(b/=
e)<1/2.75?7.5625*d*b*b+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+0.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+0.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+0.984375)+c},easeInOutBounce:function(a,b,d,e,f){return b<f/2?0.5*c.easing.easeInBounce(a,2*b,0,e,f)+d:0.5*c.easing.easeOutBounce(a,2*b-f,0,e,f)+0.5*e+d}})}(jQuery);
(function(c){c.effects.blind=function(a){return this.queue(function(){var b=c(this),d=["position","top","bottom","left","right"],e=c.effects.setMode(b,a.options.mode||"hide"),f=a.options.direction||"vertical";c.effects.save(b,d);b.show();var h=c.effects.createWrapper(b).css({overflow:"hidden"}),j="vertical"==f?"height":"width",f="vertical"==f?h.height():h.width();"show"==e&&h.css(j,0);var m={};m[j]="show"==e?f:0;h.animate(m,a.duration,a.options.easing,function(){"hide"==e&&b.hide();c.effects.restore(b,
d);c.effects.removeWrapper(b);a.callback&&a.callback.apply(b[0],arguments);b.dequeue()})})}})(jQuery);
(function(c){c.effects.bounce=function(a){return this.queue(function(){var b=c(this),d=["position","top","bottom","left","right"],e=c.effects.setMode(b,a.options.mode||"effect"),f=a.options.direction||"up",h=a.options.distance||20,j=a.options.times||5,m=a.duration||250;/show|hide/.test(e)&&d.push("opacity");c.effects.save(b,d);b.show();c.effects.createWrapper(b);var p="up"==f||"down"==f?"top":"left",f="up"==f||"left"==f?"pos":"neg",h=a.options.distance||("top"==p?b.outerHeight(!0)/3:b.outerWidth(!0)/
3);"show"==e&&b.css("opacity",0).css(p,"pos"==f?-h:h);"hide"==e&&(h/=2*j);"hide"!=e&&j--;if("show"==e){var g={opacity:1};g[p]=("pos"==f?"+=":"-=")+h;b.animate(g,m/2,a.options.easing);h/=2;j--}for(g=0;g<j;g++){var n={},q={};n[p]=("pos"==f?"-=":"+=")+h;q[p]=("pos"==f?"+=":"-=")+h;b.animate(n,m/2,a.options.easing).animate(q,m/2,a.options.easing);h="hide"==e?2*h:h/2}"hide"==e?(g={opacity:0},g[p]=("pos"==f?"-=":"+=")+h,b.animate(g,m/2,a.options.easing,function(){b.hide();c.effects.restore(b,d);c.effects.removeWrapper(b);
a.callback&&a.callback.apply(this,arguments)})):(n={},q={},n[p]=("pos"==f?"-=":"+=")+h,q[p]=("pos"==f?"+=":"-=")+h,b.animate(n,m/2,a.options.easing).animate(q,m/2,a.options.easing,function(){c.effects.restore(b,d);c.effects.removeWrapper(b);a.callback&&a.callback.apply(this,arguments)}));b.queue("fx",function(){b.dequeue()});b.dequeue()})}})(jQuery);
(function(c){c.effects.clip=function(a){return this.queue(function(){var b=c(this),d="position top bottom left right height width".split(" "),e=c.effects.setMode(b,a.options.mode||"hide"),f=a.options.direction||"vertical";c.effects.save(b,d);b.show();var h=c.effects.createWrapper(b).css({overflow:"hidden"}),h="IMG"==b[0].tagName?h:b,j="vertical"==f?"height":"width",m="vertical"==f?"top":"left",f="vertical"==f?h.height():h.width();"show"==e&&(h.css(j,0),h.css(m,f/2));var p={};p[j]="show"==e?f:0;p[m]=
"show"==e?0:f/2;h.animate(p,{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){"hide"==e&&b.hide();c.effects.restore(b,d);c.effects.removeWrapper(b);a.callback&&a.callback.apply(b[0],arguments);b.dequeue()}})})}})(jQuery);
(function(c){c.effects.drop=function(a){return this.queue(function(){var b=c(this),d="position top bottom left right opacity".split(" "),e=c.effects.setMode(b,a.options.mode||"hide"),f=a.options.direction||"left";c.effects.save(b,d);b.show();c.effects.createWrapper(b);var h="up"==f||"down"==f?"top":"left",f="up"==f||"left"==f?"pos":"neg",j=a.options.distance||("top"==h?b.outerHeight(!0)/2:b.outerWidth(!0)/2);"show"==e&&b.css("opacity",0).css(h,"pos"==f?-j:j);var m={opacity:"show"==e?1:0};m[h]=("show"==
e?"pos"==f?"+=":"-=":"pos"==f?"-=":"+=")+j;b.animate(m,{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){"hide"==e&&b.hide();c.effects.restore(b,d);c.effects.removeWrapper(b);a.callback&&a.callback.apply(this,arguments);b.dequeue()}})})}})(jQuery);
(function(c){c.effects.explode=function(a){return this.queue(function(){var b=a.options.pieces?Math.round(Math.sqrt(a.options.pieces)):3,d=a.options.pieces?Math.round(Math.sqrt(a.options.pieces)):3;a.options.mode="toggle"==a.options.mode?c(this).is(":visible")?"hide":"show":a.options.mode;var e=c(this).show().css("visibility","hidden"),f=e.offset();f.top-=parseInt(e.css("marginTop"),10)||0;f.left-=parseInt(e.css("marginLeft"),10)||0;for(var h=e.outerWidth(!0),j=e.outerHeight(!0),m=0;m<b;m++)for(var p=
0;p<d;p++)e.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-p*(h/d),top:-m*(j/b)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:h/d,height:j/b,left:f.left+p*(h/d)+("show"==a.options.mode?(p-Math.floor(d/2))*(h/d):0),top:f.top+m*(j/b)+("show"==a.options.mode?(m-Math.floor(b/2))*(j/b):0),opacity:"show"==a.options.mode?0:1}).animate({left:f.left+p*(h/d)+("show"==a.options.mode?0:(p-Math.floor(d/2))*(h/d)),top:f.top+
m*(j/b)+("show"==a.options.mode?0:(m-Math.floor(b/2))*(j/b)),opacity:"show"==a.options.mode?1:0},a.duration||500);setTimeout(function(){"show"==a.options.mode?e.css({visibility:"visible"}):e.css({visibility:"visible"}).hide();a.callback&&a.callback.apply(e[0]);e.dequeue();c("div.ui-effects-explode").remove()},a.duration||500)})}})(jQuery);
(function(c){c.effects.fade=function(a){return this.queue(function(){var b=c(this),d=c.effects.setMode(b,a.options.mode||"hide");b.animate({opacity:d},{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){a.callback&&a.callback.apply(this,arguments);b.dequeue()}})})}})(jQuery);
(function(c){c.effects.fold=function(a){return this.queue(function(){var b=c(this),d=["position","top","bottom","left","right"],e=c.effects.setMode(b,a.options.mode||"hide"),f=a.options.size||15,h=!!a.options.horizFirst,j=a.duration?a.duration/2:c.fx.speeds._default/2;c.effects.save(b,d);b.show();var m=c.effects.createWrapper(b).css({overflow:"hidden"}),p="show"==e!=h,g=p?["width","height"]:["height","width"],p=p?[m.width(),m.height()]:[m.height(),m.width()],n=/([0-9]+)%/.exec(f);n&&(f=parseInt(n[1],
10)/100*p["hide"==e?0:1]);"show"==e&&m.css(h?{height:0,width:f}:{height:f,width:0});h={};n={};h[g[0]]="show"==e?p[0]:f;n[g[1]]="show"==e?p[1]:0;m.animate(h,j,a.options.easing).animate(n,j,a.options.easing,function(){"hide"==e&&b.hide();c.effects.restore(b,d);c.effects.removeWrapper(b);a.callback&&a.callback.apply(b[0],arguments);b.dequeue()})})}})(jQuery);
(function(c){c.effects.highlight=function(a){return this.queue(function(){var b=c(this),d=["backgroundImage","backgroundColor","opacity"],e=c.effects.setMode(b,a.options.mode||"show"),f={backgroundColor:b.css("backgroundColor")};"hide"==e&&(f.opacity=0);c.effects.save(b,d);b.show().css({backgroundImage:"none",backgroundColor:a.options.color||"#ffff99"}).animate(f,{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){"hide"==e&&b.hide();c.effects.restore(b,d);"show"==e&&!c.support.opacity&&
this.style.removeAttribute("filter");a.callback&&a.callback.apply(this,arguments);b.dequeue()}})})}})(jQuery);
(function(c){c.effects.pulsate=function(a){return this.queue(function(){var b=c(this),d=c.effects.setMode(b,a.options.mode||"show"),e=2*(a.options.times||5)-1,f=a.duration?a.duration/2:c.fx.speeds._default/2,h=b.is(":visible"),j=0;h||(b.css("opacity",0).show(),j=1);("hide"==d&&h||"show"==d&&!h)&&e--;for(d=0;d<e;d++)b.animate({opacity:j},f,a.options.easing),j=(j+1)%2;b.animate({opacity:j},f,a.options.easing,function(){0==j&&b.hide();a.callback&&a.callback.apply(this,arguments)});b.queue("fx",function(){b.dequeue()}).dequeue()})}})(jQuery);
(function(c){c.effects.puff=function(a){return this.queue(function(){var b=c(this),d=c.effects.setMode(b,a.options.mode||"hide"),e=parseInt(a.options.percent,10)||150,f=e/100,h={height:b.height(),width:b.width()};c.extend(a.options,{fade:!0,mode:d,percent:"hide"==d?e:100,from:"hide"==d?h:{height:h.height*f,width:h.width*f}});b.effect("scale",a.options,a.duration,a.callback);b.dequeue()})};c.effects.scale=function(a){return this.queue(function(){var b=c(this),d=c.extend(!0,{},a.options),e=c.effects.setMode(b,
a.options.mode||"effect"),f=parseInt(a.options.percent,10)||(0==parseInt(a.options.percent,10)?0:"hide"==e?0:100),h=a.options.direction||"both",j=a.options.origin;"effect"!=e&&(d.origin=j||["middle","center"],d.restore=!0);j={height:b.height(),width:b.width()};b.from=a.options.from||("show"==e?{height:0,width:0}:j);b.to={height:j.height*("horizontal"!=h?f/100:1),width:j.width*("vertical"!=h?f/100:1)};a.options.fade&&("show"==e&&(b.from.opacity=0,b.to.opacity=1),"hide"==e&&(b.from.opacity=1,b.to.opacity=
0));d.from=b.from;d.to=b.to;d.mode=e;b.effect("size",d,a.duration,a.callback);b.dequeue()})};c.effects.size=function(a){return this.queue(function(){var b=c(this),d="position top bottom left right width height overflow opacity".split(" "),e="position top bottom left right overflow opacity".split(" "),f=["width","height","overflow"],h=["fontSize"],j=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],m=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=c.effects.setMode(b,
a.options.mode||"effect"),g=a.options.restore||!1,n=a.options.scale||"both",q=a.options.origin,u={height:b.height(),width:b.width()};b.from=a.options.from||u;b.to=a.options.to||u;q&&(q=c.effects.getBaseline(q,u),b.from.top=(u.height-b.from.height)*q.y,b.from.left=(u.width-b.from.width)*q.x,b.to.top=(u.height-b.to.height)*q.y,b.to.left=(u.width-b.to.width)*q.x);var s=b.from.height/u.height,A=b.from.width/u.width,y=b.to.height/u.height,x=b.to.width/u.width;if("box"==n||"both"==n)s!=y&&(d=d.concat(j),
b.from=c.effects.setTransition(b,j,s,b.from),b.to=c.effects.setTransition(b,j,y,b.to)),A!=x&&(d=d.concat(m),b.from=c.effects.setTransition(b,m,A,b.from),b.to=c.effects.setTransition(b,m,x,b.to));("content"==n||"both"==n)&&s!=y&&(d=d.concat(h),b.from=c.effects.setTransition(b,h,s,b.from),b.to=c.effects.setTransition(b,h,y,b.to));c.effects.save(b,g?d:e);b.show();c.effects.createWrapper(b);b.css("overflow","hidden").css(b.from);if("content"==n||"both"==n)j=j.concat(["marginTop","marginBottom"]).concat(h),
m=m.concat(["marginLeft","marginRight"]),f=d.concat(j).concat(m),b.find("*[width]").each(function(){var b=c(this);g&&c.effects.save(b,f);var d=b.height(),e=b.width();b.from={height:d*s,width:e*A};b.to={height:d*y,width:e*x};s!=y&&(b.from=c.effects.setTransition(b,j,s,b.from),b.to=c.effects.setTransition(b,j,y,b.to));A!=x&&(b.from=c.effects.setTransition(b,m,A,b.from),b.to=c.effects.setTransition(b,m,x,b.to));b.css(b.from);b.animate(b.to,a.duration,a.options.easing,function(){g&&c.effects.restore(b,
f)})});b.animate(b.to,{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){0===b.to.opacity&&b.css("opacity",b.from.opacity);"hide"==p&&b.hide();c.effects.restore(b,g?d:e);c.effects.removeWrapper(b);a.callback&&a.callback.apply(this,arguments);b.dequeue()}})})}})(jQuery);
(function(c){c.effects.shake=function(a){return this.queue(function(){var b=c(this),d=["position","top","bottom","left","right"];c.effects.setMode(b,a.options.mode||"effect");var e=a.options.direction||"left",f=a.options.distance||20,h=a.options.times||3,j=a.duration||a.options.duration||140;c.effects.save(b,d);b.show();c.effects.createWrapper(b);var m="up"==e||"down"==e?"top":"left",p="up"==e||"left"==e?"pos":"neg",e={},g={},n={};e[m]=("pos"==p?"-=":"+=")+f;g[m]=("pos"==p?"+=":"-=")+2*f;n[m]=("pos"==
p?"-=":"+=")+2*f;b.animate(e,j,a.options.easing);for(f=1;f<h;f++)b.animate(g,j,a.options.easing).animate(n,j,a.options.easing);b.animate(g,j,a.options.easing).animate(e,j/2,a.options.easing,function(){c.effects.restore(b,d);c.effects.removeWrapper(b);a.callback&&a.callback.apply(this,arguments)});b.queue("fx",function(){b.dequeue()});b.dequeue()})}})(jQuery);
(function(c){c.effects.slide=function(a){return this.queue(function(){var b=c(this),d=["position","top","bottom","left","right"],e=c.effects.setMode(b,a.options.mode||"show"),f=a.options.direction||"left";c.effects.save(b,d);b.show();c.effects.createWrapper(b).css({overflow:"hidden"});var h="up"==f||"down"==f?"top":"left",f="up"==f||"left"==f?"pos":"neg",j=a.options.distance||("top"==h?b.outerHeight(!0):b.outerWidth(!0));"show"==e&&b.css(h,"pos"==f?isNaN(j)?"-"+j:-j:j);var m={};m[h]=("show"==e?"pos"==
f?"+=":"-=":"pos"==f?"-=":"+=")+j;b.animate(m,{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){"hide"==e&&b.hide();c.effects.restore(b,d);c.effects.removeWrapper(b);a.callback&&a.callback.apply(this,arguments);b.dequeue()}})})}})(jQuery);
(function(c){c.effects.transfer=function(a){return this.queue(function(){var b=c(this),d=c(a.options.to),e=d.offset(),d={top:e.top,left:e.left,height:d.innerHeight(),width:d.innerWidth()},e=b.offset(),f=c('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(a.options.className).css({top:e.top,left:e.left,height:b.innerHeight(),width:b.innerWidth(),position:"absolute"}).animate(d,a.duration,a.options.easing,function(){f.remove();a.callback&&a.callback.apply(b[0],arguments);b.dequeue()})})}})(jQuery);
jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(c,a,b,d,e){return jQuery.easing[jQuery.easing.def](c,a,b,d,e)}});
(function(c){function a(a,b,c,j){a="("+c.replace(d,"\\$1")+")";b.name.replace(RegExp(a,"gi"),"<strong>$1</strong>");a='<span class="city">'+b.name+', </span><span class="country">'+b.country+"</span>";j&&(a+='<span class="code">'+b.code+"</span>");return a}function b(b,d){this.el=c(b);this.el.attr("autocomplete","off");this.suggestions=[];this.data=[];this.badQueries=[];this.selectedIndex=-1;this.currentValue=this.el.val();this.intervalId=0;this.cachedResponse=[];this.onChange=this.onChangeInterval=
null;this.ignoreValueChange=!1;this.serviceUrl=d.serviceUrl;this.isLocal=!1;this.options={showCode:!0,autoSubmit:!1,minChars:1,maxHeight:300,deferRequestBy:0,width:0,highlight:!0,params:{},fnFormatResult:a,delimiter:null,zIndex:9999};this.initialize();this.setOptions(d);this.el.data("autocomplete",this)}var d=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","g");c.fn.autocomplete=function(a,d){var h;if("string"==typeof a){if(h=this.data("autocomplete"),"function"==typeof h[a])h[a](d)}else h=
new b(this.get(0)||c("<input />"),a);return h};b.prototype={killerFn:null,initialize:function(){var a,b,d;a=this;b=Math.floor(1048576*Math.random()).toString(16);d="Autocomplete_"+b;this.killerFn=function(b){0===c(b.target).parents(".autocomplete").size()&&(a.killSuggestions(),a.disableKillerFn())};this.options.width||(this.options.width=this.el.innerWidth()-1);this.mainContainerId="AutocompleteContainter_"+b;c('<div id="'+this.mainContainerId+'" style="position:absolute;z-index:9999;"><div class="autocomplete-w1"><div class="left"></div><div class="center"></div><div class="right"></div><div class="autocomplete" id="'+
d+'" style="display:none;"></div></div></div>').appendTo("body");this.container=c("#"+d);this.fixPosition();window.opera?this.el.keypress(function(b){a.onKeyPress(b)}):this.el.keydown(function(b){a.onKeyPress(b)});this.el.keyup(function(b){a.onKeyUp(b)});this.el.blur(function(){a.enableKillerFn()});this.el.focus(function(){a.fixPosition()});this.el.change(function(){a.onValueChanged()})},extendOptions:function(a){c.extend(this.options,a)},setOptions:function(a){var b=this.options;this.extendOptions(a);
if(b.lookup||b.isLocal)this.isLocal=!0,c.isArray(b.lookup)&&(b.lookup={suggestions:b.lookup,data:[]});c("#"+this.mainContainerId).css({zIndex:b.zIndex});this.container.css({width:b.width+1})},clearCache:function(){this.cachedResponse=[];this.badQueries=[]},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},fixPosition:function(){var a=this.el.offset();c("#"+this.mainContainerId).css({top:a.top+this.el.innerHeight()+"px",left:a.left+"px"})},enableKillerFn:function(){c(document).bind("click",
this.killerFn)},disableKillerFn:function(){c(document).unbind("click",this.killerFn)},killSuggestions:function(){var a=this;this.stopKillSuggestions();this.intervalId=window.setInterval(function(){a.hide();a.stopKillSuggestions()},300)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},onValueChanged:function(){this.change(this.selectedIndex)},onKeyPress:function(a){if(!this.disabled&&this.enabled){switch(a.keyCode){case 27:this.el.val(this.currentValue);this.hide();break;case 9:case 13:if(-1===
this.selectedIndex){this.hide();return}this.select(this.selectedIndex);if(9===a.keyCode)return;break;case 38:this.moveUp();break;case 40:this.moveDown();break;default:return}a.stopImmediatePropagation();a.preventDefault()}},onKeyUp:function(a){if(!this.disabled){switch(a.keyCode){case 38:case 40:return}clearInterval(this.onChangeInterval);if(this.currentValue!==this.el.val())if(0<this.options.deferRequestBy){var b=this;this.onChangeInterval=setInterval(function(){b.onValueChange(a)},this.options.deferRequestBy)}else this.onValueChange(a)}},
onValueChange:function(a){clearInterval(this.onChangeInterval);this.currentValue=this.el.val();var b=this.getQuery(this.currentValue);this.selectedIndex=-1;this.ignoreValueChange?this.ignoreValueChange=!1:""===b||b.length<this.options.minChars?this.hide():this.getSuggestions(b,a)},getQuery:function(a){var b;b=this.options.delimiter;if(!b)return c.trim(a);a=a.split(b);return c.trim(a[a.length-1])},getSuggestionsLocal:function(a){var b,c,d,m,p;c=this.options.lookup;d=c.suggestions.length;b={suggestions:[],
data:[]};a=a.toLowerCase();for(p=0;p<d;p++)m=c.suggestions[p],0===m.toLowerCase().indexOf(a)&&(b.suggestions.push(m),b.data.push(c.data[p]));return b},getSuggestions:function(a,b){var d,j;(d=this.isLocal?this.getSuggestionsLocal(a):this.cachedResponse[a])&&c.isArray(d.suggestions)?(this.suggestions=d.suggestions,this.data=d.data,this.suggest(b)):this.isBadQuery(a)||(j=this,j.options.params.query=a,c.get(this.serviceUrl,j.options.params,function(a){j.processResponse(a)},"jsonp"))},isBadQuery:function(a){for(var b=
this.badQueries.length;b--;)if(0===a.indexOf(this.badQueries[b]))return!0;return!1},hide:function(){this.enabled=!1;this.selectedIndex=-1;this.container.hide()},suggest:function(a){if(0===this.suggestions.length)this.hide();else{var b,d,j,m,p,g,n,q;b=this;d=this.suggestions.length;m=this.options.fnFormatResult;p=this.getQuery(this.currentValue);n=function(a){return function(){b.activate(a)}};q=function(a){return function(){b.select(a)}};this.container.hide().empty();for(g=0;g<d;g++)j=this.suggestions[g],
j=c((b.selectedIndex===g?'<div class="selected"':"<div")+' title="'+j+'">'+m(j,this.data[g],p,this.options.showCode)+"</div>"),j.mouseover(n(g)),j.click(q(g)),this.container.append(j);1==d?(!a||!("keyup"==a.type&&8==a.keyCode))&&this.select(0):(this.enabled=!0,this.container.show())}},processResponse:function(a){c.isArray(a.data)||(a.data=[]);this.options.noCache||(this.cachedResponse[a.query]=a)&&(a.suggestions&&0===a.suggestions.length)&&this.badQueries.push(a.query);a.query===this.getQuery(this.currentValue)&&
(this.suggestions=a.suggestions,this.data=a.data,a=c.Event("processRespond"),this.suggest(a))},activate:function(a){var b,d;b=this.container.children();-1!==this.selectedIndex&&b.length>this.selectedIndex&&c(b.get(this.selectedIndex)).removeClass();this.selectedIndex=a;-1!==this.selectedIndex&&b.length>this.selectedIndex&&(d=b.get(this.selectedIndex),c(d).addClass("selected"),this.onActivate(this.selectedIndex));return d},deactivate:function(a,b){a.className="";this.selectedIndex===b&&(this.selectedIndex=
-1)},select:function(a){var b;if(b=this.suggestions[a])this.el.val(b),this.options.autoSubmit&&(b=this.el.parents("form"),0<b.length&&b.get(0).submit()),this.ignoreValueChange=!0,this.hide(),this.onSelect(a);this.el.trigger("autocompleted")},change:function(a){if(this.suggestions[a]){var b,d;b=this.suggestions[a];d=this.data[a];this.el.val(this.getValue(b))}else b="",d=-1;a=this.options.onChange;c.isFunction(a)&&a(b,d,this.el)},moveUp:function(){-1!==this.selectedIndex&&(0===this.selectedIndex?(this.container.children().get(0).className=
"",this.selectedIndex=-1,this.el.val(""),this.el.trigger("change"),this.el.val(this.currentValue)):this.adjustScroll(this.selectedIndex-1))},moveDown:function(){this.selectedIndex!==this.suggestions.length-1&&this.adjustScroll(this.selectedIndex+1)},adjustScroll:function(a){var b,c,d;b=this.activate(a).offsetTop;c=this.container.scrollTop();d=c+this.options.maxHeight-25;b<c?this.container.scrollTop(b):b>d&&this.container.scrollTop(b-this.options.maxHeight+25);this.el.val(this.data[a].name)},onSelect:function(a){var b,
d;b=this.options.onSelect;d=this.suggestions[a];a=this.data[a];this.el.val(this.getValue(d));c.isFunction(b)&&b(d,a,this.el)},onActivate:function(a){var b,d;b=this.options.onActivate;d=this.suggestions[a];a=this.data[a];this.el.val(this.getValue(d));c.isFunction(b)&&b(d,a,this.el)},getValue:function(a){var b,c;b=this.options.delimiter;if(!b)return a;c=this.currentValue;b=c.split(b);return 1===b.length?a:c.substr(0,c.length-b[b.length-1].length)+a}}})(jQuery);
(function(c){if(!c.fn.dotdotdot){c.fn.dotdotdot=function(){};c.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",lastCharacter:{remove:" ,;.!?".split(""),noEllipsis:[]},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0,debug:!1};var a=c.fn.html;c.fn.html=function(b){return"undefined"!=typeof b?this.data("dotdotdot")&&"function"!=typeof b?this.trigger("update",[b]):a.call(this,b):a.call(this)};var b=c.fn.text;c.fn.text=function(a){if("undefined"!=typeof a){if(this.data("dotdotdot")){var e=
c("<div />");e.text(a);a=e.html();e.remove();return this.trigger("update",[a])}return b.call(this,a)}return b.call(this)}}})(jQuery);
(function(c,a){function b(a,b,c){this._d=a;this._isUTC=!!b;this._a=a._a||null;a._a=null;this._lang=c||!1}function d(a){var b=this._data={},c=a.years||a.y||0,d=a.months||a.M||0,f=a.weeks||a.w||0,g=a.days||a.d||0,h=a.hours||a.h||0,j=a.minutes||a.m||0,n=a.seconds||a.s||0;a=a.milliseconds||a.ms||0;this._milliseconds=a+1E3*n+6E4*j+36E5*h;this._days=g+7*f;this._months=d+12*c;b.milliseconds=a%1E3;n+=e(a/1E3);b.seconds=n%60;j+=e(n/60);b.minutes=j%60;h+=e(j/60);b.hours=h%24;g+=e(h/24);g+=7*f;b.days=g%30;d+=
e(g/30);b.months=d%12;c+=e(d/12);b.years=c;this._lang=!1}function e(a){return 0>a?Math.ceil(a):Math.floor(a)}function f(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function h(a,b,c){var d=b._milliseconds,e=b._days;b=b._months;d&&a._d.setTime(+a+d*c);e&&a.date(a.date()+e*c);b&&(d=a.date(),a.date(1).month(a.month()+b*c).date(Math.min(d,a.daysInMonth())))}function j(a){return"[object Array]"===Object.prototype.toString.call(a)}function m(a,b){var c=Math.min(a.length,b.length),d=Math.abs(a.length-
b.length),e=0,f;for(f=0;f<c;f++)~~a[f]!==~~b[f]&&e++;return e+d}function p(a,b){var d;for(d=1;7>d;d++)a[d]=null==a[d]?2===d?1:0:a[d];a[7]=b;d=new c(0);b?(d.setUTCFullYear(a[0],a[1],a[2]),d.setUTCHours(a[3],a[4],a[5],a[6])):(d.setFullYear(a[0],a[1],a[2]),d.setHours(a[3],a[4],a[5],a[6]));d._a=a;return d}function g(a,b){var c,d,e=[];!b&&B&&(b=require("./lang/"+a));for(c=0;c<K.length;c++)b[K[c]]=b[K[c]]||D.en[K[c]];for(c=0;12>c;c++)d=r([2E3,c]),e[c]=RegExp("^"+(b.months[c]||b.months(d,""))+"|^"+(b.monthsShort[c]||
b.monthsShort(d,"")).replace(".",""),"i");b.monthsParse=b.monthsParse||e;return D[a]=b}function n(a){return(a="string"===typeof a&&a||a&&a._lang||null)?D[a]||g(a):r}function q(a){return w[a]?"'+("+w[a]+")+'":a.replace(N,"").replace(/\\?'/g,"\\'")}function u(a){return n().longDateFormat[a]||a}function s(a,b){for(var c=n(a);P.test(b);)b=b.replace(P,u);if(!ea[b]){var d=ea,e=b,g;g="var a,b;return '"+b.replace(L,q)+"';";g=new Function("t","v","o","p","m",g);d[e]=g}return ea[b](a,function(d,e){return c[d].call?
c[d](a,b):c[d][e]},c.ordinal,f,c.meridiem)}function A(a){switch(a){case "DDDD":return R;case "YYYY":return ga;case "S":case "SS":case "SSS":case "DDD":return M;case "MMM":case "MMMM":case "dd":case "ddd":case "dddd":case "a":case "A":return la;case "Z":case "ZZ":return Y;case "T":return Z;case "MM":case "DD":case "YY":case "HH":case "hh":case "mm":case "ss":case "M":case "D":case "d":case "H":case "h":case "m":case "s":return G;default:return RegExp(a.replace("\\",""))}}function y(a,b){var c=[0,0,
1,0,0,0,0],d={tzh:0,tzm:0},e=b.match(L),f,g;for(f=0;f<e.length;f++){g=(A(e[f]).exec(a)||[])[0];a=a.replace(A(e[f]),"");var h=c,j=d,k=void 0;switch(e[f]){case "M":case "MM":h[1]=null==g?0:~~g-1;break;case "MMM":case "MMMM":for(k=0;12>k;k++)if(n().monthsParse[k].test(g)){h[1]=k;break}break;case "D":case "DD":case "DDD":case "DDDD":null!=g&&(h[2]=~~g);break;case "YY":g=~~g;h[0]=g+(70<g?1900:2E3);break;case "YYYY":h[0]=~~Math.abs(g);break;case "a":case "A":j.isPm="pm"===(g+"").toLowerCase();break;case "H":case "HH":case "h":case "hh":h[3]=
~~g;break;case "m":case "mm":h[4]=~~g;break;case "s":case "ss":h[5]=~~g;break;case "S":case "SS":case "SSS":h[6]=~~(1E3*("0."+g));break;case "Z":case "ZZ":j.isUTC=!0;if((k=(g+"").match(ma))&&k[1])j.tzh=~~k[1];k&&k[2]&&(j.tzm=~~k[2]);k&&"+"===k[0]&&(j.tzh=-j.tzh,j.tzm=-j.tzm)}}d.isPm&&12>c[3]&&(c[3]+=12);!1===d.isPm&&12===c[3]&&(c[3]=0);c[3]+=d.tzh;c[4]+=d.tzm;return p(c,d.isUTC)}function x(a,b,c,d,e){e=e.relativeTime[a];return"function"===typeof e?e(b||1,!!c,a,d):e.replace(/%d/i,b||1)}function v(a,
b){r.fn[a]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),this):this._d["get"+c+b]()}}function C(a){r.duration.fn[a]=function(){return this._data[a]}}function I(a,b){r.duration.fn["as"+a]=function(){return+this/b}}for(var r,E=Math.round,J,D={},F="en",B="undefined"!==typeof module&&module.exports,K="months monthsShort weekdays weekdaysShort weekdaysMin longDateFormat calendar relativeTime ordinal meridiem".split(" "),H=/^\/?Date\((\-?\d+)/i,L=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?)/g,
P=/(LT|LL?L?L?)/g,N=/(^\[)|(\\)|\]$/g,O=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,G=/\d\d?/,M=/\d{1,3}/,R=/\d{3}/,ga=/\d{1,4}/,la=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,Y=/Z|[\+\-]\d\d:?\d\d/i,Z=/T/i,ia=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,aa=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],ma=/([\+\-]|\d\d)/gi,da="Month Date Hours Minutes Seconds Milliseconds".split(" "),
k={Milliseconds:1,Seconds:1E3,Minutes:6E4,Hours:36E5,Days:864E5,Months:2592E6,Years:31536E6},ea={},w={M:"(a=t.month()+1)",MMM:'v("monthsShort",t.month())',MMMM:'v("months",t.month())',D:"(a=t.date())",DDD:"(a=new Date(t.year(),t.month(),t.date()),b=new Date(t.year(),0,1),a=~~(((a-b)/864e5)+1.5))",d:"(a=t.day())",dd:'v("weekdaysMin",t.day())',ddd:'v("weekdaysShort",t.day())',dddd:'v("weekdays",t.day())',w:"(a=new Date(t.year(),t.month(),t.date()-t.day()+5),b=new Date(a.getFullYear(),0,4),a=~~((a-b)/864e5/7+1.5))",
YY:"p(t.year()%100,2)",YYYY:"p(t.year(),4)",a:"m(t.hours(),t.minutes(),!0)",A:"m(t.hours(),t.minutes(),!1)",H:"t.hours()",h:"t.hours()%12||12",m:"t.minutes()",s:"t.seconds()",S:"~~(t.milliseconds()/100)",SS:"p(~~(t.milliseconds()/10),2)",SSS:"p(t.milliseconds(),3)",Z:'((a=-t.zone())<0?((a=-a),"-"):"+")+p(~~(a/60),2)+":"+p(~~a%60,2)',ZZ:'((a=-t.zone())<0?((a=-a),"-"):"+")+p(~~(10*a/6),4)'},U=["DDD","w","M","D","d"],V="MDHhmsw".split("");U.length;)J=U.pop(),w[J+"o"]=w[J]+"+o(a)";for(;V.length;)J=V.pop(),
w[J+J]="p("+w[J]+",2)";w.DDDD="p("+w.DDD+",3)";r=function(d,e){if(null===d||""===d)return null;var f;if(r.isMoment(d))return new b(new c(+d._d),d._isUTC,d._lang);if(e)if(j(e)){var g=d.match(O)||[],h,n=99,k,q;for(k=0;k<e.length;k++)q=y(d,e[k]),h=s(new b(q),e[k]).match(O)||[],h=m(g,h),h<n&&(n=h,f=q)}else f=y(d,e);else if(f=H.exec(d),d===a)f=new c;else if(f)f=new c(+f[1]);else if(d instanceof c)f=d;else if(j(d))f=p(d);else if("string"===typeof d)if(f="YYYY-MM-DDT",ia.exec(d)){for(g=0;4>g;g++)if(aa[g][1].exec(d)){f+=
aa[g][0];break}f=Y.exec(d)?y(d,f+" Z"):y(d,f)}else f=new c(d);else f=new c(d);return new b(f)};r.utc=function(a,c){if(j(a))return new b(p(a,!0),!0);"string"===typeof a&&!Y.exec(a)&&(a+=" +0000",c&&(c+=" Z"));return r(a,c).utc()};r.unix=function(a){return r(1E3*a)};r.duration=function(a,b){var c=r.isDuration(a),e="number"===typeof a,f=c?a._data:e?{}:a;e&&(b?f[b]=a:f.milliseconds=a);e=new d(f);c&&(e._lang=a._lang);return e};r.humanizeDuration=function(a,b,c){return r.duration(a,!0===b?null:b).humanize(!0===
b?!0:c)};r.version="1.7.0";r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";r.lang=function(a,b){var c;if(!a)return F;(b||!D[a])&&g(a,b);if(D[a]){for(c=0;c<K.length;c++)r[K[c]]=D[a][K[c]];r.monthsParse=D[a].monthsParse;F=a}};r.langData=n;r.isMoment=function(a){return a instanceof b};r.isDuration=function(a){return a instanceof d};r.lang("en",{months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},
relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"}});r.fn=b.prototype={clone:function(){return r(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1E3)},toString:function(){return this._d.toString()},toDate:function(){return this._d},
toArray:function(){return[this.year(),this.month(),this.date(),this.hours(),this.minutes(),this.seconds(),this.milliseconds(),!!this._isUTC]},isValid:function(){return this._a?!m(this._a,(this._a[7]?r.utc(this):this).toArray()):!isNaN(this._d.getTime())},utc:function(){this._isUTC=!0;return this},local:function(){this._isUTC=!1;return this},format:function(a){return s(this,a?a:r.defaultFormat)},add:function(a,b){var c=b?r.duration(+b,a):r.duration(a);h(this,c,1);return this},subtract:function(a,b){var c=
b?r.duration(+b,a):r.duration(a);h(this,c,-1);return this},diff:function(a,b,c){a=this._isUTC?r(a).utc():r(a).local();var d=6E4*(this.zone()-a.zone()),d=this._d-a._d-d,e=this.year()-a.year(),f=this.month()-a.month();a=this.date()-a.date();b="months"===b?12*e+f+a/30:"years"===b?e+(f+a/30)/12:"seconds"===b?d/1E3:"minutes"===b?d/6E4:"hours"===b?d/36E5:"days"===b?d/864E5:"weeks"===b?d/6048E5:d;return c?b:E(b)},from:function(a,b){return r.duration(this.diff(a)).lang(this._lang).humanize(!b)},fromNow:function(a){return this.from(r(),
a)},calendar:function(){var a=this.diff(r().sod(),"days",!0),b=this.lang().calendar,c=b.sameElse,a=-6>a?c:-1>a?b.lastWeek:0>a?b.lastDay:1>a?b.sameDay:2>a?b.nextDay:7>a?b.nextWeek:c;return this.format("function"===typeof a?a.apply(this):a)},isLeapYear:function(){var a=this.year();return 0===a%4&&0!==a%100||0===a%400},isDST:function(){return this.zone()<r([this.year()]).zone()||this.zone()<r([this.year(),5]).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==
a?b:this.add({d:a-b})},startOf:function(a){switch(a.replace(/s$/,"")){case "year":this.month(0);case "month":this.date(1);case "day":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}return this},endOf:function(a){return this.startOf(a).add(a.replace(/s?$/,"s"),1).subtract("ms",1)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},
daysInMonth:function(){return r.utc([this.year(),this.month()+1,0]).date()},lang:function(b){if(b===a)return n(this);this._lang=b;return this}};for(J=0;J<da.length;J++)v(da[J].toLowerCase(),da[J]);v("year","FullYear");r.duration.fn=d.prototype={weeks:function(){return e(this.days()/7)},valueOf:function(){return this._milliseconds+864E5*this._days+2592E6*this._months},humanize:function(a){var b=+this,c=this.lang().relativeTime,d;d=!a;var e=this.lang(),f=E(Math.abs(b)/1E3),g=E(f/60),h=E(g/60),j=E(h/
24),n=E(j/365),f=45>f&&["s",f]||1===g&&["m"]||45>g&&["mm",g]||1===h&&["h"]||22>h&&["hh",h]||1===j&&["d"]||25>=j&&["dd",j]||45>=j&&["M"]||345>j&&["MM",E(j/30)]||1===n&&["y"]||["yy",n];f[2]=d;f[3]=0<b;f[4]=e;d=x.apply({},f);a&&(d=(0>=b?c.past:c.future).replace(/%s/i,d));return d},lang:r.fn.lang};for(J in k)k.hasOwnProperty(J)&&(I(J,k[J]),C(J.toLowerCase()));I("Weeks",6048E5);B&&(module.exports=r);"undefined"===typeof ender&&(this.moment=r);"function"===typeof define&&define.amd&&define("moment",[],
function(){return r})}).call(this,Date);
(function(){var c=[function(a){return 1===a%10&&11!==a%100},function(a){return 2<=a%10&&(4>=a%10&&0===a%10%1)&&(12>a%100||14<a%100)},function(a){return 0===a%10||5<=a%10&&9>=a%10&&0===a%10%1||11<=a%100&&14>=a%100&&0===a%100%1},function(){return!0}],a=function(a,d,e){if("m"===e)return d?"\u043c\u0438\u043d\u0443\u0442\u0430":"\u043c\u0438\u043d\u0443\u0442\u0443";d=a+" ";a:{a=+a;e={mm:"\u043c\u0438\u043d\u0443\u0442\u0430_\u043c\u0438\u043d\u0443\u0442\u044b_\u043c\u0438\u043d\u0443\u0442_\u043c\u0438\u043d\u0443\u0442\u044b",hh:"\u0447\u0430\u0441_\u0447\u0430\u0441\u0430_\u0447\u0430\u0441\u043e\u0432_\u0447\u0430\u0441\u0430",
dd:"\u0434\u0435\u043d\u044c_\u0434\u043d\u044f_\u0434\u043d\u0435\u0439_\u0434\u043d\u044f",MM:"\u043c\u0435\u0441\u044f\u0446_\u043c\u0435\u0441\u044f\u0446\u0430_\u043c\u0435\u0441\u044f\u0446\u0435\u0432_\u043c\u0435\u0441\u044f\u0446\u0430",yy:"\u0433\u043e\u0434_\u0433\u043e\u0434\u0430_\u043b\u0435\u0442_\u0433\u043e\u0434\u0430"}[e].split("_");for(var f=Math.min(c.length,e.length),h=-1;++h<f;)if(c[h](a)){a=e[h];break a}a=e[f-1]}return d+a},a={months:function(a,c){return{nominative:"\u044f\u043d\u0432\u0430\u0440\u044c \u0444\u0435\u0432\u0440\u0430\u043b\u044c \u043c\u0430\u0440\u0442 \u0430\u043f\u0440\u0435\u043b\u044c \u043c\u0430\u0439 \u0438\u044e\u043d\u044c \u0438\u044e\u043b\u044c \u0430\u0432\u0433\u0443\u0441\u0442 \u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c \u043e\u043a\u0442\u044f\u0431\u0440\u044c \u043d\u043e\u044f\u0431\u0440\u044c \u0434\u0435\u043a\u0430\u0431\u0440\u044c".split(" "),
accusative:"\u044f\u043d\u0432\u0430\u0440\u044f \u0444\u0435\u0432\u0440\u0430\u043b\u044f \u043c\u0430\u0440\u0442\u0430 \u0430\u043f\u0440\u0435\u043b\u044f \u043c\u0430\u044f \u0438\u044e\u043d\u044f \u0438\u044e\u043b\u044f \u0430\u0432\u0433\u0443\u0441\u0442\u0430 \u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f \u043e\u043a\u0442\u044f\u0431\u0440\u044f \u043d\u043e\u044f\u0431\u0440\u044f \u0434\u0435\u043a\u0430\u0431\u0440\u044f".split(" ")}[/D[oD]? *MMMM?/.test(c)?"accusative":"nominative"][a.month()]},
monthsShort:"\u044f\u043d\u0432 \u0444\u0435\u0432 \u043c\u0430\u0440 \u0430\u043f\u0440 \u043c\u0430\u0439 \u0438\u044e\u043d \u0438\u044e\u043b \u0430\u0432\u0433 \u0441\u0435\u043d \u043e\u043a\u0442 \u043d\u043e\u044f \u0434\u0435\u043a".split(" "),weekdays:function(a,c){return{nominative:"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435 \u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a \u0432\u0442\u043e\u0440\u043d\u0438\u043a \u0441\u0440\u0435\u0434\u0430 \u0447\u0435\u0442\u0432\u0435\u0440\u0433 \u043f\u044f\u0442\u043d\u0438\u0446\u0430 \u0441\u0443\u0431\u0431\u043e\u0442\u0430".split(" "),
accusative:"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435 \u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a \u0432\u0442\u043e\u0440\u043d\u0438\u043a \u0441\u0440\u0435\u0434\u0443 \u0447\u0435\u0442\u0432\u0435\u0440\u0433 \u043f\u044f\u0442\u043d\u0438\u0446\u0443 \u0441\u0443\u0431\u0431\u043e\u0442\u0443".split(" ")}[/\[ ?[\u0412\u0432] ?(?:\u043f\u0440\u043e\u0448\u043b\u0443\u044e|\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e)? ?\] ?dddd/.test(c)?
"accusative":"nominative"][a.day()]},weekdaysShort:"\u0432\u0441\u043a \u043f\u043d\u0434 \u0432\u0442\u0440 \u0441\u0440\u0434 \u0447\u0442\u0432 \u043f\u0442\u043d \u0441\u0431\u0442".split(" "),weekdaysMin:"\u0432\u0441 \u043f\u043d \u0432\u0442 \u0441\u0440 \u0447\u0442 \u043f\u0442 \u0441\u0431".split(" "),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY \u0433.",LLL:"D MMMM YYYY \u0433., LT",LLLL:"dddd, D MMMM YYYY \u0433., LT"},calendar:{sameDay:"[\u0421\u0435\u0433\u043e\u0434\u043d\u044f \u0432] LT",
nextDay:"[\u0417\u0430\u0432\u0442\u0440\u0430 \u0432] LT",lastDay:"[\u0412\u0447\u0435\u0440\u0430 \u0432] LT",nextWeek:function(){return 2===this.day()?"[\u0412\u043e] dddd [\u0432] LT":"[\u0412] dddd [\u0432] LT"},lastWeek:function(){switch(this.day()){case 0:return"[\u0412 \u043f\u0440\u043e\u0448\u043b\u043e\u0435] dddd [\u0432] LT";case 1:case 2:case 4:return"[\u0412 \u043f\u0440\u043e\u0448\u043b\u044b\u0439] dddd [\u0432] LT";case 3:case 5:case 6:return"[\u0412 \u043f\u0440\u043e\u0448\u043b\u0443\u044e] dddd [\u0432] LT"}},
sameElse:"L"},relativeTime:{future:"\u0447\u0435\u0440\u0435\u0437 %s",past:"%s \u043d\u0430\u0437\u0430\u0434",s:"\u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0435\u043a\u0443\u043d\u0434",m:a,mm:a,h:"\u0447\u0430\u0441",hh:a,d:"\u0434\u0435\u043d\u044c",dd:a,M:"\u043c\u0435\u0441\u044f\u0446",MM:a,y:"\u0433\u043e\u0434",yy:a},ordinal:function(){return"."}};"undefined"!==typeof module&&module.exports&&(module.exports=a);"undefined"!==typeof window&&(this.moment&&this.moment.lang)&&
this.moment.lang("ru",a)})();
(function(c){function a(a){var b=a||window.event,d=[].slice.call(arguments,1),j=0,m=0,p=0;a=c.event.fix(b);a.type="mousewheel";b.wheelDelta&&(j=b.wheelDelta/120);b.detail&&(j=-b.detail/3);p=j;void 0!==b.axis&&b.axis===b.HORIZONTAL_AXIS&&(p=0,m=-1*j);void 0!==b.wheelDeltaY&&(p=b.wheelDeltaY/120);void 0!==b.wheelDeltaX&&(m=-1*b.wheelDeltaX/120);d.unshift(a,j,m,p);return(c.event.dispatch||c.event.handle).apply(this,d)}var b=["DOMMouseScroll","mousewheel"];if(c.event.fixHooks)for(var d=b.length;d;)c.event.fixHooks[b[--d]]=
c.event.mouseHooks;c.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var c=b.length;c;)this.addEventListener(b[--c],a,!1);else this.onmousewheel=a},teardown:function(){if(this.removeEventListener)for(var c=b.length;c;)this.removeEventListener(b[--c],a,!1);else this.onmousewheel=null}};c.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery);
(function(c,a,b){c.fn.jScrollPane=function(d){function e(d,e){function j(e){var h,k,ca,va,Ga,S=!1,oa=!1;D=e;if(B===b)va=d.scrollTop(),Ga=d.scrollLeft(),d.css({overflow:"hidden",padding:0}),K=d.innerWidth()+Ba,H=d.innerHeight(),d.width(K),B=c('<div class="jspPane" />').css("padding",ha).append(d.children()),L=c('<div class="jspContainer" />').css({width:K+"px",height:H+"px"}).append(B).appendTo(d);else{d.css("width","");if(S=D.stickToBottom)S=N-H,S=20<S&&10>S-E();if(oa=D.stickToRight)oa=P-K,oa=20<
oa&&10>oa-r();if(ca=d.innerWidth()+Ba!=K||d.outerHeight()!=H)K=d.innerWidth()+Ba,H=d.innerHeight(),L.css({width:K+"px",height:H+"px"});if(!ca&&Ma==P&&B.outerHeight()==N){d.width(K);return}Ma=P;B.css("width","");d.width(K);L.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}B.css("overflow","auto");P=e.contentWidth?e.contentWidth:B[0].scrollWidth;N=B[0].scrollHeight;B.css("overflow","");O=P/K;G=N/H;M=1<G;R=1<O;if(!R&&!M)d.removeClass("jspScrollable"),B.css({top:0,width:L.width()-Ba}),L.unbind(Ea),
B.find(":input,a").unbind("focus.jsp"),d.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),q();else{d.addClass("jspScrollable");if(e=D.maintainPosition&&(Y||aa))h=r(),k=E();M&&(L.append(c('<div class="jspVerticalBar" />').append(c('<div class="jspCap jspCapTop" />'),c('<div class="jspTrack" />').append(c('<div class="jspDrag" />').append(c('<div class="jspDragTop" />'),c('<div class="jspDragBottom" />'))),c('<div class="jspCap jspCapBottom" />'))),ma=L.find(">.jspVerticalBar"),
da=ma.find(">.jspTrack"),ga=da.find(">.jspDrag"),D.showArrows&&(U=c('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",n(0,-1)).bind("click.jsp",J),V=c('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",n(0,1)).bind("click.jsp",J),D.arrowScrollOnHover&&(U.bind("mouseover.jsp",n(0,-1,U)),V.bind("mouseover.jsp",n(0,1,V))),g(da,D.verticalArrowPositions,U,V)),ea=H,L.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){ea-=c(this).outerHeight()}),ga.hover(function(){ga.addClass("jspHover")},
function(){ga.removeClass("jspHover")}).bind("mousedown.jsp",function(a){c("html").bind("dragstart.jsp selectstart.jsp",J);ga.addClass("jspActive");var b=a.pageY-ga.position().top;c("html").bind("mousemove.jsp",function(a){s(a.pageY-b,!1)}).bind("mouseup.jsp mouseleave.jsp",u);return!1}),m());R&&(L.append(c('<div class="jspHorizontalBar" />').append(c('<div class="jspCap jspCapLeft" />'),c('<div class="jspTrack" />').append(c('<div class="jspDrag" />').append(c('<div class="jspDragLeft" />'),c('<div class="jspDragRight" />'))),
c('<div class="jspCap jspCapRight" />'))),Q=L.find(">.jspHorizontalBar"),W=Q.find(">.jspTrack"),Z=W.find(">.jspDrag"),D.showArrows&&(La=c('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",n(-1,0)).bind("click.jsp",J),Aa=c('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",n(1,0)).bind("click.jsp",J),D.arrowScrollOnHover&&(La.bind("mouseover.jsp",n(-1,0,La)),Aa.bind("mouseover.jsp",n(1,0,Aa))),g(W,D.horizontalArrowPositions,La,Aa)),Z.hover(function(){Z.addClass("jspHover")},function(){Z.removeClass("jspHover")}).bind("mousedown.jsp",
function(a){c("html").bind("dragstart.jsp selectstart.jsp",J);Z.addClass("jspActive");var b=a.pageX-Z.position().left;c("html").bind("mousemove.jsp",function(a){y(a.pageX-b,!1)}).bind("mouseup.jsp mouseleave.jsp",u);return!1}),ja=L.innerWidth(),p());if(R&&M){ca=W.outerHeight();var ab=da.outerWidth();ea-=ca;c(Q).find(">.jspCap:visible,>.jspArrow").each(function(){ja+=c(this).outerWidth()});ja-=ab;H-=ab;K-=ca;W.parent().append(c('<div class="jspCorner" />').css("width",ca+"px"));m();p()}R&&B.width(L.outerWidth()-
Ba+"px");N=B.outerHeight();G=N/H;R&&(qa=Math.ceil(1/O*ja),qa>D.horizontalDragMaxWidth?qa=D.horizontalDragMaxWidth:qa<D.horizontalDragMinWidth&&(qa=D.horizontalDragMinWidth),Z.width(qa+"px"),ia=ja-qa,x(aa));M&&(w=Math.ceil(1/G*ea),w>D.verticalDragMaxHeight?w=D.verticalDragMaxHeight:w<D.verticalDragMinHeight&&(w=D.verticalDragMinHeight),ga.height(w+"px"),la=ea-w,A(Y));e&&(C(oa?P-K:h,!1),v(S?N-H:k,!1));B.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(a){I(a.target,!1)});L.unbind(Ea).bind(Ea,
function(a,b,c,d){a=aa;b=Y;F.scrollBy(c*D.mouseWheelSpeed,-d*D.mouseWheelSpeed,!1);return a==aa&&b==Y});var X,ua,sa,ta,na,xa=!1;L.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(a){a=a.originalEvent.touches[0];X=r();ua=E();sa=a.pageX;ta=a.pageY;na=!1;xa=!0}).bind("touchmove.jsp",function(a){if(xa){a=a.originalEvent.touches[0];var b=aa,c=Y;F.scrollTo(X+sa-a.pageX,ua+ta-a.pageY);na=na||5<Math.abs(sa-a.pageX)||5<Math.abs(ta-a.pageY);return b==aa&&
c==Y}}).bind("touchend.jsp",function(){xa=!1}).bind("click.jsp-touchclick",function(){if(na)return na=!1});if(D.enableKeyboardNavigation){var bb=function(){var a=aa,b=Y;switch(Ca){case 40:F.scrollByY(D.keyboardSpeed,!1);break;case 38:F.scrollByY(-D.keyboardSpeed,!1);break;case 34:case 32:F.scrollByY(H*D.scrollPagePercent,!1);break;case 33:F.scrollByY(-H*D.scrollPagePercent,!1);break;case 39:F.scrollByX(D.keyboardSpeed,!1);break;case 37:F.scrollByX(-D.keyboardSpeed,!1)}return Ua=a!=aa||b!=Y},Ca,Ua,
Va=[];R&&Va.push(Q[0]);M&&Va.push(ma[0]);B.focus(function(){d.focus()});d.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(a){if(!(a.target!==this&&(!Va.length||!c(a.target).closest(Va).length))){var b=aa,d=Y;switch(a.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:Ca=a.keyCode;bb();break;case 35:v(N-H);Ca=null;break;case 36:v(0),Ca=null}Ua=a.keyCode==Ca&&b!=aa||d!=Y;return!Ua}}).bind("keypress.jsp",function(a){a.keyCode==Ca&&bb();return!Ua});D.hideFocus?
(d.css("outline","none"),"hideFocus"in L[0]&&d.attr("hideFocus",!0)):(d.css("outline",""),"hideFocus"in L[0]&&d.attr("hideFocus",!1))}D.clickOnTrack&&(q(),M&&da.bind("mousedown.jsp",function(a){if(a.originalTarget===b||a.originalTarget==a.currentTarget){var d=c(this),e=d.offset(),f=a.pageY-e.top-Y,g,h=!0,j=function(){var b=d.offset(),b=a.pageY-b.top-w/2,c=H*D.scrollPagePercent,e=la*c/(N-H);if(0>f)Y-e>b?F.scrollByY(-c):s(b);else if(0<f)Y+e<b?F.scrollByY(c):s(b);else{n();return}g=setTimeout(j,h?D.initialDelay:
D.trackClickRepeatFreq);h=!1},n=function(){g&&clearTimeout(g);g=null;c(document).unbind("mouseup.jsp",n)};j();c(document).bind("mouseup.jsp",n);return!1}}),R&&W.bind("mousedown.jsp",function(a){if(a.originalTarget===b||a.originalTarget==a.currentTarget){var d=c(this),e=d.offset(),f=a.pageX-e.left-aa,g,h=!0,j=function(){var b=d.offset(),b=a.pageX-b.left-qa/2,c=K*D.scrollPagePercent,e=ia*c/(P-K);if(0>f)aa-e>b?F.scrollByX(-c):y(b);else if(0<f)aa+e<b?F.scrollByX(c):y(b);else{n();return}g=setTimeout(j,
h?D.initialDelay:D.trackClickRepeatFreq);h=!1},n=function(){g&&clearTimeout(g);g=null;c(document).unbind("mouseup.jsp",n)};j();c(document).bind("mouseup.jsp",n);return!1}}));a:if(location.hash&&1<location.hash.length){var Wa,kb;h=escape(location.hash.substr(1));try{Wa=c("#"+h+', a[name="'+h+'"]')}catch(Bb){break a}Wa.length&&B.find(h)&&(0===L.scrollTop()?kb=setInterval(function(){0<L.scrollTop()&&(I(Wa,!0),c(document).scrollTop(L.position().top),clearInterval(kb))},50):(I(Wa,!0),c(document).scrollTop(L.position().top)))}D.hijackInternalLinks&&
(c(document.body).data("jspHijack")||(c(document.body).data("jspHijack",!0),c(document.body).delegate("a[href*=#]","click",function(b){var d=this.href.substr(0,this.href.indexOf("#")),e=location.href,f;-1!==location.href.indexOf("#")&&(e=location.href.substr(0,location.href.indexOf("#")));if(d===e){d=escape(this.href.substr(this.href.indexOf("#")+1));f;try{f=c("#"+d+', a[name="'+d+'"]')}catch(g){return}f.length&&(d=f.closest(".jspScrollable"),e=d.data("jsp"),e.scrollToElement(f,!0),d[0].scrollIntoView&&
(e=c(a).scrollTop(),f=f.offset().top,(f<e||f>e+c(a).height())&&d[0].scrollIntoView()),b.preventDefault())}})))}D.autoReinitialise&&!Da?Da=setInterval(function(){j(D)},D.autoReinitialiseDelay):!D.autoReinitialise&&Da&&clearInterval(Da);va&&d.scrollTop(0)&&v(va,!1);Ga&&d.scrollLeft(0)&&C(Ga,!1);d.trigger("jsp-initialised",[R||M])}function m(){da.height(ea+"px");Y=0;k=D.verticalGutter+da.outerWidth();B.width(K-Ba);try{0===ma.position().left&&B.css("margin-left",k+"px")}catch(a){}}function p(){L.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){ja-=
c(this).outerWidth()});W.width(ja+"px");aa=0}function g(a,b,c,d){var e="before",f="after";"os"==b&&(b=/Mac/.test(navigator.platform)?"after":"split");b==e?f=b:b==f&&(e=b,b=c,c=d,d=b);a[e](c)[f](d)}function n(a,b,d){return function(){var e=this,f=d,e=c(e).addClass("jspActive"),g,h,j=!0,n=function(){0!==a&&F.scrollByX(a*D.arrowButtonSpeed);0!==b&&F.scrollByY(b*D.arrowButtonSpeed);h=setTimeout(n,j?D.initialDelay:D.arrowRepeatFreq);j=!1};n();g=f?"mouseout.jsp":"mouseup.jsp";f=f||c("html");f.bind(g,function(){e.removeClass("jspActive");
h&&clearTimeout(h);h=null;f.unbind(g)});this.blur();return!1}}function q(){W&&W.unbind("mousedown.jsp");da&&da.unbind("mousedown.jsp")}function u(){c("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");ga&&ga.removeClass("jspActive");Z&&Z.removeClass("jspActive")}function s(a,c){M&&(0>a?a=0:a>la&&(a=la),c===b&&(c=D.animateScroll),c?F.animate(ga,"top",a,A):(ga.css("top",a),A(a)))}function A(a){a===b&&(a=ga.position().top);L.scrollTop(0);Y=a;var c=0===Y,e=Y==la;
a=-(a/la)*(N-H);if(sa!=c||xa!=e)sa=c,xa=e,d.trigger("jsp-arrow-change",[sa,xa,ta,ua]);D.showArrows&&(U[c?"addClass":"removeClass"]("jspDisabled"),V[e?"addClass":"removeClass"]("jspDisabled"));B.css("top",a);d.trigger("jsp-scroll-y",[-a,c,e]).trigger("scroll")}function y(a,c){R&&(0>a?a=0:a>ia&&(a=ia),c===b&&(c=D.animateScroll),c?F.animate(Z,"left",a,x):(Z.css("left",a),x(a)))}function x(a){a===b&&(a=Z.position().left);L.scrollTop(0);aa=a;var c=0===aa,e=aa==ia;a=-(a/ia)*(P-K);if(ta!=c||ua!=e)ta=c,ua=
e,d.trigger("jsp-arrow-change",[sa,xa,ta,ua]);D.showArrows&&(La[c?"addClass":"removeClass"]("jspDisabled"),Aa[e?"addClass":"removeClass"]("jspDisabled"));B.css("left",a);d.trigger("jsp-scroll-x",[-a,c,e]).trigger("scroll")}function v(a,b){s(a/(N-H)*la,b)}function C(a,b){y(a/(P-K)*ia,b)}function I(a,b,d){var e,f,g=0,h=0,j,n,k;try{e=c(a)}catch(m){return}f=e.outerHeight();a=e.outerWidth();L.scrollTop(0);for(L.scrollLeft(0);!e.is(".jspPane");)if(g+=e.position().top,h+=e.position().left,e=e.offsetParent(),
/^body|html$/i.test(e[0].nodeName))return;e=E();j=e+H;g<e||b?n=g-D.verticalGutter:g+f>j&&(n=g-H+f+D.verticalGutter);n&&v(n,d);g=r();n=g+K;h<g||b?k=h-D.horizontalGutter:h+a>n&&(k=h-K+a+D.horizontalGutter);k&&C(k,d)}function r(){return-B.position().left}function E(){return-B.position().top}function J(){return!1}var D,F=this,B,K,H,L,P,N,O,G,M,R,ga,la,Y,Z,ia,aa,ma,da,k,ea,w,U,V,Q,W,ja,qa,La,Aa,Da,ha,Ba,Ma,sa=!0,ta=!0,xa=!1,ua=!1,S=d.clone(!1,!1).empty(),Ea=c.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";
ha=d.css("paddingTop")+" "+d.css("paddingRight")+" "+d.css("paddingBottom")+" "+d.css("paddingLeft");Ba=(parseInt(d.css("paddingLeft"),10)||0)+(parseInt(d.css("paddingRight"),10)||0);c.extend(F,{reinitialise:function(a){a=c.extend({},D,a);j(a)},scrollToElement:function(a,b,c){I(a,b,c)},scrollTo:function(a,b,c){C(a,c);v(b,c)},scrollToX:function(a,b){C(a,b)},scrollToY:function(a,b){v(a,b)},scrollToPercentX:function(a,b){C(a*(P-K),b)},scrollToPercentY:function(a,b){v(a*(N-H),b)},scrollBy:function(a,
b,c){F.scrollByX(a,c);F.scrollByY(b,c)},scrollByX:function(a,b){var c=(r()+Math[0>a?"floor":"ceil"](a))/(P-K);y(c*ia,b)},scrollByY:function(a,b){var c=(E()+Math[0>a?"floor":"ceil"](a))/(N-H);s(c*la,b)},positionDragX:function(a,b){y(a,b)},positionDragY:function(a,b){s(a,b)},animate:function(a,b,c,d){var e={};e[b]=c;a.animate(e,{duration:D.animateDuration,easing:D.animateEase,queue:!1,step:d})},getContentPositionX:function(){return r()},getContentPositionY:function(){return E()},getContentWidth:function(){return P},
getContentHeight:function(){return N},getPercentScrolledX:function(){return r()/(P-K)},getPercentScrolledY:function(){return E()/(N-H)},getIsScrollableH:function(){return R},getIsScrollableV:function(){return M},getContentPane:function(){return B},scrollToBottom:function(a){s(la,a)},hijackInternalLinks:c.noop,destroy:function(){var a=E(),b=r();d.removeClass("jspScrollable").unbind(".jsp");d.replaceWith(S.append(B.children()));S.scrollTop(a);S.scrollLeft(b);Da&&clearInterval(Da)}});j(e)}d=c.extend({},
c.fn.jScrollPane.defaults,d);c.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){d[this]=d[this]||d.speed});return this.each(function(){var a=c(this),b=a.data("jsp");b?b.reinitialise(d):(c("script",a).filter('[type="text/javascript"],:not([type])').remove(),b=new e(a,d),a.data("jsp",b))})};c.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,
verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:b,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:0.8}})(jQuery,
this);
(function(){function c(a){return function(b){this[a]=b}}function a(a){return function(){return this[a]}}function b(a,c,d){this.extend(b,google.maps.OverlayView);this.c=a;this.a=[];this.f=[];this.ca=[53,56,66,78,90];this.j=[];this.A=!1;d=d||{};this.g=d.gridSize||60;this.l=d.minimumClusterSize||2;this.J=d.maxZoom||q;this.j=d.styles||[];this.X=d.imagePath||this.Q;this.W=d.imageExtension||this.P;this.O=!0;void 0!=d.zoomOnClick&&(this.O=d.zoomOnClick);this.r=!1;void 0!=d.averageCenter&&(this.r=d.averageCenter);if(!this.j.length){d=
0;for(var e;e=this.ca[d];d++)this.j.push({url:this.X+(d+1)+"."+this.W,height:e,width:e})}this.setMap(a);this.K=this.c.getZoom();var f=this;google.maps.event.addListener(this.c,"zoom_changed",function(){var a=f.c.getZoom();f.K!=a&&(f.K=a,f.m())});google.maps.event.addListener(this.c,"idle",function(){f.i()});c&&c.length&&this.C(c,!1)}function d(a,b){b.s=!1;b.draggable&&google.maps.event.addListener(b,"dragend",function(){b.s=!1;a.L()});a.a.push(b)}function e(a,b){var c=-1;if(a.a.indexOf)c=a.a.indexOf(b);
else for(var d=0,e;e=a.a[d];d++)if(e==b){c=d;break}if(-1==c)return!1;b.setMap(q);a.a.splice(c,1);return!0}function f(a){if(a.A)for(var b=a.v(new google.maps.LatLngBounds(a.c.getBounds().getSouthWest(),a.c.getBounds().getNorthEast())),c=0,d;d=a.a[c];c++)if(!d.s&&b.contains(d.getPosition())){for(var e=a,f=4E4,g=q,j=0,n=void 0;n=e.f[j];j++){var m=n.getCenter();if(m){var p=d.getPosition();if(!m||!p)m=0;else var u=(p.lat()-m.lat())*Math.PI/180,B=(p.lng()-m.lng())*Math.PI/180,m=Math.sin(u/2)*Math.sin(u/
2)+Math.cos(m.lat()*Math.PI/180)*Math.cos(p.lat()*Math.PI/180)*Math.sin(B/2)*Math.sin(B/2),m=12742*Math.atan2(Math.sqrt(m),Math.sqrt(1-m));m<f&&(f=m,g=n)}}g&&g.F.contains(d.getPosition())?g.q(d):(n=new h(e),n.q(d),e.f.push(n))}}function h(a){this.k=a;this.c=a.getMap();this.g=a.w();this.l=a.l;this.r=a.r;this.d=q;this.a=[];this.F=q;this.n=new m(this,a.z(),a.w())}function j(a){a.F=a.k.v(new google.maps.LatLngBounds(a.d,a.d))}function m(a,b,c){a.k.extend(m,google.maps.OverlayView);this.j=b;this.fa=c||
0;this.u=a;this.d=q;this.c=a.getMap();this.B=this.b=q;this.t=!1;this.setMap(this.c)}function p(a,b){var c=a.getProjection().fromLatLngToDivPixel(b);c.x-=parseInt(a.p/2,10);c.y-=parseInt(a.h/2,10);return c}function g(a){a.b&&(a.b.style.display="none");a.t=!1}function n(a,b){var c=[];c.push("background-image:url("+a.da+");");c.push("background-position:"+(a.D?a.D:"0 0")+";");"object"===typeof a.e?("number"===typeof a.e[0]&&0<a.e[0]&&a.e[0]<a.h?c.push("height:"+(a.h-a.e[0])+"px; padding-top:"+a.e[0]+
"px;"):c.push("height:"+a.h+"px; line-height:"+a.h+"px;"),"number"===typeof a.e[1]&&0<a.e[1]&&a.e[1]<a.p?c.push("width:"+(a.p-a.e[1])+"px; padding-left:"+a.e[1]+"px;"):c.push("width:"+a.p+"px; text-align:center;")):c.push("height:"+a.h+"px; line-height:"+a.h+"px; width:"+a.p+"px; text-align:center;");c.push("cursor:pointer; top:"+b.y+"px; left:"+b.x+"px; color:"+(a.M?a.M:"black")+"; position:absolute; font-size:"+(a.N?a.N:11)+"px; font-family:Arial,sans-serif; font-weight:bold");return c.join("")}
var q=null,u;u=b.prototype;u.Q="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/images/m";u.P="png";u.extend=function(a,b){return function(a){for(var b in a.prototype)this.prototype[b]=a.prototype[b];return this}.apply(a,[b])};u.onAdd=function(){this.A||(this.A=!0,f(this))};u.draw=function(){};u.S=function(){for(var a=this.o(),b=new google.maps.LatLngBounds,c=0,d;d=a[c];c++)b.extend(d.getPosition());this.c.fitBounds(b)};u.z=a("j");u.o=a("a");u.V=function(){return this.a.length};
u.ba=c("J");u.I=a("J");u.G=function(a,b){for(var c=0,d=a.length,e=d;0!==e;)e=parseInt(e/10,10),c++;c=Math.min(c,b);return{text:d,index:c}};u.$=c("G");u.H=a("G");u.C=function(a,b){for(var c=0,e;e=a[c];c++)d(this,e);b||this.i()};u.q=function(a,b){d(this,a);b||this.i()};u.Y=function(a,b){var c=e(this,a);return!b&&c?(this.m(),this.i(),!0):!1};u.Z=function(a,b){for(var c=!1,d=0,f;f=a[d];d++)f=e(this,f),c=c||f;if(!b&&c)return this.m(),this.i(),!0};u.U=function(){return this.f.length};u.getMap=a("c");u.setMap=
c("c");u.w=a("g");u.aa=c("g");u.v=function(a){var b=this.getProjection(),c=new google.maps.LatLng(a.getNorthEast().lat(),a.getNorthEast().lng()),d=new google.maps.LatLng(a.getSouthWest().lat(),a.getSouthWest().lng()),c=b.fromLatLngToDivPixel(c);c.x+=this.g;c.y-=this.g;d=b.fromLatLngToDivPixel(d);d.x-=this.g;d.y+=this.g;c=b.fromDivPixelToLatLng(c);b=b.fromDivPixelToLatLng(d);a.extend(c);a.extend(b);return a};u.R=function(){this.m(!0);this.a=[]};u.m=function(a){for(var b=0,c;c=this.f[b];b++)c.remove();
for(b=0;c=this.a[b];b++)c.s=!1,a&&c.setMap(q);this.f=[]};u.L=function(){var a=this.f.slice();this.f.length=0;this.m();this.i();window.setTimeout(function(){for(var b=0,c;c=a[b];b++)c.remove()},0)};u.i=function(){f(this)};u=h.prototype;u.q=function(a){var b;a:if(this.a.indexOf)b=-1!=this.a.indexOf(a);else{b=0;for(var c;c=this.a[b];b++)if(c==a){b=!0;break a}b=!1}if(b)return!1;this.d?this.r&&(c=this.a.length+1,b=(this.d.lat()*(c-1)+a.getPosition().lat())/c,c=(this.d.lng()*(c-1)+a.getPosition().lng())/
c,this.d=new google.maps.LatLng(b,c),j(this)):(this.d=a.getPosition(),j(this));a.s=!0;this.a.push(a);b=this.a.length;b<this.l&&a.getMap()!=this.c&&a.setMap(this.c);if(b==this.l)for(c=0;c<b;c++)this.a[c].setMap(q);b>=this.l&&a.setMap(q);a=this.c.getZoom();if((b=this.k.I())&&a>b)for(a=0;b=this.a[a];a++)b.setMap(this.c);else this.a.length<this.l?g(this.n):(b=this.k.H()(this.a,this.k.z().length),this.n.setCenter(this.d),a=this.n,a.B=b,a.ga=b.text,a.ea=b.index,a.b&&(a.b.innerHTML=b.text),b=Math.max(0,
a.B.index-1),b=Math.min(a.j.length-1,b),b=a.j[b],a.da=b.url,a.h=b.height,a.p=b.width,a.M=b.textColor,a.e=b.anchor,a.N=b.textSize,a.D=b.backgroundPosition,this.n.show());return!0};u.getBounds=function(){for(var a=new google.maps.LatLngBounds(this.d,this.d),b=this.o(),c=0,d;d=b[c];c++)a.extend(d.getPosition());return a};u.remove=function(){this.n.remove();this.a.length=0;delete this.a};u.T=function(){return this.a.length};u.o=a("a");u.getCenter=a("d");u.getMap=a("c");u=m.prototype;u.onAdd=function(){this.b=
document.createElement("DIV");this.t&&(this.b.style.cssText=n(this,p(this,this.d)),this.b.innerHTML=this.B.text);this.getPanes().overlayMouseTarget.appendChild(this.b);var a=this;google.maps.event.addDomListener(this.b,"click",function(){var b=a.u.k;google.maps.event.trigger(b,"clusterclick",a.u);b.O&&a.c.fitBounds(a.u.getBounds())})};u.draw=function(){if(this.t){var a=p(this,this.d);this.b.style.top=a.y+"px";this.b.style.left=a.x+"px"}};u.show=function(){this.b&&(this.b.style.cssText=n(this,p(this,
this.d)),this.b.style.display="");this.t=!0};u.remove=function(){this.setMap(q)};u.onRemove=function(){this.b&&this.b.parentNode&&(g(this),this.b.parentNode.removeChild(this.b),this.b=q)};u.setCenter=c("d");window.MarkerClusterer=b;b.prototype.addMarker=b.prototype.q;b.prototype.addMarkers=b.prototype.C;b.prototype.clearMarkers=b.prototype.R;b.prototype.fitMapToMarkers=b.prototype.S;b.prototype.getCalculator=b.prototype.H;b.prototype.getGridSize=b.prototype.w;b.prototype.getExtendedBounds=b.prototype.v;
b.prototype.getMap=b.prototype.getMap;b.prototype.getMarkers=b.prototype.o;b.prototype.getMaxZoom=b.prototype.I;b.prototype.getStyles=b.prototype.z;b.prototype.getTotalClusters=b.prototype.U;b.prototype.getTotalMarkers=b.prototype.V;b.prototype.redraw=b.prototype.i;b.prototype.removeMarker=b.prototype.Y;b.prototype.removeMarkers=b.prototype.Z;b.prototype.resetViewport=b.prototype.m;b.prototype.repaint=b.prototype.L;b.prototype.setCalculator=b.prototype.$;b.prototype.setGridSize=b.prototype.aa;b.prototype.setMaxZoom=
b.prototype.ba;b.prototype.onAdd=b.prototype.onAdd;b.prototype.draw=b.prototype.draw;h.prototype.getCenter=h.prototype.getCenter;h.prototype.getSize=h.prototype.T;h.prototype.getMarkers=h.prototype.o;m.prototype.onAdd=m.prototype.onAdd;m.prototype.draw=m.prototype.draw;m.prototype.onRemove=m.prototype.onRemove})();
(function(){var c=function(){this.options_index=0;this.parsed=[]};c.prototype.add_node=function(a){return"OPTGROUP"===a.nodeName.toUpperCase()?this.add_group(a):this.add_option(a)};c.prototype.add_group=function(a){var b,c,e,f,h,j;b=this.parsed.length;this.parsed.push({array_index:b,group:!0,label:a.label,children:0,disabled:a.disabled});h=a.childNodes;j=[];e=0;for(f=h.length;e<f;e++)c=h[e],j.push(this.add_option(c,b,a.disabled));return j};c.prototype.add_option=function(a,b,c){if("OPTION"===a.nodeName.toUpperCase())return""!==
a.text?(null!=b&&(this.parsed[b].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,html:a.innerHTML,selected:a.selected,disabled:!0===c?c:a.disabled,group_array_index:b,classes:a.className,style:a.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1};c.select_to_array=function(a){var b,d,e,f;b=new c;f=a.childNodes;d=0;for(e=f.length;d<e;d++)a=f[d],b.add_node(a);
return b.parsed};this.SelectParser=c}).call(this);
(function(){var c=function(a,b){this.form_field=a;this.options=null!=b?b:{};this.set_default_values();this.is_multiple=this.form_field.multiple;this.set_default_text();this.setup();this.set_up_html();this.register_observers();this.finish_setup()};c.prototype.set_default_values=function(){var a=this;this.click_test_action=function(b){return a.test_active_click(b)};this.activate_action=function(b){return a.activate_field(b)};this.results_showing=this.mouse_on_container=this.active_field=!1;this.result_single_selected=
this.result_highlighted=null;this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1;this.disable_search_threshold=this.options.disable_search_threshold||0;this.disable_search=this.options.disable_search||!1;this.search_contains=this.options.search_contains||!1;this.choices=0;this.single_backstroke_delete=this.options.single_backstroke_delete||!1;return this.max_selected_options=
this.options.max_selected_options||Infinity};c.prototype.set_default_text=function(){this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option";return this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||
"No results match"};c.prototype.mouse_enter=function(){return this.mouse_on_container=!0};c.prototype.mouse_leave=function(){return this.mouse_on_container=!1};c.prototype.input_focus=function(){var a=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return a.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()};c.prototype.input_blur=function(){var a=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return a.blur_test()},
100)};c.prototype.result_add_option=function(a){var b,c;if(a.disabled)return"";a.dom_id=this.container_id+"_o_"+a.array_index;b=a.selected&&this.is_multiple?[]:["active-result"];a.selected&&b.push("result-selected");null!=a.group_array_index&&b.push("group-option");""!==a.classes&&b.push(a.classes);c=""!==a.style.cssText?' style="'+a.style+'"':"";return'<li id="'+a.dom_id+'" class="'+b.join(" ")+'"'+c+">"+a.html+"</li>"};c.prototype.results_update_field=function(){this.is_multiple||this.results_reset_cleanup();
this.result_clear_highlight();this.result_single_selected=null;return this.results_build()};c.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()};c.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()};c.prototype.keyup_checker=function(a){var b,c;b=null!=(c=a.which)?c:a.keyCode;this.search_field_scale();switch(b){case 8:if(this.is_multiple&&1>this.backstroke_length&&0<this.choices)return this.keydown_backstroke();
if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:a.preventDefault();if(this.results_showing)return this.result_select(a);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}};c.prototype.generate_field_id=function(){var a;a=this.generate_random_id();return this.form_field.id=a};c.prototype.generate_random_char=function(){var a;a=Math.floor(36*
Math.random());return"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".substring(a,a+1)};this.AbstractChosen=c}).call(this);
(function(){var c,a,b,d,e=Object.prototype.hasOwnProperty;d=this;c=jQuery;c.fn.extend({chosen:function(b){return c.browser.msie&&("6.0"===c.browser.version||"7.0"===c.browser.version&&7===document.documentMode)?this:this.each(function(){var d;d=c(this);if(!d.hasClass("chzn-done"))return d.data("chosen",new a(this,b))})}});var f=function(){f.__super__.constructor.apply(this,arguments)},h=f,j=AbstractChosen,m=function(){this.constructor=h},p;for(p in j)e.call(j,p)&&(h[p]=j[p]);m.prototype=j.prototype;
h.prototype=new m;h.__super__=j.prototype;f.prototype.setup=function(){this.form_field_jq=c(this.form_field);this.current_value=this.form_field_jq.val();return this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")};f.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")};f.prototype.set_up_html=function(){var a;this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id();this.container_id+="_chzn";this.f_width=this.form_field_jq.outerWidth();
a=c("<div />",{id:this.container_id,"class":"chzn-container"+(this.is_rtl?" chzn-rtl":""),style:"width: "+this.f_width+"px;"});this.is_multiple?a.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):a.html('<a href="javascript:void(0)" class="chzn-single chzn-default" tabindex="-1"><span>'+this.default_text+
'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off"  /></div><ul class="chzn-results"></ul></div>');this.form_field_jq.hide().after(a);this.container=c("#"+this.container_id);this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single"));this.dropdown=this.container.find("div.chzn-drop").first();a=this.container.height();b(this.dropdown);this.dropdown.css({width:"175px",top:a+"px"});this.search_field=
this.container.find("input").first();this.search_results=this.container.find("ul.chzn-results").first();this.search_field_scale();this.search_no_results=this.container.find("li.no-results").first();this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),a=175-b(this.search_container)-
b(this.search_field),this.search_field.css({width:a+"px"}));this.results_build();this.set_tab_index();return this.form_field_jq.trigger("liszt:ready",{chosen:this})};f.prototype.register_observers=function(){var a=this;this.container.mousedown(function(b){return a.container_mousedown(b)});this.container.mouseup(function(b){return a.container_mouseup(b)});this.container.mouseenter(function(b){return a.mouse_enter(b)});this.container.mouseleave(function(b){return a.mouse_leave(b)});this.search_results.mouseup(function(b){return a.search_results_mouseup(b)});
this.search_results.mouseover(function(b){return a.search_results_mouseover(b)});this.search_results.mouseout(function(b){return a.search_results_mouseout(b)});this.form_field_jq.bind("liszt:updated",function(b){return a.results_update_field(b)});this.form_field_jq.bind("liszt:activate",function(b){return a.activate_field(b)});this.form_field_jq.bind("liszt:open",function(b){return a.container_mousedown(b)});this.search_field.blur(function(b){return a.input_blur(b)});this.search_field.keyup(function(b){return a.keyup_checker(b)});
this.search_field.keydown(function(b){return a.keydown_checker(b)});this.search_field.focus(function(b){return a.input_focus(b)});return this.is_multiple?this.search_choices.click(function(b){return a.choices_click(b)}):this.container.click(function(a){return a.preventDefault()})};f.prototype.search_field_disabled=function(){if(this.is_disabled=this.form_field_jq[0].disabled)return this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",
this.activate_action),this.close_field();this.container.removeClass("chzn-disabled");this.search_field[0].disabled=!1;if(!this.is_multiple)return this.selected_item.bind("focus",this.activate_action)};f.prototype.container_mousedown=function(a){var b;if(!this.is_disabled){b=null!=a?c(a.target).hasClass("search-choice-close"):!1;a&&("mousedown"===a.type&&!this.results_showing)&&a.stopPropagation();if(!this.pending_destroy_click&&!b){if(this.active_field){if(!this.is_multiple&&a&&(c(a.target)[0]===
this.selected_item[0]||c(a.target).parents("a.chzn-single").length))a.preventDefault(),this.results_toggle()}else this.is_multiple&&this.search_field.val(""),c(document).click(this.click_test_action),this.results_show();return this.activate_field()}return this.pending_destroy_click=!1}};f.prototype.container_mouseup=function(a){if("ABBR"===a.target.nodeName&&!this.is_disabled)return this.results_reset(a)};f.prototype.blur_test=function(){if(!this.active_field&&this.container.hasClass("chzn-container-active"))return this.close_field()};
f.prototype.close_field=function(){c(document).unbind("click",this.click_test_action);this.active_field=!1;this.results_hide();this.container.removeClass("chzn-container-active");this.winnow_results_clear();this.clear_backstroke();this.show_search_field_default();return this.search_field_scale()};f.prototype.activate_field=function(){this.container.addClass("chzn-container-active");this.active_field=!0;this.search_field.val(this.search_field.val());return this.search_field.focus()};f.prototype.test_active_click=
function(a){return c(a.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()};f.prototype.results_build=function(){var a,b,c,e,f;this.parsing=!0;this.results_data=d.SelectParser.select_to_array(this.form_field);this.is_multiple&&0<this.choices?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?
this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch"));a="";f=this.results_data;c=0;for(e=f.length;c<e;c++)b=f[c],b.group?a+=this.result_add_group(b):b.empty||(a+=this.result_add_option(b),b.selected&&this.is_multiple?this.choice_build(b):b.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(b.text),this.allow_single_deselect&&this.single_deselect_control_build()));this.search_field_disabled();
this.show_search_field_default();this.search_field_scale();this.search_results.html(a);return this.parsing=!1};f.prototype.result_add_group=function(a){if(a.disabled)return"";a.dom_id=this.container_id+"_g_"+a.array_index;return'<li id="'+a.dom_id+'" class="group-result">'+c("<div />").text(a.label).html()+"</li>"};f.prototype.result_do_highlight=function(a){var b,c,d,e;if(a.length){this.result_clear_highlight();this.result_highlight=a;this.result_highlight.addClass("highlighted");c=parseInt(this.search_results.css("maxHeight"),
10);e=this.search_results.scrollTop();d=c+e;b=this.result_highlight.position().top+this.search_results.scrollTop();a=b+this.result_highlight.outerHeight();if(a>=d)return this.search_results.scrollTop(0<a-c?a-c:0);if(b<e)return this.search_results.scrollTop(b)}};f.prototype.result_clear_highlight=function(){this.result_highlight&&this.result_highlight.removeClass("highlighted");return this.result_highlight=null};f.prototype.results_show=function(){var a;if(this.is_multiple){if(this.max_selected_options<=
this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1}else this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected);a=this.is_multiple?this.container.height():this.container.height()-1;this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this});this.dropdown.css({top:a+"px",left:0});this.results_showing=!0;this.search_field.focus();this.search_field.val(this.search_field.val());return this.winnow_results()};
f.prototype.results_hide=function(){this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop");this.result_clear_highlight();this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this});this.dropdown.css({left:"-9000px"});return this.results_showing=!1};f.prototype.set_tab_index=function(){var a;if(this.form_field_jq.attr("tabindex"))return a=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.search_field.attr("tabindex",a)};f.prototype.show_search_field_default=
function(){if(this.is_multiple&&1>this.choices&&!this.active_field)return this.search_field.val(this.default_text),this.search_field.addClass("default");this.search_field.val("");return this.search_field.removeClass("default")};f.prototype.search_results_mouseup=function(a){var b;b=c(a.target).hasClass("active-result")?c(a.target):c(a.target).parents(".active-result").first();if(b.length)return this.result_highlight=b,this.result_select(a),this.search_field.focus()};f.prototype.search_results_mouseover=
function(a){if(a=c(a.target).hasClass("active-result")?c(a.target):c(a.target).parents(".active-result").first())return this.result_do_highlight(a)};f.prototype.search_results_mouseout=function(a){if(c(a.target).hasClass("active-result"))return this.result_clear_highlight()};f.prototype.choices_click=function(a){a.preventDefault();if(this.active_field&&!c(a.target).hasClass("search-choice")&&!this.results_showing)return this.results_show()};f.prototype.choice_build=function(a){var b,d=this;if(this.is_multiple&&
this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1;b=this.container_id+"_c_"+a.array_index;this.choices+=1;this.search_container.before(a.disabled?'<li class="search-choice search-choice-disabled" id="'+b+'"><span>'+a.html+"</span></li>":'<li class="search-choice" id="'+b+'"><span>'+a.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+a.array_index+'"></a></li>');return c("#"+b).find("a").first().click(function(a){return d.choice_destroy_link_click(a)})};
f.prototype.choice_destroy_link_click=function(a){a.preventDefault();if(this.is_disabled)return a.stopPropagation;this.pending_destroy_click=!0;return this.choice_destroy(c(a.target))};f.prototype.choice_destroy=function(a){if(this.result_deselect(a.attr("rel")))return this.choices-=1,this.show_search_field_default(),this.is_multiple&&(0<this.choices&&1>this.search_field.val().length)&&this.results_hide(),a.parents("li").first().remove()};f.prototype.results_reset=function(){this.form_field.options[0].selected=
!0;this.selected_item.find("span").text(this.default_text);this.is_multiple||this.selected_item.addClass("chzn-default");this.show_search_field_default();this.results_reset_cleanup();this.form_field_jq.trigger("change");if(this.active_field)return this.results_hide()};f.prototype.results_reset_cleanup=function(){this.current_value=this.form_field_jq.val();return this.selected_item.find("abbr").remove()};f.prototype.result_select=function(a){var b,c;if(this.result_highlight)return b=this.result_highlight,
c=b.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(b):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=b,this.selected_item.removeClass("chzn-default")),b.addClass("result-selected"),b=c.substr(c.lastIndexOf("_")+1),b=this.results_data[b],b.selected=!0,this.form_field.options[b.options_index].selected=!0,this.is_multiple?this.choice_build(b):(this.selected_item.find("span").first().text(b.text),this.allow_single_deselect&&
this.single_deselect_control_build()),(!a.metaKey||!this.is_multiple)&&this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field_jq.val()!==this.current_value)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[b.options_index].value}),this.current_value=this.form_field_jq.val(),this.search_field_scale()};f.prototype.result_activate=function(a){return a.addClass("active-result")};f.prototype.result_deactivate=function(a){return a.removeClass("active-result")};
f.prototype.result_deselect=function(a){var b;b=this.results_data[a];if(this.form_field.options[b.options_index].disabled)return!1;b.selected=!1;this.form_field.options[b.options_index].selected=!1;c("#"+this.container_id+"_o_"+a).removeClass("result-selected").addClass("active-result").show();this.result_clear_highlight();this.winnow_results();this.form_field_jq.trigger("change",{deselected:this.form_field.options[b.options_index].value});this.search_field_scale();return!0};f.prototype.single_deselect_control_build=
function(){if(this.allow_single_deselect&&1>this.selected_item.find("abbr").length)return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')};f.prototype.winnow_results=function(){var a,b,d,e,f,h,j,m,p,C,I,r,E,J,D;this.no_results_clear();m=0;p=this.search_field.val()===this.default_text?"":c("<div/>").text(c.trim(this.search_field.val())).html();f=RegExp((this.search_contains?"":"^")+p.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");C=RegExp(p.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,
"\\$&"),"i");D=this.results_data;I=0;for(E=D.length;I<E;I++)if(b=D[I],!b.disabled&&!b.empty)if(b.group)c("#"+b.dom_id).css("display","none");else if(!this.is_multiple||!b.selected){a=!1;j=b.dom_id;h=c("#"+j);if(f.test(b.html))a=!0,m+=1;else if(0<=b.html.indexOf(" ")||0===b.html.indexOf("["))if(e=b.html.replace(/\[|\]/g,"").split(" "),e.length){r=0;for(J=e.length;r<J;r++)d=e[r],f.test(d)&&(a=!0,m+=1)}a?(p.length?(a=b.html.search(C),d=b.html.substr(0,a+p.length)+"</em>"+b.html.substr(a+p.length),d=
d.substr(0,a)+"<em>"+d.substr(a)):d=b.html,h.html(d),this.result_activate(h),null!=b.group_array_index&&c("#"+this.results_data[b.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&j===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(h))}return 1>m&&p.length?this.no_results(p):this.winnow_results_set_highlight()};f.prototype.winnow_results_clear=function(){var a,b,d,e,f;this.search_field.val("");b=this.search_results.find("li");f=[];
d=0;for(e=b.length;d<e;d++)a=b[d],a=c(a),a.hasClass("group-result")?f.push(a.css("display","auto")):!this.is_multiple||!a.hasClass("result-selected")?f.push(this.result_activate(a)):f.push(void 0);return f};f.prototype.winnow_results_set_highlight=function(){var a;if(!this.result_highlight&&(a=!this.is_multiple?this.search_results.find(".result-selected.active-result"):[],a=a.length?a.first():this.search_results.find(".active-result").first(),null!=a))return this.result_do_highlight(a)};f.prototype.no_results=
function(a){var b;b=c('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>');b.find("span").first().html(a);return this.search_results.append(b)};f.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()};f.prototype.keydown_arrow=function(){var a;this.result_highlight?this.results_showing&&(a=this.result_highlight.nextAll("li.active-result").first())&&this.result_do_highlight(a):(a=this.search_results.find("li.active-result").first())&&this.result_do_highlight(c(a));
if(!this.results_showing)return this.results_show()};f.prototype.keyup_arrow=function(){var a;if(!this.results_showing&&!this.is_multiple)return this.results_show();if(this.result_highlight){a=this.result_highlight.prevAll("li.active-result");if(a.length)return this.result_do_highlight(a.first());0<this.choices&&this.results_hide();return this.result_clear_highlight()}};f.prototype.keydown_backstroke=function(){var a;if(this.pending_backstroke)return this.choice_destroy(this.pending_backstroke.find("a").first()),
this.clear_backstroke();a=this.search_container.siblings("li.search-choice").last();if(a.length&&!a.hasClass("search-choice-disabled"))return this.pending_backstroke=a,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")};f.prototype.clear_backstroke=function(){this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus");return this.pending_backstroke=null};f.prototype.keydown_checker=function(a){var b,c;b=null!=(c=
a.which)?c:a.keyCode;this.search_field_scale();8!==b&&this.pending_backstroke&&this.clear_backstroke();switch(b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a);this.mouse_on_container=!1;break;case 13:a.preventDefault();break;case 38:a.preventDefault();this.keyup_arrow();break;case 40:this.keydown_arrow()}};f.prototype.search_field_scale=function(){var a,b,d,e,f;if(this.is_multiple){b="position:absolute; left: -1000px; top: -1000px; display:none;";
d="font-size font-style font-weight font-family line-height text-transform letter-spacing".split(" ");e=0;for(f=d.length;e<f;e++)a=d[e],b+=a+":"+this.search_field.css(a)+";";a=c("<div />",{style:b});a.text(this.search_field.val());c("body").append(a);b=a.width()+25;a.remove();b>this.f_width-10&&(b=this.f_width-10);this.search_field.css({width:b+"px"});a=this.container.height();return this.dropdown.css({top:a+"px"})}};f.prototype.generate_random_id=function(){var a;for(a="sel"+this.generate_random_char()+
this.generate_random_char()+this.generate_random_char();0<c("#"+a).length;)a+=this.generate_random_char();return a};a=f;b=function(a){return a.outerWidth()-a.width()};d.get_side_border_padding=b}).call(this);
window.Socialite=function(c,a,b){var d=0,e=[],f={},h={},j=/^($|loaded|complete)/,m=c.encodeURIComponent,p={settings:{},trim:function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},hasClass:function(a,b){return-1!==(" "+a.className+" ").indexOf(" "+b+" ")},addClass:function(a,b){p.hasClass(a,b)||(a.className=""===a.className?b:a.className+" "+b)},removeClass:function(a,b){a.className=p.trim(" "+a.className+" ".replace(" "+b+" "," "))},extendObject:function(a,c,d){for(var e in c){var f=a[e]!==
b;if(f&&"object"===typeof c[e])p.extendObject(a[e],c[e],d);else if(d||!f)a[e]=c[e]}},getElements:function(a,b){for(var c=0,d=[],e=!!a.getElementsByClassName,f=e?a.getElementsByClassName(b):a.getElementsByTagName("*");c<f.length;c++)(e||p.hasClass(f[c],b))&&d.push(f[c]);return d},getDataAttributes:function(a,b,c){var d=0,e="",f={};for(a=a.attributes;d<a.length;d++){var h=a[d].name,j=a[d].value;j.length&&0===h.indexOf("data-")&&(b&&(h=h.substring(5)),c?f[h]=j:e+=m(h)+"="+m(j)+"&")}return c?f:e},copyDataAttributes:function(a,
b,c,d){a=p.getDataAttributes(a,c,!0);for(var e in a)b.setAttribute(d?e.replace(/-/g,"_"):e,a[e])},createIframe:function(b,c){var d=a.createElement("iframe");d.style.cssText="overflow: hidden; border: none;";p.extendObject(d,{src:b,allowtransparency:"true",frameborder:"0",scrolling:"no"},!0);c&&(d.onload=d.onreadystatechange=function(){if(j.test(d.readyState||""))d.onload=d.onreadystatechange=null,p.activateInstance(c)});return d},networkReady:function(a){return f[a]?f[a].loaded:b},appendNetwork:function(b){b&&
!b.appended&&("function"===typeof b.append&&!1===b.append(b)?(b.appended=b.loaded=!0,p.activateAll(b)):(b.script&&(b.el=a.createElement("script"),p.extendObject(b.el,b.script,!0),b.el.async=!0,b.el.onload=b.el.onreadystatechange=function(){if(j.test(b.el.readyState||""))b.el.onload=b.el.onreadystatechange=null,b.loaded=!0,"function"===typeof b.onload&&!1===b.onload(b)||p.activateAll(b)},a.body.appendChild(b.el)),b.appended=!0))},removeNetwork:function(a){if(!p.networkReady(a.name))return!1;a.el.parentNode&&
a.el.parentNode.removeChild(a.el);return!(a.appended=a.loaded=!1)},reloadNetwork:function(a){(a=f[a])&&p.removeNetwork(a)&&p.appendNetwork(a)},createInstance:function(a,c){var f=!0,h={el:a,uid:d++,widget:c};e.push(h);c.process!==b&&(f="function"===typeof c.process?c.process(h):!1);f&&p.processInstance(h);h.el.setAttribute("data-socialite",h.uid);h.el.className="socialite "+c.name+" socialite-instance";return h},processInstance:function(b){var c=b.el;b.el=a.createElement("div");b.el.className=c.className;
p.copyDataAttributes(c,b.el);"a"===c.nodeName.toLowerCase()&&!c.getAttribute("data-default-href")&&b.el.setAttribute("data-default-href",c.getAttribute("href"));var d=c.parentNode;d.insertBefore(b.el,c);d.removeChild(c)},activateInstance:function(a){if(a&&!a.loaded)return a.loaded=!0,"function"===typeof a.widget.activate&&a.widget.activate(a),p.addClass(a.el,"socialite-loaded"),a.onload?a.onload(a.el):null},activateAll:function(a){"string"===typeof a&&(a=f[a]);for(var b=0;b<e.length;b++){var c=e[b];
c.init&&c.widget.network===a&&p.activateInstance(c)}},load:function(b,c,d,f,j){b=b&&"object"===typeof b&&1===b.nodeType?b:a;if(!c||"object"!==typeof c)p.load(b,p.getElements(b,"socialite"),d,f,j);else{var m;if(/Array/.test(Object.prototype.toString.call(c)))for(m=0;m<c.length;m++)p.load(b,c[m],d,f,j);else if(1===c.nodeType){if(!d||!h[d]){d=null;b=c.className.split(" ");for(m=0;m<b.length;m++)if(h[b[m]]){d=b[m];break}if(!d)return}var y;d=h[d];b=parseInt(c.getAttribute("data-socialite"),10);if(isNaN(b))y=
p.createInstance(c,d);else for(m=0;m<e.length;m++)if(e[m].uid===b){y=e[m];break}!j&&y&&(y.init||(y.init=!0,y.onload="function"===typeof f?f:null,d.init(y)),d.network.appended?p.networkReady(d.network.name)&&p.activateInstance(y):p.appendNetwork(d.network))}}},activate:function(a,b,d){c.Socialite.load(null,a,b,d)},process:function(a,b,d){c.Socialite.load(a,b,d,null,!0)},network:function(a,b){f[a]={name:a,el:null,appended:!1,loaded:!1,widgets:{}};b&&p.extendObject(f[a],b)},widget:function(a,b,c){c.name=
a+"-"+b;f[a]&&!h[c.name]&&(c.network=f[a],f[a].widgets[b]=h[c.name]=c)},setup:function(a){p.extendObject(p.settings,a,!0)}};return p}(window,window.document);
(function(c,a,b){b.setup({facebook:{lang:"en_GB",appId:null},twitter:{lang:"en"},googleplus:{lang:"en-GB"}});b.network("facebook",{script:{src:"//connect.facebook.net/{{language}}/all.js",id:"facebook-jssdk"},append:function(d){var e=a.createElement("div"),f=b.settings.facebook,p={onlike:"edge.create",onunlike:"edge.remove",onsend:"message.send"};e.id="fb-root";a.body.appendChild(e);d.script.src=d.script.src.replace("{{language}}",f.lang);c.fbAsyncInit=function(){c.FB.init({appId:f.appId,xfbml:!0});
for(var a in p)"function"===typeof f[a]&&c.FB.Event.subscribe(p[a],f[a])}}});b.widget("facebook","like",{init:function(d){var e=a.createElement("div");e.className="fb-like";b.copyDataAttributes(d.el,e);d.el.appendChild(e);c.FB&&c.FB.XFBML&&c.FB.XFBML.parse(d.el)}});b.network("twitter",{script:{src:"//platform.twitter.com/widgets.js",id:"twitter-wjs",charset:"utf-8"},append:function(){var a="object"!==typeof c.twttr,d=b.settings.twitter,e=["click","tweet","retweet","favorite","follow"];a&&(c.twttr=
t={_e:[],ready:function(a){t._e.push(a)}});c.twttr.ready(function(a){for(var c=0;c<e.length;c++){var f=e[c];"function"===typeof d["on"+f]&&a.events.bind(f,d["on"+f])}b.activateAll("twitter")});return a}});var d=function(c){var d=a.createElement("a");d.className=c.widget.name+"-button";b.copyDataAttributes(c.el,d);d.setAttribute("href",c.el.getAttribute("data-default-href"));d.setAttribute("data-lang",c.el.getAttribute("data-lang")||b.settings.twitter.lang);c.el.appendChild(d)},e=function(){c.twttr&&
("object"===typeof c.twttr.widgets&&"function"===typeof c.twttr.widgets.load)&&c.twttr.widgets.load()};b.widget("twitter","share",{init:d,activate:e});b.widget("twitter","follow",{init:d,activate:e});b.widget("twitter","hashtag",{init:d,activate:e});b.widget("twitter","mention",{init:d,activate:e});b.widget("twitter","embed",{process:function(c){c.innerEl=c.el;c.innerEl.getAttribute("data-lang")||c.innerEl.setAttribute("data-lang",b.settings.twitter.lang);c.el=a.createElement("div");c.el.className=
c.innerEl.className;c.innerEl.className="";c.innerEl.parentNode.insertBefore(c.el,c.innerEl);c.el.appendChild(c.innerEl)},init:function(a){a.innerEl.className="twitter-tweet"},activate:e});b.network("googleplus",{script:{src:"//apis.google.com/js/plusone.js"},append:function(){if(c.gapi)return!1;c.___gcfg={lang:b.settings.googleplus.lang,parsetags:"explicit"}}});var d=function(c){var d=a.createElement("div");d.className="g-"+c.widget.gtype;b.copyDataAttributes(c.el,d);c.el.appendChild(d);c.gplusEl=
d},f=function(a,b){return"function"!==typeof b?null:function(c){b(a.el,c)}},e=function(a){var d=a.widget.gtype;if(c.gapi&&c.gapi[d]){for(var e=b.settings.googleplus,p=b.getDataAttributes(a.el,!0,!0),g=["onstartinteraction","onendinteraction","callback"],n=0;n<g.length;n++)p[g[n]]=f(a,e[g[n]]);c.gapi[d].render(a.gplusEl,p)}};b.widget("googleplus","one",{init:d,activate:e,gtype:"plusone"});b.widget("googleplus","share",{init:d,activate:e,gtype:"plus"});b.widget("googleplus","badge",{init:d,activate:e,
gtype:"plus"});b.network("linkedin",{script:{src:"//platform.linkedin.com/in.js"}});d=function(d){var e=a.createElement("script");e.type="IN/"+d.widget.intype;b.copyDataAttributes(d.el,e);d.el.appendChild(e);"object"===typeof c.IN&&"function"===typeof c.IN.parse&&(c.IN.parse(d.el),b.activateInstance(d))};b.widget("linkedin","share",{init:d,intype:"Share"});b.widget("linkedin","recommend",{init:d,intype:"RecommendProduct"})})(window,window.document,window.Socialite);
(function(){var c=window._socialite;if(/Array/.test(Object.prototype.toString.call(c)))for(var a=0,b=c.length;a<b;a++)if("function"===typeof c[a])c[a]()})();
(function(c,a,b){var d=[];b.setup({vkontakte:{apiId:null,group:{id:0,mode:0,width:300,height:290},like:{type:"mini"}}});b.network("vkontakte",{script:{src:"//userapi.com/js/api/openapi.js?49",id:"vk-jsapi"},onload:function(){VK.init({apiId:b.settings.vkontakte.apiId,onlyWidgets:!0});for(var a=0,c=d.length;a<c;d[a].call(this),a++);}});var e=function(a,b,c){for(var d={},e,g=0,n=b.length;g<n;e=b[g],d[e]=a.getAttribute("data-"+e)||c[e],g++);return d};b.widget("vkontakte","group",{init:function(f){"object"!==
typeof c.VK&&d.push(function(){var c=a.createElement("div"),d=b.settings.vkontakte;c.className="vk-group";c.id="vkontakte-group-"+(new Date).getTime();b.copyDataAttributes(f.el,c);group=e(f.el,["id","mode","width","height"],d.group);f.el.appendChild(c);VK.Widgets.Group(c.id,group,group.id)})}});b.widget("vkontakte","like",{init:function(f){"object"!==typeof c.VK&&d.push(function(){var c=a.createElement("div"),d=b.settings.vkontakte;c.className="vk-like";c.id="vkontakte-like-"+(new Date).getTime()+
Math.random().toString().replace(".","-");b.copyDataAttributes(f.el,c);like=e(f.el,["type"],d.like);f.el.appendChild(c);VK.Widgets.Like(c.id,like)})}})})(window,window.document,window.Socialite);
var isIphone=!1,isAndroidPhone=!1,isTierTablet=!1,isTierIphone=!1,isTierRichCss=!1,isTierGenericMobile=!1,engineWebKit="webkit",deviceIphone="iphone",deviceIpod="ipod",deviceIpad="ipad",deviceMacPpc="macintosh",deviceAndroid="android",deviceGoogleTV="googletv",deviceXoom="xoom",deviceHtcFlyer="htc_flyer",deviceNuvifone="nuvifone",deviceSymbian="symbian",deviceS60="series60",deviceS70="series70",deviceS80="series80",deviceS90="series90",deviceWinPhone7="windows phone os 7",deviceWinMob="windows ce",
deviceWindows="windows",deviceIeMob="iemobile",devicePpc="ppc",enginePie="wm5 pie",deviceBB="blackberry",vndRIM="vnd.rim",deviceBBStorm="blackberry95",deviceBBBold="blackberry97",deviceBBBoldTouch="blackberry 99",deviceBBTour="blackberry96",deviceBBCurve="blackberry89",deviceBBCurveTouch="blackberry 938",deviceBBTorch="blackberry 98",deviceBBPlaybook="playbook",devicePalm="palm",deviceWebOS="webos",deviceWebOShp="hpwos",engineBlazer="blazer",engineXiino="xiino",deviceKindle="kindle",engineSilk="silk",
vndwap="vnd.wap",wml="wml",deviceTablet="tablet",deviceBrew="brew",deviceDanger="danger",deviceHiptop="hiptop",devicePlaystation="playstation",deviceNintendoDs="nitro",deviceNintendo="nintendo",deviceWii="wii",deviceXbox="xbox",deviceArchos="archos",engineOpera="opera",engineNetfront="netfront",engineUpBrowser="up.browser",engineOpenWeb="openweb",deviceMidp="midp",uplink="up.link",engineTelecaQ="teleca q",devicePda="pda",mini="mini",mobile="mobile",mobi="mobi",maemo="maemo",linux="linux",qtembedded=
"qt embedded",mylocom2="com2",manuSonyEricsson="sonyericsson",manuericsson="ericsson",manuSamsung1="sec-sgh",manuSony="sony",manuHtc="htc",svcDocomo="docomo",svcKddi="kddi",svcVodafone="vodafone",disUpdate="update",uagent="";navigator&&navigator.userAgent&&(uagent=navigator.userAgent.toLowerCase());function DetectIphone(){return-1<uagent.search(deviceIphone)?DetectIpad()||DetectIpod()?!1:!0:!1}function DetectIpod(){return-1<uagent.search(deviceIpod)?!0:!1}
function DetectIpad(){return-1<uagent.search(deviceIpad)&&DetectWebkit()?!0:!1}function DetectIphoneOrIpod(){return-1<uagent.search(deviceIphone)||-1<uagent.search(deviceIpod)?!0:!1}function DetectIos(){return DetectIphoneOrIpod()||DetectIpad()?!0:!1}function DetectAndroid(){return-1<uagent.search(deviceAndroid)||DetectGoogleTV()?!0:-1<uagent.search(deviceHtcFlyer)?!0:!1}
function DetectAndroidPhone(){return DetectAndroid()&&-1<uagent.search(mobile)||DetectOperaAndroidPhone()?!0:-1<uagent.search(deviceHtcFlyer)?!0:!1}function DetectAndroidTablet(){return!DetectAndroid()||DetectOperaMobile()||-1<uagent.search(deviceHtcFlyer)?!1:-1<uagent.search(mobile)?!1:!0}function DetectAndroidWebKit(){return DetectAndroid()&&DetectWebkit()?!0:!1}function DetectGoogleTV(){return-1<uagent.search(deviceGoogleTV)?!0:!1}
function DetectWebkit(){return-1<uagent.search(engineWebKit)?!0:!1}function DetectS60OssBrowser(){return DetectWebkit()?-1<uagent.search(deviceS60)||-1<uagent.search(deviceSymbian)?!0:!1:!1}function DetectSymbianOS(){return-1<uagent.search(deviceSymbian)||-1<uagent.search(deviceS60)||-1<uagent.search(deviceS70)||-1<uagent.search(deviceS80)||-1<uagent.search(deviceS90)?!0:!1}function DetectWindowsPhone7(){return-1<uagent.search(deviceWinPhone7)?!0:!1}
function DetectWindowsMobile(){return DetectWindowsPhone7()?!1:-1<uagent.search(deviceWinMob)||(-1<uagent.search(deviceIeMob)||-1<uagent.search(enginePie))||-1<uagent.search(devicePpc)&&!(-1<uagent.search(deviceMacPpc))?!0:-1<uagent.search(manuHtc)&&-1<uagent.search(deviceWindows)?!0:!1}function DetectBlackBerry(){return-1<uagent.search(deviceBB)?!0:-1<uagent.search(vndRIM)?!0:!1}function DetectBlackBerryTablet(){return-1<uagent.search(deviceBBPlaybook)?!0:!1}
function DetectBlackBerryWebKit(){return DetectBlackBerry()&&-1<uagent.search(engineWebKit)?!0:!1}function DetectBlackBerryTouch(){return DetectBlackBerry()&&(-1<uagent.search(deviceBBStorm)||-1<uagent.search(deviceBBTorch)||-1<uagent.search(deviceBBBoldTouch)||-1<uagent.search(deviceBBCurveTouch))?!0:!1}
function DetectBlackBerryHigh(){return DetectBlackBerryWebKit()?!1:DetectBlackBerry()?DetectBlackBerryTouch()||-1<uagent.search(deviceBBBold)||-1<uagent.search(deviceBBTour)||-1<uagent.search(deviceBBCurve)?!0:!1:!1}function DetectBlackBerryLow(){return DetectBlackBerry()?DetectBlackBerryHigh()||DetectBlackBerryWebKit()?!1:!0:!1}function DetectPalmOS(){return-1<uagent.search(devicePalm)||-1<uagent.search(engineBlazer)||-1<uagent.search(engineXiino)?DetectPalmWebOS()?!1:!0:!1}
function DetectPalmWebOS(){return-1<uagent.search(deviceWebOS)?!0:!1}function DetectWebOSTablet(){return-1<uagent.search(deviceWebOShp)&&-1<uagent.search(deviceTablet)?!0:!1}function DetectGarminNuvifone(){return-1<uagent.search(deviceNuvifone)?!0:!1}
function DetectSmartphone(){return DetectIphoneOrIpod()||DetectAndroidPhone()||DetectS60OssBrowser()||DetectSymbianOS()||DetectWindowsMobile()||DetectWindowsPhone7()||DetectBlackBerry()||DetectPalmWebOS()||DetectPalmOS()||DetectGarminNuvifone()?!0:!1}function DetectArchos(){return-1<uagent.search(deviceArchos)?!0:!1}function DetectBrewDevice(){return-1<uagent.search(deviceBrew)?!0:!1}function DetectDangerHiptop(){return-1<uagent.search(deviceDanger)||-1<uagent.search(deviceHiptop)?!0:!1}
function DetectMaemoTablet(){return-1<uagent.search(maemo)?!0:-1<uagent.search(linux)&&-1<uagent.search(deviceTablet)&&!DetectWebOSTablet()&&!DetectAndroid()?!0:!1}function DetectSonyMylo(){return-1<uagent.search(manuSony)?-1<uagent.search(qtembedded)||-1<uagent.search(mylocom2)?!0:!1:!1}function DetectOperaMobile(){return-1<uagent.search(engineOpera)?-1<uagent.search(mini)||-1<uagent.search(mobi)?!0:!1:!1}
function DetectOperaAndroidPhone(){return-1<uagent.search(engineOpera)&&-1<uagent.search(deviceAndroid)&&-1<uagent.search(mobi)?!0:!1}function DetectOperaAndroidTablet(){return-1<uagent.search(engineOpera)&&-1<uagent.search(deviceAndroid)&&-1<uagent.search(deviceTablet)?!0:!1}function DetectSonyPlaystation(){return-1<uagent.search(devicePlaystation)?!0:!1}function DetectNintendo(){return-1<uagent.search(deviceNintendo)||-1<uagent.search(deviceWii)||-1<uagent.search(deviceNintendoDs)?!0:!1}
function DetectXbox(){return-1<uagent.search(deviceXbox)?!0:!1}function DetectGameConsole(){return DetectSonyPlaystation()||DetectNintendo()?!0:DetectXbox()?!0:!1}function DetectKindle(){return-1<uagent.search(deviceKindle)&&!DetectAndroid()?!0:!1}function DetectAmazonSilk(){return-1<uagent.search(engineSilk)?!0:!1}
function DetectMobileQuick(){return DetectTierTablet()?!1:DetectSmartphone()||(-1<uagent.search(deviceMidp)||DetectBrewDevice())||DetectOperaMobile()||-1<uagent.search(engineNetfront)||-1<uagent.search(engineUpBrowser)||-1<uagent.search(engineOpenWeb)||DetectDangerHiptop()||DetectMaemoTablet()||DetectArchos()||-1<uagent.search(devicePda)&&!(-1<uagent.search(disUpdate))||-1<uagent.search(mobile)||DetectKindle()||DetectAmazonSilk()?!0:!1}
function DetectMobileLong(){return DetectMobileQuick()||DetectGameConsole()||DetectSonyMylo()||(-1<uagent.search(manuSamsung1)||-1<uagent.search(manuSonyEricsson)||-1<uagent.search(manuericsson))||-1<uagent.search(svcDocomo)||-1<uagent.search(svcKddi)||-1<uagent.search(svcVodafone)?!0:!1}function DetectTierTablet(){return DetectIpad()||DetectAndroidTablet()||DetectBlackBerryTablet()||DetectWebOSTablet()?!0:!1}
function DetectTierIphone(){return DetectIphoneOrIpod()||DetectAndroidPhone()||DetectBlackBerryWebKit()&&DetectBlackBerryTouch()||DetectWindowsPhone7()||DetectPalmWebOS()?!0:DetectGarminNuvifone()?!0:!1}function DetectTierRichCss(){return DetectMobileQuick()?DetectTierIphone()||DetectKindle()?!1:DetectWebkit()||DetectS60OssBrowser()||DetectBlackBerryHigh()||DetectWindowsMobile()?!0:-1<uagent.search(engineTelecaQ)?!0:!1:!1}
function DetectTierOtherPhones(){return DetectMobileLong()?DetectTierIphone()||DetectTierRichCss()?!1:!0:!1}function InitDeviceScan(){isIphone=DetectIphoneOrIpod();isAndroidPhone=DetectAndroidPhone();isTierIphone=DetectTierIphone();isTierTablet=DetectTierTablet();isTierRichCss=DetectTierRichCss();isTierGenericMobile=DetectTierOtherPhones()}InitDeviceScan();Date.fromIso=function(c){return"string"==typeof c?(c=c.split("-"),new Date(c[0],c[1]-1,c[2])):c};
MouseDraggable={options:{animate:!1,slider:!1},_create:function(){this._mouseInit()},destroy:function(){this._mouseDestroy()},_mouseStart:function(c){this.options.startEvent(c,this.element)},_mouseDrag:function(c){this.options.dragEvent(c,this.element)},_mouseStop:function(c){this.options.endEvent(c,this.element);return!1}};$.widget("ui.MouseDraggable",$.ui.mouse,MouseDraggable);
VoyangaCalendarSlider=function(c){c=$.extend({},{monthArray:[],jObj:null,totalLines:1,knobWidth:1,knobPos:0,linesWidth:5,width:0,knobSlideAction:!1,animateScrollAction:!1,onresize:function(){this.width=this.jObj.find(".monthLineVoyanga").width()},startEvent:function(a,b){if(this.knobSlideAction&&(b.data("xStart",a.pageX),b.data("posStart",this.knobPos),100>this.width))this.onresize()},endEvent:function(){this.knobSlideAction&&(this.knobSlideAction=!1)},dragEvent:function(a,b){if(this.knobSlideAction){var c=
a.pageX-b.data("xStart"),c=Math.round(1E4*(c/this.width))/100;this.knobPos=b.data("posStart")+c;0>this.knobPos&&(this.knobPos=0);this.knobPos>100-this.knobWidth&&(this.knobPos=100-this.knobWidth);this.jObj.find(".knobVoyanga").css("left",this.knobPos+"%");this.jObj.find(".knobUpAllMonth").css("left",this.getKnobUpLeft());c=this.jObj.find(".calendarGridVoyanga").prop("scrollHeight");c=Math.round(c*(this.knobPos/100));this.jObj.find(".calendarGridVoyanga").scrollTop(c);this.knobMove()}},mouseDown:function(a){var b=
Math.round(this.jObj.find(".knobVoyanga").offset().left),c=b+Math.round(this.jObj.find(".knobVoyanga").width());a.pageX>=b&&a.pageX<=c&&(this.knobSlideAction=!0,this.animateScrollAction&&(this.jObj.find(".knobVoyanga").stop(!0),this.animateScrollAction=!1))},mouseUp:function(){this.knobSlideAction=!1},mousewheelEvent:function(a){var b=0,b=a.originalEvent,b="wheelDelta"in b?b.wheelDelta:-40*b.detail;a=0<b?1:-1;60<Math.abs(b)&&(b=60*a);b=this.jObj.find(".calendarGridVoyanga").scrollTop()-b;this.jObj.find(".calendarGridVoyanga").scrollTop(b);
return!1},animateStep:function(a,b){this.knobPos="px"==b.unit?Math.round(1E4*(a/this.width))/100:a;this.jObj.find(".knobUpAllMonth").css("left",this.getKnobUpLeft());var c=this.jObj.find(".calendarGridVoyanga").prop("scrollHeight"),c=Math.round(c*(this.knobPos/100));this.jObj.find(".calendarGridVoyanga").scrollTop(c);this.knobMove()},getKnobUpLeft:function(){return this.knobPos+"%"},getPercent:function(a){if(-1!=a.indexOf("px")){if(100>this.width)this.onresize();a=a.substr(0,a.length-2);a=Math.round(1E4*
(a/this.width))/100}else-1!=a.indexOf("%")&&(a=a.substr(0,a.length-1),a=Math.round(100*a)/100);return a},knobMove:function(){var a=this.knobPos,b=a+this.knobWidth,c=this;this.jObj.find(".monthNameVoyanga").each(function(){var e=c.getPercent($(this).css("left")),f=c.getPercent($(this).css("width"));b-e>0.6*f&&e+f-a>0.6*f?$(this).addClass("highlited"):$(this).removeClass("highlited")})},monthMouseUp:function(a){if(!this.knobSlideAction){this.animateScrollAction=!0;this.jObj.find(".knobVoyanga").stop(!0);
a=$(a).parent().css("left");a=this.getPercent(a)+"%";var b=this;if(100>this.width)this.onresize();this.jObj.find(".knobVoyanga").animate({left:[a,"easeOutCubic"]},{duration:800,step:function(a,c){b.animateStep(a,c)},easing:"easeOutCubic",complete:function(){b.animateScrollAction=!1}})}},scrollEvent:function(){if(!this.animateScrollAction){var a=this.jObj.find(".calendarGridVoyanga").prop("scrollHeight");this.knobPos=Math.round(1E3*(this.jObj.find(".calendarGridVoyanga").scrollTop()/a))/10;this.jObj.find(".knobVoyanga").css("left",
this.knobPos+"%");this.jObj.find(".knobUpAllMonth").css("left",this.getKnobUpLeft());this.knobMove()}},init:function(){}},c);for(key in c)this[key]=c[key]};
VoyangaCalendarClass=function(c){c=$.extend({},{jObj:null,weekDays:"\u041f\u043d \u0412\u0442 \u0421\u0440 \u0427\u0442 \u041f\u0442 \u0421\u0431 \u0412\u0441".split(" "),monthNames:"\u042f\u043d\u0432\u0430\u0440\u044c \u0424\u0435\u0432\u0440\u0430\u043b\u044c \u041c\u0430\u0440\u0442 \u0410\u043f\u0440\u0435\u043b\u044c \u041c\u0430\u0439 \u0418\u044e\u043d\u044c \u0418\u044e\u043b\u044c \u0410\u0432\u0433\u0443\u0441\u0442 \u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c \u041e\u043a\u0442\u044f\u0431\u0440\u044c \u041d\u043e\u044f\u0431\u0440\u044c \u0414\u0435\u043a\u0430\u0431\u0440\u044c".split(" "),dayCellWidth:180,
getDay:function(a){a=a.getDay();return 0==a?6:a-1}},c);for(key in c)this[key]=c[key]};VoyangaCalendarStandart=new VoyangaCalendarClass({values:[]});VoyangaCalendarStandart.initialized=!1;
VoyangaCalendarStandart.slider=new VoyangaCalendarSlider({init:function(){var c=this,a;for(a in this.monthArray){var b=this.monthArray[a].line/(this.totalLines-this.linesWidth),b=Math.round(1E3*(1-this.linesWidth/this.totalLines)*b)/10;if(a<this.monthArray.length-1)var d=parseInt(a)+1,d=(this.monthArray[d].line-this.monthArray[a].line)/this.totalLines;else d=(this.totalLines-this.monthArray[a].line)/this.totalLines;d=Math.round(1E3*d)/10;b='<div class="monthNameVoyanga" style="left: '+b+"%; width: "+
d+'%"><div class="monthWrapper">'+this.monthArray[a].name+"</div></div>";this.jObj.find(".monthLineVoyanga").append(b)}this.knobWidth=Math.round(1E4*(this.linesWidth/this.totalLines))/100;this.jObj.find(".knobVoyanga").css("width",this.knobWidth+"%");this.jObj.find(".knobUpAllMonth").css("width",this.knobWidth+"%");$(window).on("resize",function(){c.onresize()});$(window).load(function(){c.onresize();c.knobMove()});this.jObj.find(".calendarGridVoyanga").on("scroll",function(a){c.scrollEvent(a);return!1});
this.jObj.find(".calendarGridVoyanga").on("mousewheel",function(a){c.mousewheelEvent(a);a.preventDefault&&a.preventDefault();a.returnValue=!1});this.jObj.find(".calendarGridVoyanga").on("DOMMouseScroll",function(a){c.mousewheelEvent(a);a.preventDefault&&a.preventDefault();a.returnValue=!1});this.jObj.find(".monthLineVoyanga").mousedown(function(a){c.mouseDown(a)});this.jObj.find(".monthLineVoyanga").mouseup(function(a){c.mouseUp(a)});this.jObj.find(".monthLineVoyanga .monthNameVoyanga .monthWrapper").mouseup(function(a){c.monthMouseUp(this,
a)});this.jObj.find(".monthLineVoyanga").MouseDraggable({startEvent:function(a,b){c.startEvent(a,b)},endEvent:function(a,b){c.endEvent(a,b)},dragEvent:function(a,b){c.dragEvent(a,b)}});this.minimalLine&&(a=this.minimalLine/this.totalLines*this.jObj.find(".calendarGridVoyanga").prop("scrollHeight"),this.jObj.find(".calendarGridVoyanga").scrollTop(a))}});
VoyangaCalendarStandart.onCellOver=function(c){c=$(c);if(!c.hasClass("inactive")){var a=Date.fromIso(c.data("cell-date"));1==this.values.length?a<this.values[0]?c.addClass("from"):this.twoSelect?c.addClass("to"):c.addClass("from"):c.addClass("from");1==a.getDate()&&c.addClass("startMonth")}};
VoyangaCalendarStandart.onCellOut=function(c){c=$(c);if(!c.hasClass("inactive")){var a=Date.fromIso(c.data("cell-date"));1==this.values.length?a<this.values[0]?c.removeClass("from"):this.twoSelect?c.removeClass("to"):c.removeClass("from"):c.removeClass("from");1==a.getDate()&&c.removeClass("startMonth");0<this.values.length&&this.values[0].valueOf()==a.valueOf()&&(c.addClass("selectData from"),1==a.getDate()&&c.addClass("startMonth"));1<this.values.length&&this.values[1].valueOf()==a.valueOf()&&(c.addClass("selectData to"),
1==a.getDate()&&c.addClass("startMonth"))}};VoyangaCalendarStandart.getCellByDate=function(c){if(c)return c=c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate(),$("#dayCell-"+c);console.log("bad date value:",c);return!1};
VoyangaCalendarStandart.update=function(c){$(".dayCellVoyanga").removeClass("selectData from to selectDay");if(this.values.length){var a=this.getCellByDate(this.values[0]);a.addClass("selectData from");if(1<this.values.length){a=this.getCellByDate(this.values[1]);a.addClass("selectData to");a=new Date(this.values[0].toDateString());for(a.setDate(a.getDate()+1);a<this.values[1];)this.getCellByDate(a).addClass("selectDay"),a.setDate(a.getDate()+1)}c||this.panel().setDate(this.values)}};
VoyangaCalendarStandart.onCellClick=function(c){c=$(c);if(!c.hasClass("inactive")){c=Date.fromIso(c.data("cell-date"));var a=!0;this.twoSelect?2==this.values.length?this.values=[]:1==this.values.length&&(c<this.values[0]?this.values=[]:(a=!1,this.values.push(c))):0!=this.values.length?this.values=[]:a=!1;0==this.values.length&&(this.values.push(c),a=!1);VoyangaCalendarStandart.update(a)}};
VoyangaCalendarStandart.generateGrid=function(){var c=new Date,a=new Date;a.setMinutes(0,0,0);a.setHours(0);var b=this,d=c.getMonth(),e=moment(moment(c))._d;e.setDate(1);e.setDate(e.getDate()-this.getDay(e));this.getDay(e);c.getDate();var c=c.getFullYear(),f=!1,h=0;for(this.slider.monthArray=[];!f;){for(var j='<div class="calendarLineVoyanga" id="weekNum-'+h+'" data-weeknum="'+h+'">',m=0;7>m;m++){var p='<div class="dayLabel'+(5<=m&&7>m?" weekEnd":"")+'">'+e.getDate()+"</div>";if(1==e.getDate()){var p=
p+' <div class="monthLabel">'+this.monthNames[e.getMonth()]+"</div>",g={};g.line=h;g.name=this.monthNames[e.getMonth()];this.slider.monthArray.push(g)}var g=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),n=e.getDate()+"."+(e.getMonth()+1)+"."+e.getFullYear(),j=j+'<div class="dayCellVoyanga'+(e<a?" inactive":"")+'" id="dayCell-'+g+'" data-cell-date="'+g+'" data-cell-date-api="'+n+'"><div class="innerDayCellVoyanga">'+p+"</div></div>";e.setDate(e.getDate()+1)}j+="</div>";this.jObj.find(".calendarDIVVoyanga").append(j);
e.getFullYear()>c&&e.getMonth()>=d&&(f=!0);h++}2>h-this.slider.monthArray[this.slider.monthArray.length-1].line&&this.slider.monthArray.pop();this.jObj.find(".dayCellVoyanga").hover(function(a){b.onCellOver(this,a)},function(a){b.onCellOut(this,a)});this.jObj.find(".dayCellVoyanga").click(function(a){b.onCellClick(this,a)});this.slider.totalLines=h};VoyangaCalendarStandart.clear=function(){VoyangaCalendarStandart.values=[];VoyangaCalendarStandart.update(!0)};
VoyangaCalendarStandart.minimalDateUpdated=function(){var c=this.minimalDate.getFullYear()+"-"+(this.minimalDate.getMonth()+1)+"-"+this.minimalDate.getDate();this.slider.minimalLine=$("#dayCell-"+c).parent().data("weeknum");dayCell=this.jObj.find("#weekNum-0 .dayCellVoyanga:eq(0)");if(dayCell.length)for(var a=Date.fromIso(dayCell.data("cell-date")),b=!1;!b;)for(var d=0;7>d;d++){c=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();if(a<this.minimalDate)$("#dayCell-"+c).addClass("inactive");else if($("#dayCell-"+
c).hasClass("inactive"))$("#dayCell-"+c).removeClass("inactive");else{b=!0;break}a.setDate(a.getDate()+1)}};VoyangaCalendarStandart.scrollToDate=function(c){c=c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate();c=$("#dayCell-"+c).parent().data("weeknum")/this.slider.totalLines*this.jObj.find(".calendarGridVoyanga").prop("scrollHeight");this.jObj.find(".calendarGridVoyanga").scrollTop(c)};
VoyangaCalendarStandart.newValueHandler=function(c){c.hotels?$("#voyanga-calendar").addClass("hotel"):$("#voyanga-calendar").removeClass("hotel");void 0!==c.values&&0==c.values.length&&(c.values.push(new Date),VoyangaCalendarStandart.values=[],VoyangaCalendarStandart.values.push(new Date),c.from=new Date);VoyangaCalendarStandart.twoSelect=c.twoSelect;!c.twoSelect&&1<VoyangaCalendarStandart.values.length&&(VoyangaCalendarStandart.values=VoyangaCalendarStandart.values.slice(0,1));var a=VoyangaCalendarStandart.minimalDateChanged=
!1;if(c.activeSearchPanel){if(c.activeSearchPanel.prevSearchPanel()){if(minDt=c.activeSearchPanel.prevSearchPanel().checkOut(),!VoyangaCalendarStandart.minimalDate&&minDt||minDt&&VoyangaCalendarStandart.minimalDate.toString()!=minDt.toString())VoyangaCalendarStandart.minimalDate=minDt,a=!0,VoyangaCalendarStandart.scrollDate=VoyangaCalendarStandart.minimalDate,VoyangaCalendarStandart.minimalDateChanged=!0}else if(minDt=new Date,minDt.setHours(0),minDt.setMinutes(0),minDt.setSeconds(0),minDt.setMilliseconds(0),
!VoyangaCalendarStandart.minimalDate||VoyangaCalendarStandart.minimalDate&&VoyangaCalendarStandart.minimalDate.toString()!=minDt.toString())VoyangaCalendarStandart.minimalDate=minDt,a=!0,VoyangaCalendarStandart.scrollDate=VoyangaCalendarStandart.minimalDate,VoyangaCalendarStandart.minimalDateChanged=!0;VoyangaCalendarStandart.alreadyInited&&VoyangaCalendarStandart.minimalDateChanged?VoyangaCalendarStandart.minimalDateUpdated():VoyangaCalendarStandart.alreadyInited&&console.log("not inited",VoyangaCalendarStandart.minimalDateChanged)}else console.log("else????");
if(c.from&&!VoyangaCalendarStandart.scrollDate||c.from&&c.from.toString()!=VoyangaCalendarStandart.scrollDate.toString())a=!0,VoyangaCalendarStandart.scrollDate=c.from;a&&VoyangaCalendarStandart.scrollToDate(VoyangaCalendarStandart.scrollDate);VoyangaCalendarStandart.values=[];c.from&&VoyangaCalendarStandart.values.push(c.from);c.twoSelect&&c.to&&VoyangaCalendarStandart.values.push(c.to);VoyangaCalendarStandart.update(!0)};
VoyangaCalendarStandart.compareCalendarValue=function(c,a){if(!c&&a||!a&&c)return!1;for(var b in a)if("from"==b){if(c[b]!=a[b]&&a[b]!=VoyangaCalendarStandart.values[0])return!1}else if("to"==b){if(c[b]!=a[b]&&a[b]!=VoyangaCalendarStandart.values[1])return!1}else if(c[b]!=a[b])return!1;return!0};
VoyangaCalendarStandart.init=function(c,a){this.jObj=$(a);VoyangaCalendarStandart.slider.jObj=this.jObj;this.minimalDateChanged=this.alreadyInited=!1;var b=this;this.oldCalendarValue=null;if(!this.panel||this.panel&&c()!=this.panel())this.panel=c,c.subscribe(function(a){a.template&&(VoyangaCalendarStandart.subscription&&VoyangaCalendarStandart.subscription.dispose(),VoyangaCalendarStandart.subscription=a.calendarValue.subscribe(function(a){VoyangaCalendarStandart.compareCalendarValue(b.oldCalendarValue,
a)||(VoyangaCalendarStandart.clear(),b.oldCalendarValue=a,VoyangaCalendarStandart.newValueHandler(a))}),b.oldCalendarValue=a.calendarValue(),VoyangaCalendarStandart.newValueHandler(a.calendarValue()))}),newPanel=c(),newPanel.template&&(VoyangaCalendarStandart.subscription&&VoyangaCalendarStandart.subscription.dispose(),VoyangaCalendarStandart.subscription=newPanel.calendarValue.subscribe(VoyangaCalendarStandart.newValueHandler),b.oldCalendarValue=newPanel.calendarValue(),VoyangaCalendarStandart.newValueHandler(newPanel.calendarValue()));
VoyangaCalendarStandart.generateGrid();VoyangaCalendarStandart.slider.init();this.minimalDateChanged&&this.minimalDateUpdated();this.alreadyInited=!0}.bind(VoyangaCalendarStandart);VoyangaCalendarTimeline=new VoyangaCalendarClass({jObj:"#voyanga-calendar-timeline",values:[],twoSelect:!0,monthNames:"\u042f\u041d\u0412 \u0424\u0415\u0412 \u041c\u0410\u0420 \u0410\u041f\u0420 \u041c\u0410\u0419 \u0418\u042e\u041d \u0418\u042e\u041b \u0410\u0412\u0413 \u0421\u0415\u041d \u041e\u041a\u0422 \u041d\u041e\u042f \u0414\u0415\u041a".split(" ")});
VoyangaCalendarTimeline.slider=new VoyangaCalendarSlider({init:function(){console.log(this.jObj);"string"==typeof this.jObj&&(this.jObj=$(this.jObj));var c=this;this.monthLineWidth=this.totalLines/this.totalShowLines;var a=Math.round(1E4*this.monthLineWidth)/100;this.jObj.find(".monthLineVoyanga").css("width",a+"%");this.monthLineLeftPercent=a=this.startLine/this.totalShowLines;a=Math.round(1E3*a)/10;this.jObj.find(".monthLineVoyanga").css("left",a+"%");var b=this.totalLines;this.totalLines==this.linesWidth?
(this.jObj.find(".knobVoyanga").css("display","none"),this.jObj.find(".knobUpAllMonth").css("display","none"),b++):(this.jObj.find(".knobVoyanga").css("display","block"),this.jObj.find(".knobUpAllMonth").css("display","block"));for(var d in this.monthShowArray){a=this.monthShowArray[d].line/(this.totalShowLines-this.linesWidth);a=Math.round(1E3*(1-this.linesWidth/this.totalShowLines)*a)/10;if(d<this.monthShowArray.length-1)var e=parseInt(d)+1,e=(this.monthShowArray[e].line-this.monthShowArray[d].line)/
this.totalShowLines;else e=(this.totalShowLines-this.monthShowArray[d].line)/this.totalShowLines;e=Math.round(1E3*e)/10;e=$('<div class="monthNameVoyangaSplit" style="left: '+a+"%; width: "+e+'%"></div><div class="monthNameVoyanga" style="left: '+a+"%; width: "+e+'%"><div class="monthWrapper">'+this.monthShowArray[d].name+"</div></div>");this.monthShowArray[d].line>=this.startLine-3&&this.monthShowArray[d].line<this.startLine+this.totalLines&&this.totalLines!=this.linesWidth?(this.monthShowArray[d].lineReal||
(this.monthShowArray[d].lineReal=0),a=this.monthShowArray[d].lineReal/(b-this.linesWidth),console.log("mmmm",this.monthShowArray[d].lineReal,b,this.linesWidth),a=Math.round(1E3*(1-this.linesWidth/b)*a)/10,e.data("clickable",!0),e.data("leftPos",a),e.addClass("highlited")):e.data("clickable",!1);this.monthShowArray[d].div=e;this.jObj.find(".monthLineVoyangaYear").append(e)}this.knobWidth=Math.round(1E4*(this.linesWidth/this.totalLines))/100;this.jObj.find(".knobVoyanga").css("width",this.knobWidth+
"%");knobUpWidth=Math.round(1E4*this.linesWidth/this.totalLines*this.monthLineWidth)/100;this.jObj.find(".knobUpAllMonth").css("width",knobUpWidth+"%");this.jObj.find(".knobUpAllMonth").css("left",this.getKnobUpLeft());$(window).on("resize",function(){c.onresize()});$(window).load(function(){c.onresize();c.knobMove()});this.jObj.find(".calendarGridVoyanga").on("scroll",function(a){c.scrollEvent(a)});this.jObj.find(".calendarGridVoyanga").on("mousewheel",function(a){c.mousewheelEvent(a);a.preventDefault&&
a.preventDefault();a.returnValue=!1});this.jObj.find(".calendarGridVoyanga").on("DOMMouseScroll",function(a){c.mousewheelEvent(a);a.preventDefault&&a.preventDefault();a.returnValue=!1});this.jObj.find(".monthLineWrapper").mousedown(function(a){c.mouseDown(a)});this.jObj.find(".monthLineWrapper").mouseup(function(a){c.mouseUp(a)});this.jObj.find(".monthLineVoyangaYear .monthNameVoyanga .monthWrapper").mouseup(function(a){c.monthMouseUp(this,a)});this.jObj.find(".monthLineWrapper").MouseDraggable({startEvent:function(a,
b){c.startEvent(a,b)},endEvent:function(a,b){c.endEvent(a,b)},dragEvent:function(a,b){c.dragEvent(a,b)}})},getKnobUpLeft:function(){leftPerc=Math.round(10*(100*this.monthLineLeftPercent+this.knobPos*this.monthLineWidth))/10;return leftPerc+"%"},monthMouseUp:function(c){if($(c).parent().data("clickable")&&!this.knobSlideAction){this.animateScrollAction=!0;this.jObj.find(".knobVoyanga").stop(!0);c=$(c).parent().data("leftPos");0>c&&(c=0);c>100-this.knobWidth&&(c=100-this.knobWidth);c+="%";var a=this;
this.jObj.find(".knobVoyanga").animate({left:[c,"easeOutCubic"]},{duration:800,step:function(b,c){a.animateStep(b,c)},easing:"easeOutCubic",complete:function(){a.animateScrollAction=!1}})}},knobMove:function(){var c=this;this.jObj.find(".monthNameVoyanga").each(function(){c.getPercent($(this).css("width"))})},linesWidth:3});console.log(this.jObj);VoyangaCalendarTimeline.onCellOver=function(){};VoyangaCalendarTimeline.onCellOut=function(){};
VoyangaCalendarTimeline.getCellByDate=function(c){c=c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate();return $("#dayCell-"+c)};VoyangaCalendarTimeline.onCellClick=function(){};
VoyangaCalendarTimeline.generateGrid=function(){var c=moment(this.minDate),a=moment(this.maxDate),b=moment(c),d=moment(a);console.log("dates",this.minDate,this.maxDate);var e=this.minDate,f=new Date;f.setMinutes(0,0,0);f.setHours(0);var h=this;e.getMonth();e=moment(c)._d;e=this.getDay(this.maxDate)-this.getDay(this.minDate);a=Math.floor(a.diff(c,"days",!0));console.log("diff",e,a);e==a&&(b.subtract("d",7),d.add("d",7));b.date(b.date()-this.getDay(b._d));a=Math.floor(d.diff(b,"days",!0))+1;14>=a&&
(d.add("d",7),a=Math.floor(d.diff(b,"days",!0))+1);console.log("ds",b,"de",d,a);0!=a%7&&d.add("d",7-a%7);console.log("ds",b,"de",d,a);a=Math.floor(d.diff(b,"days",!0))+1;a=Math.floor((365-a)/2);e=moment(c)._d;e.setDate(e.getDate()-a);e.setDate(1);c=moment(d)._d;c.setDate(c.getDate()+a+3);c.setDate(1);c.setDate(0);c.setDate(c.getDate()-this.getDay(c));c.setDate(c.getDate()+7);this.getDay(e);e.getDate();e.getFullYear();e.setDate(e.getDate()-this.getDay(e));a=moment(e);moment(a);var j=a=0;console.log("date params",
e,"st",b,"en",d,"stp",c);this.slider.monthArray=[];this.slider.monthShowArray=[];for(this.slider.startLine=!1;e<c;){if(e<d._d&&e>=b){for(var m='<div class="calendarLineVoyanga" id="weekNum-'+a+'" data-weeknum="'+a+'">',p=0;7>p;p++){var g='<div class="dayLabel'+(5<=p&&7>p?" weekEnd":"")+'">'+e.getDate()+"</div>",g="";if(1==e.getDate()){var g=g+this.monthNames[e.getMonth()],n={};n.line=a;n.lineReal=j;n.name=this.monthNames[e.getMonth()];this.slider.monthArray.push(n);this.slider.monthShowArray.push(n)}else!1===
this.slider.startLine&&(this.slider.startLine=a,g+=this.monthNames[e.getMonth()]);g='<div class="dayLabel'+(5<=p&&7>p?" weekEnd":"")+'">'+e.getDate()+" "+g+"</div>";n=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();m=m+'<div class="dayCellVoyanga'+(e<f?" inactive":"")+(5<=p&&7>p?" weekEnd":"")+'" id="dayCell-'+n+'" data-cell-date="'+n+'"><div class="innerDayCellVoyanga">'+g+"</div></div>";e.setDate(e.getDate()+1)}m+="</div>";this.jObj.find(".calendarDIVVoyanga").append(m);j++}else for(p=0;7>
p;p++)1==e.getDate()&&(n={},n.line=a,n.name=this.monthNames[e.getMonth()],this.slider.monthShowArray.push(n)),e.setDate(e.getDate()+1);a++}console.log("monthArr",this.slider.monthArray.length,this.slider.monthArray);2>a-this.slider.monthShowArray[this.slider.monthShowArray.length-1].line&&this.slider.monthShowArray.pop();this.jObj.find(".dayCellVoyanga").hover(function(a){h.onCellOver(this,a)},function(a){h.onCellOut(this,a)});this.jObj.find(".dayCellVoyanga").on("click",function(a){h.onCellClick(this,
a)});this.slider.totalLines=j;this.slider.totalShowLines=a;console.log(this.slider.totalLines)};VoyangaCalendarTimeline.calendarEvents=[];VoyangaCalendarTimeline.eventsCompareFunction=function(c,a){return c.dayStart<a.dayStart?-1:c.dayStart>a.dayStart?1:"flight"==c.type&&"hotel"==a.type?-1:"hotel"==c.type&&"flight"==a.type?1:0};VoyangaCalendarTimeline.generateStartPoint=function(c){Math.round((c.dayEnd.valueOf()-c.dayStart.valueOf())/864E5);return'<div class="startYourTours"></div>'};
VoyangaCalendarTimeline.generateEndPoint=function(c){c=c.dayEnd.valueOf()-c.dayStart.valueOf();c=Math.round(c/864E5);0==c&&(c=1);var a=this.dayCellWidth;c='<div class="endYourTours" style="left: '+a*(c%7)+'%">';return c+"</div>"};
VoyangaCalendarTimeline.generateHotelDiv=function(c){var a=c.dayEnd.valueOf()-c.dayStart.valueOf(),a=Math.round(a/864E5);0==a&&(a=1);console.log(a);var b=this.dayCellWidth,d=0.5*(b/c.startInfo.count),a='<div class="yourTrip" style="width: '+(b*a-b+0.1+(d+0.5*(b/c.endInfo.count)))+'%" data-delta-left="'+d+'">',a=a+'<div class="startHotel"></div><div class="pathHotel"></div><div class="endHotel"></div>',a=a+'<div class="nameHotel">'+c.description+"</div>";return a+="</div></div>"};
VoyangaCalendarTimeline.generateFlightDiv=function(c){var a=c.dayEnd.valueOf()-c.dayStart.valueOf(),a=Math.floor(a/864E5),a=a+1,b=this.dayCellWidth,d=c.description.split("||");switch(a){case 1:var e="",f="/themes/v2/images/trip-line-01.png",h="flyTrip fd1";break;case 2:e=" twoDays";f="/themes/v2/images/trip-line-02.png";h="flyTrip fd2";break;case 3:e=" threeDays",f="/themes/v2/images/trip-line-03.png",h="flyTrip fd3"}if(1==a&&c.startInfo.position==c.endInfo.position){if(c.startInfo.point){var j=b/
c.startInfo.count*(0.5+c.startInfo.position);return h='<div class="flyTrip" style="width: 0%" data-delta-left="'+j+'"><div class="startYourTours"></div></div>'}return""}j=b/c.startInfo.count*(0.5+c.startInfo.position);a=(a-1)*b+b/c.endInfo.count*(0.5+c.endInfo.position);console.log("flightDiv",j,a);3==c.startInfo.count&&(d[0]=c.cityFrom);3==c.endInfo.count&&(d[1]=c.cityTo);h='<div class="'+h+'" style="width: '+(a-j)+'%" data-delta-left="'+j+'">';h+=c.startInfo.point?'<div class="startYourTours"></div>':
"";h=h+'<div class="tripFlyAll"><div class="jetFly'+e+'" style="top: 4px;"></div><img width="100%" height="40" src="'+f+'"></div>';h+=c.startInfo.city?'<div class="startNameCity">'+d[0]+"</div>":"";h+=c.endInfo.city?'<div class="endNameCity">'+d[1]+"</div>":"";h+=c.endInfo.point?'<div class="endYourTours"></div>':"";return h+="</div>"};
VoyangaCalendarTimeline.generateEvents=function(){this.dayCellWidth=this.jObj.find(".dayCellVoyanga:first").width()+2;this.dayCellWidth=14.2;var c=this,a={},b;for(b in this.calendarEvents){var d=this.calendarEvents[b].dayStart,e=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate();"object"!=typeof a[e]&&(a[e]={types:{},count:0});"object"!=typeof a[e].types[this.calendarEvents[b].type]&&(a[e].types[this.calendarEvents[b].type]={s:[],e:[]});a[e].types[this.calendarEvents[b].type].s.push(b);a[e].count++;
d=this.calendarEvents[b].dayEnd;e=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate();"object"!=typeof a[e]&&(a[e]={types:{},count:0});"object"!=typeof a[e].types[this.calendarEvents[b].type]&&(a[e].types[this.calendarEvents[b].type]={s:[],e:[]});a[e].types[this.calendarEvents[b].type].e.push(b);a[e].count++}console.log("eventDays",a);for(var f in a){var e=f,h="",j="",d=[],m=!0,p=!0,g=[],n=[],q=[],u=[];if("object"==typeof a[e].types.hotel){for(var s in a[e].types.hotel.s){sInd=a[e].types.hotel.s[s];
u.push(sInd);j=this.calendarEvents[sInd].city;p=!1;break}for(var A in a[e].types.hotel.e){eInd=a[e].types.hotel.e[A];g.push(eInd);h=this.calendarEvents[eInd].city;m=!1;break}}if("object"==typeof a[e].types.flight){a[e].types.flight.s.sort(function(a,b){return c.calendarEvents[a].sortInd>c.calendarEvents[b].sortInd?1:c.calendarEvents[a].sortInd<c.calendarEvents[b].sortInd?-1:0});a[e].types.flight.e.sort(function(a,b){return c.calendarEvents[a].sortInd>c.calendarEvents[b].sortInd?-1:c.calendarEvents[a].sortInd<
c.calendarEvents[b].sortInd?1:0});for(s in a[e].types.flight.s)sInd=a[e].types.flight.s[s],h&&this.calendarEvents[sInd].cityFrom==h?(g.push(sInd),this.calendarEvents[sInd].startInfo.point=!1):h?j&&this.calendarEvents[sInd].cityFrom==j?(u.push(sInd),this.calendarEvents[sInd].startInfo.point=!1):(n.push(sInd),-1==d.indexOf(this.calendarEvents[sInd].cityFrom)&&d.push(this.calendarEvents[sInd].cityFrom)):(h=this.calendarEvents[sInd].cityFrom,g.push(sInd),this.calendarEvents[sInd].startInfo.point=!0);
for(A in a[e].types.flight.e)eInd=a[e].types.flight.e[A],j&&this.calendarEvents[eInd].cityTo==j?(u.push(eInd),this.calendarEvents[eInd].endInfo.point=!1):j?h&&this.calendarEvents[eInd].cityTo==h?(g.push(eInd),this.calendarEvents[eInd].endInfo.point=!1):(q.push(eInd),-1==d.indexOf(this.calendarEvents[eInd].cityTo)&&d.push(this.calendarEvents[eInd].cityTo)):0==d.length&&h==this.calendarEvents[eInd].cityTo?g.push(eInd):(j=this.calendarEvents[eInd].cityTo,u.push(eInd),this.calendarEvents[eInd].endInfo.point=
!0)}h=0;if(0<g.length){var y=h;h++}if(0<n.length+q.length){var x=h;h++}if(0<u.length){var v=h;h++}var j=!0,C;for(C in g)if(sInd=g[C],"hotel"==this.calendarEvents[sInd].type)this.calendarEvents[sInd].endInfo.count=h,this.calendarEvents[sInd].endInfo.position=y;else{var I=this.calendarEvents[sInd].startInfo.dateLabel==e?"startInfo":"endInfo";this.calendarEvents[sInd][I].count=h;this.calendarEvents[sInd][I].position=y;this.calendarEvents[sInd][I].point=m;this.calendarEvents[sInd][I].city=j;m=j=!1}j=
1==d.length;m=!0;for(C in n)sInd=n[C],this.calendarEvents[sInd].startInfo.count=h,this.calendarEvents[sInd].startInfo.position=x,this.calendarEvents[sInd].startInfo.point=m,this.calendarEvents[sInd].startInfo.city=j,j=m=!1;1<d.length&&(this.calendarEvents[sInd].startInfo.point=!0);for(C in q)sInd=q[C],this.calendarEvents[sInd].endInfo.count=h,this.calendarEvents[sInd].endInfo.position=x,this.calendarEvents[sInd].endInfo.point=m,this.calendarEvents[sInd].endInfo.city=j,j=m=!1;j=!0;m=p;for(C in u)sInd=
u[C],"hotel"==this.calendarEvents[sInd].type?(this.calendarEvents[sInd].startInfo.count=h,this.calendarEvents[sInd].startInfo.position=v):(this.calendarEvents[sInd].endInfo.count=h,this.calendarEvents[sInd].endInfo.position=v,this.calendarEvents[sInd].endInfo.point=m,this.calendarEvents[sInd].endInfo.city=j,j=m=!1)}console.log("eventDays",a);console.log("calendarEvents",this.calendarEvents);a=!0;for(b in this.calendarEvents){var d=this.calendarEvents[b].dayStart,e=d.getFullYear()+"-"+(d.getMonth()+
1)+"-"+d.getDate(),e=this.jObj.find("#dayCell-"+e).parent(),r=e.data("weeknum");f=new Date(d.toString());s=this.calendarEvents[b].dayEnd.valueOf()-this.calendarEvents[b].dayStart.valueOf();A=this.dayCellWidth;s=Math.round(s/864E5);if("hotel"==this.calendarEvents[b].type){d=this.generateHotelDiv(this.calendarEvents[b]);y=0;x=!1;for(v=!0;!x;){var E=$(d),p=E.data("delta-left");v?(C=7-this.getDay(f)-1,p=(7-C)*A-p,v=!1):(C=7,p=-y*A-p);a&&(a=!1);E.css("left",p+"%");e.append(E);y+=C;y>=s&&(x=!0);r++;e=this.jObj.find("#weekNum-"+
r)}}else if("flight"==this.calendarEvents[b].type&&(d=this.generateFlightDiv(this.calendarEvents[b]),y=0,x=!1,v=!0,d))for(;!x;)E=$(d),p=E.data("delta-left"),v?(C=7-this.getDay(f),p=(7-C)*A+p,v=!1):(C=7,p=-y*A+p),a&&(a=!1),E.css("left",p+"%"),e.append(E),y+=C,y>=s&&(x=!0),r++,e=this.jObj.find("#weekNum-"+r)}r--;e=this.jObj.find("#weekNum-"+r);E.addClass("endPoint")};
VoyangaCalendarTimeline.prepareEvents=function(){console.log(this.calendarEvents);var c=this;$.each(this.calendarEvents,function(a,b){b.dayStart=Date.fromIso(b.dayStart);b.dayEnd=Date.fromIso(b.dayEnd);c.minDate?c.minDate>b.dayStart&&(c.minDate=b.dayStart):c.minDate=b.dayStart;c.maxDate?c.maxDate<b.dayEnd&&(c.maxDate=b.dayEnd):c.maxDate=b.dayEnd;if("flight"==b.type){var d=b.dayStart,d=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate();b.startInfo={point:!0,city:!0,count:1,position:0,dateLabel:d};
d=b.dayEnd;d=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate();b.endInfo={point:!0,city:!0,count:1,position:0,dateLabel:d};b.sortInd=a}else b.startInfo={count:1,position:0},b.endInfo={count:1,position:0}})};
VoyangaCalendarTimeline.init=function(){VoyangaCalendarTimeline.minDate=!1;VoyangaCalendarTimeline.maxDate=!1;this.prepareEvents();this.slider.jObj=this.jObj;"string"==typeof this.jObj&&(this.jObj=$(this.jObj));this.calendarEvents.sort(this.eventsCompareFunction);this.generateGrid();this.generateEvents();this.slider.init()};var GenericPopup,__bind=function(c,a){return function(){return c.apply(a,arguments)}};
GenericPopup=function(){function c(a,b,c){var e=this;this.id=a;this.modal=null!=c?c:!1;this.close=__bind(this.close,this);this.inside=!1;$("body").css("overflow","hidden");$("body").prepend('<div id="popupOverlay"></div>');a=$(this.id+"-template");if(void 0===a[0])throw"Wrong popup template";a=$(a.html());$("body").prepend(a);ko.applyBindings({data:b,close:this.close},a[0]);ko.processAllDeferredBindingUpdates();this.modal||($(window).keyup(function(a){if(27===a.keyCode)return e.close()}),$(a.find("table")[0]||
a.find(".wrapContent")).hover(function(){return e.inside=!0},function(){return e.inside=!1}),a.click(function(){if(!e.inside)return e.close()}))}c.prototype.close=function(){this.modal||$(window).unbind("keyup");$(this.id).remove();$("#popupOverlay").remove();$("body").css("overflow","auto");return btnClosePopUp()};return c}();
var ERRORS,ErrorPopup,__bind=function(c,a){return function(){return c.apply(a,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(c,a){function b(){this.constructor=c}for(var d in a)__hasProp.call(a,d)&&(c[d]=a[d]);b.prototype=a.prototype;c.prototype=new b;c.__super__=a.prototype;return c};
ERRORS={avia404:{title:"\u041f\u0435\u0440\u0435\u043b\u0435\u0442\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b",text:"\u041f\u0435\u0440\u0435\u043b\u0435\u0442\u044b \u043f\u043e \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044e \u0432 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0434\u043d\u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0434\u0430\u0442\u044b \u0432 \u043f\u043e\u0438\u0441\u043a\u043e\u0432\u043e\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u0435.",buttonText:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e",
onclose:!1},avia500:{title:"\u0423\u043f\u0441",text:"\u041f\u0440\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u041c\u044b \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u043c \u043d\u0430\u0434 \u0443\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u0438\u0435\u043c \u0434\u0430\u043d\u043d\u043e\u0439 \u043d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u043e\u0441\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441 \u043f\u043e\u0437\u0436\u0435.",
buttonText:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"},aviaNoTicketOnValidation:{title:"\u041d\u0435 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b\u0441\u044f \u0430\u0432\u0438\u0430\u0431\u0438\u043b\u0435\u0442",text:"\u041f\u0440\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439 \u0430\u0432\u0438\u0430\u0431\u0438\u043b\u0435\u0442 \u043d\u0435 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b\u0441\u044f. \u042d\u0442\u043e \u043c\u043e\u0433\u043b\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0439\u0442\u0438 \u043f\u043e \u043f\u0440\u0438\u0447\u0438\u043d\u0435 \u0442\u043e\u0433\u043e \u0447\u0442\u043e \u0431\u0438\u043b\u0435\u0442 \u043f\u043e \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0442\u0430\u0440\u0438\u0444\u0443 \u0443\u0436\u0435 \u043a\u0443\u043f\u0438\u043b \u043a\u0442\u043e-\u0442\u043e \u0434\u0440\u0443\u0433\u043e\u0439. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u043f\u0435\u0440\u0435\u043b\u0435\u0442\u0430.",
buttonText:"Ok"},hotels404:{title:"\u0413\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b",text:"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0434\u043b\u044f \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b \u0432 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u043c \u0433\u043e\u0440\u043e\u0434\u0435 \u0432 \u044d\u0442\u0438 \u0434\u043d\u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u043e\u0438\u0441\u043a\u043e\u0432\u043e\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430.",
buttonText:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"},hotelsNoTicketOnValidation:{title:"\u041d\u0435 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b\u0441\u044f \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439 \u043e\u0442\u0435\u043b\u044c",text:"\u041f\u0440\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438, \u043e\u0442\u0435\u043b\u044c \u043d\u0435 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u043d\u043e\u043c\u0435\u0440\u0430. \u042d\u0442\u043e \u043c\u043e\u0433\u043b\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0439\u0442\u0438 \u043f\u043e \u043f\u0440\u0438\u0447\u0438\u043d\u0435 \u0442\u043e\u0433\u043e \u0447\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u0443\u0436\u0435 \u0437\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043b \u043a\u0442\u043e-\u0442\u043e \u0434\u0440\u0443\u0433\u043e\u0439. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442.",
buttonText:"Ok"},toursNoTicketOnValidation:{title:"\u041d\u0435 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b\u0441\u044f \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442",text:"\u041f\u0440\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438, \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0438\u0437 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u043e\u0432 \u043d\u0435 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b\u0438\u0441\u044c: TODO \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442.",
buttonText:"Ok"},e500withText:{title:"\u0423\u043f\u0441",text:"\u041f\u0440\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u041c\u044b \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u043c \u043d\u0430\u0434 \u0443\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u0438\u0435\u043c \u0434\u0430\u043d\u043d\u043e\u0439 \u043d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u043e\u0441\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441 \u043f\u043e\u0437\u0436\u0435: {0}",
buttonText:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"},passport500:{title:"\u0423\u043f\u0441",text:"\u041f\u0440\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u041c\u044b \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u043c \u043d\u0430\u0434 \u0443\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u0438\u0435\u043c \u0434\u0430\u043d\u043d\u043e\u0439 \u043d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u043e\u0441\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441 \u043f\u043e\u0437\u0436\u0435.",
buttonText:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"},passportBookingError:{title:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f",text:"\u041f\u0440\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u043e\u0432: {0} \u042d\u0442\u043e \u043c\u043e\u0433\u043b\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0439\u0442\u0438 \u043f\u043e \u043f\u0440\u0438\u0447\u0438\u043d\u0435 \u0442\u043e\u0433\u043e \u0447\u0442\u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u0443\u0436\u0435 \u043a\u0443\u043f\u0438\u043b \u043a\u0442\u043e-\u0442\u043e \u0434\u0440\u0443\u0433\u043e\u0439. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0447\u0442\u043e-\u0442\u043e \u0434\u0440\u0443\u0433\u043e\u0435.",
buttonText:"Ok"}};
ErrorPopup=function(c){function a(b,c,e){null==c&&(c=!1);this.onclose=null!=e?e:!1;this.close=__bind(this.close,this);b=ERRORS[b];b.text=b.text.format(c);this.onclose||(this.onclose=b.onclose);a.__super__.constructor.call(this,"#errorpopup",b,!0);ko.processAllDeferredBindingUpdates();SizeBox("errorpopup");ResizeBox("errorpopup")}__extends(a,c);a.prototype.close=function(){a.__super__.close.apply(this,arguments);return this.onclose?this.onclose():window.location="/#"+(window.app.activeModule()||"tours")};
return a}(GenericPopup);var PhotoBox,__bind=function(c,a){return function(){return c.apply(a,arguments)}};
PhotoBox=function(){function c(a,b,c,e){var f=this;this.photos=a;this.title=b;this.stars=null!=c?c:0;null==e&&(e=0);this._load=__bind(this._load,this);this.prev=__bind(this.prev,this);this.next=__bind(this.next,this);this.photoLoad=__bind(this.photoLoad,this);0!==a.length&&(this.activeIndex=ko.observable(e),this.length0=a.length-1,this.activePhoto=ko.observable(this.photos[this.activeIndex()].largeUrl),this.activeDesc=ko.observable(this.photos[this.activeIndex()].description),this.busy=!1,$("body").prepend('<div id="popupOverlayPhoto"></div>'),
$("body").prepend($("#photo-popup-template").html()),ko.applyBindings(this,$("#body-popup-Photo")[0]),ko.processAllDeferredBindingUpdates(),resizeLoad(),this.loadFirstTime=!0,$(window).keyup(function(a){if(27===a.keyCode)return f.close();if(37===a.keyCode)return f.prev();if(39===a.keyCode)return f.next()}))}c.prototype.close=function(){$(window).unbind("keyup");$("#body-popup-Photo").remove();return $("#popupOverlayPhoto").remove()};c.prototype.photoLoad=function(a,b){var c;console.log("PHOTOLOAD");
this.loadFirstTime&&(this.loadFirstTime=!1);c=$(b.currentTarget);c.show();console.log(c);850<c.width()?c.css("width","850px"):c.css("width","auto");$("#hotel-img-load").hide();c.animate({opacity:1},300,function(){return console.log("opacitied")});return this.busy=!1};c.prototype.next=function(){if(!this.busy&&!(this.activeIndex()>=this.length0))return this.activeIndex(this.activeIndex()+1),this._load()};c.prototype.prev=function(){if(!this.busy&&!(0>=this.activeIndex()))return this.activeIndex(this.activeIndex()-
1),this._load()};c.prototype._load=function(){var a=this;$("#body-popup-Photo").find("table img").animate({opacity:0},300,function(){a.activePhoto(a.photos[a.activeIndex()].largeUrl);return a.activeDesc(a.photos[a.activeIndex()].description)});return $("#hotel-img-load").show()};return c}();var Slider,__bind=function(c,a){return function(){return c.apply(a,arguments)}};
Slider=function(){function c(){this.handler=__bind(this.handler,this);this.click=__bind(this.click,this);this.init=__bind(this.init,this);this.speed=400;this.plannerWidth=[143,0];this.aviaticketsWidth=[135,155];this.hotelWidth=[95,295];this.finishStagesWidth=[148,403]}c.prototype.init=function(){var a;a=$(".slide-turn-mode ul").find(".active").index();-1===a&&(a=1);console.log("activeLIindex",a);this.switchSlide=$(".slide-turn-mode").find(".switch");this.valueWidth=[this.plannerWidth,this.aviaticketsWidth,
this.hotelWidth,this.finishStagesWidth];this.switchSlide.css("width",this.valueWidth[a][0]+"px").css("left",this.valueWidth[a][1]+"px");return this.switchSlide.find(".c").css("width",this.valueWidth[a][0]-27+"px")};c.prototype.click=function(a,b){b.preventDefault();return window.app.navigate($(b.currentTarget).find("a").attr("href"),{trigger:!0})};c.prototype.handler=function(a){var b;if(void 0!==a)return console.log("HANDLER: ",a),b=$("#h-"+a+"-slider"),a=b.index(),$(".btn").removeClass("active"),
this.switchSlide.animate({width:this.valueWidth[a][0]+"px",left:this.valueWidth[a][1]+"px"},this.speed,function(){return b.addClass("active")}),this.switchSlide.find(".c").animate({width:this.valueWidth[a][0]-27+"px"},this.speed)};return c}();var ACC_MONTHS,AVIA_TICKET_TIMELIMIT,HOTEL_TICKET_TIMELIMIT,MONTHS,SHORT_MONTHS,SHORT_WEEKDAYS,TOURS_TICKET_TIMELIMIT,Utils,dateUtils,exTrim,isEmail,_this=this;TOURS_TICKET_TIMELIMIT=HOTEL_TICKET_TIMELIMIT=AVIA_TICKET_TIMELIMIT=900;MONTHS="\u044f\u043d\u0432\u0430\u0440\u044f \u0444\u0435\u0432\u0440\u0430\u043b\u044f \u043c\u0430\u0440\u0442\u0430 \u0430\u043f\u0440\u0435\u043b\u044f \u043c\u0430\u044f \u0438\u044e\u043d\u044f \u0438\u044e\u043b\u044f \u0430\u0432\u0433\u0443\u0441\u0442\u0430 \u0441\u0435\u043d\u0442\u0440\u044f\u0431\u0440\u044f \u043e\u043a\u0442\u044f\u0431\u0440\u044f \u043d\u043e\u044f\u0431\u0440\u044f \u0434\u0435\u043a\u0430\u0431\u0440\u044f".split(" ");
ACC_MONTHS="\u044f\u043d\u0432\u0430\u0440\u044c \u0444\u0435\u0432\u0440\u0430\u043b\u044c \u043c\u0430\u0440\u0442 \u0430\u043f\u0440\u0435\u043b\u044c \u043c\u0430\u0439 \u0438\u044e\u043d\u044c \u0438\u044e\u043b\u044c \u0430\u0432\u0433\u0443\u0441\u0442 \u0441\u0435\u043d\u0442\u0440\u044f\u0431\u0440\u044c \u043e\u043a\u0442\u044f\u0431\u0440\u044c \u043d\u043e\u044f\u0431\u0440\u044c \u0434\u0435\u043a\u0430\u0431\u0440\u044c".split(" ");SHORT_MONTHS="\u044f\u043d\u0432 \u0444\u0435\u0432 \u043c\u0430\u0440 \u0430\u043f\u0440 \u043c\u0430\u044f \u0438\u044e\u043d \u0438\u044e\u043b \u0430\u0432\u0433 \u0441\u0435\u043d \u043e\u043a\u0442 \u043d\u043e\u044f \u0434\u0435\u043a".split(" ");
SHORT_WEEKDAYS="\u041f\u043d \u0412\u0442 \u0421\u0440 \u0427\u0442 \u041f\u0442 \u0421\u0431 \u0412\u0441".split(" ");
dateUtils={formatDay:function(c){var a;if(0!==c.length)return c.getDay?c=c.getDate():(a=/(\d+)\.(\d+)\.(\d+)/,c=a.exec(c)[1]),c},formatMonth:function(c){var a;if(0!==c.length)return c.getMonth?c=c.getMonth():(a=/(\d+)\.(\d+)\.(\d+)/,c=a.exec(c)[2]-1),SHORT_MONTHS[c]},formatDayMonth:function(c){var a;if(0!==c.length)return a=""+c.getDate(),a+" "+MONTHS[c.getMonth()]},formatDayMonthYear:function(c){var a;if(0!==c.length)return a=""+c.getDate(),a=a+" "+MONTHS[c.getMonth()],a+=" ",a+c.getYear()},formatDayMonthInterval:function(c,
a){var b;if(!(0===c.length||0===a.length))return b="\u0441 "+c.getDate(),c.getMonth()!==a.getMonth()&&(b+=" "+MONTHS[c.getMonth()]),b+=" \u043f\u043e "+a.getDate(),b+(" "+MONTHS[a.getMonth()])},formatDayShortMonth:function(c){var a;if(0!==c.length)return a=""+c.getDate(),a+" "+SHORT_MONTHS[c.getMonth()]},formatHtmlDayShortMonth:function(c){var a;c.getDate||(c=c.toDate());a='<span class="f17">'+c.getDate();return a+"</span><br>"+SHORT_MONTHS[c.getMonth()]},formatDayMonthWeekday:function(c){var a;console.log("formatDayMonthWeekday",
c);c.getDate()||(c=c.toDate());a="<b>"+c.getDate();a=a+"</b> "+SHORT_MONTHS[c.getMonth()];a+=", ";return a+SHORT_WEEKDAYS[c.getDay()]},formatTime:function(c){var a;a=""+c.getHours();a+=":";c=c.getMinutes().toString();1===c.length&&(c="0"+c);return a+c},formatTimeInMinutes:function(c){return 60*c.getHours()+c.getMinutes()},formatDuration:function(c){var a;c/=60;a=c%60;return(c-a)/60+" \u0447. "+a+" \u043c."}};
Utils={implode:function(c,a){return a instanceof Array?a.join(c):a},inRange:function(c,a){return a.from<=c&&c<=a.to},fromIso:function(c){return"string"===typeof c?(c=c.split("-"),new Date(c[0],c[1]-1,c[2])):c},scrollTo:function(c,a,b){var d;null==a&&(a=!0);null==b&&(b=null);"string"===typeof c?d=$(c).offset():"object"===typeof c?d=$(c).offset():(d={},d.top=c);if(d)return a?b?$("html,body").animate({scrollTop:d.top},1E3,b):$("html,body").animate({scrollTop:d.top}):$("html,body").scrollTop(d.top)},
wordAfterNum:function(c,a,b,d){var e;null==d&&(d=!1);d||(d=b);e=c%100;if(4<e&&21>e)return c+" "+d;e%=10;return 1===e?c+" "+a:1<e&&5>e?c+" "+b:c+" "+d},limitTextLenght:function(c,a){var b,d;d={};b=c.lastIndexOf(" ",a);b=c.substr(0,b);Utils.countRusChars(b)>a/2&&(a=Math.round(0.84*a));c.length>a?(b=c.lastIndexOf(" ",a),d.startText=c.substr(0,b),d.endText=c.substr(b),d.isBigText=!0):(d.isBigText=!1,d.startText=c,d.endText="");return d},countRusChars:function(c){var a;a=c.length;c=c.replace(RegExp("[\u0430-\u044f\u0410-\u042f\u0451\u0401]",
"gi"),"").length;return a-c},submitPayment:function(c){var a,b,d;a='<form id="buy-form" method="GET" action="'+c.url+'" target="payment_frame">';delete c.url;for(b in c)d=c[b],a+='<input type="hidden" name="'+b+'" value="'+d+'" />';return $(a+"</form>").appendTo("body").submit()},toBuySubmit:function(c){var a,b,d,e,f,h,j;a='<form id="buy-form" method="GET" action="/buy">';b=h=0;for(j=c.length;h<j;b=++h)for(d in e=c[b],e)f=e[d],d="item["+b+"]["+d+"]",a+='<input type="hidden" name="'+d+'" value="'+
f+'" />';$("body").append(a+"</form>");return $("#buy-form").submit()},formatPrice:function(c){var a,b,d,e,f;d=parseInt(c).toString();b="";a=0;for(c=e=f=d.length-1;0>=f?0>=e:0<=e;c=0>=f?++e:--e)0!==a&&0===a%3&&(b=" "+b),b=d[c]+b,a++;return b},calculateTheDistance:function(c,a,b,d){var e,f;c=c*Math.PI/180;b=b*Math.PI/180;e=a*Math.PI/180;f=d*Math.PI/180;d=Math.cos(c);a=Math.cos(b);c=Math.sin(c);b=Math.sin(b);f-=e;e=Math.cos(f);f=Math.sin(f);f=Math.sqrt(Math.pow(a*f,2)+Math.pow(d*b-c*a*e,2));return 6372795*
Math.atan2(f,c*b+d*a*e)}};exTrim=function(c,a){a=!a?" s\u00a0":a.replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"$1");return c.replace(RegExp("^["+a+"]+|["+a+"]+$","g"),"")};String.prototype.format=function(){var c;c=arguments;return this.replace(/{(\d+)}/g,function(a,b){return"undefined"!==typeof c[b]?c[b]:a})};isEmail=function(c){return c.match(emailPattern)};
ko.extenders.integerOnly=function(c,a){return ko.computed({read:c,write:function(b){var d,e;d=c();e=parseInt(b);if(isNaN(e)||0>e)e=0;a.max&&(e<a.min&&(e=a.min),e>a.max&&(e=a.max));e!==d&&c(e);if(b!==d)return c.notifySubscribers(e)}})};
ko.bindingHandlers.timeSlider={init:function(c,a){var b,d;d=ko.utils.unwrapObservable(a().selection);b=ko.utils.unwrapObservable(a().limits);b.from-=15;0>b.from&&(b.from=0);b.to+=15;1440<b.to&&(b.to=1440);Utils.inRange(d.from,b)||(d.from=b.from);Utils.inRange(d.to,b)||(d.to=b.to);$(c).val(d.from+";"+d.to);$(c).jslider({from:b.from,to:b.to,step:15,dimension:"",skin:"round_voyanga",scale:!1,limits:!1,minInterval:60,calculate:function(a){var b;b=Math.floor(a/60);a-=60*b;10>b&&(b="0"+b);0===a&&(a="00");
return b+":"+a},callback:function(b){return a().selection(b)}});return a().element=$(c)},update:function(c){var a;a=$(c).data("jslider");return setTimeout(function(){return a.onresize()},5)}};
ko.bindingHandlers.priceSlider={init:function(c,a){var b,d;d=ko.utils.unwrapObservable(a().selection);b=ko.utils.unwrapObservable(a().limits);0>b.from&&(b.from=0);console.log(b.to);Utils.inRange(d.from,b)||(d.from=b.from);Utils.inRange(d.to,b)||(d.to=b.to);$(c).val(d.from+";"+d.to);$(c).jslider({from:b.from,to:b.to,dimension:"&nbsp;\u0420",skin:"round_voyanga",scale:!1,limits:!1,minInterval:60,calculate:function(a){a=a.toString();3<a.length&&(a=a.substr(0,a.length-3)+"&nbsp;"+a.substr(-3));return a},
callback:function(b){return a().selection(b)}});return a().element=$(c)},update:function(c){var a;a=$(c).data("jslider");return setTimeout(function(){return a.onresize()},5)}};
ko.bindingHandlers.singleSlider={init:function(c,a){var b,d,e;e=ko.utils.unwrapObservable(a().selection);d=ko.utils.unwrapObservable(a().limits);0>d.from&&(d.from=0);e=d.to;(b=$(c).data("dimension"))&&(b="&nbsp;"+b);$(c).val(e);$(c).jslider({from:d.from,to:d.to,dimension:b,skin:"round_voyanga",scale:!1,limits:!1,round:1,calculate:function(a){a=a.toString();3<a.length&&(a=a.substr(0,a.length-3)+"&nbsp;"+a.substr(-3));return a},callback:function(b){return a().selection(b)}});return a().element=$(c)},
update:function(c){var a;a=$(c).data("jslider");return setTimeout(function(){return a.onresize()},5)}};ko.bindingHandlers.slider={init:function(c,a){ko.utils.unwrapObservable(a());return $(c).selectSlider({})},update:function(){}};ko.bindingHandlers.photoSlider={init:function(c,a){ko.utils.unwrapObservable(a());return $(c).photoSlider({})},update:function(){}};var checkVoybox,uncheckVoybox;checkVoybox=function(c){return c.find(".ui-control").addClass("on")};uncheckVoybox=function(c){return c.find(".ui-control").removeClass("on")};
ko.bindingHandlers.checkbox={init:function(c,a){var b,d,e,f;f=ko.utils.unwrapObservable(a().label);b=a().checked;d=$(c);e='<label class="ui-hover cF"><div class="ui-control checkbox"></div>';e+='<div class="fl">';e+='<div class="ui-label">'+f+"</div>";e+="</div>";e+="</label>";e=$(e);e.click(function(){d=$(this);if(!0!==d.find(".ui-control").hasClass("on"))return checkVoybox(d),_.isFunction(b)?b(!0):$(c).attr("checked","checked");_.isFunction(b)?b(!1):$(c).removeAttr("checked");return uncheckVoybox(d)});
d.after(e);return d.hide()},update:function(c,a){var b,d;b=ko.utils.unwrapObservable(a().checked);d=$(c).next();return b?checkVoybox(d):uncheckVoybox(d)}};ko.bindingHandlers.swapPanel={update:function(c,a){var b;b=ko.utils.unwrapObservable(a());$(c).off("click");return $(c).on("click",function(){var a;a=b.to;console.log("switching to "+a);return window.app.navigate(a,{trigger:!0})})}};
ko.bindingHandlers.gMap={init:function(c,a){var b,d;d=ko.utils.unwrapObservable(a());b=$(c).css("display");$(c).css("display","block");new google.maps.Map(c,{mapTypeControl:!1,panControl:!1,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_TOP,style:google.maps.ZoomControlStyle.SMALL},streetViewControl:!1,zoom:3,mapTypeId:google.maps.MapTypeId.TERRAIN,center:new google.maps.LatLng(d.lat,d.lng)});return window.setTimeout(function(){return $(c).css("display",b)},700)},update:function(){}};
var HotelPeopleSelector,Passengers,PeopleSelector,Roomers,__bind=function(c,a){return function(){return c.apply(a,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(c,a){function b(){this.constructor=c}for(var d in a)__hasProp.call(a,d)&&(c[d]=a[d]);b.prototype=a.prototype;c.prototype=new b;c.__super__=a.prototype;return c};
PeopleSelector=function(){function c(){this.afterRender=__bind(this.afterRender,this);this.afterRenderPeoplePopup=__bind(this.afterRenderPeoplePopup,this);this.showPeoplePopup=__bind(this.showPeoplePopup,this);this.show=__bind(this.show,this);this.inside3=this.inside2=this.inside=!1}c.prototype.show=function(a,b){var c,e,f=this;e=$(b.currentTarget);if(e.hasClass("active"))return this.close();$(document.body).mousedown(function(){if(!f.inside&&!f.inside2&&!f.inside3)return f.close()});$(".how-many-man .btn").addClass("active");
$(".how-many-man .content").addClass("active");e=$(".how-many-man").find(".popup");e.addClass("active");c=$(".how-many-man").offset();e.css("top",c.top+$(".how-many-man").height());return e.css("left",c.left)};c.prototype.showPeoplePopup=function(){var a,b,c=this;b=$(".popupPeople");if(b.hasClass("active"))return this.close();$(document.body).mousedown(function(a){console.log("click event",a);a.target;if(!(0<$(a.target).parents(".popupPeople").length))return c.close()});$(".how-many-man .btn").addClass("active");
$(".how-many-man .content").addClass("active");b.addClass("active");a=$(".how-many-man").offset();return b.css("left",a.left)};c.prototype.afterRenderPeoplePopup=function(){$(".popupPeople").find("input").hover(function(){$(this).parent().find(".plusOne").show();return $(this).parent().find(".minusOne").show()});$(".adults,.childs,.small-childs").hover(null,function(){$(this).parent().find(".plusOne").hide();return $(this).parent().find(".minusOne").hide()});$(".plusOne").hover(function(){$(this).addClass("active");
return $(".minusOne").addClass("active")},function(){$(this).removeClass("active");return $(".minusOne").removeClass("active")});$(".minusOne").hover(function(){$(this).addClass("active");return $(".plusOne").addClass("active")},function(){$(this).removeClass("active");return $(".plusOne").removeClass("active")});$(".popupPeople").find("input").focus(function(){$(this).attr("rel",$(this).val());return $(this).val("")});return $(".popupPeople").find("input").blur(function(){""===$(this).val()&&$(this).val($(this).attr("rel"));
return $(this).trigger("change")})};c.prototype.afterRender=function(){var a=this;$(".how-many-man .popup").find("input").hover(function(){$(this).parent().find(".plusOne").show();return $(this).parent().find(".minusOne").show()});$(".adults,.childs,.small-childs").hover(null,function(){$(this).parent().find(".plusOne").hide();return $(this).parent().find(".minusOne").hide()});$(".plusOne").hover(function(){$(this).addClass("active");return $(".minusOne").addClass("active")},function(){$(this).removeClass("active");
return $(".minusOne").removeClass("active")});$(".minusOne").hover(function(){$(this).addClass("active");return $(".plusOne").addClass("active")},function(){$(this).removeClass("active");return $(".plusOne").removeClass("active")});$(".how-many-man .popup").find("input").focus(function(){$(this).attr("rel",$(this).val());return $(this).val("")});$(".how-many-man .popup").find("input").blur(function(){""===$(this).val()&&$(this).val($(this).attr("rel"));return $(this).trigger("change")});$(".how-many-man").find(".popup").hover(function(){return a.inside=
!0},function(){return a.inside=!1});$(".how-many-man .content").hover(function(){return a.inside2=!0},function(){return a.inside2=!1});return $(".how-many-man .btn").hover(function(){return a.inside3=!0},function(){return a.inside3=!1})};c.prototype.close=function(){$(document.body).unbind("mousedown");$(".how-many-man .btn").removeClass("active");$(".how-many-man .content").removeClass("active");$(".popupPeople").removeClass("active");return $(".how-many-man").find(".popup").removeClass("active")};
return c}();
Passengers=function(c){function a(){this.balanceTravelers=__bind(this.balanceTravelers,this);var a=this;this.template="passengers-template";this.adults=ko.observable(1).extend({integerOnly:{min:1,max:6}});this.children=ko.observable(0).extend({integerOnly:{min:0,max:4}});this.infants=ko.observable(0).extend({integerOnly:{min:0,max:3}});this.MAX_TRAVELERS=9;this.children.subscribe(function(c){c>a.MAX_TRAVELERS-1&&a.children(a.MAX_TRAVELERS-1);return a.balanceTravelers(["adults","infants"],a)});this.infants.subscribe(function(c){c>
a.adults()&&a.adults(a.infants());return a.balanceTravelers(["children","adults"],a)});this.sum_children=ko.computed(function(){return 1*a.children()+1*a.infants()});this.overall=ko.computed(function(){return 1*a.adults()+1*a.children()+1*a.infants()});this.adults.subscribe(function(c){a.infants()>a.adults()&&a.infants(a.adults());c>a.MAX_TRAVELERS&&a.adults(a.MAX_TRAVELERS);return a.balanceTravelers(["children","infants"],a)});this.overall.subscribe(function(){return resizePanel()})}__extends(a,
c);a.prototype.balanceTravelers=function(a,c){var e,f,h,j,m;if(this.overall()>this.MAX_TRAVELERS){e=c.overall()-this.MAX_TRAVELERS;m=[];h=0;for(j=a.length;h<j;h++)if(f=a[h],c[f]()>=e){c[f](c[f]()-e);break}else e-=c[f](),m.push(c[f](0));return m}};a.prototype.plusOne=function(a,c){var e;e=$(c.target).attr("rel");return a[e](a[e]()+1)};a.prototype.minusOne=function(a,c){var e;e=$(c.target).attr("rel");return a[e](a[e]()-1)};return a}(PeopleSelector);
Roomers=function(){function c(a,b,c){this.room=a;this.index=b;this.length=c;this.last=__bind(this.last,this);this.minusOne=__bind(this.minusOne,this);this.plusOne=__bind(this.plusOne,this);this.adults=this.room.adults;this.children=this.room.children;this.ages=this.room.ages}c.prototype.plusOne=function(a,b){var c;c=$(b.currentTarget).attr("rel");return this[c](this[c]()+1)};c.prototype.minusOne=function(a,b){var c;c=$(b.currentTarget).attr("rel");if(0<this[c]())return this[c](this[c]()-1)};c.prototype.last=
function(){return this.index+1===this.length};return c}();
HotelPeopleSelector=function(c){function a(b){var c=this;this.sp=b;this.removeRoom=__bind(this.removeRoom,this);this.addRoom=__bind(this.addRoom,this);a.__super__.constructor.apply(this,arguments);this.template="roomers-template";this.rawRooms=this.sp.rooms;this.roomsView=ko.computed(function(){var a,b,h,j,m,p,g;j=[];a=[];g=c.sp.rooms();b=m=0;for(p=g.length;m<p;b=++m)h=g[b],2===a.length&&(j.push(a),a=[]),b=new Roomers(h,b,c.sp.rooms().length),b.addRoom=c.addRoom,b.removeRoom=c.removeRoom,a.push(b);
j.push(a);return j});this.sp.overall.subscribe(resizePanel)}__extends(a,c);a.prototype.addRoom=function(){if(4!==this.sp.rooms().length&&!(8<this.sp.overall()))return this.sp.rooms.push(new SpRoom(this.sp))};a.prototype.removeRoom=function(a){if(1!==this.sp.rooms().length)return this.sp.rooms.splice(this.sp.rooms.indexOf(a.room),1)};return a}(PeopleSelector);var SearchParams;SearchParams=function(){return function(){this.date=ko.observable("")}}();
ko.rangeObservable=function(c,a){var b;b={from:ko.observable(c),to:ko.observable(a)};return ko.computed({read:function(){return{from:this.from(),to:this.to()}},write:function(a){a=a.split(";");this.from(+a[0]);return this.to(+a[1])},owner:b})};
var AviaFiltersT,DistancesFilter,Filter,HotelFiltersT,ListFilter,MaxStopoverFilter,OnlyDirectFilter,PriceFilter,ServiceClassFilter,StarOption,StarsFilter,TextFilter,TimeFilter,__bind=function(c,a){return function(){return c.apply(a,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(c,a){function b(){this.constructor=c}for(var d in a)__hasProp.call(a,d)&&(c[d]=a[d]);b.prototype=a.prototype;c.prototype=new b;c.__super__=a.prototype;return c};
Filter=function(){function c(){this.setConfig=__bind(this.setConfig,this);this.getConfig=__bind(this.getConfig,this)}c.prototype.filter=function(){throw"override me";};c.prototype.resetLimits=function(){};c.prototype.updateLimits=function(){};c.prototype.get=function(a,b){var c;c=ko.utils.unwrapObservable(a[b]);"function"===typeof c&&(c=c.apply(a));return c};c.prototype.getConfig=function(){return this.selection()};c.prototype.setConfig=function(a){return this.selection(a)};return c}();
TimeFilter=function(c){function a(a){this.key=a;this.setConfig=__bind(this.setConfig,this);this.filter=__bind(this.filter,this);this.limits=ko.rangeObservable(1440,0);this.selection=ko.rangeObservable(0,1440);this.element=!1;_.extend(this,Backbone.Events)}__extends(a,c);a.prototype.filter=function(a){return Utils.inRange(this.get(a,this.key),this.selection())};a.prototype.updateLimits=function(a){var c;c=this.get(a,this.key);a=this.limits();c<a.from&&(a.from=c);c>a.to&&(a.to=c);return this.limits(a.from+
";"+a.to)};a.prototype.setConfig=function(a){this.selection(a.from+";"+a.to);if(this.element)return this.element.jslider("value",a.from,a.to)};return a}(Filter);
PriceFilter=function(c){function a(a){this.key=a;this.setConfig=__bind(this.setConfig,this);this.filter=__bind(this.filter,this);this.limits=ko.rangeObservable(999E3,0);this.selection=ko.rangeObservable(0,999E3);this.element=!1;_.extend(this,Backbone.Events)}__extends(a,c);a.prototype.filter=function(a){return Utils.inRange(this.get(a,this.key),this.selection())};a.prototype.updateLimits=function(a){var c;c=this.get(a,this.key);a=this.limits();c<a.from&&(a.from=c);c>a.to&&(a.to=c);return this.limits(a.from+
";"+a.to)};a.prototype.setConfig=function(a){this.selection(a.from+";"+a.to);if(this.element)return this.element.jslider("value",a.from,a.to)};return a}(Filter);
DistancesFilter=function(c){function a(a){this.key=a;this.setConfig=__bind(this.setConfig,this);this.filter=__bind(this.filter,this);this.limits=ko.rangeObservable(999E3,0);this.selection=ko.observable(999E3);this.element=!1;_.extend(this,Backbone.Events)}__extends(a,c);a.prototype.filter=function(a){return this.get(a,this.key)<=this.selection()};a.prototype.updateLimits=function(a){var c;c=this.get(a,this.key);a=this.limits();c<a.from&&(a.from=c);c>a.to&&(a.to=c);return this.limits(a.from+";"+a.to)};
a.prototype.setConfig=function(a){this.selection(a);if(this.element)return this.element.jslider("value",a)};return a}(Filter);
ListFilter=function(c){function a(a,c,e){var f=this;this.keys=a;this.caption=c;this.moreLabel=e;this.setConfig=__bind(this.setConfig,this);this.getConfig=__bind(this.getConfig,this);this.showMore=__bind(this.showMore,this);this.reset=__bind(this.reset,this);this.filter=__bind(this.filter,this);this.options=ko.observableArray();this._known={};this.active=ko.computed(function(){return 1<f.options().length});this.selection=ko.computed(function(){var a,b,c,d,e;b=[];e=f.options();c=0;for(d=e.length;c<
d;c++)a=e[c],a.checked()&&b.push(a.key);return b});_.extend(this,Backbone.Events)}__extends(a,c);a.prototype.addOption=function(a){this._known[a]=1;this.options.remove(function(c){return c.key===a});return this.options.unshift({key:a,checked:ko.observable(0)})};a.prototype.updateLimits=function(a){var c,e,f,h,j,m,p;m=this.keys;p=[];h=0;for(j=m.length;h<j;h++)c=m[h],c=this.get(a,c),"undefined"!==typeof c&&("object"!==typeof c?(f=[],f.push(c)):f=c,f?p.push(function(){var a,b,c;c=[];a=0;for(b=f.length;a<
b;a++)e=f[a],this._known[e]||(this._known[e]=1,this.options.push({key:e,checked:ko.observable(0)}),c.push(this.options.sort(function(a,b){return a.key===b.key?0:a.key>b.key?1:-1})));return c}.call(this)):p.push(void 0));return p};a.prototype.filter=function(a){var c,e,f,h,j;if(0===this.selection().length)return!0;console.log("servFilters",this.selection());h=this.keys;e=0;for(f=h.length;e<f;e++)if(c=h[e],c=this.get(a,c),console.log("servFiltersProp",c),"object"!==typeof c){if(0>this.selection().indexOf(c))return!1}else{if(c){a=
!0;j=this.selection();f=0;for(h=j.length;f<h;f++)e=j[f],a=a&&0<=c.indexOf(e);return a}return!1}return!0};a.prototype.reset=function(){var a,c,e,f,h;f=this.options();h=[];c=0;for(e=f.length;c<e;c++)a=f[c],h.push(a.checked(!1));return h};a.prototype.showMore=function(a,c){var e,f;f=$(c.currentTarget);e=f.parent().parent().find(".more-filters");if("none"!==e.css("display"))return f.text(f.text().replace("\u0421\u043a\u0440\u044b\u0442\u044c","\u0412\u0441\u0435")),e.hide("fast",reInitJScrollPane);f.text(f.text().replace("\u0412\u0441\u0435",
"\u0421\u043a\u0440\u044b\u0442\u044c"));return e.show("fast",reInitJScrollPane)};a.prototype.getConfig=function(){var a,c,e,f,h;c={};h=this.options();e=0;for(f=h.length;e<f;e++)a=h[e],c[a.key]=a.checked();return c};a.prototype.setConfig=function(a){var c,e,f,h,j;h=this.options();j=[];e=0;for(f=h.length;e<f;e++)c=h[e],j.push(c.checked(a[c.key]));return j};return a}(Filter);
StarOption=function(){return function(c){var a=this;this.key=c;this.starName=STARS_VERBOSE[this.key-1];this.checked=ko.observable(0);this.cls=ko.computed(function(){return a.checked()?"active":""})}}();
StarsFilter=function(c){function a(a,c,e){var f=this;this.keys=a;this.caption=c;this.moreLabel=e;this.setConfig=__bind(this.setConfig,this);this.getConfig=__bind(this.getConfig,this);this.filter=__bind(this.filter,this);this.options=ko.observableArray();for(a=c=1;5>=c;a=++c)this.options.push(new StarOption(a));this.active=ko.computed(function(){return 1<f.options().length});this.selection=ko.computed(function(){var a,b,c,d,e;b=[];e=f.options();c=0;for(d=e.length;c<d;c++)a=e[c],a.checked()&&b.push(a.starName);
return b});_.extend(this,Backbone.Events)}__extends(a,c);a.prototype.updateLimits=function(){};a.prototype.filter=function(a){var c,e,f,h;if(0===this.selection().length)return!0;h=this.keys;e=0;for(f=h.length;e<f;e++)if(c=h[e],c=this.get(a,c),console.log(this.selection()),console.log(c),0>this.selection().indexOf(c))return!1;return!0};a.prototype.starClick=function(){console.log(this);return $(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")};a.prototype.getConfig=
function(){var a,c,e,f,h;c={};h=this.options();e=0;for(f=h.length;e<f;e++)a=h[e],c[a.starName]=a.checked();return c};a.prototype.setConfig=function(a){var c,e,f,h,j;h=this.options();j=[];e=0;for(f=h.length;e<f;e++)c=h[e],j.push(c.checked(a[c.starName]));return j};return a}(Filter);
MaxStopoverFilter=function(c){function a(a,c){this.value=a;this.field=null!=c?c:"stopoverLength";this.filter=__bind(this.filter,this);this.selection=ko.observable(0)}__extends(a,c);a.prototype.filter=function(a){return this.selection()?this.get(a,this.field)<=3600*this.value:!0};return a}(Filter);OnlyDirectFilter=function(c){function a(){this.filter=__bind(this.filter,this);this.selection=ko.observable(0)}__extends(a,c);a.prototype.filter=function(a){return+this.selection()?a.direct:!0};return a}(Filter);
ServiceClassFilter=function(c){function a(){this.filter=__bind(this.filter,this);this.selection=ko.observable("A")}__extends(a,c);a.prototype.filter=function(a){return"A"===this.selection()?"E"===a.serviceClass:"B"===a.serviceClass||"F"===a.serviceClass};return a}(Filter);
TextFilter=function(c){function a(a,c){this.key=a;this.caption=c;this.keyDown=__bind(this.keyDown,this);this.updateResults=__bind(this.updateResults,this);this.filter=__bind(this.filter,this);this.selection=ko.observable("");this.updateTimeout=null}__extends(a,c);a.prototype.filter=function(a){var c,e;c=this.selection();e=!0;""!==c&&(c=RegExp(c,"ig"),e=c.test(a[this.key]));return e};a.prototype.updateResults=function(){return this.updateTimeout=null};a.prototype.keyDown=function(){var a=this;if(null!==
this.updateTimeout)return window.clearTimeout(this.updateTimeout),this.updateTimeout=window.setTimeout(function(){return a.updateResults()},1E3)};return a}(Filter);
AviaFiltersT=function(){function c(a){var b=this;this.results=a;this.setConfig=__bind(this.setConfig,this);this.getConfig=__bind(this.getConfig,this);this.iterate=__bind(this.iterate,this);this.filter=__bind(this.filter,this);this.runFiltersFunc=__bind(this.runFiltersFunc,this);this.runFilters=__bind(this.runFilters,this);this.filterBackVoyage=__bind(this.filterBackVoyage,this);this.filterVoyage=__bind(this.filterVoyage,this);this.filterResult=__bind(this.filterResult,this);this.updateLimitsBackVoyage=
__bind(this.updateLimitsBackVoyage,this);this.updateLimitsVoyage=__bind(this.updateLimitsVoyage,this);this.updateLimitsResult=__bind(this.updateLimitsResult,this);this.template="avia-filters";this.rt=this.results.roundTrip;this.showRt=ko.observable(0);this.showRtText=ko.observable("");this.showRt.subscribe(function(a){return+a?b.showRtText("\u043e\u0431\u0440\u0430\u0442\u043d\u043e"):b.showRtText("\u0442\u0443\u0434\u0430")});this.voyageFilters=["departure","arrival","shortStopover","irrelevantlyLong",
"onlyDirect"];this.rtVoyageFilters=["rtDeparture","rtArrival","shortStopover","irrelevantlyLong","onlyDirect"];this.resultFilters=["departureAirport","arrivalAirport","airline","serviceClass"];this.departure=new PriceFilter("departureTimeNumeric");this.arrival=new TimeFilter("arrivalTimeNumeric");this.rt&&(this.rtDeparture=new TimeFilter("departureTimeNumeric"),this.rtArrival=new TimeFilter("arrivalTimeNumeric"));a=this.rt?["departureAirport","rtArrivalAirport"]:["departureAirport"];this.departureAirport=
new ListFilter(a,this.results.departureCity,"\u0412\u0441\u0435 \u0430\u044d\u0440\u043e\u043f\u043e\u0440\u0442\u044b");a=this.rt?["arrivalAirport","rtDepartureAirport"]:["arrivalAirport"];this.arrivalAirport=new ListFilter(a,this.results.arrivalCity,"\u0412\u0441\u0435 \u0430\u044d\u0440\u043e\u043f\u043e\u0440\u0442\u044b");this.airline=new ListFilter(["airlineName"],"\u0410\u0432\u0438\u0430\u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438","\u0412\u0441\u0435 \u0430\u0432\u0438\u0430\u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438");
this.shortStopover=new MaxStopoverFilter(2.5);this.irrelevantlyLong=new MaxStopoverFilter(30,"maxStopoverLength");this.irrelevantlyLong.selection(1);this.onlyDirect=new OnlyDirectFilter;this.serviceClass=new ServiceClassFilter;this.refilter=ko.computed(function(){var a,c,f,h,j;h=b.resultFilters;c=0;for(f=h.length;c<f;c++)a=h[c],b[a].selection();h=b.voyageFilters;c=0;for(f=h.length;c<f;c++)a=h[c],b[a].selection();if(b.rt){h=b.rtVoyageFilters;j=[];c=0;for(f=h.length;c<f;c++)a=h[c],j.push(b[a].selection());
return j}}).extend({throttle:50});this.refilter.subscribe(this.filter);this.iterate(this.updateLimitsResult,this.updateLimitsVoyage,this.updateLimitsBackVoyage)}c.prototype.updateLimitsResult=function(a){return this.runFiltersFunc(a,this.resultFilters,"updateLimits")};c.prototype.updateLimitsVoyage=function(a){return this.runFiltersFunc(a,this.voyageFilters,"updateLimits")};c.prototype.updateLimitsBackVoyage=function(a){return this.runFiltersFunc(a,this.rtVoyageFilters,"updateLimits")};c.prototype.setVisibleIfChanged=
function(a,b){if(a.visible()!==b)return a.visible(b)};c.prototype.filterResult=function(a){return this.runFilters(a,this.resultFilters)};c.prototype.filterVoyage=function(a){return this.runFilters(a,this.voyageFilters)};c.prototype.filterBackVoyage=function(a){return this.runFilters(a,this.rtVoyageFilters)};c.prototype.runFilters=function(a,b){var c,e,f,h;e=!0;f=0;for(h=b.length;f<h&&!(c=b[f],e=e&&this[c].filter(a),!e);f++);return this.setVisibleIfChanged(a,e)};c.prototype.runFiltersFunc=function(a,
b,c){var e,f,h,j;j=[];f=0;for(h=b.length;f<h;f++)e=b[f],j.push(this[e][c](a));return j};c.prototype.filter=function(){this.iterate(this.filterResult,this.filterVoyage,this.filterBackVoyage);ko.processAllDeferredBindingUpdates();return scrollValue("avia",{})};c.prototype.iterate=function(a,b,c){var e,f,h,j,m,p,g,n,q,u,s,A;u=this.results.data;j=0;for(g=u.length;j<g;j++){f=u[j];a(f);s=f.voyages;m=0;for(n=s.length;m<n;m++)if(h=s[m],b(h),this.rt){A=h._backVoyages;p=0;for(q=A.length;p<q;p++)e=A[p],c(e);
h.chooseActive()}f.chooseActive()}return this.results.postFilters()};c.prototype.getConfig=function(){var a,b,c,e,f;a={};f=this.resultFilters;c=0;for(e=f.length;c<e;c++)b=f[c],a[b]=this[b].getConfig();f=this.voyageFilters;c=0;for(e=f.length;c<e;c++)b=f[c],a[b]=this[b].getConfig();if(this.rt){f=this.rtVoyageFilters;c=0;for(e=f.length;c<e;c++)b=f[c],a[b]=this[b].getConfig()}console.log("getConfig",a);return a};c.prototype.setConfig=function(a){var b,c,e;console.log("setConfig",a);e=[];for(c in a)b=
a[c],e.push(this[c].setConfig(b));return e};return c}();
HotelFiltersT=function(){function c(a){var b=this;this.results=a;this.setConfig=__bind(this.setConfig,this);this.getConfig=__bind(this.getConfig,this);this.iterate=__bind(this.iterate,this);this.filter=__bind(this.filter,this);this.runFiltersFunc=__bind(this.runFiltersFunc,this);this.runFilters=__bind(this.runFilters,this);this.filterRoom=__bind(this.filterRoom,this);this.filterHotel=__bind(this.filterHotel,this);this.updateLimitsRoom=__bind(this.updateLimitsRoom,this);this.updateLimitsHotel=__bind(this.updateLimitsHotel,
this);this.showFullMap=__bind(this.showFullMap,this);this.template="hotels-filters";this.roomFilters=["price"];this.hotelFilters=["services","stars","distance","hotelName"];this.services=new ListFilter(["hotelServices"],"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e","\u0412\u0441\u0435 \u0443\u0441\u043b\u0443\u0433\u0438");this.stars=new StarsFilter(["stars"],"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e","\u0412\u0441\u0435 \u0443\u0441\u043b\u0443\u0433\u0438");
this.price=new PriceFilter("pricePerNight");this.distance=new DistancesFilter("distanceToCenter");this.hotelName=new TextFilter("hotelName","\u043f\u043e\u0438\u0441\u043a \u043f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e");this.refilter=ko.computed(function(){var a,c,f,h,j;h=b.hotelFilters;c=0;for(f=h.length;c<f;c++)a=h[c],b[a].selection();h=b.roomFilters;j=[];c=0;for(f=h.length;c<f;c++)a=h[c],j.push(b[a].selection());return j}).extend({throttle:50});this.refilter.subscribe(this.filter);
this.iterate(this.updateLimitsHotel,this.updateLimitsRoom,!1);this.services.addOption("\u0424\u0438\u0442\u043d\u0435\u0441\u0441");this.services.addOption("\u041f\u0430\u0440\u043a\u043e\u0432\u043a\u0430");this.services.addOption("\u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442")}c.prototype.showFullMap=function(){console.log("FM");console.log();return this.results.showFullMapFunc()};c.prototype.updateLimitsHotel=function(a){return this.runFiltersFunc(a,this.hotelFilters,"updateLimits")};c.prototype.updateLimitsRoom=
function(a){return this.runFiltersFunc(a,this.roomFilters,"updateLimits")};c.prototype.setVisibleIfChanged=function(a,b){if(a.visible()!==b)return a.visible(b)};c.prototype.filterHotel=function(a){return this.runFilters(a,this.hotelFilters)};c.prototype.filterRoom=function(a){return this.runFilters(a,this.roomFilters)};c.prototype.runFilters=function(a,b){var c,e,f,h;e=!0;f=0;for(h=b.length;f<h&&!(c=b[f],e=e&&this[c].filter(a),!e);f++);return this.setVisibleIfChanged(a,e)};c.prototype.runFiltersFunc=
function(a,b,c){var e,f,h,j;j=[];f=0;for(h=b.length;f<h;f++)e=b[f],j.push(this[e][c](a));return j};c.prototype.filter=function(){return this.iterate(this.filterHotel,this.filterRoom)};c.prototype.iterate=function(a,b){var c,e,f,h,j,m,p,g,n;g=this.results.data();h=0;for(m=g.length;h<m;h++)if(c=g[h],a(c),c.visible()){f=!1;n=c.roomSets();j=0;for(p=n.length;j<p;j++)e=n[j],b(e),f=f||e.visible();c.visible(f)}return this.results.postFilters(!0)};c.prototype.getConfig=function(){var a,b,c,e,f;a={};f=this.hotelFilters;
c=0;for(e=f.length;c<e;c++)b=f[c],a[b]=this[b].getConfig();f=this.roomFilters;c=0;for(e=f.length;c<e;c++)b=f[c],a[b]=this[b].getConfig();console.log("getConfig",a);return a};c.prototype.setConfig=function(a){var b,c,e;console.log("setConfig",a);e=[];for(c in a)b=a[c],e.push(this[c].setConfig(b));return e};return c}();var SearchPanel,__bind=function(c,a){return function(){return c.apply(a,arguments)}};
SearchPanel=function(){function c(a,b){var c=this;null==a&&(a=!0);null==b&&(b=!1);this.afterRender=__bind(this.afterRender,this);this.handlePanelSubmit=__bind(this.handlePanelSubmit,this);this.showCalendar=__bind(this.showCalendar,this);this.minimizeCalendar=__bind(this.minimizeCalendar,this);this.minimize=__bind(this.minimize,this);this.toggleCalendar=__bind(this.toggleCalendar,this);this.togglePanel=__bind(this.togglePanel,this);this.minimized=ko.observable(!a);this.minimizedCalendar=ko.observable(a);
this.calendarHidden=ko.observable(this.minimizedCalendar);this.calendarShadow=ko.observable(this.minimizedCalendar);this.prevSearchPanel=ko.observable(null);this.nextSearchPanel=ko.observable(null);this.aPanelId=Math.floor(1E4*Math.random());this.oldCalendarState=this.minimizedCalendar();this.togglePanel(this.minimized(),b);this.toggleCalendar(this.minimizedCalendar(),!0);this.toggleSubscribers=this.minimized.subscribe(function(a){return c.togglePanel(a)});this.minimizedCalendar.subscribe(function(a){return c.toggleCalendar(a)})}
c.prototype.togglePanel=function(a,b){var c;null==b&&(b=!1);if(!b)return c=$(".sub-head").height(),a?$(".sub-head").animate({"margin-top":"-"+(c-4)+"px"},300):$(".sub-head").animate({"margin-top":"0px"},300)};c.prototype.toggleCalendar=function(a,b){var c=this;null==b&&(b=!1);$(".sub-head").height();$(".calenderWindow").height();if(a){this.calendarShadow(!0);if(b)return this.calendarHidden(!0),this.calendarShadow(!1);ResizeAvia();this.calendarShadow(!0);$(".calenderWindow .calendarSlide").animate({top:"-341px"});
return $(".calenderWindow").animate({height:"0px"},500,function(){c.calendarHidden(!0);return c.calendarShadow(!1)})}this.calendarHidden(!1);if(!b)return ResizeAvia(),$(".calenderWindow .calendarSlide").animate({top:"0px"}),$(".calenderWindow").animate({height:"341px"},500)};c.prototype.minimize=function(){if(this.minimized())return this.minimized(!1),this.minimizedCalendar(this.oldCalendarState);this.minimized(!0);this.oldCalendarState=this.minimizedCalendar();if(!this.minimizedCalendar())return this.minimizedCalendar(!0)};
c.prototype.minimizeCalendar=function(){return this.minimizedCalendar()?this.minimizedCalendar(!1):this.minimizedCalendar(!0)};c.prototype.showCalendar=function(){$(".calenderWindow").show();if(this.minimizedCalendar())return this.minimizedCalendar(!1)};c.prototype.handlePanelSubmit=function(){app.navigate(this.sp.getHash(),{trigger:!0});return this.minimizedCalendar(!0)};c.prototype.afterRender=function(){throw"Implement me";};return c}();_this=this;
ko.bindingHandlers.autocomplete={init:function(c,a){var b;b=void 0===a().showCode?a().showCode:!0;setTimeout(function(){$(c).bind("focus",function(){return $(c).change()});return $(c).autocomplete({serviceUrl:"http://api.voyanga.com/v1/helper/autocomplete/"+a().source,minChars:2,delimiter:/(,|;)\s*/,maxHeight:400,zIndex:9999,deferRequestBy:0,delay:0,showCode:b,onSelect:function(b,e){a().iata(e.code);a().readable(e.name);a().readableGen(e.nameGen);a().readableAcc(e.nameAcc);$(c).val(e.name);return $(c).siblings("input.input-path").val(b)},
onActivate:function(b,e){a().readable(e.name);a().readableGen(e.nameGen);a().readableAcc(e.nameAcc);$(c).val(e.name);return $(c).siblings("input.input-path").val(b)}})},500);return $(c).on("keyup",function(b){if(8===b.keyCode||46===b.keyCode)return a().iata(""),a().readable(""),a().readableGen(""),a().readableAcc("")})},update:function(c,a){var b,d,e;d=a().iata();e=function(a){var b,c;c="http://api.voyanga.com/v1/helper/autocomplete/citiesReadable?";b=[];b.push("codes[0]="+a);return c+=b.join("&")};
b=function(b){a().readable(b[d].name);a().readableGen(b[d].nameGen);a().readableAcc(b[d].nameAcc);$(c).val(b[d].name);return $(c).siblings("input.input-path").val(b[d].label)};if(0<d.length)return $.ajax({url:e(d),dataType:"jsonp",success:b})}};
var API,AviaAPI,HotelsAPI,ToursAPI,__bind=function(c,a){return function(){return c.apply(a,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(c,a){function b(){this.constructor=c}for(var d in a)__hasProp.call(a,d)&&(c[d]=a[d]);b.prototype=a.prototype;c.prototype=new b;c.__super__=a.prototype;return c};
API=function(){function c(){this.call=__bind(this.call,this);this.endpoint="http://api.voyanga.com/v1/"}c.prototype.call=function(a,b,c){null==c&&(c=!0);c&&($("#loadWrapBg").show(),loaderChange(!0));return $.ajax({url:""+this.endpoint+a,dataType:"jsonp",timeout:9E4,success:function(a){b(a);if(c)return $("#loadWrapBg").hide(),loaderChange(!1)},error:function(){console.log("ERROR");c&&($("#loadWrapBg").hide(),loaderChange(!1));return b(!1)}})};return c}();
ToursAPI=function(c){function a(){this.search=__bind(this.search,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,c);a.prototype.search=function(a,c){return this.call(a,function(a){return c(a)})};return a}(API);AviaAPI=function(c){function a(){this.search=__bind(this.search,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,c);a.prototype.search=function(a,c){return this.call(a,function(a){return c(a)})};return a}(API);
HotelsAPI=function(c){function a(){this.search=__bind(this.search,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,c);a.prototype.search=function(a,c,e){null==e&&(e=!0);return this.call(a,function(a){return c(a)},e)};return a}(API);Socialite.setup({facebook:{lang:"ru",appId:463273800404070,onlike:function(){},onunlike:function(){},onsend:function(){}}});Socialite.setup({vkontakte:{apiId:3377254,group:{id:0,mode:0,width:300,height:290},like:{type:"mini"}}});
$(function(){var c;c=$("#socialSource").html();$("#socialSource").empty();$(".shareSocial").html(c);return Socialite.load($("#social"))});var AviaPanel,__bind=function(c,a){return function(){return c.apply(a,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(c,a){function b(){this.constructor=c}for(var d in a)__hasProp.call(a,d)&&(c[d]=a[d]);b.prototype=a.prototype;c.prototype=new b;c.__super__=a.prototype;return c};
AviaPanel=function(c){function a(){this.afterRender=__bind(this.afterRender,this);this.handlePanelSubmit=__bind(this.handlePanelSubmit,this);this.selectRoundTrip=__bind(this.selectRoundTrip,this);this.selectOneWay=__bind(this.selectOneWay,this);this.setDate=__bind(this.setDate,this);var b=this;a.__super__.constructor.call(this);this.prevPanel="tours";this.nextPanel="hotels";this.mainLabel="\u041f\u043e\u0438\u0441\u043a \u0430\u0432\u0438\u0430\u0431\u0438\u043b\u0435\u0442\u043e\u0432";this.icon=
"fly-ico";this.template="avia-panel-template";this.sp=new AviaSearchParams;this.passengers=this.sp.passengers;this.departureDate=this.sp.date;this.departureCity=this.sp.dep;this.departureCityReadable=ko.observable("");this.departureCityReadableGen=ko.observable("");this.departureCityReadableAcc=ko.observable("");this.rt=this.sp.rt;this.rtDate=this.sp.rtDate;this.arrivalCity=this.sp.arr;this.arrivalCityReadable=ko.observable("");this.arrivalCityReadableGen=ko.observable("");this.arrivalCityReadableAcc=
ko.observable("");this.prefixText="\u0412\u0441\u0435 \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f<br>500+ \u0430\u0432\u0438\u0430\u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0439";this.oldCalendarState=this.minimizedCalendar();this.show=this.passengers.show;this.fromChosen=ko.computed(function(){return b.departureDate().getDay?!0:0<b.departureDate().length});this.rtFromChosen=ko.computed(function(){return!b.rt()?!1:b.rtDate().getDay?!0:0<b.rtDate().length});this.formFilled=
ko.computed(function(){var a;a=b.departureCity()&&b.arrivalCity()&&b.fromChosen();b.rt()&&(a=a&&b.rtFromChosen());return a});this.formNotFilled=ko.computed(function(){return!b.formFilled()});this.maximizedCalendar=ko.computed(function(){return b.departureCity()&&b.arrivalCity()});this.maximizedCalendar.subscribe(function(a){a&&(b.rt()&&!b.rtFromChosen()?b.showCalendar():b.fromChosen()||b.showCalendar())});this.calendarValue=ko.computed(function(){return{twoSelect:b.rt(),from:b.departureDate(),to:b.rtDate(),
hotels:!1,activeSearchPanel:b}});this.departureDateDay=ko.computed(function(){return dateUtils.formatDay(b.departureDate())});this.departureDateMonth=ko.computed(function(){return dateUtils.formatMonth(b.departureDate())});this.rtDateDay=ko.computed(function(){return dateUtils.formatDay(b.rtDate())});this.rtDateMonth=ko.computed(function(){return dateUtils.formatMonth(b.rtDate())});this.rt.subscribe(this.rtTumbler);this.rtTumbler(this.rt());$(".how-many-man .btn");this.calendarText=ko.computed(function(){var a,
c;c="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u043f\u0435\u0440\u0435\u043b\u0435\u0442\u0430 ";a=b.rt()?" \u2194 ":" \u2192 ";0<b.departureCityReadable().length&&0<b.arrivalCityReadable().length?c+=b.departureCityReadable()+a+b.arrivalCityReadable():0===b.departureCityReadable().length&&0<b.arrivalCityReadable().length?c+=" \u0432 "+b.arrivalCityReadableAcc():0<b.departureCityReadable().length&&0===b.arrivalCityReadable().length&&(c+=" \u0438\u0437 "+b.departureCityReadableGen());
return c})}__extends(a,c);a.prototype.rtTumbler=function(a){return a?$(".tumblr .switch").animate({left:"35px"},200):$(".tumblr .switch").animate({left:"-1px"},200)};a.prototype.setDate=function(a){if(a.length&&(this.departureDate(a[0]),this.rt&&1<a.length))return a[1]>a[0]?this.rtDate(a[1]):this.rtDate("")};a.prototype.selectOneWay=function(){return this.rt(!1)};a.prototype.selectRoundTrip=function(){return this.rt(!0)};a.prototype.handlePanelSubmit=function(){app.navigate(this.sp.getHash(),{trigger:!0});
return this.minimizedCalendar(!0)};a.prototype.navigateToNewSearch=function(){if(!this.formNotFilled())return this.handlePanelSubmit(),this.minimizedCalendar(!0)};a.prototype.returnRecommend=function(a,c){$(".recomended-content").slideDown();$(".order-hide").fadeIn();return $(c.currentTarget).animate({top:"-19px"},500,null,function(){return ResizeAvia()})};a.prototype.afterRender=function(){var a=this;$(function(){a.sp.passengers.afterRender();a.rtTumbler(a.rt());return $(".how-many-man .btn")});
return resizePanel()};return a}(SearchPanel);$(document).on("autocompleted","input.departureCity",function(){return $("input.arrivalCity.second-path").focus()});$(document).on("keyup change","input.second-path",function(c){var a,b;a=$(this).val();b=$(this).siblings("input.input-path");if(8===c.keyCode||3>a.length)return b.val("")});var Sibling,Siblings,__bind=function(c,a){return function(){return c.apply(a,arguments)}};
Sibling=function(){function c(a,b,c,e,f){var h=this;this.graphHeight=a;this.parent=b;this.price=c;null==f&&(f=!1);this.rawDate=e;this.date=e.format("D");this.dow=e.format("dd");this.month=e.format("MMM");this.data=[];this.nodata=!1;this.isActive=ko.observable(f);this.initialActive=f;!1!==this.price&&this.parent.price&&(this.price=2*this.price-this.parent.price);this.scaledHeight=ko.computed(function(){var a;if(!1===h.price)return 0;a=h.height/h.absDelta;a*=0.6;isNaN(a)&&(a=0);0<a&&0.1>a&&console.error(h.height,
h.absDelta,h.price);return a*(h.graphHeight()-10)+10-10})}c.prototype.columnValue=function(){return this.price};c.prototype.background=function(){return this.nodata?"center "+this.graphHeight()+"px":"center "+this.scaledHeight()+"px"};return c}();
Siblings=function(){function c(a,b,c,e){this.roundTrip=b;this.populate=__bind(this.populate,this);this.search=__bind(this.search,this);this.handleSearch=__bind(this.handleSearch,this);this.priceDisplay=__bind(this.priceDisplay,this);this.showPrice=__bind(this.showPrice,this);this.showControls=__bind(this.showControls,this);this.select=__bind(this.select,this);this.data=[];this.graphHeight=ko.observable(50);this.populate(this,a,c,e);this.active=ko.observable(this.data[3]);this.selection=ko.observable(!1)}
c.prototype.select=function(a){var b,c,e,f;if(a.data.length){this.active(a);f=a.data;c=0;for(e=f.length;c<e;c++)if(b=f[c],b.isActive()){this.selection(b);break}}else this.selection(a);f=a.parent.data;c=0;for(e=f.length;c<e;c++)b=f[c],b.isActive(!1);return a.isActive(!0)};c.prototype.showControls=function(){return!this.selection()||this.active().initialActive&&this.selection().initialActive?!1:!0};c.prototype.showPrice=function(){return!this.selection()||this.active().nodata||this.selection().nodata?
!1:!0};c.prototype.priceDisplay=function(){return!this.showPrice()?"":this.roundTrip?this.active().price+this.selection().price:this.selection().price};c.prototype.handleSearch=function(a,b){var c,e;null==b&&(b=!1);c=window.app;e=c.fakoPanel();e.sp.date(a.toDate());!1!==b&&e.sp.rtDate(b.toDate());return c.navigate(e.sp.getHash(),{trigger:!0})};c.prototype.search=function(){if(this.roundTrip)this.handleSearch(this.active().rawDate,this.selection().rawDate);else return this.handleSearch(this.selection().rawDate)};
c.prototype.populate=function(a,b,c,e){var f,h,j,m,p,g,n,q,u;n=_.filter(b,function(a){return!1!==a.price});n=0===n.length?1:n[0].price;h=q=0;for(u=b.length;q<u;h=++q)p=b[h],g=p.price,f=c.clone().subtract("days",3-h),m=!1,0===h&&(m=!0,j=f.month()),j!==f.month()&&(m=!0,j=f.month()),h=3===h?!0:!1,f=new Sibling(this.graphHeight,a,g,f,h),!1===p.price&&(f.nodata=!0),f.showMonth=m,a.data.push(f),p.siblings.length&&this.populate(f,p.siblings,e);c=_.min(a.data,function(a){return!1===a.price?n:a.price});b=
_.max(a.data,function(a){return!1===a.price?n:a.price});!1===b.price&&(b={price:n});!1===c.price&&(c={price:n});c=b.price-c.price;m=a.data;p=[];e=0;for(j=m.length;e<j;e++)a=m[e],a.height=!1===a.price?0:b.price-a.price,p.push(a.absDelta=c);return p};return c}();
var AviaResult,AviaResultSet,AviaSearchParams,FlightPart,Voyage,__bind=function(c,a){return function(){return c.apply(a,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(c,a){function b(){this.constructor=c}for(var d in a)__hasProp.call(a,d)&&(c[d]=a[d]);b.prototype=a.prototype;c.prototype=new b;c.__super__=a.prototype;return c};
FlightPart=function(){function c(a){this.part=a;this.departureDate=new Date(a.datetimeBegin+"+04:00");this.arrivalDate=new Date(a.datetimeEnd+"+04:00");this.departureCity=a.departureCity;this.departureCityPre=a.departureCityPre;this.departureAirport=a.departureAirport;this.aircraftName=a.aircraftName;this.arrivalCity=a.arrivalCity;this.arrivalCityPre=a.arrivalCityPre;this.arrivalAirport=a.arrivalAirport;this._duration=a.duration;this.transportAirline=a.transportAirline;this.transportAirlineName=a.transportAirlineNameEn;
this.markAirline=a.markAirline;this.markAirlineName=a.markAirlineNameEn;this.flightCode=a.markAirline+" "+a.flightCode;this.stopoverLength=0}c.prototype.departureTime=function(){return dateUtils.formatTime(this.departureDate)};c.prototype.arrivalTime=function(){return dateUtils.formatTime(this.arrivalDate)};c.prototype.duration=function(){return dateUtils.formatDuration(this._duration)};c.prototype.departureCityStopoverText=function(){return"\u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430 \u0432 "+
this.departureCityPre+", "+this.stopoverText()};c.prototype.calculateStopoverLength=function(a){return this.stopoverLength=Math.floor((a.departureDate.getTime()-this.arrivalDate.getTime())/1E3)};c.prototype.stopoverText=function(){return dateUtils.formatDuration(this.stopoverLength)};return c}();
Voyage=function(){function c(a,b){var c,e,f,h,j;this.airline=b;this.parts=[];h=a.flightParts;c=0;for(f=h.length;c<f;c++)e=h[c],this.parts.push(new FlightPart(e));this.flightKey=a.flightKey;this.hasStopover=1<this.stopoverCount?!0:!1;this.maxStopoverLength=this.stopoverLength=0;this.direct=1===this.parts.length;if(!this.direct){j=this.parts;c=f=0;for(h=j.length;f<h;c=++f)e=j[c],c<this.parts.length-1&&e.calculateStopoverLength(this.parts[c+1]),this.stopoverLength+=e.stopoverLength,e.stopoverLength>
this.maxStopoverLength&&(this.maxStopoverLength=e.stopoverLength)}this.departureDate=new Date(a.departureDate+"+04:00");this.arrivalDate=new Date(this.parts[this.parts.length-1].arrivalDate);this._duration=a.fullDuration;this.departureAirport=this.parts[0].departureAirport;this.arrivalAirport=this.parts[this.parts.length-1].arrivalAirport;this.departureCity=a.departureCity;this.arrivalCity=a.arrivalCity;this.departureCityPre=a.departureCityPre;this.arrivalCityPre=a.arrivalCityPre;this._backVoyages=
[];this.activeBackVoyage=ko.observable();this.visible=ko.observable(!0)}c.prototype.departureInt=function(){return this.departureDate.getTime()};c.prototype.hash=function(){return this.departureTime()+this.arrivalTime()};c.prototype.similarityHash=function(){return this.hash()+this.airline};c.prototype.push=function(a){return this._backVoyages.push(a)};c.prototype.stacked=function(){var a,b,c,e,f,h;b=!1;a=0;h=this._backVoyages;e=0;for(f=h.length;e<f;e++)if(c=h[e],c.visible()&&a++,1<a){b=!0;break}return b};
c.prototype.departureDayMo=function(){return dateUtils.formatDayMonth(this.departureDate)};c.prototype.departurePopup=function(){return dateUtils.formatDayMonthWeekday(this.departureDate)};c.prototype.departureTime=function(){return dateUtils.formatTime(this.departureDate)};c.prototype.departureTimeNumeric=function(){return dateUtils.formatTimeInMinutes(this.departureDate)};c.prototype.arrivalDayMo=function(){return dateUtils.formatDayMonth(this.arrivalDate)};c.prototype.arrivalTime=function(){return dateUtils.formatTime(this.arrivalDate)};
c.prototype.arrivalTimeNumeric=function(){return dateUtils.formatTimeInMinutes(this.arrivalDate)};c.prototype.duration=function(){return dateUtils.formatDuration(this._duration)};c.prototype.stopoverText=function(){var a,b,c,e,f;if(this.direct)return"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a";b=[];if(2===this.parts.length)return a=this.parts[0],"\u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430 \u0432 "+a.arrivalCityPre+", "+this.parts[0].stopoverText();f=this.parts.slice(0,
-1);c=0;for(e=f.length;c<e;c++)a=f[c],b.push(a.arrivalCityPre);return"\u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430 \u0432 "+b.join(", ")};c.prototype.stopoverRelText=function(){var a,b,c,e,f;if(this.direct)return"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a";b=[];f=this.parts.slice(0,-1);c=0;for(e=f.length;c<e;c++)a=f[c],b.push("\u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430 \u0432 "+a.arrivalCityPre+", "+a.stopoverText());return b.join("<br />")};c.prototype.stopsRatio=
function(){var a,b,c,e,f,h;c=[];if(this.direct)return'<span class="down"></span>';a=_.reduce(this.parts,function(a,b){return a+b._duration},0);h=this.parts.slice(0,-1);e=0;for(f=h.length;e<f;e++)b=h[e],c.push({left:Math.ceil(80*(b._duration/a)),part:b});b=e=0;for(f=c.length;e<f;b=++e)a=c[b],18>a.left&&(a.left=18),c[b].left=0<b?c[b-1].left+a.left:a.left;b="";e=0;for(f=c.length;e<f;e++)a=c[e],b+=this.getCupHtmlForPart(a.part,"left: "+a.left+"%");return b+'<span class="down"></span>'};c.prototype.stopoverHtml=
function(){var a,b,c,e,f;if(this.direct)return'<span class="path"></span>';a="";f=this.parts.slice(0,-1);c=0;for(e=f.length;c<e;c++)b=f[c],console.log(b),0<b.stopoverLength&&(a+=this.getCupHtmlForPart(b));return a};c.prototype.getCupHtmlForPart=function(a,b){null==b&&(b="");return'<span class="'+(9E3>a.stopoverLength?"cup":"cup long")+' tooltip" rel="\u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430 \u0432 '+a.arrivalCityPre+", "+a.stopoverText()+'" style="'+b+'"></span>'};c.prototype.recommendStopoverIco=
function(){if(!this.direct)return'<span class="cup"></span>'};c.prototype.sort=function(){this._backVoyages.sort(function(a,b){return a.departureInt()-b.departureInt()});return this.activeBackVoyage(this._backVoyages[0])};c.prototype.removeSimilar=function(){var a,b,c,e,f,h,j;if(!(2>this._backVoyages.length)){e={};j=this._backVoyages;f=0;for(h=j.length;f<h;f++)c=j[f],b=c.airline+c.departureInt(),a=e[b],e[b]=a?a.stopoverLength<c.stopoverLength?a:c:c;this._backVoyages=[];for(b in e)a=e[b],this._backVoyages.push(a);
return this.activeBackVoyage(this._backVoyages[0])}};c.prototype.chooseActive=function(){var a;if(0!==this._backVoyages.length&&!this.activeBackVoyage().visible()){if(a=_.find(this._backVoyages,function(a){return a.visible()}))return this.activeBackVoyage(a);this.visible(!1)}};return c}();
AviaResult=function(){function c(a,b){var c,e,f,h,j;this.parent=b;this.getPostData=__bind(this.getPostData,this);this.getParams=__bind(this.getParams,this);this.directRating=__bind(this.directRating,this);this.chooseActive=__bind(this.chooseActive,this);this.showDetails=__bind(this.showDetails,this);this.minimizeRtStacked=__bind(this.minimizeRtStacked,this);this.minimizeStacked=__bind(this.minimizeStacked,this);this.chooseNextRtStacked=__bind(this.chooseNextRtStacked,this);this.choosePrevRtStacked=
__bind(this.choosePrevRtStacked,this);this.chooseRtStacked=__bind(this.chooseRtStacked,this);this.chooseNextStacked=__bind(this.chooseNextStacked,this);this.choosePrevStacked=__bind(this.choosePrevStacked,this);this.chooseStacked=__bind(this.chooseStacked,this);this.rtFlightCodes=__bind(this.rtFlightCodes,this);this.flightCodes=__bind(this.flightCodes,this);this.flightKey=__bind(this.flightKey,this);this.rtServiceClass=__bind(this.rtServiceClass,this);this.rtFlightCodesText=__bind(this.rtFlightCodesText,
this);this.isFlight=!0;this.isHotel=!1;_.extend(this,Backbone.Events);this._data=a;this._stacked_data=[];c=a.flights;this.searchId=a.searchId;this.cacheId=a.cacheId;this.key=a.key;this.pdfLink="/buy/pdf/id/"+this.key;this.price=Math.ceil(a.price);this._stacked=!1;c||console.log("data",a);this.roundTrip=2===c.length;this.visible=ko.observable(!0);this.airline=a.valCompany;this.searchService=a.service;this.airlineName=a.valCompanyNameEn;this.serviceClass=a.serviceClass;this.serviceClassReadable="E"===
a.serviceClass?"\u042d\u043a\u043e\u043d\u043e\u043c":"\u0411\u0438\u0437\u043d\u0435\u0441";this.refundableText=(this.refundable=a.refundable)?"\u0411\u0438\u043b\u0435\u0442 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043d\u044b\u0439":"\u0411\u0438\u043b\u0435\u0442 \u043d\u0435 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043d\u044b\u0439";this.freeWeight=a.freeWeight;"0"===this.freeWeight&&(this.freeWeight="$");this.freeWeightText=a.freeWeightDescription;c[0].flightKey=a.flightKey;this.activeVoyage=
new Voyage(c[0],this.airline);this.roundTrip&&(c[1].flightKey=a.flightKey,this.activeVoyage.push(new Voyage(c[1],this.airline)));this.voyages=[];this.voyages.push(this.activeVoyage);this.activeVoyage=ko.observable(this.activeVoyage);this.stackedMinimized=ko.observable(!0);this.rtStackedMinimized=ko.observable(!0);this.flightCodesText=1<_.size(this.activeVoyage().parts)?"\u0420\u0435\u0439\u0441\u044b":"\u0420\u0435\u0439\u0441";this.totalPeople=0;c="departureCity departureAirport departureDayMo departureDate departurePopup departureTime arrivalCity arrivalAirport arrivalDayMo arrivalDate arrivalTime duration _duration direct stopoverText stopoverRelText departureTimeNumeric arrivalTimeNumeric hash similarityHash stopsRatio recommendStopoverIco".split(" ");
h=0;for(j=c.length;h<j;h++)e=c[h],this[e]=function(a){return function(){var b;b=this.activeVoyage()[a];return"function"===typeof b?b.apply(this.activeVoyage()):b}}(e),f="rt"+e.charAt(0).toUpperCase()+e.slice(1),this[f]=function(a){return function(){var b;b=this.activeVoyage().activeBackVoyage()[a];return"function"===typeof b?b.apply(this.activeVoyage().activeBackVoyage()):b}}(e)}c.prototype.rtFlightCodesText=function(){return 1<_.size(this.activeVoyage().activeBackVoyage().parts)?"\u0420\u0435\u0439\u0441\u044b":
"\u0420\u0435\u0439\u0441"};c.prototype.rtServiceClass=function(){return this.activeVoyage().serviceClass};c.prototype.flightKey=function(){return this.roundTrip?this.activeVoyage().activeBackVoyage().flightKey:this.activeVoyage().flightKey};c.prototype.flightCodes=function(){var a;a=_.map(this.activeVoyage().parts,function(a){return'<span class="tooltip" rel="'+a.departureCity+" - "+a.arrivalCity+'"><nobr>'+a.flightCode+"</nobr></span>"});return Utils.implode(", ",a)};c.prototype.rtFlightCodes=function(){var a;
a=_.map(this.activeVoyage().activeBackVoyage().parts,function(a){return'<span class="tooltip" rel="'+a.departureCity+" - "+a.arrivalCity+'"><nobr>'+a.flightCode+"</nobr></span>"});return Utils.implode(", ",a)};c.prototype.isActive=function(){console.log(this.parent.selected_key(),this.key,this.parent.selected_best());this.parent.selected_best();return this.parent.selected_key()===this.key};c.prototype.stacked=function(){var a,b,c,e,f;a=0;f=this.voyages;c=0;for(e=f.length;c<e;c++)if(b=f[c],b.visible()&&
a++,1<a)return!0;return!1};c.prototype.rtStacked=function(){var a,b,c,e,f;a=0;f=this.activeVoyage()._backVoyages;c=0;for(e=f.length;c<e;c++)if(b=f[c],b.visible()&&a++,1<a)return!0;return!1};c.prototype.push=function(a){var b,c;this._stacked=!0;a.flights[0].flightKey=a.flightKey;b=new Voyage(a.flights[0],this.airline);this._stacked_data.push(a);if(this.roundTrip&&(a.flights[1].flightKey=a.flightKey,a=new Voyage(a.flights[1],this.airline),b.push(a),c=_.find(this.voyages,function(a){return a.hash()===
b.hash()}))){c.push(a);return}return this.voyages.push(b)};c.prototype.chooseStacked=function(a){var b;this.roundTrip&&(b=this.activeVoyage().activeBackVoyage().hash());this.activeVoyage(a);if(a=_.find(a._backVoyages,function(a){return a.hash()===b}))return this.activeVoyage().activeBackVoyage(a)};c.prototype.choosePrevStacked=function(){var a,b,c,e,f,h;a=0;h=this.voyages;b=e=0;for(f=h.length;e<f;b=++e)c=h[b],c.hash()===this.hash()&&(a=b);if(0!==a)return this.activeVoyage(this.voyages[a-1])};c.prototype.chooseNextStacked=
function(){var a,b,c,e,f,h;a=0;h=this.voyages;b=e=0;for(f=h.length;e<f;b=++e)c=h[b],c.hash()===this.hash()&&(a=b);if(a!==this.voyages.length-1)return this.activeVoyage(this.voyages[a+1])};c.prototype.chooseRtStacked=function(a){window.voyanga_debug("Choosing RT stacked voyage",a);return this.activeVoyage().activeBackVoyage(a)};c.prototype.choosePrevRtStacked=function(){var a,b,c,e,f,h;a=0;c=this.rtVoyages();b=f=0;for(h=c.length;f<h;b=++f)e=c[b],e.hash()===this.rtHash()&&(a=b);if(0!==a)return this.activeVoyage().activeBackVoyage(c[a-
1])};c.prototype.chooseNextRtStacked=function(){var a,b,c,e,f,h;a=0;c=this.rtVoyages();b=f=0;for(h=c.length;f<h;b=++f)e=c[b],e.hash()===this.rtHash()&&(a=b);if(a!==c.length-1)return this.activeVoyage().activeBackVoyage(c[a+1])};c.prototype.minimizeStacked=function(){return this.stackedMinimized(!this.stackedMinimized())};c.prototype.minimizeRtStacked=function(){return this.rtStackedMinimized(!this.rtStackedMinimized())};c.prototype.rtVoyages=function(){return this.activeVoyage()._backVoyages};c.prototype.sort=
function(){this.voyages.sort(function(a,b){return a.departureInt()-b.departureInt()});this.roundTrip&&_.each(this.voyages,function(a){a.sort();return a.removeSimilar()});return this.activeVoyage(this.voyages[0])};c.prototype.removeSimilar=function(){var a,b,c,e,f,h,j;if(!(2>this.voyages.length)){e={};j=this.voyages;f=0;for(h=j.length;f<h;f++)c=j[f],b=c.airline+c.departureInt(),a=e[b],e[b]=a?a.stopoverLength<c.stopoverLength?a:c:c;this.activeVoyage(e[b]);this.voyages=[];c=[];for(b in e)a=e[b],a.stopoverLength<
this.activeVoyage().stopoverLength&&this.activeVoyage(a),c.push(this.voyages.push(a));return c}};c.prototype.showDetails=function(){this.parent._popup=new GenericPopup("#avia-body-popup",this);ko.processAllDeferredBindingUpdates();SizeBox("avia-body-popup");return ResizeBox("avia-body-popup")};c.prototype.chooseActive=function(){var a;if(!1!==this.visible()&&!this.activeVoyage().visible()){if(a=_.find(this.voyages,function(a){return a.visible()}))return this.activeVoyage(a);this.visible(!1)}};c.prototype.directRating=
function(){var a,b;a=1;this.direct()&&(a+=1);this.roundTrip&&this.rtDirect()&&(a+=1);b=this._duration();this.roundTrip&&(b+=this.rt_duration());return b/a};c.prototype.getParams=function(){var a;a={};this.activeVoyage()&&(a.airlineCode=this.airline,a.rt=this.roundTrip?"true":"false",a.departureDateTime=this.departureDate(),a.arrivalDateTime=this.arrivalDate(),this.roundTrip&&(a.rtDepartureDateTime=this.rtDepartureDate(),a.rtArrivalDateTime=this.rtArrivalDate()));return JSON.stringify(a)};c.prototype.getPostData=
function(){var a;a={};a.data=this._data;a.type="avia";return a};return c}();
AviaResultSet=function(){function c(a,b){var c,e,f,h,j,m,p,g,n,q,u,s;this.siblings=null!=b?b:!1;this.setBest=__bind(this.setBest,this);this.updateBest=__bind(this.updateBest,this);this.updateCheapest=__bind(this.updateCheapest,this);this.postFilters=__bind(this.postFilters,this);this.processSiblings=__bind(this.processSiblings,this);this.postInit=__bind(this.postInit,this);this.findAndSelect=__bind(this.findAndSelect,this);this.onAfterSelect=__bind(this.onAfterSelect,this);this.select=__bind(this.select,
this);this.injectSearchParams=__bind(this.injectSearchParams,this);this.recommendTemplate="avia-cheapest-result";this.tours=!1;this.selected_key=ko.observable("");this.selected_best=ko.observable(!1);this.showBest=ko.observable(!1);this.creationMoment=moment();this._results={};this.noresults=0===a.length;j={};c=0;for(g=a.length;c<g;c++){f=a[c];h="";u=f.flights;m=0;for(n=u.length;m<n;m++){e=u[m];s=e.flightParts;p=0;for(q=s.length;p<q;p++)e=s[p],h+=e.datetimeBegin,h+=e.datetimeEnd}j[h]?j[h].price>f.price&&
(j[h]=f):j[h]=f}c=[];for(h in j)f=j[h],c.push(f);j=0;for(m=c.length;j<m;j++)f=c[j],h=f.price+"_"+f.valCompany,this._results[h]?this._results[h].push(f):(f=new AviaResult(f,this),this._results[h]=f,f.key=h);this.cheapest=ko.observable();this.best=ko.observable();this.data=[];this.numResults=ko.observable(0);this.filtersConfig=!1;j=this._results;for(h in j)f=j[h],f.sort(),f.removeSimilar(),this.data.push(f);this.data.sort(function(a,b){return a.price-b.price});this.postFilters()}c.prototype.injectSearchParams=
function(a){this.rawSP=a;this.arrivalCity=a.destinations[0].arrival;this.departureCity=a.destinations[0].departure;this.rawDate=moment(new Date(a.destinations[0].date+"+04:00"));this.dateHeadingText=this.date=dateUtils.formatDayShortMonth(new Date(a.destinations[0].date+"+04:00"));if(this.roundTrip=a.isRoundTrip)return this.rtDate=dateUtils.formatDayShortMonth(new Date(a.destinations[1].date+"+04:00")),this.rawRtDate=moment(new Date(a.destinations[1].date+"+04:00")),this.dateHeadingText+=", "+this.rtDate};
c.prototype.select=function(a){var b;a=a.ribbon?a.data:a;b=$.Deferred();b.done(function(a){var b;b={module:"Avia",type:"avia"};b.searchId=a.cacheId;b.searchKey=a.flightKey();return Utils.toBuySubmit([b])});return this.checkTicket(a,b)};c.prototype.onAfterSelect=function(){if(this._popup)return this._popup.close()};c.prototype.findAndSelect=function(a){var b,c,e,f,h,j,m,p,g,n,q,u,s;e=a.similarityHash();console.log("hash find avia ",e);q=this.data;h=0;for(p=q.length;h<p;h++){a=q[h];u=a.voyages;j=0;
for(g=u.length;j<g;j++)if(f=u[j],f.similarityHash()===e){a.activeVoyage(f);if(!this.roundTrip)return a;b=f.activeBackVoyage().similarityHash();s=f._backVoyages;m=0;for(n=s.length;m<n;m++)if(c=s[m],c.similarityHash()===b)return f.activeBackVoyage(c),a}}return!1};c.prototype.postInit=function(){var a,b,c=this;this.filters=new AviaFiltersT(this);this.filters.serviceClass.selection.subscribe(function(a){if("B"===a)c.showBest(!0);else return c.showBest(!1)});if(this.siblings)return b=_.reduce(this.data,
function(a,b){return a.price<b.price?a:b},this.data[0]),a=_.filter(this.data,function(a){return"B"===a.serviceClass}),a=_.reduce(a,function(a,b){return a.price<b.price?a:b},a[0]),b||(b={price:0}),a||(a={price:0}),this.ESiblings=this.processSiblings(this.siblings.E,b),this.siblings=ko.observable(this.ESiblings)};c.prototype.processSiblings=function(a,b){var c,e,f,h,j,m,p;c=function(a,b){var c,d,e,f,h;h=[];c=e=0;for(f=b.length;e<f;c=++e)d=b[c],h.push(a[c]={price:d,siblings:[]});return h};this.roundTrip?
a[3][3]=Math.ceil(b.price/2):a[3]=b.price;if(a[3].length){h=[];j=[];e=m=0;for(p=a.length;m<p;e=++m)f=a[e],f=_.filter(f,function(a){return!1!==a}),f=f.length?_.min(f):!1,j[e]=f;c(h,j,!0);e=j=0;for(m=a.length;j<m;e=++j)f=a[e],c(h[e].siblings,f)}else h=[],c(h,a,!0);return new Siblings(h,this.roundTrip,this.rawDate,this.rawRtDate)};c.prototype.hideRecommend=function(a,b){return hideRecomendedBlockTicket.apply(b.currentTarget)};c.prototype.postFilters=function(){var a;a=_.filter(this.data,function(a){return a.visible()});
this.numResults(a.length);this.updateCheapest(a);this.updateBest(a);ko.processAllDeferredBindingUpdates();jsPaneScrollHeight();return ResizeAvia()};c.prototype.updateCheapest=function(a){if(0!==a.length)if(a=_.reduce(a,function(a,c){return a.price<c.price?a:c},a[0]),void 0===this.cheapest())this.cheapest(a);else if(this.cheapest().key!==a.key)return this.cheapest(a)};c.prototype.updateBest=function(a){var b,c,e,f,h,j,m,p,g,n,q;if(0!==a.length){a=_.sortBy(a,function(a){return a.price});j=0;for(g=a.length;j<
g;j++){e=a[j];h=_.sortBy(e.voyages,function(a){return a._duration});m=0;for(n=h.length;m<n;m++)if(f=h[m],f.visible()&&10800>f.maxStopoverLength)if(e.roundTrip){c=_.sortBy(f._backVoyages,function(a){return a._duration});p=0;for(q=c.length;p<q;p++)if(b=c[p],b.visible()&&10800>b.maxStopoverLength){f.activeBackVoyage(b);e.activeVoyage(f);this.setBest(e);return}}else{e.activeVoyage(f);this.setBest(e);return}}return this.setBest(a[0],!0)}};c.prototype.setBest=function(a,b){var c,e,f,h,j,m;null==b&&(b=!1);
e=a.key;f=new AviaResult(a._data,this);m=a._stacked_data;h=0;for(j=m.length;h<j;h++)c=m[h],f.push(c);f.sort();f.removeSimilar();f.best=!0;f.key=e+"_optima";b||(f.voyages=_.filter(f.voyages,function(a){return 10800>a.maxStopoverLength}),_.each(f.voyages,function(a){return a._backVoyages=_.filter(a._backVoyages,function(a){return 10800>a.maxStopoverLength})}));f.chooseStacked(a.activeVoyage());if(void 0===this.best())this.best(f);else if(this.best().key!==f.key)return this.best(f)};c.prototype.filtersRendered=
function(){return ko.processAllDeferredBindingUpdates()};return c}();
AviaSearchParams=function(c){function a(){a.__super__.constructor.apply(this,arguments);this.dep=ko.observable("");this.arr=ko.observable("");this.rt=ko.observable(!0);this.rtDate=ko.observable("");this.passengers=new Passengers;this.adults=this.passengers.adults;this.children=this.passengers.children;this.infants=this.passengers.infants}__extends(a,c);a.prototype.url=function(){var a,c;c="flight/search/BE?";a=[];a.push("destinations[0][departure]="+this.dep());a.push("destinations[0][arrival]="+
this.arr());a.push("destinations[0][date]="+moment(this.date()).format("D.M.YYYY"));this.rt()&&(a.push("destinations[1][departure]="+this.arr()),a.push("destinations[1][arrival]="+this.dep()),a.push("destinations[1][date]="+moment(this.rtDate()).format("D.M.YYYY")));a.push("adt="+this.adults());a.push("chd="+this.children());a.push("inf="+this.infants());c+=a.join("&");window.voyanga_debug("Generated search url",c);return c};a.prototype.key=function(){var a;a=this.dep()+this.arr()+this.date();this.rt()&&
(a+=this.rtDate(),a+="_rt");a+=this.adults();a+=this.children();return a+=this.infants()};a.prototype.getHash=function(){var a;a=[this.dep(),this.arr(),moment(this.date()).format("D.M.YYYY"),this.adults(),this.children(),this.infants()];this.rt()&&a.push(moment(this.rtDate()).format("D.M.YYYY"));a="avia/search/"+a.join("/")+"/";window.voyanga_debug("Generated hash for avia search",a);return a};a.prototype.fromList=function(a){this.dep(a[0]);this.arr(a[1]);this.date(moment(a[2],"D.M.YYYY").toDate());
this.adults(a[3]);this.children(a[4]);this.infants(a[5]);return 7===a.length?(this.rt(!0),this.rtDate(moment(a[6],"D.M.YYYY").toDate())):this.rt(!1)};a.prototype.fromObject=function(a){console.log(a);this.adults(a.adt);this.children(a.chd);this.infants(a.inf);this.rt(a.isRoundTrip);this.dep(a.destinations[0].departure_iata);this.arr(a.destinations[0].arrival_iata);this.date(new Date(a.destinations[0].date));if(this.rt())return this.rtDate(new Date(a.destinations[1].date))};return a}(SearchParams);
var AviaController,__bind=function(c,a){return function(){return c.apply(a,arguments)}},__slice=[].slice;
AviaController=function(){function c(a){this.searchParams=a;this.checkTicketAction=__bind(this.checkTicketAction,this);this.indexAction=__bind(this.indexAction,this);this.handleResults=__bind(this.handleResults,this);this.search=__bind(this.search,this);this.searchAction=__bind(this.searchAction,this);this.api=new AviaAPI;this.routes={"/search/:from/:to/:when/:adults/:children/:infants/:rtwhen/":this.searchAction,"/search/:from/:to/:when/:adults/:children/:infants/":this.searchAction,"":this.indexAction};
this.results=ko.observable();_.extend(this,Backbone.Events)}c.prototype.searchAction=function(){var a;a=1<=arguments.length?__slice.call(arguments,0):[];window.voyanga_debug("AVIA: Invoking searchAction",a);this.searchParams.fromList(a);return this.search()};c.prototype.search=function(){var a=this;return this.api.search(this.searchParams.url(),function(b){var c;try{c=a.handleResults(b)}catch(e){if("404"===e){new ErrorPopup("avia404");return}new ErrorPopup("avia500");return}a.results(c);a.render("results",
{results:a.results});return ko.processAllDeferredBindingUpdates()})};c.prototype.handleResults=function(a){var b;window.voyanga_debug("searchAction: handling results",a);b=new AviaResultSet(a.flights.flightVoyages,a.siblings);b.injectSearchParams(a.searchParams);b.postInit();b.checkTicket=this.checkTicketAction;return b};c.prototype.indexAction=function(){window.voyanga_debug("AVIA: invoking indexAction");return this.render("index",{})};c.prototype.checkTicketAction=function(a,b){var c=this;if(moment().diff(this.results().creationMoment,
"seconds")<AVIA_TICKET_TIMELIMIT)b.resolve(a);else return this.api.search(this.searchParams.url(),function(e){var f;try{f=c.handleResults(e)}catch(h){new ErrorPopup("avia500");return}if(a=f.findAndSelect(a))return b.resolve(a);new ErrorPopup("aviaNoTicketOnValidation","\u0411\u0438\u043b\u0435\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0440\u0443\u0433\u043e\u0439.",!1,function(){});return c.results(f)})};c.prototype.render=function(a,
b){return this.trigger("viewChanged",a,b)};return c}();var AviaModule;AviaModule=function(){function c(){this.panel=new AviaPanel;this.controller=new AviaController(this.panel.sp)}c.prototype.resize=function(){return ResizeAvia()};return c}();
var Voyasha,VoyashaCheapest,VoyashaOptima,VoyashaRich,__bind=function(c,a){return function(){return c.apply(a,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(c,a){function b(){this.constructor=c}for(var d in a)__hasProp.call(a,d)&&(c[d]=a[d]);b.prototype=a.prototype;c.prototype=new b;c.__super__=a.prototype;return c};
Voyasha=function(){function c(a){var b=this;this.toursResultSet=a;this.choose=__bind(this.choose,this);this.handleHotels=__bind(this.handleHotels,this);this.handleAvia=__bind(this.handleAvia,this);this.selected=ko.computed(function(){var a,c,f,h,j;c=[];j=b.toursResultSet.data();f=0;for(h=j.length;f<h;f++)a=j[f],a.isAvia()?c.push(0!==a.results().data.length?b.handleAvia(a):null):c.push(0!==a.results().data().length?b.handleHotels(a):null);return c});this.price=ko.computed(function(){var a,c,f,h,j;
c=0;j=b.selected();f=0;for(h=j.length;f<h;f++)a=j[f],null!=a&&(c+=a.price);return c});this.title=this.getTitle()}c.prototype.handleAvia=function(){throw"Implement me";};c.prototype.handleHotels=function(){throw"Implement me";};c.prototype.choose=function(){var a,b,c,e;e=this.toursResultSet.data();b=0;for(c=e.length;b<c;b++)a=e[b],a.isAvia()?a.select(this.handleAvia(a)):a.select(this.handleHotels(a));return this.toursResultSet.showOverview()};return c}();
VoyashaCheapest=function(c){function a(){this.handleHotels=__bind(this.handleHotels,this);this.handleAvia=__bind(this.handleAvia,this);this.getTitle=__bind(this.getTitle,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,c);a.prototype.getTitle=function(){return"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439"};a.prototype.handleAvia=function(a){return a.results().cheapest()};a.prototype.handleHotels=function(a){var c,e,f,h,j,m,p,g;c=a.results().data();
if(0!==c.length){c={roomSet:c[0].roomSets()[0],hotel:c[0],price:c[0].roomSets()[0].discountPrice};p=a.results().data();f=0;for(j=p.length;f<j;f++){a=p[f];g=a.roomSets();h=0;for(m=g.length;h<m;h++)e=g[h],e.price<c.roomSet.discountPrice&&(c.roomSet=e,c.hotel=a,c.price=c.roomSet.discountPrice)}return c}};return a}(Voyasha);
VoyashaOptima=function(c){function a(){this.handleHotels=__bind(this.handleHotels,this);this.handleAvia=__bind(this.handleAvia,this);this.getTitle=__bind(this.getTitle,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,c);a.prototype.getTitle=function(){return"\u041e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442"};a.prototype.handleAvia=function(a){return a.results().best()};a.prototype.handleHotels=function(a){var c,e;a=
a.results().data();c={roomSet:a[0].roomSets()[0],hotel:a[0],price:a[0].roomSets()[0].discountPrice};e=_.filter(a,function(a){return 6>=a.distanceToCenter});e=_.filter(e,function(a){return 3===a.starsNumeric||4===a.starsNumeric});e.sort(function(a,b){return a.roomSets()[0].discountPrice-b.roomSets()[0].discountPrice});e.length&&(a=e[0],c={roomSet:a.roomSets()[0],hotel:a,price:a.roomSets()[0].discountPrice});e=_.filter(e,function(a){return 2<a.rating});e.length&&(a=e[0],c={roomSet:a.roomSets()[0],hotel:a,
price:a.roomSets()[0].discountPrice});return c};return a}(Voyasha);
VoyashaRich=function(c){function a(){this.handleHotels=__bind(this.handleHotels,this);this.handleAvia=__bind(this.handleAvia,this);this.getTitle=__bind(this.getTitle,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,c);a.prototype.getTitle=function(){return"\u0420\u043e\u0441\u043a\u043e\u0448\u043d\u044b\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442"};a.prototype.handleAvia=function(a){var c,e,f,h,j,m;h=a.results().data;c=h[0].directRating();e=h[0].price;f=h[0];j=0;for(m=
h.length;j<m;j++)a=h[j],a.directRating()<c?(c=a.directRating(),e=a.price,f=a):a.directRating()===c&&a.price<e&&(e=a.price,f=a);return f};a.prototype.getRating=function(a){var c;c=Math.abs(4.5-a.starsNumeric);c="-"===a.rating?c+4:c+Math.abs(4-a.rating);3<a.distanceToCenter&&(c*=4);return c};a.prototype.handleHotels=function(a){var c,e=this;a=a.results().data();c={roomSet:a[0].roomSets()[0],hotel:a[0],price:a[0].roomSets()[0].discountPrice};a.sort(function(a,b){var c,d;c=e.getRating(a);d=e.getRating(b);
return a.roomSets()[0].discountPrice*c-b.roomSets()[0].discountPrice*d});a=a[0];return c={roomSet:a.roomSets()[0],hotel:a,price:a.roomSets()[0].discountPrice}};return a}(Voyasha);var Timeline,__bind=function(c,a){return function(){return c.apply(a,arguments)}};
Timeline=function(){function c(a){var b=this;this.toursData=a;this.scrollTimelineLeft=__bind(this.scrollTimelineLeft,this);this.scrollTimelineRight=__bind(this.scrollTimelineRight,this);this.showTimeline=__bind(this.showTimeline,this);this.showConditions=__bind(this.showConditions,this);this.timelinePosition=ko.observable(0);this.termsActive=!1;this.data=ko.computed(function(){var a,c,f,h,j,m,p,g,n,q,u,s;c=[];a={};h={};q=b.toursData();f=0;for(g=q.length;f<g;f++)j=q[f],n={start:moment(j.timelineStart()).clone().hours(0).minutes(5),
end:moment(j.timelineEnd()).clone().hours(0).minutes(5)},c.push(n),j.isHotel()?h[n.start.format("M.D")]={duration:n.end.diff(n.start,"days"),item:j}:a[n.start.format("M.D")]={duration:n.end.diff(n.start,"days"),item:j};n=c[0].start;c=c[c.length-1].end;j=b.toursData()[0];j.isAvia()&&j.rt()&&(c=moment(j.rtTimelineStart()).clone().hours(0).minutes(5),a[c.format("M.D")]={duration:1,item:j});c=c.diff(n,"days");j=n.clone().add("days",c/2);23>c&&(c=23);g=Math.round(c/2);u=Math.round(c/2);q=[];f=c=!1;for(n=
s=2;2<=g?s<=g:s>=g;n=2<=g?++s:--s){n={date:j.clone().subtract("days",g-n+1)};n.day=n.date.format("D");n.hotel=!1;n.avia=!1;n.first=!1;m=a[n.date.format("M.D")];if(p=h[n.date.format("M.D")])n.hotel=p,!1===f&&(f=n.first=!0);m&&(n.avia=m,!1===c&&(c=n.first=!0));q.push(n)}for(n=g=0;0<=u?g<=u:g>=u;n=0<=u?++g:--g){n={date:j.clone().add("days",n)};n.day=n.date.format("D");n.hotel=!1;n.avia=!1;n.first=!1;m=a[n.date.format("M.D")];if(p=h[n.date.format("M.D")])n.hotel=p,!1===f&&(f=n.first=!0);m&&(n.avia=m,
!1===c&&(c=n.first=!0));q.push(n)}return q})}c.prototype.showConditions=function(a,b){var c,e=this;c=$(b.currentTarget);if(!c.hasClass("active"))return $(".btn-timeline-and-condition a").removeClass("active"),c.addClass("active"),$(".divTimeline").addClass("hide"),$(".divTimeline").animate({top:"-"+$(".divTimeline").height()+"px"},400,function(){$(".slide-tmblr").css("overflow","visible");return e.termsActive=!0}),$(".divCondition").animate({top:"0px"},400).removeClass("hide")};c.prototype.showTimeline=
function(a,b){var c,e=this;c=$(b.currentTarget);if(!c.hasClass("active"))return $(".slide-tmblr").css("overflow","hidden"),$(".btn-timeline-and-condition a").removeClass("active"),c.addClass("active"),$(".divTimeline").animate({top:"0px"},400).removeClass("hide"),$(".divCondition").animate({top:"64px"},400,function(){return e.termsActive=!1}).addClass("hide")};c.prototype.scrollTimelineRight=function(){var a;a=32*this.data().length-736;if(!(0>a)&&(this.timelinePosition(this.timelinePosition()+32),
this.timelinePosition()>a))return this.timelinePosition(a)};c.prototype.scrollTimelineLeft=function(){if(!(0>32*this.data().length-736)&&(this.timelinePosition(this.timelinePosition()-32),0>this.timelinePosition()))return this.timelinePosition(0)};return c}();
var TourPanel,TourPanelSet,__bind=function(c,a){return function(){return c.apply(a,arguments)}},__slice=[].slice,__hasProp={}.hasOwnProperty,__extends=function(c,a){function b(){this.constructor=c}for(var d in a)__hasProp.call(a,d)&&(c[d]=a[d]);b.prototype=a.prototype;c.prototype=new b;c.__super__=a.prototype;return c};
TourPanelSet=function(){function c(){this.afterRender=__bind(this.afterRender,this);this.calendarHidden=__bind(this.calendarHidden,this);this.setDate=__bind(this.setDate,this);this.showPanelCalendar=__bind(this.showPanelCalendar,this);this.addPanel=__bind(this.addPanel,this);this.isFirst=__bind(this.isFirst,this);this.deletePanel=__bind(this.deletePanel,this);this.saveStartParams=__bind(this.saveStartParams,this);this.navigateToNewSearchMainPage=__bind(this.navigateToNewSearchMainPage,this);this.navigateToNewSearch=
__bind(this.navigateToNewSearch,this);var a=this;_.extend(this,Backbone.Events);window.voyanga_debug("Init of TourPanelSet");this.template="tour-panel-template";this.sp=new TourSearchParams;this.prevPanel="hotels";this.nextPanel="avia";this.icon="constructor-ico";this.mainLabel='\u0421\u043f\u043b\u0430\u043d\u0438\u0440\u0443\u0439 \u0441\u0432\u043e\u0435 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435 <img src="/themes/v2/images/saleTitle.png">';this.indexMode=!0;this.startCity=
this.sp.startCity;this.startCityReadable=ko.observable("");this.startCityReadableGen=ko.observable("");this.startCityReadableAcc=ko.observable("");this.panels=ko.observableArray([]);this.activeCity=ko.observable("");this.sp.calendarActivated=ko.observable(!0);this.calendarText=ko.computed(function(){var b;b="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u044b \u043f\u0440\u0435\u0431\u044b\u0432\u0430\u043d\u0438\u044f \u0432 \u0433\u043e\u0440\u043e\u0434\u0435";return b=a.activeCity()?
b+(" "+a.activeCity()):"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434"});this.lastPanel=null;this.i=0;this.addPanel();this.activeCalendarPanel=ko.observable(this.panels()[0]);this.height=ko.computed(function(){return 64*a.panels().length+"px"});this.heightPanelSet=ko.computed(function(){return 64*a.panels().length});this.isMaxReached=ko.computed(function(){return 4<a.panels().length});this.calendarValue=ko.computed(function(){return{twoSelect:!0,hotels:!0,from:a.activeCalendarPanel().checkIn(),
to:a.activeCalendarPanel().checkOut(),activeSearchPanel:a.activeCalendarPanel()}});this.formFilled=ko.computed(function(){var b;b=a.startCity();_.each(a.panels(),function(a){return b=b&&a.formFilled()});return b});this.formNotFilled=ko.computed(function(){return!a.formFilled()})}c.prototype.navigateToNewSearch=function(){if(!this.formNotFilled())return _.last(this.panels()).handlePanelSubmit(),_.last(this.panels()).minimizedCalendar(!0)};c.prototype.navigateToNewSearchMainPage=function(){if(!this.formNotFilled())return this.selectedParams&&
(_.last(this.panels()).selectedParams=this.selectedParams),_.last(this.panels()).handlePanelSubmit(!1)};c.prototype.saveStartParams=function(){return _.last(this.panels()).saveStartParams()};c.prototype.deletePanel=function(a){var b;console.log("Panels before",this.panels());console.log("Destinations before",this.sp.destinations());console.log("Elem",a);b=this.panels.indexOf(a);this.panels.remove(a);this.sp.destinations.splice(b,1);console.log("Panels after",this.panels());console.log("Destinations after",
this.sp.destinations());return _.last(this.panels()).isLast(!0)};c.prototype.isFirst=function(){return 1===this.i};c.prototype.addPanel=function(){var a,b,c=this;this.sp.destinations.push(new DestinationSearchParams);_.last(this.panels())&&(_.last(this.panels()).isLast(!1),b=_.last(this.panels()));a=new TourPanel(this.sp,this.i,0===this.i);a.on("tourPanel:showCalendar",function(){var b;b=1<=arguments.length?__slice.call(arguments,0):[];c.activeCity(a.cityReadable());return c.showPanelCalendar(b)});
a.on("tourPanel:hasFocus",function(){var b;b=1<=arguments.length?__slice.call(arguments,0):[];c.activeCity(a.cityReadable());return c.showPanelCalendar(b)});b&&(a.prevSearchPanel(b),b.nextSearchPanel(a));this.panels.push(a);this.lastPanel=a;this.i=this.panels().length;return VoyangaCalendarStandart.clear()};c.prototype.showPanelCalendar=function(a){return this.activeCalendarPanel(a[0])};c.prototype.setDate=function(a){var b;if(a&&a.length&&(this.activeCalendarPanel().checkIn(a[0]),b=this.activeCalendarPanel().checkIn(),
1<a.length&&(a[0]<a[1]?this.activeCalendarPanel().checkOut(a[1]):this.activeCalendarPanel().checkOut(""),b<this.activeCalendarPanel().checkOut()&&(b=this.activeCalendarPanel().checkOut())),this.activeCalendarPanel().nextSearchPanel()&&b>this.activeCalendarPanel().nextSearchPanel().checkIn()))return this.activeCalendarPanel().nextSearchPanel().checkIn(null),this.activeCalendarPanel().nextSearchPanel().checkOut(null)};c.prototype.calendarHidden=function(){return this.activeCalendarPanel().calendarHidden()};
c.prototype.afterRender=function(){return resizePanel()};c.prototype.beforeRemove=function(a){return $(a).hasClass("panel")?($(a).remove(),resizePanel()):$(a).remove()};return c}();
TourPanel=function(c){function a(b,c,e){this.checkOutHtml=__bind(this.checkOutHtml,this);this.checkInHtml=__bind(this.checkInHtml,this);this.showCalendar=__bind(this.showCalendar,this);this.saveStartParams=__bind(this.saveStartParams,this);this.handlePanelSubmit=__bind(this.handlePanelSubmit,this);this.handlePanelSubmitToMain=__bind(this.handlePanelSubmitToMain,this);var f=this;a.__super__.constructor.call(this,e,!0);this.toggleSubscribers.dispose();_.extend(this,Backbone.Events);this.hasfocus=ko.observable(!1);
this.sp=b;this.isLast=ko.observable(!0);this.peopleSelectorVM=new HotelPeopleSelector(b);this.destinationSp=_.last(b.destinations());this.city=this.destinationSp.city;this.checkIn=this.destinationSp.dateFrom;this.checkOut=this.destinationSp.dateTo;this.cityReadable=ko.observable("");this.cityReadableGen=ko.observable("");this.cityReadableAcc=ko.observable("");this.oldCalendarState=this.minimizedCalendar();this.formFilled=ko.computed(function(){return f.city()&&f.checkIn()&&f.checkOut()});this.formNotFilled=
ko.computed(function(){return!f.formFilled()});this.maximizedCalendar=ko.computed(function(){return 0<f.city().length});this.calendarText=ko.computed(function(){return"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u043f\u043e\u0435\u0437\u0434\u043a\u0438 "});this.hasfocus.subscribe(function(){return f.trigger("tourPanel:hasFocus",f)});this.city.subscribe(function(){if(f.sp.calendarActivated())return f.showCalendar()})}__extends(a,c);a.prototype.handlePanelSubmitToMain=
function(){return handlePanelSubmit(!1)};a.prototype.handlePanelSubmit=function(a){null==a&&(a=!0);if(a)return app.navigate(this.sp.getHash(),{trigger:!0});a="/#"+this.sp.getHash();this.startParams===a&&(a+="eventId/"+this.selectedParams.eventId);return window.location.href=a};a.prototype.saveStartParams=function(){return this.startParams="/#"+this.sp.getHash()};a.prototype.close=function(){$(document.body).unbind("mousedown");$(".how-many-man .btn").removeClass("active");$(".how-many-man .content").removeClass("active");
return $(".how-many-man").find(".popup").removeClass("active")};a.prototype.showFromCityInput=function(a,c){var e,f;c.stopPropagation();f=$(".cityStart").find(".second-path");f.data("old",f.val());e=f.closest(".cityStart");e.closest(".tdCityStart").animate({width:"+=130",300:300});e.closest(".tdCityStart").find(".bgInput").animate({width:"+=150",300:300});e.closest(".tdCityStart").next().find(".data").animate({width:"-=130",300:300});e.find(".startInputTo").show();return e.find(".cityStart").animate({width:"261px"},
300,function(){return e.find(".startInputTo").find("input").focus().select()})};a.prototype.hideFromCityInput=function(a,c){return hideFromCityInput(a,c)};a.prototype.showCalendar=function(){$(".calenderWindow").show();this.trigger("tourPanel:showCalendar",this);if(this.minimizedCalendar())return ResizeAvia(),this.minimizedCalendar(!1)};a.prototype.checkInHtml=function(){return this.checkIn()?dateUtils.formatHtmlDayShortMonth(this.checkIn()):""};a.prototype.checkOutHtml=function(){return this.checkOut()?
dateUtils.formatHtmlDayShortMonth(this.checkOut()):""};return a}(SearchPanel);$(document).on("keyup change","input.second-path",function(c){var a,b;a=$(this).val();b=$(this).siblings("input.input-path");if(8===c.keyCode||3>a.length)return b.val("")});
$(document).on("keyup change",".cityStart input.second-path",function(c){var a;a=$(".from.active .second-path");if(13===c.keyCode&&a.parent().hasClass("overflow"))return a.parent().animate({width:"271px"},300,function(){$(this).removeClass("overflow");return $(".from.active .second-path").focus()}),$(".cityStart").animate({width:"115px"},300),$(".cityStart").find(".startInputTo").animate({opacity:"1"},300,function(){return $(this).hide()})});
var DestinationSearchParams,RoomsSearchParams,TourEntry,TourSearchParams,TourTripResultSet,ToursAviaResultSet,ToursHotelsResultSet,ToursOverviewVM,ToursResultSet,__bind=function(c,a){return function(){return c.apply(a,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(c,a){function b(){this.constructor=c}for(var d in a)__hasProp.call(a,d)&&(c[d]=a[d]);b.prototype=a.prototype;c.prototype=new b;c.__super__=a.prototype;return c};
TourEntry=function(){function c(){this.beforeRender=__bind(this.beforeRender,this);this.rt=__bind(this.rt,this);this.savings=__bind(this.savings,this);this.maxPriceHtml=__bind(this.maxPriceHtml,this);this.minPriceHtml=__bind(this.minPriceHtml,this);this.priceHtml=__bind(this.priceHtml,this);this.price=__bind(this.price,this);this.isHotel=__bind(this.isHotel,this);this.isAvia=__bind(this.isAvia,this);_.extend(this,Backbone.Events);this.savingsWithAviaOnly=!1}c.prototype.isAvia=function(){return this.avia};
c.prototype.isHotel=function(){return this.hotels};c.prototype.price=function(){return null===this.selection()?0:this.selection().price};c.prototype.priceHtml=function(){return this.noresults?"\u041d\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432":null===this.selection()?"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e":this.price()+'<span class="rur">o</span>'};c.prototype.minPriceHtml=function(){return this.minPrice()+'<span class="rur">o</span>'};c.prototype.maxPriceHtml=
function(){return this.maxPrice()+'<span class="rur">o</span>'};c.prototype.savings=function(){this.selection();return 0};c.prototype.rt=function(){return!1};c.prototype.beforeRender=function(){};return c}();
ToursAviaResultSet=function(c){function a(b,c){this.afterRender=__bind(this.afterRender,this);this.beforeRender=__bind(this.beforeRender,this);this.rt=__bind(this.rt,this);this.timelineStartDate=__bind(this.timelineStartDate,this);this.timelineEndDate=__bind(this.timelineEndDate,this);this.rt=__bind(this.rt,this);this.rtTimelineStart=__bind(this.rtTimelineStart,this);this.timelineEnd=__bind(this.timelineEnd,this);this.timelineStart=__bind(this.timelineStart,this);this.dateHtml=__bind(this.dateHtml,
this);this.dateClass=__bind(this.dateClass,this);this.additionalText=__bind(this.additionalText,this);this.destinationText=__bind(this.destinationText,this);this.maxPrice=__bind(this.maxPrice,this);this.minPrice=__bind(this.minPrice,this);this.numAirlines=__bind(this.numAirlines,this);this.overviewPeople=__bind(this.overviewPeople,this);this.overviewText=__bind(this.overviewText,this);this.doNewSearch=__bind(this.doNewSearch,this);this.toBuyRequest=__bind(this.toBuyRequest,this);this._selectResult=
__bind(this._selectResult,this);this.select=__bind(this.select,this);this.findAndSelect=__bind(this.findAndSelect,this);this.newResults=__bind(this.newResults,this);a.__super__.constructor.apply(this,arguments);this.api=new AviaAPI;this.template="avia-results";this.overviewTemplate="tours-overview-avia-no-selection";this.panel=new AviaPanel;this.panel.handlePanelSubmit=this.doNewSearch;this.panel.sp.fromObject(c);this.panel.original_template=this.panel.template;this.results=ko.observable();this.selection=
ko.observable(null);this.newResults(b,c);this.data={results:this.results}}__extends(a,c);a.prototype.newResults=function(a,c){var e,f=this;this.rawSP=c;e=new AviaResultSet(a);e.injectSearchParams(c);e.postInit();e.recommendTemplate="avia-tours-recommend";e.tours=!0;e.select=function(a){f.select(a,e);return f.trigger("next")};this.avia=!0;this.noresults=e.noresults;return this.results(e)};a.prototype.findAndSelect=function(a){a=this.results().findAndSelect(a);if(!a)return!1;this._selectResult(a);return a};
a.prototype.select=function(a){a.ribbon&&(a=a.data);return this._selectResult(a)};a.prototype._selectResult=function(a){this.results().selected_key(a.key);a.parent.filtersConfig=a.parent.filters.getConfig();this.results().selected_best(a.best|0);this.overviewTemplate="tours-overview-avia-ticket";return this.selection(a)};a.prototype.toBuyRequest=function(){var a;a={type:"avia"};a.searchId=this.selection().cacheId;a.searchKey=this.selection().flightKey();a.adults=this.rawSP.adt;a.children=this.rawSP.chd;
a.infants=this.rawSP.inf;return a};a.prototype.doNewSearch=function(){var a=this;return this.api.search(this.panel.sp.url(),function(c){return a.newResults(c.flights.flightVoyages,c.searchParams)})};a.prototype.overviewText=function(){return"\u041f\u0435\u0440\u0435\u043b\u0435\u0442 "+this.results().departureCity+" &rarr; "+this.results().arrivalCity};a.prototype.overviewPeople=function(){var a;a=this.panel.sp.adults()+this.panel.sp.children()+this.panel.sp.infants();return Utils.wordAfterNum(a,
"\u0447\u0435\u043b\u043e\u0432\u0435\u043a","\u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430","\u0447\u0435\u043b\u043e\u0432\u0435\u043a")};a.prototype.numAirlines=function(){return this.results().filters.airline.options().length};a.prototype.minPrice=function(){return _.reduce(this.results().data,function(a,c){return a.price<c.price?a:c},this.results().data[0]).price};a.prototype.maxPrice=function(){return _.reduce(this.results().data,function(a,c){return a.price>c.price?a:c},this.results().data[0]).price};
a.prototype.destinationText=function(){return"<span class='left-avia-city'>"+this.results().departureCity+"&rarr;</span> <span class='left-avia-city'>"+this.results().arrivalCity+"</span>"};a.prototype.additionalText=function(){return null===this.selection()?"":this.rt()?"":", "+this.selection().departureTime()+" - "+this.selection().arrivalTime()};a.prototype.dateClass=function(){return this.rt()?"blue-two":"blue-one"};a.prototype.dateHtml=function(a){var c,e;null==a&&(a=!1);e=this.selection();null===
e&&(e=this.results().data[0]);c='<div class="day">'+dateUtils.formatHtmlDayShortMonth(e.departureDate());c+="</div>";if(a)return c;this.rt()&&(c=c+'<div class="day">'+dateUtils.formatHtmlDayShortMonth(e.rtDepartureDate()),c+="</div>");return c};a.prototype.timelineStart=function(){var a;a=this.selection();null===a&&(a=this.results().data[0]);return a.departureDate()};a.prototype.timelineEnd=function(){var a;a=this.selection();null===a&&(a=this.results().data[0]);return a.arrivalDate()};a.prototype.rtTimelineStart=
function(){var a;a=this.selection();null===a&&(a=this.results().data[0]);return a.rtDepartureDate()};a.prototype.rt=function(){var a;a=this.selection();null===a&&(a=this.results().data[0]);return a.roundTrip};a.prototype.timelineEndDate=function(){var a;a=this.selection();null===a&&(a=this.results().data[0]);return a.arrivalDate()};a.prototype.timelineStartDate=function(){var a;a=this.selection();null===a&&(a=this.results().data[0]);return a.departureDate()};a.prototype.rt=function(){return this.results().roundTrip};
a.prototype.beforeRender=function(){if(this.results().selectedKey)return this.results().filters.getConfig(this.results().filtersConfig)};a.prototype.afterRender=function(){if(this.results()&&(console.log("avia after rend"),this.results().selected_key))return console.log("Yes, have selected"),window.setTimeout(function(){if($(".ticket-content .pressButton.selected").parent().parent().parent().parent().length)return Utils.scrollTo($(".ticket-content .pressButton.selected").parent().parent().parent().parent())},
50)};return a}(TourEntry);
ToursHotelsResultSet=function(c){function a(b,c){this.savings=__bind(this.savings,this);this.afterRender=__bind(this.afterRender,this);this.beforeRender=__bind(this.beforeRender,this);this.timelineEndDate=__bind(this.timelineEndDate,this);this.timelineStartDate=__bind(this.timelineStartDate,this);this.timelineEnd=__bind(this.timelineEnd,this);this.timelineStart=__bind(this.timelineStart,this);this.dateHtml=__bind(this.dateHtml,this);this.dateClass=__bind(this.dateClass,this);this.additionalText=__bind(this.additionalText,
this);this.price=__bind(this.price,this);this.destinationText=__bind(this.destinationText,this);this.maxPrice=__bind(this.maxPrice,this);this.minPrice=__bind(this.minPrice,this);this.numHotels=__bind(this.numHotels,this);this.overviewPeople=__bind(this.overviewPeople,this);this.overviewText=__bind(this.overviewText,this);this.doNewSearch=__bind(this.doNewSearch,this);this.toBuyRequest=__bind(this.toBuyRequest,this);this._selectRoomSet=__bind(this._selectRoomSet,this);this.select=__bind(this.select,
this);this.findAndSelectSame=__bind(this.findAndSelectSame,this);this.findAndSelect=__bind(this.findAndSelect,this);this.newResults=__bind(this.newResults,this);a.__super__.constructor.apply(this,arguments);this.api=new HotelsAPI;this.panel=new HotelsPanel;this.panel.handlePanelSubmit=this.doNewSearch;this.panel.sp.fromObject(c);this.panel.original_template=this.panel.template;this.overviewTemplate="tours-overview-hotels-no-selection";this.template="hotels-results";this.activeHotel=ko.observable(0);
this.selection=ko.observable(null);this.results=ko.observable();this.data={results:this.results};this.savingsWithAviaOnly=!0;this.newResults(b,c)}__extends(a,c);a.prototype.newResults=function(a,c){var e,f=this;this.rawSP=c;e=new HotelsResultSet(a,c,this.activeHotel);e.tours(!0);e.postInit();e.select=function(a){a.parent=e;a.oldPageTop=$("html").scrollTop()|$("body").scrollTop();a.off("back");a.on("back",function(){return f.trigger("setActive",f,!1,!1,a.oldPageTop,function(){return a.parent.showFullMap()?
a.parent.showFullMapFunc(null,null,!0):Utils.scrollTo("#hotelResult"+a.hotelId)})});a.off("select");a.on("select",function(a){f.select(a);return f.trigger("next")});return f.trigger("setActive",{data:a,template:"hotels-info-template",parent:f})};e.selectFromPopup=function(a){a.parent=e;a.activePopup.close();a.oldPageTop=$("html").scrollTop()|$("body").scrollTop();a.off("back");a.on("back",function(){return f.trigger("setActive",f,!1,!1,a.oldPageTop,function(){if(!a.parent.showFullMap())return Utils.scrollTo("#hotelResult"+
a.hotelId)})});a.off("select");a.on("select",function(a){f.select(a);return f.trigger("next")});return f.trigger("setActive",{data:a,template:"hotels-info-template",parent:f})};this.hotels=!0;this.selection(null);this.noresults=e.noresults;return this.results(e)};a.prototype.findAndSelect=function(a){console.log("find THRS ",a);a.roomSet?a=this.results().findAndSelect(ko.utils.unwrapObservable(a.roomSet)):(console.log(ko.utils.unwrapObservable(a.roomSets)),a=this.results().findAndSelect(ko.utils.unwrapObservable(a.roomSets)[0]));
return!a?(console.log("not found =(",a),!1):this._selectRoomSet(a)};a.prototype.findAndSelectSame=function(a){var c;console.log("find THRS ",a);a.roomSet?(console.log("inif"),c=this.results().findAndSelectSame(ko.utils.unwrapObservable(a.roomSet))):(console.log("inelse"),console.log(ko.utils.unwrapObservable(a.roomSets)),c=this.results().findAndSelectSame(ko.utils.unwrapObservable(a.roomSets)[0]));console.log("ret?",c);c||(console.log("same not found and find by stars and coords"),c=this.results().findAndSelectSameParams(a.categoryId,
a.getLatLng()));return this._selectRoomSet(c)};a.prototype.select=function(a){if(null!=a)return this._selectRoomSet(a.roomSet)};a.prototype._selectRoomSet=function(a){var c;c=a.parent;c.parent=this.results();this.activeHotel(c.hotelId);this.overviewTemplate="tours-overview-hotels-ticket";this.selection({roomSet:a,hotel:c});c.parent.filtersConfig=c.parent.filters.getConfig();return c.parent.pagesLoad=c.parent.showParts()};a.prototype.toBuyRequest=function(){var a,c,e,f,h;a={type:"hotel"};a.searchId=
this.selection().hotel.cacheId;a.searchKey=this.selection().roomSet.resultId;a.adults=0;a.age=!1;a.cots=0;h=this.rawSP.rooms;e=0;for(f=h.length;e<f;e++)c=h[e],a.adults+=1*c.adultCount,c.childAge&&(a.age=c.childAgeage),a.cots+=1*c.cots;return a};a.prototype.doNewSearch=function(){var a=this;return this.api.search(this.panel.sp.url(),function(c){c.searchParams.cacheId=c.cacheId;return a.newResults(c,c.searchParams)})};a.prototype.overviewText=function(){return this.destinationText()};a.prototype.overviewPeople=
function(){var a;a=this.panel.sp.overall();return Utils.wordAfterNum(a,"\u0447\u0435\u043b\u043e\u0432\u0435\u043a","\u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430","\u0447\u0435\u043b\u043e\u0432\u0435\u043a")+", "+this.results().wordDays};a.prototype.numHotels=function(){return this.results().data().length};a.prototype.minPrice=function(){return this.results().minPrice};a.prototype.maxPrice=function(){return this.results().maxPrice};a.prototype.destinationText=function(){return this.noresults?
this.rawSP.cityFull.caseNom:"<span class='hotel-left-long'>\u041e\u0442\u0435\u043b\u044c \u0432 "+this.rawSP.cityFull.casePre+"</span><span class='hotel-left-short'>"+this.rawSP.cityFull.caseNom+"</span>"};a.prototype.price=function(){return null===this.selection()?0:this.selection().roomSet.price};a.prototype.additionalText=function(){return null===this.selection()?"":", "+this.selection().hotel.hotelName};a.prototype.dateClass=function(){return"orange-two"};a.prototype.dateHtml=function(a){var c;
null==a&&(a=!1);c='<div class="day">'+dateUtils.formatHtmlDayShortMonth(this.results().checkIn);c+="</div>";if(a)return c;c=c+'<div class="day">'+dateUtils.formatHtmlDayShortMonth(this.results().checkOut);return c+"</div>"};a.prototype.timelineStart=function(){return this.results().checkIn};a.prototype.timelineEnd=function(){return this.results().checkOut};a.prototype.timelineStartDate=function(){return this.results().checkIn._d};a.prototype.timelineEndDate=function(){return this.results().checkOut._d};
a.prototype.beforeRender=function(){console.log("beforeRender hotels");if(this.results())return this.results().toursOpened=!0,this.activeHotel()?(this.results().filters.setConfig(this.results().filtersConfig),this.results().showParts(this.results().pagesLoad)):this.results().postFilters()};a.prototype.afterRender=function(){if(this.results()&&this.activeHotel())return window.setTimeout(function(){if($(".hotels-tickets .pressButton.selected").parent().parent().parent().parent().length)return Utils.scrollTo($(".hotels-tickets .pressButton.selected").parent().parent().parent().parent())},
50)};a.prototype.savings=function(){return null===this.selection()?0:this.selection().roomSet.price-this.selection().roomSet.discountPrice};return a}(TourEntry);
ToursResultSet=function(){function c(a,b){var c,e,f,h,j=this;this.searchParams=b;this.findAndSelectItems=__bind(this.findAndSelectItems,this);this.findAndSelect=__bind(this.findAndSelect,this);this.buy=__bind(this.buy,this);this.showOverview=__bind(this.showOverview,this);this.removeItem=__bind(this.removeItem,this);this.nextEntry=__bind(this.nextEntry,this);this.setActiveTimelineHotels=__bind(this.setActiveTimelineHotels,this);this.setActiveTimelineAvia=__bind(this.setActiveTimelineAvia,this);this.setActive=
__bind(this.setActive,this);_.extend(this,Backbone.Events);this.creationMoment=moment();this.data=ko.observableArray();h=a.allVariants;e=0;for(f=h.length;e<f;e++)if(c=h[e])c=c.flights?new ToursAviaResultSet(c.flights.flightVoyages,c.searchParams):new ToursHotelsResultSet(c,c.searchParams),this.data.push(c),c.on("setActive",function(a,b,c,d,e){null==b&&(b=!0);null==c&&(c=!0);null==d&&(d=0);null==e&&(e=null);return j.setActive(a,b,c,d,e)}),c.on("next",function(){return j.nextEntry()});this.timeline=
new Timeline(this.data);this.selection=ko.observable(this.data()[0]);this.panel=ko.computed({read:function(){j.selection().panel&&(j.panelContainer=j.selection().panel);j.panelContainer.timeline=j.timeline;j.panelContainer.setActiveTimelineAvia=j.setActiveTimelineAvia;j.panelContainer.setActiveTimelineHotels=j.setActiveTimelineHotels;j.panelContainer.onlyTimeline?j.panelContainer.timeline.termsActive=!1:j.panelContainer.onlyTimeline=!1;j.panelContainer.selection=j.selection;j.panelContainer.template=
"tours-panel-template";return j.panelContainer}});this.price=ko.computed(function(){var a,b,c,d,e;b=0;e=j.data();c=0;for(d=e.length;c<d;c++)a=e[c],b+=a.price();return b});this.savings=ko.computed(function(){var a,b,c,d,e,f;a=!1;e=j.data();c=0;for(d=e.length;c<d;c++)b=e[c],b.selection()&&b.isAvia()&&(a=!0);c=0;f=j.data();d=0;for(e=f.length;d<e;d++)b=f[d],b.savingsWithAviaOnly?a&&(c+=b.savings()):c+=b.savings();return c});this.someSegmentsSelected=ko.computed(function(){var a,b,c,d;d=j.data();b=0;for(c=
d.length;b<c;b++)if(a=d[b],a.selection())return!0;return!1});this.someSegmentsSelected.subscribe(function(a){return a?$("#tour-buy-btn").show("fast"):$("#tour-buy-btn").hide("fast")});this.vm=new ToursOverviewVM(this);this.voyashki=[];this.voyashki.push(new VoyashaCheapest(this));this.voyashki.push(new VoyashaOptima(this));this.voyashki.push(new VoyashaRich(this))}c.prototype.setActive=function(a,b,c,e,f){var h=this;null==b&&(b=!0);null==c&&(c=!0);null==e&&(e=0);null==f&&(f=null);$("#loadWrapBgMin").show();
a.overview?($(".btn-timeline-and-condition").hide(),window.toursOverviewActive=!0):window.toursOverviewActive=!1;a.beforeRender&&b&&a.beforeRender();this.trigger("inner-template",a.template);return window.setTimeout(function(){console.log("TourOut",window.hrs.data()[0]);a.afterRender&&c&&(console.log("arin"),a.afterRender());h.selection(a);ko.processAllDeferredBindingUpdates();ResizeAvia();$("#loadWrapBgMin").hide();!1!==e&&Utils.scrollTo(e,!1);if(f)return f()},100)};c.prototype.setActiveTimelineAvia=
function(a){return this.setActive(a.avia.item)};c.prototype.setActiveTimelineHotels=function(a){return this.setActive(a.hotel.item)};c.prototype.nextEntry=function(){var a,b,c,e;e=this.data();b=0;for(c=e.length;b<c;b++)if(a=e[b],!a.selection()){this.setActive(a);return}return this.showOverview()};c.prototype.removeItem=function(a,b){var c;b.stopPropagation();if(!(2>this.data().length)&&(c=this.data.indexOf(a),-1!==c&&(this.data.splice(c,1),a===this.selection())))return this.setActive(this.data()[0])};
c.prototype.showOverview=function(){var a,b=this;a={onlyTimeline:!0,calendarHidden:function(){return!0},calendarValue:ko.observable({values:[]})};this.setActive({template:"tours-overview",data:this,overview:!0,panel:a});ResizeAvia();return window.setTimeout(function(){var a,c,f,h,j,m,p,g,n,q,u;console.log("after render tours all tour page");console.log(b.data());c=[];q=b.data();m=0;for(g=q.length;m<g;m++){j=q[m];if(j.isAvia()){console.log("avia",j.data.results(),j.rawSP);f=[];u=j.rawSP.destinations;
p=0;for(n=u.length;p<n;p++)h=u[p],a={type:"flight",description:h.departure+" || "+h.arrival,cityFrom:h.departure_iata,cityTo:h.arrival_iata},a.dayStart=moment(h.date)._d,a.dayEnd=moment(h.date)._d,f.push(a);j.selection()&&(console.log("select:",j.selection()),a=j.selection(),f[0].dayEnd=a.arrivalDate(),a.roundTrip&&(f[1].dayEnd=a.rtArrivalDate()),console.log("city:",a.arrivalCity(),"date:",a.arrivalDate()));h=0;for(p=f.length;h<p;h++)a=f[h],c.push(a)}j.isHotel()&&(console.log("hotel",j.data.results(),
j.rawSP),f=moment(j.rawSP.checkIn).add("h",8),a=moment(j.rawSP.checkIn).add("d",j.rawSP.duration),f={dayStart:f._d,dayEnd:a._d,type:"hotel",description:"",city:j.rawSP.city},j.selection()&&(console.log("select:",j.selection()),f.description=j.selection().hotel.hotelName),c.push(f))}c.sort(function(a,b){return a.dayStart>b.dayStart?1:a.dayStart<b.dayStart?-1:0});console.log(c);VoyangaCalendarTimeline.calendarEvents=c;VoyangaCalendarTimeline.jObj="#voyanga-calendar-timeline";return VoyangaCalendarTimeline.init()},
1E3)};c.prototype.buy=function(){var a;a=$.Deferred();a.done(function(a){var c,e,f,h;c=[];h=a.data();e=0;for(f=h.length;e<f;e++)a=h[e],a.selection()&&(c.push({module:"Tours"}),c.push(a.toBuyRequest()));return Utils.toBuySubmit(c)});return this.checkTicket(this.data(),a)};c.prototype.findAndSelect=function(a){var b,c,e,f,h;console.log("findAndSelect");e=!0;c=f=0;for(h=a.length;f<h;c=++f)b=a[c],this.data()[c].findAndSelect(b.selection())||(e=!1);return e};c.prototype.findAndSelectItems=function(a){var b,
c,e,f,h,j;console.log("findAndSelectItems",a);f=!0;this.data.sort(function(a,b){var c,d,e,f;c=dateUtils.formatDayMonthYear(a.timelineStartDate());d=dateUtils.formatDayMonthYear(b.timelineStartDate());return c===d&&a.isAvia()!==b.isAvia()?null!=(e=a.timelineEndDate()>b.timelineEndDate())?e:NaN:null!=(f=a.timelineStartDate()>b.timelineStartDate())?f:NaN});h=this.data();c=0;for(e=h.length;c<e;c++)b=h[c],console.log("ts entry",b.timelineStart());console.log("allTs",this.data());c=h=0;for(j=a.length;h<
j;c=++h)b=a[c],console.log("findAndSelectItems entry",b," in ",c,this.data()[c]),this.data()[c].isAvia()?(e=this.data()[c].findAndSelect(this.data()[c].results().cheapest()),e||(f=!1,console.log("false res1:",e,this.data()[c],this.data()[c].results().cheapest()))):(e=this.data()[c].findAndSelectSame(b),e||(f=!1,console.log("false res2:",e,this.data()[c],b)));return f};return c}();
DestinationSearchParams=function(){return function(){this.city=ko.observable("");this.dateFrom=ko.observable("");this.dateTo=ko.observable("")}}();RoomsSearchParams=function(){return function(){this.adt=ko.observable(2);this.chd=ko.observable(0);this.chdAge=ko.observable(!1);this.cots=ko.observable(!1)}}();
TourSearchParams=function(c){function a(){this.removeItem=__bind(this.removeItem,this);this.addSpRoom=__bind(this.addSpRoom,this);var b=this;a.__super__.constructor.call(this);this.startCity=ko.observable("LED");this.destinations=ko.observableArray([]);this.rooms=ko.observableArray([new SpRoom(this)]);this.overall=ko.computed(function(){var a,c,f,h,j;a=0;j=b.rooms();f=0;for(h=j.length;f<h;f++)c=j[f],a+=c.adults(),a+=c.children();return a});this.adults=ko.computed(function(){var a,c,f,h,j;a=0;j=b.rooms();
f=0;for(h=j.length;f<h;f++)c=j[f],a+=c.adults();return a});this.children=ko.computed(function(){var a,c,f,h,j;a=0;j=b.rooms();f=0;for(h=j.length;f<h;f++)c=j[f],a+=c.children();return a});this.returnBack=ko.observable(1)}__extends(a,c);a.prototype.addSpRoom=function(){return this.rooms.push(new SpRoom(this))};a.prototype.url=function(){var a,c;c="tour/search?";a=[];a.push("start="+this.startCity());_.each(this.destinations(),function(c,d){a.push("destinations["+d+"][city]="+c.city());a.push("destinations["+
d+"][dateFrom]="+moment(c.dateFrom()).format("D.M.YYYY"));return a.push("destinations["+d+"][dateTo]="+moment(c.dateTo()).format("D.M.YYYY"))});_.each(this.rooms(),function(c,d){return a.push(c.getUrl(d))});this.eventId&&a.push("eventId="+this.eventId);c+=a.join("&");window.voyanga_debug("Generated search url for tours",c);return c};a.prototype.key=function(){var a;a=this.startCity();_.each(this.destinations(),function(c){return a+=c.city()+c.dateFrom()+c.dateTo()});_.each(this.rooms(),function(c){return a+=
c.getHash()});return a};a.prototype.getHash=function(){var a,c;c=[this.startCity(),this.returnBack()];_.each(this.destinations(),function(a){console.log("destination",a);c.push(a.city());c.push(moment(a.dateFrom()).format("D.M.YYYY"));return c.push(moment(a.dateTo()).format("D.M.YYYY"))});c.push("rooms");_.each(this.rooms(),function(a){return c.push(a.getHash())});a="tours/search/"+c.join("/")+"/";window.voyanga_debug("Generated hash for tour search",a);return a};a.prototype.fromList=function(a){var c,
e,f,h;window.voyanga_debug("Restoring TourSearchParams from list");this.startCity(a[0]);this.returnBack(a[1]);this.destinations([]);this.rooms([]);e=f=2;for(h=a.length;f<=h&&"rooms"!==a[e];e=f+=3)c=new DestinationSearchParams,c.city(a[e]),c.dateFrom(moment(a[e+1],"D.M.YYYY").toDate()),c.dateTo(moment(a[e+2],"D.M.YYYY").toDate()),this.destinations.push(c);e+=1;for(c=!1;e<a.length;){if("eventId"===a[e]){c=!0;break}f=new SpRoom(this);f.fromList(a[e]);this.rooms.push(f);e++}c&&(console.log("really have oldParams"),
e++,console.log("old params is",a[e]),this.eventId=a[e]);return window.voyanga_debug("Result",this)};a.prototype.fromObject=function(a){window.voyanga_debug("Restoring TourSearchParams from object");_.each(a.destinations,function(a){a=new DestinationSearchParams;a.city(a.city);a.dateFrom(moment(a.dateFrom,"D.M.YYYY").toDate());a.dateTo(moment(a.dateTo,"D.M.YYYY").toDate());return this.destinations.push(a)});_.each(a.rooms,function(a){a=new SpRoom(this);return this.rooms.push(this.room.fromObject(a))});
a.eventId&&(this.eventId=a.eventId);return window.voyanga_debug("Result",this)};a.prototype.removeItem=function(a,c){var e;c.stopPropagation();if(!(2>this.data().length)&&(e=this.data.indexOf(a),-1!==e&&(this.data.splice(e,1),a===this.selection())))return this.setActive(this.data()[0])};return a}(SearchParams);
ToursOverviewVM=function(){function c(a){this.resultSet=a;this.afterRender=__bind(this.afterRender,this);this.dateHtml=__bind(this.dateHtml,this);this.dateClass=__bind(this.dateClass,this);this.startCity=__bind(this.startCity,this)}c.prototype.startCity=function(){var a;a=this.resultSet.data()[0];return a.isAvia()?a.results().departureCity:a.results().city.caseNom};c.prototype.dateClass=function(){return"blue-one"};c.prototype.dateHtml=function(){return this.resultSet.data()[0].dateHtml(!0)};c.prototype.afterRender=
function(){};return c}();
TourTripResultSet=function(){return function(c){var a,b=this;this.resultSet=c;this.items=[];this.cities=[];this.hasHotel=this.hasFlight=!1;this.flightCounter=ko.observable(0);this.hotelCounter=ko.observable(0);this.selected_key=ko.observable("");this.selected_best=ko.observable("");this.totalCostWithoutDiscount=this.totalCostWithDiscount=this.totalCost=0;this.additional=this.tour=!1;this.flightIds=ko.observableArray([]);this.flightIdsString=ko.computed(function(){return b.flightIds().join(":")});this.showTariffRules=
function(){console.log("i wonna show tariff rules");return(new AviaAPI).search("flight/search/tariffRules?flightIds="+b.flightIdsString(),function(a){var c,f,h,j,m,p,g,n;if(a){j=[];g=b.items;m=0;for(p=g.length;m<p;m++)if(c=g[m],c.isFlight&&a[c._data.flightKey]){h={};h.route="\u041f\u0435\u0440\u0435\u043b\u0435\u0442 \u0438\u0437 "+c.departureCity()+" \u0432 "+c.arrivalCity();h.codes=[];n=a[c._data.flightKey];for(f in n)c=n[f],h.codes.push(c);j.push(h)}if(j)return console.log(j),new GenericPopup("#tariff-rules",
{tariffs:j})}})};this.flightCounterWord=ko.computed(function(){var a;if(0!==b.flightCounter())return a=Utils.wordAfterNum(b.flightCounter(),"\u0430\u0432\u0438\u0430\u0431\u0438\u043b\u0435\u0442","\u0430\u0432\u0438\u0430\u0431\u0438\u043b\u0435\u0442\u0430","\u0430\u0432\u0438\u0430\u0431\u0438\u043b\u0435\u0442\u043e\u0432"),0<b.hotelCounter()&&(a+=", "),a});this.hotelCounterWord=ko.computed(function(){if(0!==b.hotelCounter())return Utils.wordAfterNum(b.hotelCounter(),"\u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0430",
"\u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b","\u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446")});_.each(this.resultSet.items,function(a){var c,f;if(a.isFlight)return b.tour=!0,b.hasFlight=!0,b.flightCounter(b.flightCounter()+1),b.roundTrip=2===a.flights.length,c=new AviaResult(a,b),b.flightIds.push(c._data.flightKey),c.sort(),c.totalPeople=Utils.wordAfterNum(a.searchParams.adt+a.searchParams.chd+a.searchParams.inf,"\u0447\u0435\u043b\u043e\u0432\u0435\u043a","\u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430",
"\u0447\u0435\u043b\u043e\u0432\u0435\u043a"),c.totalPeopleGen=Utils.wordAfterNum(a.searchParams.adt+a.searchParams.chd+a.searchParams.inf,"\u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430","\u0447\u0435\u043b\u043e\u0432\u0435\u043a","\u0447\u0435\u043b\u043e\u0432\u0435\u043a"),b.roundTrip?(b.cities.push({isLast:!1,cityName:a.flights[0].departureCity}),b.cities.push({isLast:!1,cityName:a.flights[0].arrivalCity}),b.additional={isLast:!1,cityName:a.flights[0].departureCity}):(b.cities.push({isLast:!1,
cityName:a.flights[0].departureCity}),b.cities.push({isLast:!1,cityName:a.flights[0].arrivalCity})),b.items.push(c),b.totalCostWithDiscount+=c.price,b.totalCostWithoutDiscount=b.totalCostWithDiscount;if(a.isHotel)return b.hasHotel=!0,b.hotelCounter(b.hotelCounter()+1),b.lastHotel=new HotelResult(a,b,a.duration,a,a.hotelDetails),b.cities.push({cityName:b.lastHotel.activeHotel.city}),f=0,_.each(a.searchParams.rooms,function(a){return f+=a.adultCount/1+a.childCount/1+a.cots/1}),b.lastHotel.totalPeople=
Utils.wordAfterNum(f,"\u0447\u0435\u043b\u043e\u0432\u0435\u043a","\u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430","\u0447\u0435\u043b\u043e\u0432\u0435\u043a"),b.lastHotel.totalPeopleGen=Utils.wordAfterNum(f,"\u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430","\u0447\u0435\u043b\u043e\u0432\u0435\u043a","\u0447\u0435\u043b\u043e\u0432\u0435\u043a"),b.items.push(b.lastHotel),b.totalCostWithDiscount+=b.lastHotel.roomSets()[0].discountPrice,b.totalCostWithoutDiscount+=b.lastHotel.roomSets()[0].price});
this.additional&&this.cities.push(this.additional);a=[];_.each(this.cities,function(b){var c;c=_.last(a);_.isObject(c)||a.push(b);if(_.last(a).cityName!==b.cityName)return a.push(b)});this.cities=a;_.each(this.cities,function(a,c){if(c===b.cities.length-1)return a.isLast=!0;a.left=Math.round(100/b.cities.length*(c+1)-8.4);return 0>a.left?a.left="0%":a.left+="%"});this.totalCost=this.tour?this.totalCostWithDiscount:this.totalCostWithoutDiscount}}();
var ToursController,__bind=function(c,a){return function(){return c.apply(a,arguments)}},__slice=[].slice;
ToursController=function(){function c(a){this.searchParams=a;this.checkTicketAction=__bind(this.checkTicketAction,this);this.handleResults=__bind(this.handleResults,this);this.searchAction=__bind(this.searchAction,this);this.indexAction=__bind(this.indexAction,this);this.api=new ToursAPI;this.routes={"/search/*rest":this.searchAction,"":this.indexAction};this.key="tours_10";_.extend(this,Backbone.Events)}c.prototype.indexAction=function(){var a;a=1<=arguments.length?__slice.call(arguments,0):[];window.voyanga_debug("TOURS: Invoking indexAction",
a);this.trigger("index",{});this.render("index");return ResizeAvia()};c.prototype.searchAction=function(){var a,b=this;a=1<=arguments.length?__slice.call(arguments,0):[];a[0]=exTrim(a[0],"/");a=a[0].split("/");window.voyanga_debug("TOURS: Invoking searchAction",a);this.searchParams.fromList(a);return this.api.search(this.searchParams.url(),function(a){if(!a||a.error)console.error("sup"),alert("HANDLE ME");b.stacked=b.handleResults(a);b.stacked.on("inner-template",function(a){return b.trigger("inner-template",
a)});b.trigger("results",b.stacked);b.render("results",b.stacked);return ko.processAllDeferredBindingUpdates()})};c.prototype.handleResults=function(a){var b,c,e,f,h;console.log("Handling results",a);e=new ToursResultSet(a,this.searchParams);if(a.items){c=[];h=a.items;a=0;for(f=h.length;a<f;a++)b=h[a],b.isHotel?(b=new HotelResult(b,e,b.duration,b,b.hotelDetails),c.push(b)):c.push(new AviaResult(b,e));if(e.findAndSelectItems(c)){e.showOverview();console.log("ssseeellleecctt",c,!0);c=[];b=e.data();
f=0;for(h=b.length;f<h;f++)a=b[f],a.isAvia()?c.push(a.selection().getPostData()):c.push(a.selection().hotel.getPostData()),console.log("result:",a.selection());console.log("post data",c,this.searchParams);$.ajax({url:this.api.endpoint+"tour/search/updateEvent",data:{eventId:this.searchParams.eventId,startCity:this.searchParams.startCity(),items:c},dataType:"json",timeout:9E4,type:"POST",success:function(a){cb(a);if(showLoad)return $("#loadWrapBg").hide(),loaderChange(!1)},error:function(){}})}else console.log("ssseeellleecctt",
c,!1)}e.checkTicket=this.checkTicketAction;return e};c.prototype.checkTicketAction=function(a,b){var c=this;if(moment().diff(this.stacked.creationMoment,"seconds")<TOURS_TICKET_TIMELIMIT)b.resolve(this.stacked);else return this.api.search(this.searchParams.url(),function(e){var f;try{f=c.handleResults(e)}catch(h){new ErrorPopup("avia500");return}if(f.findAndSelect(a))return b.resolve(f);new ErrorPopup("toursNoTicketOnValidation",!1,function(){});return c.results(f)})};c.prototype.render=function(a,
b){return this.trigger("viewChanged",a,b)};return c}();var ToursModule;
ToursModule=function(){function c(){var a=this;this.panel=ko.observable(null);this.p=new TourPanelSet;this.innerTemplate="";this.controller=new ToursController(this.p.sp);this.controller.on("results",function(b){a.panel(b.panel);return ko.processAllDeferredBindingUpdates()});this.controller.on("index",function(){return a.panel(a.p)});this.controller.on("inner-template",function(b){return a.innerTemplate=b})}c.prototype.resize=function(){return ResizeAvia()};return c}();
var HotelsPanel,__bind=function(c,a){return function(){return c.apply(a,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(c,a){function b(){this.constructor=c}for(var d in a)__hasProp.call(a,d)&&(c[d]=a[d]);b.prototype=a.prototype;c.prototype=new b;c.__super__=a.prototype;return c};
HotelsPanel=function(c){function a(){this.afterRender=__bind(this.afterRender,this);this.setDate=__bind(this.setDate,this);this.haveDates=__bind(this.haveDates,this);this.checkOutHtml=__bind(this.checkOutHtml,this);this.checkInHtml=__bind(this.checkInHtml,this);this.handlePanelSubmit=__bind(this.handlePanelSubmit,this);var b=this;this.template="hotels-panel-template";a.__super__.constructor.call(this);this.prevPanel="avia";this.nextPanel="tours";this.icon="hotel-ico";this.mainLabel="\u041f\u043e\u0438\u0441\u043a \u043e\u0442\u0435\u043b\u0435\u0439";
this.indexMode=ko.observable(!0);this.sp=new HotelsSearchParams;this.calendarHidden=ko.observable(!0);this.city=this.sp.city;this.checkIn=this.sp.checkIn;this.checkOut=this.sp.checkOut;this.peopleSelectorVM=new HotelPeopleSelector(this.sp);this.cityReadable=ko.observable();this.cityReadableAcc=ko.observable();this.cityReadableGen=ko.observable();this.calendarText=ko.computed(function(){if(b.cityReadable())return"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u043d\u0438\u044f \u0432 \u0433\u043e\u0440\u043e\u0434\u0435 "+
b.cityReadable()});this.prefixText="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434<br>200 000+ \u043e\u0442\u0435\u043b\u0435\u0439";this.formFilled=ko.computed(function(){var a,c;a=b.checkIn().getDay?!0:0<b.checkIn().length;c=b.checkOut().getDay?!0:0<b.checkOut().length;return b.city()&&a&&c});this.formNotFilled=ko.computed(function(){return!b.formFilled()});this.maximizedCalendar=ko.computed(function(){return 0<b.city().length&&!_.isObject(b.checkIn())});this.maximizedCalendar.subscribe(function(a){if(a)return b.showCalendar()});
this.calendarValue=ko.computed(function(){return{twoSelect:!0,hotels:!0,from:b.checkIn(),to:b.checkOut(),activeSearchPanel:b}})}__extends(a,c);a.prototype.handlePanelSubmit=function(){app.navigate(this.sp.getHash(),{trigger:!0});return this.minimizedCalendar(!0)};a.prototype.checkInHtml=function(){return this.checkIn()?dateUtils.formatHtmlDayShortMonth(this.checkIn()):""};a.prototype.checkOutHtml=function(){return this.checkOut()?dateUtils.formatHtmlDayShortMonth(this.checkOut()):""};a.prototype.haveDates=
function(){return this.checkOut()&&this.checkIn()};a.prototype.navigateToNewSearch=function(){if(!this.formNotFilled())return this.handlePanelSubmit(),this.minimizedCalendar(!0)};a.prototype.setDate=function(a){if(a.length&&(this.checkIn(a[0]),1<a.length))return a[0]<a[1]?this.checkOut(a[1]):this.checkOut("")};a.prototype.afterRender=function(){return resizePanel()};return a}(SearchPanel);
var HOTEL_SERVICE_VERBOSE,HotelResult,HotelsResultSet,MEAL_VERBOSE,Room,RoomSet,STARS_VERBOSE,__bind=function(c,a){return function(){return c.apply(a,arguments)}};STARS_VERBOSE=["one","two","three","four","five"];
HOTEL_SERVICE_VERBOSE={"\u0421\u0435\u0440\u0432\u0438\u0441":"service","\u0421\u043f\u043e\u0440\u0442 \u0438 \u043e\u0442\u0434\u044b\u0445":"sport","\u0422\u0443\u0440\u0438\u0441\u0442\u0430\u043c":"turist","\u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442":"internet","\u0420\u0430\u0437\u0432\u043b\u0435\u0447\u0435\u043d\u0438\u044f \u0438 \u0434\u043e\u0441\u0443\u0433":"dosug","\u041f\u0430\u0440\u043a\u043e\u0432\u043a\u0430":"parkovka","\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e":"dop",
"\u0412 \u043e\u0442\u0435\u043b\u0435":"in-hotel"};
MEAL_VERBOSE={"\u0410\u043c\u0435\u0440\u0438\u043a\u0430\u043d\u0441\u043a\u0438\u0439 \u0437\u0430\u0432\u0442\u0440\u0430\u043a":"\u0417\u0430\u0432\u0442\u0440\u0430\u043a","\u0410\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0439 \u0437\u0430\u0432\u0442\u0440\u0430\u043a":"\u0417\u0430\u0432\u0442\u0440\u0430\u043a","\u0417\u0430\u0432\u0442\u0440\u0430\u043a \u0432 \u043d\u043e\u043c\u0435\u0440":"\u0417\u0430\u0432\u0442\u0440\u0430\u043a","\u0417\u0430\u0432\u0442\u0440\u0430\u043a + \u043e\u0431\u0435\u0434":"\u0417\u0430\u0432\u0442\u0440\u0430\u043a \u0438 \u043e\u0431\u0435\u0434",
"\u0417\u0430\u0432\u0442\u0440\u0430\u043a + \u043e\u0431\u0435\u0434 + \u0443\u0436\u0438\u043d":"\u0417\u0430\u0432\u0442\u0440\u0430\u043a \u0438 \u043e\u0431\u0435\u0434 \u0438 \u0443\u0436\u0438\u043d","\u0417\u0430\u0432\u0442\u0440\u0430\u043a + \u043e\u0431\u0435\u0434 + \u0443\u0436\u0438\u043d + \u043d\u0430\u043f\u0438\u0442\u043a\u0438":"\u0417\u0430\u0432\u0442\u0440\u0430\u043a \u0438 \u043e\u0431\u0435\u0434 \u0438 \u0443\u0436\u0438\u043d \u0438 \u043d\u0430\u043f\u0438\u0442\u043a\u0438",
"\u0417\u0430\u0432\u0442\u0440\u0430\u043a + \u0443\u0436\u0438\u043d":"\u0417\u0430\u0432\u0442\u0440\u0430\u043a \u0438 \u0443\u0436\u0438\u043d","\u041a\u043e\u043d\u0442\u0438\u043d\u0435\u043d\u0442\u0430\u043b\u044c\u043d\u044b\u0439 \u0437\u0430\u0432\u0442\u0440\u0430\u043a":"\u0417\u0430\u0432\u0442\u0440\u0430\u043a","\u0417\u0430\u0432\u0442\u0440\u0430\u043a \u0428\u0432\u0435\u0434\u0441\u043a\u0438\u0439 \u0441\u0442\u043e\u043b":"\u0417\u0430\u0432\u0442\u0440\u0430\u043a"};
Room=function(){function c(a){this.getParams=__bind(this.getParams,this);this.printDebug=__bind(this.printDebug,this);this.key=__bind(this.key,this);var b=this;this.name=a.showName;this.nameNemo=a.roomNemoName;if(!this.nameNemo||a.roomName)this.nameNemo=a.roomName;""!==this.nameNemo&&"undefined"!==typeof this.nameNemo?this.haveNemoName=!0:(this.haveNemoName=!1,this.nameNemo="");this.roomData=a;this.meal=a.meal;a.mealName&&(this.meal=a.mealName);this.last=ko.observable(!1);if("undefined"===typeof this.meal||
""===this.meal)this.meal="\u041d\u0435 \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e";this.mealIcon="ico-breakfast";MEAL_VERBOSE[this.meal]&&(this.meal=MEAL_VERBOSE[this.meal]);if((this.hasMeal="\u0411\u0435\u0437 \u043f\u0438\u0442\u0430\u043d\u0438\u044f"!==this.meal&&"\u041d\u0435 \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e"!==this.meal)&&"\u0417\u0430\u0432\u0442\u0440\u0430\u043a"!==this.meal)this.mealIcon="ico-breakfast-dinner";this.debugInfo=ko.computed(function(){var a,c,f,h;if(window.app.debugMode()){f=
"debugInfo:{";h=b.roomData;for(a in h)c=h[a],f+=a+"="+c+", ";return f+"}"}return!1})}c.prototype.key=function(){return this.nameNemo+this.name+this.meal};c.prototype.printDebug=function(){return console.log("room data:",this.roomData)};c.prototype.getParams=function(){var a;a={};a.showName=this.name;a.nemoName=this.nameNemo;a.meal=this.meal;return a};return c}();
RoomSet=function(){function c(a,b,c){var e,f=this;this.parent=b;null==c&&(c=1);this.hideCancelationRules=__bind(this.hideCancelationRules,this);this.showCancelationRules=__bind(this.showCancelationRules,this);this.addCancelationRules=__bind(this.addCancelationRules,this);this.similarityHash=__bind(this.similarityHash,this);this.key=__bind(this.key,this);this.minusCount=__bind(this.minusCount,this);this.plusCount=__bind(this.plusCount,this);this.checkCount=__bind(this.checkCount,this);this.getParams=
__bind(this.getParams,this);this.price=Math.ceil(a.rubPrice);this.discountPrice=Math.ceil(a.discountPrice);this.savings=0;this.resultId=a.resultId;this.searchId=a.searchId;this._data=a;this.pricePerNight=Math.ceil(this.price/c);this.visible=ko.observable(!0);this.cancelRules=ko.observable(!1);this.cancelText=ko.computed(function(){var a,b,c,d,e,n;if(f.cancelRules()){c=[];n=f.cancelRules();d=0;for(e=n.length;d<e;d++)a=n[d],a.charge?(b=dateUtils.formatDayMonth(moment()._d),b===dateUtils.formatDayMonth(a.cancelDate._d)?
c.push("\u0428\u0442\u0440\u0430\u0444 \u0432\u0437\u044b\u043c\u0430\u0435\u0442\u0441\u044f \u0432 \u0440\u0430\u0437\u043c\u0435\u0440\u0435 "+Math.ceil(a.price)+" \u0440\u0443\u0431"):c.push("\u0428\u0442\u0440\u0430\u0444 \u0432\u0437\u044b\u043c\u0430\u0435\u0442\u0441\u044f \u0432 \u0440\u0430\u0437\u043c\u0435\u0440\u0435 "+Math.ceil(a.price)+" \u0440\u0443\u0431 \u0441 "+dateUtils.formatDayMonth(a.cancelDate._d))):c.push("\u0428\u0442\u0440\u0430\u0444 \u0437\u0430 \u043e\u0442\u043c\u0435\u043d\u0443 \u043d\u0435 \u0432\u0437\u044b\u043c\u0430\u0435\u0442\u0441\u044f ");
return c.join("<br>")}return"\u0423\u0441\u043b\u043e\u0432\u0438\u044f \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0435 \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b"});this.specialOffer=ko.observable("");this.rooms=[];e=a.rooms;b=0;for(c=e.length;b<c;b++)a=e[b],a.offerText&&!this.specialOffer()&&this.specialOffer(a.offerText),this.rooms.push(new Room(a));this.rooms[this.rooms.length-1].last(!0);this.selectedCount=ko.observable(0);this.selectedCount.subscribe(function(a){return f.checkCount(a)});
this.selectText=ko.computed(function(){return!f.parent.tours()?"\u0417\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c":f.parent.activeResultId()?"\u0412\u044b\u0431\u0440\u0430\u043d":"\u0412\u044b\u0431\u0440\u0430\u0442\u044c"})}c.prototype.getParams=function(){var a,b,c,e,f;b=[];f=this.rooms;c=0;for(e=f.length;c<e;c++)a=f[c],b.push(a.getParams());return b};c.prototype.checkCount=function(a){a=parseInt(a);return 0>a||isNaN(a)?this.selectedCount(0):this.selectedCount(a)};
c.prototype.plusCount=function(){return this.selectedCount(this.selectedCount()+1)};c.prototype.minusCount=function(){if(0<this.selectedCount())return this.selectedCount(this.selectedCount()-1)};c.prototype.key=function(){var a,b,c,e,f;a=this.price;f=this.rooms;c=0;for(e=f.length;c<e;c++)b=f[c],a+=b.key();return a};c.prototype.similarityHash=function(){var a,b,c,e,f;a="";f=this.rooms;c=0;for(e=f.length;c<e;c++)b=f[c],a+=b.key();return a};c.prototype.addCancelationRules=function(a){var b,c,e,f;if(a.cancelCharges){a.cancelCharges.sort(function(a,
b){return a.fromTimestamp<b.fromTimestamp?1:a.fromTimestamp>b.fromTimestamp?-1:0});console.log("adding cancel rules",a.cancelCharges);f=a.cancelCharges;c=0;for(e=f.length;c<e;c++)b=f[c],b.cancelDate=moment.unix(b.fromTimestamp),console.log("date convert",b,b.fromTimestamp,b.cancelDate);return this.cancelRules(a.cancelCharges)}};c.prototype.showCancelationRules=function(a,b){var c,e;console.log(b);e=$(b.currentTarget).width();this.parent.activeRoomSet(this);this.parent.showRulesPopup(!0);c=$("#content > :eq(0)").offset();
return $(".miniPopUp").css("left",b.pageX-e/2-c.left+"px").css("top",b.pageY+50-c.top+"px")};c.prototype.hideCancelationRules=function(){return this.parent.showRulesPopup(!1)};return c}();
HotelResult=function(){function c(a,b,c,e,f){var h,j,m,p,g,n,q,u,s,A=this;this.activeHotel=e;this.getPostData=__bind(this.getPostData,this);this.getParams=__bind(this.getParams,this);this.getLatLng=__bind(this.getLatLng,this);this.putToMap=__bind(this.putToMap,this);this.smallMapUrl=__bind(this.smallMapUrl,this);this.select=__bind(this.select,this);this.back=__bind(this.back,this);this.combinationClick=__bind(this.combinationClick,this);this.getFullInfo=__bind(this.getFullInfo,this);this.initFullInfo=
__bind(this.initFullInfo,this);this.showMap=__bind(this.showMap,this);this.showMapInfo=__bind(this.showMapInfo,this);this.showMapDetails=__bind(this.showMapDetails,this);this.selectFromPopup=__bind(this.selectFromPopup,this);this.showDetails=__bind(this.showDetails,this);this.showPhoto=__bind(this.showPhoto,this);this.isActive=__bind(this.isActive,this);this.isFlight=!1;this.isHotel=!0;_.extend(this,Backbone.Events);f||(f={});this.totalPeople=0;this.tours=b.tours||this.falseFunction;this.hotelId=
a.hotelId;this.checkIn=moment(a.checkIn)||!1;this.checkOut=moment(a.checkOut)||!1;this.cityCode=a.cityCode||!1;this.key=a.key;!this.checkOut&&(this.checkIn&&c)&&(this.checkOut=moment(this.checkIn),this.checkOut.add("d",c));this.checkOut&&(this.checkOutText=this.checkOut.format("LL"));this.cacheId=b.cacheId;this.activeResultId=ko.observable(0);this.hotelName=a.hotelName;this.address=f.address;this.description=f.description;this.description||(this.description="");this.limitDesc=Utils.limitTextLenght(this.description,
195);this.showMoreDesc=ko.observable(!0);this.showMoreDescText=ko.computed(function(){return A.showMoreDesc()?"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435":"\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c"});this.photos=f.images;this.site=f.site;this.metroList=[];if(f.metroList)for(h in m=f.metroList,m)e=m[h],this.metroList.push(e);this.locations=[];if(f.locations)for(h in m=f.locations,m)e=m[h],this.locations.push(e);this.phone=f.phone;this.fax=f.fax;this.email=f.email;this.numberFloors=
parseInt(f.numberFloors);this.builtIn=parseInt(f.builtIn);this.numPhotos=0;this.parent=b;(this.checkInTime=f.earliestCheckInTime)?this.checkIn?this.checkInText=this.checkIn.format("LL")+", c "+this.checkInTime:console.log("strange ...",this.checkIn,this.checkInText,this.hotelName,this.hotelId):this.checkInText=this.checkIn.format("LL");this.frontPhoto={smallUrl:"http://upload.wikimedia.org/wikipedia/en/thumb/7/78/Trollface.svg/200px-Trollface.svg.png",largeUrl:"http://ya.ru"};this.photos&&this.photos.length&&
(this.frontPhoto=this.photos[0],this.numPhotos=this.photos.length);this.activePhoto=this.frontPhoto.largeUrl;this.starsNumeric=a.categoryId;this.stars=STARS_VERBOSE[this.starsNumeric-1];this.rating=a.rating;"-"===this.rating&&(this.rating=0);this.ratingName="";if(0<=(p=this.rating)&&2>p)this.ratingName="\u0440\u0435\u0439\u0442\u0438\u043d\u0433<br>\u043e\u0442\u0435\u043b\u044f";else if(2<=(g=this.rating)&&2.5>g)this.ratingName="\u0441\u0440\u0435\u0434\u043d\u0438\u0439<br>\u043e\u0442\u0435\u043b\u044c";
else if(2.5<=(n=this.rating)&&3.5>n)this.ratingName="\u043d\u0435\u043f\u043b\u043e\u0445\u043e\u0439<br>\u043e\u0442\u0435\u043b\u044c";else if(3.5<=(q=this.rating)&&4>q)this.ratingName="\u0445\u043e\u0440\u043e\u0448\u0438\u0439<br>\u043e\u0442\u0435\u043b\u044c";else if(4<=(u=this.rating)&&4.5>u)this.ratingName="\u043e\u0447\u0435\u043d\u044c \u0445\u043e\u0440\u043e\u0448\u0438\u0439<br>\u043e\u0442\u0435\u043b\u044c";else if(4.5<=(s=this.rating)&&5>=s)this.ratingName="\u0432\u0435\u043b\u0438\u043a\u043e\u043b\u0435\u043f\u043d\u044b\u0439<br>\u043e\u0442\u0435\u043b\u044c";
this.lat=f.latitude/1;this.lng=f.longitude/1;this.distanceToCenter=Math.ceil(a.centerDistance/1E3);30<this.distanceToCenter&&(this.distanceToCenter=30);this.duration=c;this.haveFullInfo=ko.observable(!1);this.selectText=ko.computed(function(){return!A.tours()?"\u0417\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c":A.isActive()?"\u0412\u044b\u0431\u0440\u0430\u043d":"\u0412\u044b\u0431\u0440\u0430\u0442\u044c"});this.showRulesPopup=ko.observable(!1);this.activeRoomSet=ko.observable(null);
this.hasHotelServices=f.hotelServices?!0:!1;this.hotelServices=f.hotelServices;this.hasHotelGroupServices=f.hotelGroupServices?!0:!1;this.hotelGroupServices=[];if(f.hotelGroupServices)for(j in b=f.hotelGroupServices,b)e=b[j],this.hotelGroupServices.push({groupName:j,elements:e,groupIcon:HOTEL_SERVICE_VERBOSE[j]});this.hasRoomAmenities=f.roomAmenities?!0:!1;this.roomAmenities=f.roomAmenities;this.roomSets=ko.observableArray([]);this.visible=ko.observable(!0);this.wordDays=this.parent.wordDays;this.visibleRoomSets=
ko.computed(function(){var a,b,c,d,e;a=[];e=A.roomSets();c=0;for(d=e.length;c<d;c++)b=e[c],b.visible()&&a.push(b);return a});this.isShowAll=ko.observable(!1);this.showAllText=ko.computed(function(){return A.isShowAll()?"\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0432\u0441\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b":"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432\u0441\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b"});this.push(a)}
c.prototype.falseFunction=function(){return!1};c.prototype.push=function(a){var b;b=new RoomSet(a,this,this.duration);b.resultId=a.resultId;b.searchId=a.searchId;"17897"===this.hotelId&&console.log("setPrice",b.price);0===this.roomSets().length?(this.cheapest=b.price,this.cheapestSet=b,this.maxPrice=this.minPrice=b.pricePerNight):(b.price<this.cheapest&&(this.cheapestSet=b,console.log("set cheapest setPrice",b.price)),this.cheapest=b.price<this.cheapest?b.price:this.cheapest,this.minPrice=b.pricePerNight<
this.minPrice?b.pricePerNight:this.minPrice,this.maxPrice=b.pricePerNight>this.maxPrice?b.pricePerNight:this.maxPrice);this.roomSets.push(b);this.activeRoomSet(b);return this.roomSets.sort(function(a,b){return a.price>b.price?1:a.price<b.price?-1:0})};c.prototype.isActive=function(){return this.activeHotel?this.activeHotel()===this.hotelId:!1};c.prototype.showPhoto=function(a,b){var c;(c=$(b.currentTarget).data("photo-index"))||(c=0);return new PhotoBox(this.photos,this.hotelName,this.stars,c)};c.prototype.showAllResults=
function(a,b){if(this.isShowAll())return $(b.currentTarget).parent().parent().find(".hidden-roomSets").hide("fast",function(){return jsPaneScrollHeight()}),this.isShowAll(!1);$(b.currentTarget).parent().parent().find(".hidden-roomSets").show("fast",function(){return jsPaneScrollHeight()});return this.isShowAll(!0)};c.prototype.showDetails=function(){this.oldPageTop=$("html").scrollTop()|$("body").scrollTop();this.readMoreExpanded=!1;this.activePopup=new GenericPopup("#hotels-body-popup",this);SizeBox("hotels-body-popup");
ResizeBox("hotels-body-popup");return this.mapInitialized=!1};c.prototype.selectFromPopup=function(a){this.activePopup.close();a.off("back");a.on("back",function(){window.app.render({results:ko.observable(a.parent)},"results");return window.setTimeout(function(){Utils.scrollTo(a.oldPageTop,!1);return console.log(a.oldPageTop)},50)});a.getFullInfo();window.app.render(a,"info-template");return Utils.scrollTo("#content",!1)};c.prototype.showMapDetails=function(a,b){this.showDetails(a,b);return this.showMap()};
c.prototype.showMapInfo=function(a,b){var c,e;b.preventDefault();c=$("#hotel-info-tumblr-map");if(!c.hasClass("active")&&($(".place-buy .tmblr li").removeClass("active"),c.addClass("active"),$("#descr").hide(),$("#map").show(),!this.mapInitialized))return c=new google.maps.LatLng(this.lat,this.lng),e={center:c,zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP},e=new google.maps.Map($("#hotel-info-gmap")[0],e),new google.maps.Marker({position:c,map:e,title:this.hotelName}),this.mapInitialized=!0};c.prototype.showDescriptionInfo=
function(){var a;a=$("#hotel-info-tumblr-description");if(!a.hasClass("active"))return $(".place-buy .tmblr li").removeClass("active"),a.addClass("active"),$("#map").hide(),$("#descr").show(),$("#boxContent").css("height","auto")};c.prototype.showMap=function(){var a,b;a=$("#hotels-popup-tumblr-map");if(!a.hasClass("active"))return $(".place-buy .tmblr li").removeClass("active"),a.addClass("active"),$(".tab").hide(),$("#hotels-popup-map").show(),$("#boxContent").css("height",$("#hotels-popup-map").height()+
$("#hotels-popup-header1").height()+$("#hotels-popup-header2").height()+"px"),this.mapInitialized||(a=new google.maps.LatLng(this.lat,this.lng),b={center:a,zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP},b=new google.maps.Map($("#hotels-popup-gmap")[0],b),new google.maps.Marker({position:a,map:b,title:this.hotelName}),this.mapInitialized=!0),SizeBox("hotels-popup-body")};c.prototype.showDescription=function(){var a;a=$("#hotels-popup-tumblr-description");if(!a.hasClass("active"))return $(".place-buy .tmblr li").removeClass("active"),
a.addClass("active"),$(".tab").hide(),$("#hotels-popup-description").show(),$("#boxContent").css("height","auto"),SizeBox("hotels-popup-body")};c.prototype.initFullInfo=function(){var a=this;this.roomCombinations=ko.observableArray([]);this.combinedPrice=ko.computed(function(){var b,c,e,f,h;b=0;h=a.roomCombinations();e=0;for(f=h.length;e<f;e++)c=h[e],c.selectedCount()&&(b+=c.selectedCount()*c.price);return b});return this.combinedButtonLabel=ko.computed(function(){return 0<a.combinedPrice()?a.selectText():
"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u044b \u043d\u043e\u043c\u0435\u0440\u0430"})};c.prototype.getFullInfo=function(){var a,b,c,e,f,h,j,m=this;if(!this.haveFullInfo()){a=new HotelsAPI;b=[];j=this.roomSets();f=0;for(h=j.length;f<h;f++)e=j[f],c=e.resultId,b.push(e.resultId+":"+e.searchId);f="hotel/search/info/?hotelId="+this.hotelId;f+="&hotelResult="+b.join(",");console.log(this.parent.cacheId);return a.search(f,function(a){var b,f,h;window.voyanga_debug("searchInfo",a);if(!a.hotel)return!1;
m.initFullInfo();h=a.hotel.details;for(f in h)e=h[f],b=new RoomSet(e,m,m.duration),m.roomCombinations.push(b);b={};a=a.hotel.oldHotels;for(f in a)e=a[f],c=e.resultId,b[c]=e;console.log(b);h=m.roomSets();f=0;for(a=h.length;f<a;f++)e=h[f],c=e.resultId,b[c]?e.addCancelationRules(b[c]):console.log("not found result with key",c);m.roomMixed=ko.computed(function(){var a,b,f,g;b={};g=m.roomSets();a=0;for(f=g.length;a<f;a++)e=g[a],c=e.key(),"undefined"===typeof b[c]&&(b[c]=e);g=m.roomCombinations();a=0;for(f=
g.length;a<f;a++)e=g[a],c=e.key(),"undefined"===typeof b[c]&&(b[c]=e);a=[];for(c in b)e=b[c],a.push(e);return a});m.haveFullInfo(!0);return console.log(m.roomCombinations())},!1)}};c.prototype.combinationClick=function(){return console.log("combinati data = _.filter @data(), (el) -> el.visible()on click")};c.prototype.readMore=function(a,b){var c;c=$(b.currentTarget).parent().find(".text");this.showMoreDesc()?(c.find(".endDesc").fadeIn("fast",function(){return c.find(".endDesc").css("display","inline")}),
this.showMoreDesc(!1)):(c.find(".endDesc").fadeOut("fast"),this.showMoreDesc(!0));return SizeBox("hotels-popup-body")};c.prototype.back=function(){return this.trigger("back")};c.prototype.select=function(a){var b,c=this;console.log(a);if(a.roomSets)a=a.roomSets()[0],Utils.scrollTo(".info-trip");else{if(this.tours())return this.activeResultId(a.resultId),this.trigger("select",{roomSet:a,hotel:this});b=$.Deferred();b.done(function(b){var f,h,j;f={module:"Hotels",type:"hotel"};f.searchId=b.parent.cacheId;
f.searchKey=b.resultId;f.adults=0;f.age=!1;f.cots=0;j=c.parent.rawSP.rooms;b=0;for(h=j.length;b<h;b++)a=j[b],f.adults+=1*a.adultCount,a.childAge&&(f.age=a.childAgeage),f.cots+=1*a.cots;return Utils.toBuySubmit([f])});return this.parent.checkTicket(a,b)}};c.prototype.smallMapUrl=function(){var a;a="http://maps.googleapis.com/maps/api/staticmap?zoom=13&size=310x259&maptype=roadmap&markers=icon:http://test.voyanga.com/themes/v2/images/pin1.png%7Ccolor:red%7Ccolor:red%7C%7C"+(this.lat+","+this.lng);return a+=
"&sensor=false"};c.prototype.putToMap=function(a){var b,c=this;return this.lat&&this.lng?(console.log("add point to coords",this.lat,this.lng),b=new google.maps.LatLng(this.lat,this.lng),this.parent.addMapPoint(b),this.gMarker=b=new google.maps.Marker({position:b,map:a,icon:this.parent.markerImage,draggable:!1}),google.maps.event.addListener(b,"mouseover",function(a){return function(b){return c.parent.gMapPointShowWin(b,a)}}(this)),google.maps.event.addListener(b,"mouseout",function(a){return function(b){return c.parent.gMapPointHideWin(b,
a)}}(this)),google.maps.event.addListener(b,"click",function(a){return function(b){return c.parent.gMapPointClick(b,a)}}(this)),this.parent.gMarkers.push(b)):this.parent.gMapGeocoder.geocode({address:this.address+", "+this.parent.city.localEn+(this.parent.city.country?", "+this.parent.city.country:"")},function(b,f){console.log(b);if(f===google.maps.GeocoderStatus.OK)return c.lat=b[0].geometry.location.lat(),c.lng=b[0].geometry.location.lng(),c.putToMap(a),c.parent.mapCluster.addMarker(c.gMarker)})};
c.prototype.getLatLng=function(){var a,b,c,e=this;this.latLng=ko.observable(new google.maps.LatLng(this.lat,this.lng));if(!this.lat||!this.lng)a=this.parent.city.localEn,b=this.parent.city.country?", "+this.parent.city.country:"",c=new google.maps.Geocoder,c.geocode({address:this.address+", "+a+b},function(a,b){console.log(a);if(b===google.maps.GeocoderStatus.OK)return e.lat=a[0].geometry.location.lat(),e.lng=a[0].geometry.location.lng(),e.latLng(new google.maps.LatLng(e.lat,e.lng))});return this.latLng};
c.prototype.getParams=function(){var a;a={};a.hotelId=this.hotelId;a.roomSet=this.roomSets()[0].getParams();return JSON.stringify(a)};c.prototype.getPostData=function(){var a;a={};a.data=this.roomSets()[0]._data;a.type="hotel";return a};return c}();
HotelsResultSet=function(){function c(a,b,c){var e,f,h,j,m,p=this;this.searchParams=b;this.activeHotel=c;this.postFilters=__bind(this.postFilters,this);this.postInit=__bind(this.postInit,this);this.selectHotel=__bind(this.selectHotel,this);this.sortByRating=__bind(this.sortByRating,this);this.sortByPrice=__bind(this.sortByPrice,this);this.checkShowMore=__bind(this.checkShowMore,this);this.showMoreResults=__bind(this.showMoreResults,this);this.getDateInterval=__bind(this.getDateInterval,this);this.selectFromPopup=
__bind(this.selectFromPopup,this);this.gMapPointClick=__bind(this.gMapPointClick,this);this.gMapPointHideWin=__bind(this.gMapPointHideWin,this);this.gMapPointShowWin=__bind(this.gMapPointShowWin,this);this.hideFullMap=__bind(this.hideFullMap,this);this.showFullMapFunc=__bind(this.showFullMapFunc,this);this.setFullMapZoom=__bind(this.setFullMapZoom,this);this.addMapPoint=__bind(this.addMapPoint,this);this.resetMapCenter=__bind(this.resetMapCenter,this);this.findAndSelectSameParams=__bind(this.findAndSelectSameParams,
this);this.findAndSelectSame=__bind(this.findAndSelectSame,this);this.findAndSelect=__bind(this.findAndSelect,this);this.select=__bind(this.select,this);this._results={};if(a.error)throw a.error;if(!a.hotels)throw"404";this.noresults=0===a.hotels.length;this.creationMoment=moment();this.rawSP=this.searchParams;this.cacheId=a.cacheId;this.tours=ko.observable(!1);this.checkIn=moment(this.searchParams.checkIn);this.checkOut=moment(this.checkIn).add("days",this.searchParams.duration);window.voyanga_debug("checkOut",
this.checkOut);this.city=this.searchParams.cityFull;this.searchParams.duration&&(e=this.searchParams.duration);if(0===e||"undefined"===typeof e){c=a.hotels;for(b=c.length;0<b;){b=c[0];"undefined"===typeof b.duration?(e=dateUtils.fromIso(b.checkIn),console.log(e),c=dateUtils.fromIso(b.checkOut),console.log(b.checkOut),console.log(c),e=c.valueOf()-e.valueOf(),e=Math.floor(e/864E5)):(e=b.duration,console.log("yes set"));break}}this.wordDays=Utils.wordAfterNum(e,"\u0434\u0435\u043d\u044c","\u0434\u043d\u044f",
"\u0434\u043d\u0435\u0439");this.wordNights=Utils.wordAfterNum(e,"\u043d\u043e\u0447\u044c","\u043d\u043e\u0447\u0438","\u043d\u043e\u0447\u0435\u0439");this.fullMapInitialized=!1;this.showFullMap=ko.observable(!1);this.maxPrice=this.minPrice=!1;m=a.hotels;c=0;for(j=m.length;c<j;c++)b=m[c],f=b.hotelId,this._results[f]?(this._results[f].push(b),this.minPrice=this._results[f].minPrice<this.minPrice?this._results[f].minPrice:this.minPrice,this.maxPrice=this._results[f].maxPrice>this.maxPrice?this._results[f].maxPrice:
this.maxPrice):(h=new HotelResult(b,this,e,this.activeHotel,a.hotelsDetails[f+"d"]),this._results[f]=h,!1===this.minPrice?(this.minPrice=this._results[f].minPrice,this.maxPrice=this._results[f].maxPrice):(this.minPrice=this._results[f].minPrice<this.minPrice?this._results[f].minPrice:this.minPrice,this.maxPrice=this._results[f].maxPrice>this.maxPrice?this._results[f].maxPrice:this.maxPrice));this.data=ko.observableArray();this.showParts=ko.observable(1);this.showLimit=20;this.sortBy=ko.observable("minPrice");
this.ordBy=ko.observable(1);this.resultsForRender=ko.computed(function(){var a,b,c,d,e,f,j;a=p.showParts()*p.showLimit;c=[];d=p.sortBy();b=p.ordBy();p.data.sort(function(a,c){return a[d]<c[d]?-1*b:a[d]>c[d]?1*b:0});j=p.data();e=0;for(f=j.length;e<f&&!(h=j[e],h.visible()&&(c.push(h),a--),0>=a);e++);return c});this.numResults=ko.observable(0);this.toursOpened=this.pagesLoad=this.filtersConfig=!1;window.hotelsScrollCallback=function(a){return p.checkShowMore(a)};a=this._results;for(f in a)h=a[f],h.numPhotos&&
this.data.push(h);this.sortByPriceClass=ko.computed(function(){var a;a="hotel-sort-by-item";"minPrice"===p.sortBy()&&(a+=" active");return a});this.sortByRatingClass=ko.computed(function(){var a;a="hotel-sort-by-item";"rating"===p.sortBy()&&(a+=" active");return a});this.data.sort(function(a,b){return a.minPrice<b.minPrice?-1:a.minPrice>b.minPrice?1:0});window.hrs=this}c.prototype.select=function(a){var b=this;window.voyanga_debug(" i wonna get hotel for you",a);a.oldPageTop=$("html").scrollTop()|
$("body").scrollTop();a.off("back");a.on("back",function(){window.app.render({results:ko.observable(b)},"results");return window.setTimeout(function(){if(b.showFullMap())return b.showFullMapFunc(null,null,!0),b.gAllMap.setCenter(b.gMapCenter),b.gAllMap.setZoom(b.gMapZoom);Utils.scrollTo(a.oldPageTop,!1);return Utils.scrollTo("#hotelResult"+a.hotelId)},50)});a.getFullInfo();window.app.render(a,"info-template");return Utils.scrollTo("#content",!1)};c.prototype.findAndSelect=function(a){var b,c,e,f,
h,j,m;console.log("find roomSet",a,"hotelId",a.parent.hotelId);j=this.data();c=0;for(f=j.length;c<f;c++)if(b=j[c],b.hotelId===a.parent.hotelId){console.log("ok, hotel found2");m=b.roomSets();e=0;for(h=m.length;e<h;e++)if(b=m[e],b.similarityHash()===a.similarityHash())return b}return!1};c.prototype.findAndSelectSame=function(a){var b,c,e,f,h,j;c=this.findAndSelect(a);if(!c){h=this.data();e=0;for(f=h.length;e<f;e++)if(b=h[e],b.hotelId===a.parent.hotelId){console.log("ok, hotel found");j=b.roomSets();
for(b=j.length;0<b;)return a=j[0]}}return c};c.prototype.findAndSelectSameParams=function(a,b){var c,e,f,h,j,m,p,g;j=!1;f=5E3;h=99999;g=this.data();m=0;for(p=g.length;m<p;m++)e=g[m],j||(j=e),e.categoryId===a&&(c=Utils.calculateTheDistance(b().lat(),b().lng(),e.lat,e.lng),5E3<c&&(c=5E3),2*c+e.minPrice<2*f+h&&(j=e,f=c,h=e.minPrice));e=j.roomSets();for(c=e.length;0<c;)return c=e[0]};c.prototype.resetMapCenter=function(){return this.computedCenter=new google.maps.LatLngBounds};c.prototype.addMapPoint=
function(a){return this.computedCenter.extend(a)};c.prototype.setFullMapZoom=function(){this.gAllMap.fitBounds(this.computedCenter);return this.gAllMap.setCenter(this.computedCenter.getCenter())};c.prototype.showFullMapFunc=function(a,b,c,e){var f,h=this;null==c&&(c=!1);null==e&&(e=!1);console.log("show full map",c,e);this.oldPageTop=$("html").scrollTop()|$("body").scrollTop();this.showFullMap()||Utils.scrollTo("#content");f=400;a=$("#content").offset();b=$("html").scrollTop()||$("body").scrollTop();
if(!this.showFullMap()||4>Math.abs(b-a.top))f=100;return window.setTimeout(function(){var a,b,f,g;h.showFullMap(!0);$("#all-hotels-results").hide();$("#all-hotels-map").show();mapAllPageView();a=new google.maps.LatLng(h.city.latitude,h.city.longitude);b={zoom:10,center:a,mapTypeId:google.maps.MapTypeId.ROADMAP};h.fullMapInitialized=!1;h.mapCluster=null;h.fullMapInitialized||(h.gAllMap=new google.maps.Map($("#all-hotels-map")[0],b),window.gmap=h.gAllMap,h.markerImage=new google.maps.MarkerImage("/themes/v2/images/pin1.png",
new google.maps.Size(31,31)),h.markerImageHover=new google.maps.MarkerImage("/themes/v2/images/pin2.png",new google.maps.Size(31,31)),h.gMapGeocoder=new google.maps.Geocoder,h.resetMapCenter(),h.gMapOverlay=new googleInfoDiv,console.log(h.gMapOverlay),h.gMapOverlay.setPosition(a),h.gMapOverlay.setMap(h.gAllMap),console.log(h.gMapOverlay),h.gMapOverlay.hide(),h.clusterStyle=[{url:"/themes/v2/images/cluster_one.png",height:43,width:31,anchor:[7,0],textColor:"#000",textSize:18},{url:"/themes/v2/images/cluster_two.png",
height:54,width:39,anchor:[11,0],textColor:"#000",textSize:18},{url:"/themes/v2/images/cluster_three.png",height:65,width:47,anchor:[15,0],textColor:"#000",textSize:18}]);h.gMarkers=[];g=h.data();b=0;for(f=g.length;b<f;b++)a=g[b],a.visible()&&a.putToMap(h.gAllMap);h.fullMapInitialized?h.mapCluster.addMarkers(h.gMarkers):(h.mapCluster=new MarkerClusterer(h.gAllMap,h.gMarkers,{styles:h.clusterStyle}),h.fullMapInitialized=!0);console.log(h.gAllMap);console.log(h.gMapInfoWin);c&&h.gMapCenter&&h.gMapZoom?
(h.gAllMap.setCenter(h.gMapCenter),h.gAllMap.setZoom(h.gMapZoom)):0<h.gMarkers.length&&h.setFullMapZoom();if(!e)return console.log("minimizeFilter"),minimizeFilter()},f)};c.prototype.hideFullMap=function(){var a=this;console.log("hideFullMap");$("#all-hotels-results").show();$("#all-hotels-map").hide();this.showFullMap(!1);return window.setTimeout(function(){removeFilterShow();jsPaneScrollHeight();return Utils.scrollTo(a.oldPageTop)},50)};c.prototype.gMapPointShowWin=function(a,b){console.log("showDiv",
a);this.gMapOverlay.setContent('<div id="relInfoPosition"><div id="infoWrapperDiv"><div class="hotelMapInfo"><div class="hotelMapImage"><img src="'+b.frontPhoto.largeUrl+'"></div><div class="stars '+b.stars+'"></div><div class="hotelMapName">'+b.hotelName+'</div><div class="mapPriceDiv">\u043e\u0442 <div class="mapPriceValue">'+b.minPrice+'</div> <span class="rur">o</span>/\u043d\u043e\u0447\u044c</div></div></div></div>');this.gMapOverlay.setPosition(a.latLng);this.gMapOverlay.show();console.log(this.gMapOverlay);
return b.gMarker.setIcon(this.markerImageHover)};c.prototype.gMapPointHideWin=function(a,b){var c;b.gMarker.setIcon(this.markerImage);console.log("mouseout");c=Math.round(5*Math.random());this.gMapOverlay.hide();if(40===c)return this.gMapInfoWin.close()};c.prototype.gMapPointClick=function(a,b){this.gMapCenter=this.gAllMap.getCenter();this.gMapZoom=this.gAllMap.getZoom();console.log("save map params",this.gMapCenter,this.gMapZoom);this.select(b);return console.log("gMapEventClick",a,b)};c.prototype.selectFromPopup=
function(a){a.activePopup.close();a.off("back");a.on("back",function(){window.app.render({results:ko.observable(a.parent)},"results");return window.setTimeout(function(){Utils.scrollTo(a.oldPageTop,!1);Utils.scrollTo("#hotelResult"+a.hotelId);return console.log(a.oldPageTop)},50)});a.getFullInfo();window.app.render(a,"info-template");return Utils.scrollTo("#content",!1)};c.prototype.getDateInterval=function(){return dateUtils.formatDayMonthInterval(this.checkIn._d,this.checkOut._d)};c.prototype.showMoreResults=
function(){var a,b;a=this.data()[0];b=this.data()[1];console.log("before more results",a,b,this.showParts());this.numResults()>this.showParts()*this.showLimit&&this.showParts(this.showParts()+1);a=this.data()[0];b=this.data()[1];return console.log("after more results",a,b,this.showParts())};c.prototype.checkShowMore=function(){var a,b,c;b=$("html").scrollTop()||$("body").scrollTop();a=$("html")[0].scrollHeight||$("body")[0].scrollHeight;c=$(window).height();if(2>a-(b+c)&&!this.showFullMap()&&("hotels-results"===
window.app.activeView()||"tours-results"===window.app.activeView()&&"hotels-results"===window.app.activeModuleInstance().innerTemplate))return this.showMoreResults()};c.prototype.sortByPrice=function(){if("minPrice"!==this.sortBy())return this.sortBy("minPrice"),this.ordBy(1),this.showParts(1)};c.prototype.sortByRating=function(){if("rating"!==this.sortBy())return this.sortBy("rating"),this.ordBy(-1),this.showParts(1)};c.prototype.selectHotel=function(a,b){return this.select(a,b)};c.prototype.postInit=
function(){return this.filters=new HotelFiltersT(this)};c.prototype.postFilters=function(a){var b,c=this;null==a&&(a=!1);this.data();this.data();b=_.filter(this.data(),function(a){return a.visible()});this.numResults(b.length);!this.pagesLoad||a?this.showParts(1):this.showParts(this.pagesLoad);window.setTimeout(function(){var b,f;c.data();c.data();a&&jsPaneScrollHeight();"hotels-results"===window.app.activeView()?(b=$("#content").offset(),f=$("html").scrollTop()||$("body").scrollTop(),f>b.top&&(!a||
!c.showFullMap())&&Utils.scrollTo("#content")):c.toursOpened&&c.tours()&&c.filtersConfig||c.tours()&&c.showFullMap()||Utils.scrollTo(0,!1);c.showFullMap()&&c.showFullMapFunc(null,null,!1,!0);c.toursOpened=!1;c.data();return c.data()[1]},50);this.data();return this.data()[1]};return c}();var HotelsSearchParams,SpRoom,__bind=function(c,a){return function(){return c.apply(a,arguments)}};
SpRoom=function(){function c(a){var b=this;this.parent=a;this.getUrl=__bind(this.getUrl,this);this.getHash=__bind(this.getHash,this);this.adults=ko.observable(1).extend({integerOnly:{min:1,max:4}});this.children=ko.observable(0).extend({integerOnly:{min:0,max:4}});this.ages=ko.observableArray();this.adults.subscribe(function(a){4<a+b.children()&&b.adults(4-b.children());if(9<b.parent.overall()-b.adults()+a)return b.adults(9-b.parent.overall()+b.adults())});this.children.subscribe(function(a){var c;
4<a+b.adults()&&(a=4-b.adults(),b.children(a));9<b.parent.overall()-b.children()+a&&b.children(9-b.parent.overall()+b.children());if(b.ages().length!==a){if(b.ages().length<a){c=0;for(a=a-b.ages().length-1;0<=a?c<=a:c>=a;0<=a?++c:--c)b.ages.push({age:ko.observable(12).extend({integerOnly:{min:12,max:17}})})}else b.ages().length>a&&b.ages.splice(a);return ko.processAllDeferredBindingUpdates()}})}c.prototype.fromList=function(a){a=a.split(":");this.adults(a[0]);return this.children(a[1])};c.prototype.fromObject=
function(a){this.adults(+a.adultCount);return this.children(+a.childCount)};c.prototype.getHash=function(){var a,b,c,e,f;b=[this.adults(),this.children()];f=this.ages();c=0;for(e=f.length;c<e;c++)a=f[c],b.push(a.age());return b.join(":")};c.prototype.getUrl=function(a){return"rooms["+a+"][adt]="+this.adults()+("&rooms["+a+"][chd]=")+this.children()+("&rooms["+a+"][chdAge]=0&rooms["+a+"][cots]=0")};return c}();
HotelsSearchParams=function(){function c(){this.url=__bind(this.url,this);this.fromObject=__bind(this.fromObject,this);this.fromList=__bind(this.fromList,this);this.getHash=__bind(this.getHash,this);var a=this;this.city=ko.observable("");this.checkIn=ko.observable(!1);this.checkOut=ko.observable(!1);this.rooms=ko.observableArray([new SpRoom(this)]);this.overall=ko.computed(function(){var b,c,e,f,h;b=0;h=a.rooms();e=0;for(f=h.length;e<f;e++)c=h[e],b+=c.adults(),b+=c.children();return b})}c.prototype.getHash=
function(){var a,b,c,e,f;a=[this.city(),moment(this.checkIn()).format("D.M.YYYY"),moment(this.checkOut()).format("D.M.YYYY")];f=this.rooms();c=0;for(e=f.length;c<e;c++)b=f[c],a.push(b.getHash());a="hotels/search/"+a.join("/")+"/";window.voyanga_debug("Generated hash for hotels search",a);return a};c.prototype.fromList=function(a){var b,c,e,f,h;this.city(a[0]);this.checkIn(moment(a[1],"D.M.YYYY").toDate());this.checkOut(moment(a[2],"D.M.YYYY").toDate());this.rooms.splice(0);c=a[3].split("/");h=[];
e=0;for(f=c.length;e<f;e++)(a=c[e])?(b=new SpRoom(this),b.fromList(a),h.push(this.rooms.push(b))):h.push(void 0);return h};c.prototype.fromObject=function(a){var b,c,e,f,h;this.city(a.city);this.checkIn(moment(a.checkIn,"YYYY-M-D").toDate());this.checkOut(moment(a.checkIn,"YYYY-M-D").add("days",a.duration).toDate());this.rooms.splice(0);f=a.rooms;h=[];c=0;for(e=f.length;c<e;c++)a=f[c],b=new SpRoom(this),b.fromObject(a),h.push(this.rooms.push(b));return h};c.prototype.url=function(){var a,b,c,e,f,
h;b="hotel/search?city="+this.city();b+="&checkIn="+moment(this.checkIn()).format("YYYY-M-D");b+="&duration="+moment(this.checkOut()).diff(moment(this.checkIn()),"days");h=this.rooms();a=e=0;for(f=h.length;e<f;a=++e)c=h[a],b+="&"+c.getUrl(a);return b};return c}();var HotelsController,__bind=function(c,a){return function(){return c.apply(a,arguments)}},__slice=[].slice;
HotelsController=function(){function c(a){this.searchParams=a;this.timelineAction=__bind(this.timelineAction,this);this.indexAction=__bind(this.indexAction,this);this.checkTicketAction=__bind(this.checkTicketAction,this);this.handleResults=__bind(this.handleResults,this);this.searchAction=__bind(this.searchAction,this);this.api=new HotelsAPI;this.routes={"/search/:from/:in/:out/*rest":this.searchAction,"/timeline/":this.timelineAction,"":this.indexAction};this.results=ko.observable();_.extend(this,
Backbone.Events)}c.prototype.searchAction=function(){var a,b=this;a=1<=arguments.length?__slice.call(arguments,0):[];window.voyanga_debug("HOTELS: Invoking searchAction",a);this.searchParams.fromList(a);return this.api.search(this.searchParams.url(),function(a){var c;try{c=b.handleResults(a)}catch(f){if("e404"===f){new ErrorPopup("hotels404");return}new ErrorPopup("e500withText",[f]);return}b.results(c);return b.render("results",{results:b.results})})};c.prototype.handleResults=function(a){window.voyanga_debug("HOTELS: searchAction: handling results",
a);a=new HotelsResultSet(a,a.searchParams);a.postInit();a.checkTicket=this.checkTicketAction;return a};c.prototype.checkTicketAction=function(a,b){var c=this;if(moment().diff(this.results().creationMoment,"seconds")<HOTEL_TICKET_TIMELIMIT)b.resolve(a);else return this.api.search(this.searchParams.url(),function(e){var f;try{f=c.handleResults(e)}catch(h){new ErrorPopup("e500withText",[h]);return}if(e=f.findAndSelect(a))return b.resolve(e);new ErrorPopup("hotelsNoTicketOnValidation",!1,function(){});
return c.results(f)})};c.prototype.indexAction=function(){window.voyanga_debug("HOTELS: indexAction");return this.render("index",{})};c.prototype.timelineAction=function(){this.render("timeline-template");return window.setTimeout(function(){VoyangaCalendarTimeline.calendarEvents=[{dayStart:Date.fromIso("2012-10-23"),dayEnd:Date.fromIso("2012-10-23"),type:"flight",color:"red",description:"\u041c\u043e\u0441\u043a\u0432\u0430 || \u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433",
cityFrom:"MOW",cityTo:"LED"},{dayStart:Date.fromIso("2012-10-23"),dayEnd:Date.fromIso("2012-10-28"),type:"hotel",color:"red",description:"Californication Hotel2",city:"LED"},{dayStart:Date.fromIso("2012-10-28"),dayEnd:Date.fromIso("2012-10-28"),type:"flight",color:"red",description:"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433 || \u041c\u043e\u0441\u043a\u0432\u0430",cityFrom:"LED",cityTo:"MOW"},{dayStart:Date.fromIso("2012-10-28"),dayEnd:Date.fromIso("2012-10-28"),
type:"flight",color:"red",description:"\u041c\u043e\u0441\u043a\u0432\u0430 || \u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433",cityFrom:"MOW",cityTo:"LED"},{dayStart:Date.fromIso("2012-11-21"),dayEnd:Date.fromIso("2012-11-22"),type:"flight",color:"red",description:"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433 || \u041c\u043e\u0441\u043a\u0432\u0430",cityFrom:"LED",cityTo:"MOW"},{dayStart:Date.fromIso("2012-11-21"),dayEnd:Date.fromIso("2012-11-28"),
type:"hotel",color:"red",description:"Californication Hotel",city:"MOW"},{dayStart:Date.fromIso("2012-11-28"),dayEnd:Date.fromIso("2012-11-28"),type:"flight",color:"red",description:"\u041c\u043e\u0441\u043a\u0432\u0430 || \u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433",cityFrom:"MOW",cityTo:"LED"},{dayStart:Date.fromIso("2012-11-28"),dayEnd:Date.fromIso("2012-11-28"),type:"flight",color:"red",description:"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433 || \u0410\u043c\u0441\u0442\u0435\u0440\u0434\u0430\u043c",
cityFrom:"LED",cityTo:"AMS"},{dayStart:Date.fromIso("2012-11-28"),dayEnd:Date.fromIso("2012-11-28"),type:"flight",color:"red",description:"\u0410\u043c\u0441\u0442\u0435\u0440\u0434\u0430\u043c || \u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433",cityFrom:"AMS",cityTo:"LED"},{dayStart:Date.fromIso("2012-11-28"),dayEnd:Date.fromIso("2012-11-28"),type:"flight",color:"red",description:"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433 || \u041c\u043e\u0441\u043a\u0432\u0430",
cityFrom:"LED",cityTo:"MOW"}];VoyangaCalendarTimeline.calendarEvents=[{dayStart:Date.fromIso("2012-11-29"),dayEnd:Date.fromIso("2012-11-29"),type:"flight",color:"red",description:"\u041c\u043e\u0441\u043a\u0432\u0430 || \u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433",cityFrom:"MOW",cityTo:"LED"},{dayStart:Date.fromIso("2012-11-29"),dayEnd:Date.fromIso("2012-12-01"),type:"hotel",color:"red",description:"Californication Hotel2",city:"LED"}];return VoyangaCalendarTimeline.init()},
1E3)};c.prototype.render=function(a,b){window.voyanga_debug("HOTELS: rendering",a,b);return this.trigger("viewChanged",a,b)};return c}();var HotelsModule;HotelsModule=function(){function c(){this.panel=new HotelsPanel;this.controller=new HotelsController(this.panel.sp)}c.prototype.resize=function(){return ResizeAvia()};return c}();
var City,Event,EventCategory,EventCategorySet,EventLink,EventLinkSet,EventPhotoBox,EventPrice,EventPriceSet,EventSet,EventTag,EventTagSet,EventTour,EventTourResultSet,EventTourSet,__hasProp={}.hasOwnProperty,__extends=function(c,a){function b(){this.constructor=c}for(var d in a)__hasProp.call(a,d)&&(c[d]=a[d]);b.prototype=a.prototype;c.prototype=new b;c.__super__=a.prototype;return c},__bind=function(c,a){return function(){return c.apply(a,arguments)}};
ko.bindingHandlers.highlightChange={update:function(c,a,b){var d;a=a();c=b();b=ko.utils.unwrapObservable(a);c=c.previousImage;$('<div class="IMGmain" style="visible:hidden"><img src=""></div>').appendTo(".centerTours");$(".IMGmain").eq(0).find("img").attr("src",c());CenterIMGResize(0);$(".IMGmain").eq(0).show();a=$(".IMGmain").eq(1).css("left");d=$(".IMGmain").eq(1).css("top");a=parseInt(a.slice(0,-2));d=parseInt(d.slice(0,-2));$(".IMGmain").eq(1).css("opacity","0").css("left",a+"px").css("top",d+
"px").find("img").attr("src",b);c(b);slideToursSlide();return $(".IMGmain").eq(1).find("img").load(function(){CenterIMGResize(1);$(".IMGmain").eq(0).animate({opacity:0},speedAnimateChangePic,function(){return $(".IMGmain:not(:last-child)").eq(0).remove()});return $(".IMGmain").eq(1).animate({opacity:1},speedAnimateChangePic)})}};
Event=function(c){function a(a){var c=this;this.startDate=ko.observable(new Date(a.startDate));this.endDate=ko.observable(new Date(a.endDate));this.address=ko.observable(a.address);this.contact=ko.observable(a.contact);this.eventId=a.id;this.eventPageUrl="/eventInfo/info/eventId/"+this.eventId;this.preview=ko.observable(a.preview);this.description=ko.observable(a.description);this.title=ko.observable(a.title);this.categories=ko.observableArray(new EventCategorySet(a.categories));this.links=ko.observableArray(new EventLinkSet(a.links));
this.tags=ko.observableArray(new EventTagSet(a.tags));this.prices=ko.observableArray(new EventPriceSet(a.prices));this.tour=ko.observable(new EventTourSet(a.tours));this.image=ko.observable(a.image);this.thumb=ko.observable(a.thumb);this.active=ko.observable(a.active);this.minimalPrice=ko.computed(function(){return c.prices()[0]?c.prices()[0].price:0})}__extends(a,c);a.prototype.duration=function(){return dateUtils.formatDuration(this._duration)};return a}(Backbone.Events);
EventSet=function(){function c(a){this.afterRender=__bind(this.afterRender,this);this.mapsInit=__bind(this.mapsInit,this);this.closeEventsMaps=__bind(this.closeEventsMaps,this);this.closeEventsPhoto=__bind(this.closeEventsPhoto,this);this.setActive=__bind(this.setActive,this);var b=this;this.events=ko.observableArray(a);this.currentTitle=ko.observable("HUY");this.currentEvent=ko.computed(function(){var a;a=_.filter(b.events(),function(a){return a.active()});console.log("SETTING TAITL",a[0].title());
b.currentTitle(a[0].title());return a[0]});this.previousImage=ko.observable("");this.activeMaps=0;this.isRendered=this.mapsInited=!1}c.prototype.setActive=function(a,b){if($(b.target).hasClass("lookEyes"))return!0;1===this.activeMaps&&this.closeEventsMaps();$(".slideTours").find(".triangle").animate({top:"0px"},200);this.events(_.map(this.events(),function(a){return a.active(!1)}));a.active(!0);return $(b.target).closest(".toursTicketsMain").find(".triangle").animate({top:"-16px"},200)};c.prototype.closeEventsPhoto=
function(){if(!$(".mapsBigAll").is(":visible"))return $(".slideTours").find(".active").find(".triangle").animate({top:"0px"},200),$(".toursTicketsMain").removeClass("active"),$(".mapsBigAll").css("opacity","0"),$(".toursBigAll").animate({opacity:0},700,function(){return $(this).css("display","none")}),$(".mapsBigAll").show(),this.mapsInited||this.mapsInit(),$(".mapsBigAll").animate({opacity:1},700),this.activeMaps=1};c.prototype.closeEventsMaps=function(){$(".toursBigAll").css("opacity","0");$(".mapsBigAll").animate({opacity:0},
700,function(){return $(this).css("display","none")});$(".toursBigAll").show();$(".toursBigAll").animate({opacity:1},700);return this.activeMaps=0};c.prototype.mapsInit=function(){var a;this.mapsInited=!0;a=$(".mapsBigAll")[0];return new google.maps.Map(a,{mapTypeControl:!1,panControl:!1,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_TOP,style:google.maps.ZoomControlStyle.SMALL},streetViewControl:!1,zoom:3,mapTypeId:google.maps.MapTypeId.TERRAIN,center:new google.maps.LatLng(52,10)})};
c.prototype.afterRender=function(){this.mapsInited=!1;window.app.toggleGMaps(!0);this.isRendered=!0;return ResizeAvia()};return c}();EventCategory=function(){return function(c){this.id=ko.observable(c.id);this.title=ko.observable(c.title)}}();EventCategorySet=function(){return function(c){var a;a=[];$.each(c,function(b,c){return a.push(new EventCategory(c))});return a}}();EventLink=function(){return function(c){this.title=ko.observable(c.title);this.url=ko.observable(c.url)}}();
EventLinkSet=function(){return function(c){var a;a=[];$.each(c,function(b,c){return a.push(new EventLink(c))});return a}}();EventTag=function(){return function(c){this.name=ko.observable(c.name)}}();EventTagSet=function(){return function(c){var a;a=[];$.each(c,function(b,c){return a.push(new EventTag(c))});return a}}();City=function(){return function(c){this.title=ko.observable(c.title)}}();EventPrice=function(){return function(c){this.city=ko.observable(new City(c.city));this.price=ko.observable(c.price)}}();
EventPriceSet=function(){return function(c){var a;a=[];$.each(c,function(b,c){return a.push(new EventPrice(c))});return a}}();EventTour=function(){return function(c){this.name=c.name}}();EventTourSet=function(){return function(c){var a;a=[];$.each(c,function(b,c){return a.push(new EventTour(c))});return a}}();
EventTourResultSet=function(){function c(a,b){var c=this;this.eventId=b;this.hidePanel=__bind(this.hidePanel,this);this.showPanel=__bind(this.showPanel,this);this.togglePanel=__bind(this.togglePanel,this);this.gotoAndShowPanel=__bind(this.gotoAndShowPanel,this);this.reinit=__bind(this.reinit,this);this.items=ko.observableArray([]);this.selectedCity=ko.observable(a.city.id);this.fullPrice=ko.observable(0);this.fullPriceUpdateTime=ko.observable(window.priceData[this.selectedCity()].updateTime);this.fullPriceUpdateTimeText=
ko.computed(function(){var a;a=moment(c.fullPriceUpdateTime());console.log("upDate",a,a._d);return dateUtils.formatDayMonth(a._d)+", "+dateUtils.formatTime(a._d)});this.selectedCity.subscribe(function(a){c.fullPriceUpdateTime(window.priceData[a].updateTime);return c.reinit(window.toursArr[a])});this.startCity=ko.observable(a.city.localRu);this.activePanel=ko.observable(null);this.overviewPeople=ko.observable(0);this.overviewPricePeople=ko.observable("");this.photoBox=new EventPhotoBox(window.eventPhotos);
this.visiblePanel=ko.observable(!1);this.visiblePanel.subscribe(function(a){return a?c.showPanel():c.hidePanel()});this.showPanelText=ko.computed(function(){return c.visiblePanel()?"\u0441\u0432\u0435\u0440\u043d\u0443\u0442\u044c":"\u0440\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c"});this.reinit(a)}c.prototype.reinit=function(a){var b,c,e,f,h,j,m,p,g,n,q=this;this.resultSet=a;this.hasHotel=this.hasFlight=!1;this.items([]);this.flightCounter=ko.observable(0);this.hotelCounter=ko.observable(0);
this.selected_key=ko.observable("");this.selected_best=ko.observable("");this.correctTour=ko.observable(!1);this.totalCost=0;a=new TourPanelSet;this.activePanel(a);this.activePanel().startCity(this.resultSet.city.code);this.activePanel().selectedParams={ticketParams:[],eventId:this.eventId};this.activePanel().sp.calendarActivated(!1);window.app.fakoPanel(a);this.startCity(this.resultSet.city.localRu);console.log("reinitEventData",this);this.flightCounterWord=ko.computed(function(){var a;a=Utils.wordAfterNum(q.flightCounter(),
"\u0430\u0432\u0438\u0432\u0430\u0431\u0438\u043b\u0435\u0442","\u0430\u0432\u0438\u0430\u0431\u0438\u043b\u0435\u0442\u0430","\u0430\u0432\u0438\u0430\u0431\u0438\u043b\u0435\u0442\u043e\u0432");0<q.hotelCounter()&&(a+=", ");return a});this.hotelCounterWord=ko.computed(function(){return Utils.wordAfterNum(q.hotelCounter(),"\u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0430","\u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b","\u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446")});try{_.each(this.resultSet.items,
function(a){var b;if(a.isFlight)return q.hasFlight=!0,q.flightCounter(q.flightCounter()+1),q.roundTrip=2===a.flights.length,b=new AviaResult(a,q),b.sort(),b.priceHtml=ko.observable(b.price+'<span class="rur">o</span>'),b.overviewText=ko.observable("\u041f\u0435\u0440\u0435\u043b\u0435\u0442 "+b.departureCity()+" &rarr; "+b.arrivalCity()),b.overviewTemplate="tours-event-avia-ticket",b.dateClass=ko.observable(q.roundTrip?"blue-two":"blue-one"),b.isAvia=ko.observable(a.isFlight),b.isHotel=ko.observable(a.isHotel),
b.startDate=b.departureDate(),b.dateHtml=ko.observable('<div class="day">'+dateUtils.formatHtmlDayShortMonth(b.departureDate())+"</div>"+(q.roundTrip?'<div class="day">'+dateUtils.formatHtmlDayShortMonth(b.rtDepartureDate())+"</div>":"")),q.activePanel().selectedParams.ticketParams.push(b.getParams()),b.overviewPeople=ko.observable,q.items.push(b),q.totalCost+=b.price;if(a.isHotel)return q.hasHotel=!0,q.hotelCounter(q.hotelCounter()+1),q.lastHotel=new HotelResult(a,q,a.duration,a,a.hotelDetails),
q.lastHotel.priceHtml=ko.observable(q.lastHotel.roomSets()[0].price+'<span class="rur">o</span>'),q.lastHotel.dateClass=ko.observable("orange-two"),q.lastHotel.overviewTemplate="tours-event-hotels-ticket",q.lastHotel.isAvia=ko.observable(a.isFlight),q.lastHotel.isHotel=ko.observable(a.isHotel),q.lastHotel.startDate=q.lastHotel.checkIn,q.lastHotel.serachParams=a.searchParams,q.lastHotel.overviewText=ko.observable("<span class='hotel-left-long'>\u041e\u0442\u0435\u043b\u044c \u0432 "+q.lastHotel.serachParams.cityFull.casePre+
"</span><span class='hotel-left-short'>"+q.lastHotel.address+"</span>"),q.lastHotel.dateHtml=ko.observable('<div class="day">'+dateUtils.formatHtmlDayShortMonth(q.lastHotel.checkIn)+'</div><div class="day">'+dateUtils.formatHtmlDayShortMonth(q.lastHotel.checkOut)+"</div>"),q.activePanel().selectedParams.ticketParams.push(q.lastHotel.getParams()),console.log("Add to items hotel ",q.lastHotel),q.items.push(q.lastHotel),q.totalCost+=q.lastHotel.roomSets()[0].discountPrice});_.sortBy(this.items(),function(a){return a.startDate});
this.startDate=this.items()[0].startDate;this.dateHtml=ko.observable('<div class="day">'+dateUtils.formatHtmlDayShortMonth(this.startDate)+"</div>");b=!0;console.log("items",this.items());g=this.items();h=0;for(m=g.length;h<m;h++)if(e=g[h],e.isHotel()){if(b){c=0;n=e.serachParams.rooms;j=0;for(p=n.length;j<p;j++)f=n[j],this.activePanel().sp.rooms()[c]||this.activePanel().sp.addSpRoom(),this.activePanel().sp.rooms()[c].adults(f.adultCount),this.activePanel().sp.rooms()[c].children(f.childCount),this.activePanel().sp.rooms()[c].ages(f.childAge),
c++;b=!1}else this.activePanel().addPanel();this.activePanel().lastPanel.checkIn(moment(e.checkIn)._d);this.activePanel().lastPanel.checkOut(moment(e.checkOut)._d);this.activePanel().lastPanel.city(e.cityCode);console.log("try set destData",moment(e.checkIn)._d,moment(e.checkOut)._d,e.cityCode,"to",this.activePanel().lastPanel,this.activePanel().lastPanel.checkIn())}this.overviewPeople(Utils.wordAfterNum(this.activePanel().sp.overall(),"\u0447\u0435\u043b\u043e\u0432\u0435\u043a","\u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430",
"\u0447\u0435\u043b\u043e\u0432\u0435\u043a"));this.overviewPricePeople("\u0426\u0435\u043d\u0430 \u0437\u0430 "+(this.activePanel().sp.adults()?Utils.wordAfterNum(this.activePanel().sp.adults(),"\u0432\u0437\u0440\u043e\u0441\u043b\u043e\u0433\u043e","\u0432\u0437\u0440\u043e\u0441\u043b\u044b\u0445","\u0432\u0437\u0440\u043e\u0441\u043b\u044b\u0445"):"")+(this.activePanel().sp.children()?" "+Utils.wordAfterNum(this.activePanel().sp.children(),"\u0440\u0435\u0431\u0435\u043d\u043a\u0430","\u0434\u0435\u0442\u0435\u0439",
"\u0434\u0435\u0442\u0435\u0439"):""));console.log("activePanel",this.activePanel());this.activePanel().saveStartParams();_.last(this.activePanel().panels()).minimizedCalendar(!0);window.setTimeout(function(){console.log("calendar activated");return q.activePanel().sp.calendarActivated(!0)},1E3);window.setTimeout(function(){if(q.visiblePanel())return console.log("need showPanel"),$(".sub-head.event").css("margin-top","0px");$(".sub-head.event").stop(!0);$(".sub-head.event").css("margin-top",-q.activePanel().heightPanelSet()+
4+"px");return console.log("need hidePanel",$(".sub-head.event"),q.activePanel().heightPanelSet(),$(".sub-head.event").css("margin-top"))},200);this.correctTour(!0)}catch(u){console.log("Cannot process tour"),this.correctTour(!1)}this.resultSet.price&&(this.totalCost=this.resultSet.price);return this.fullPrice(this.totalCost)};c.prototype.gotoAndShowPanel=function(){Utils.scrollTo(".panel");return this.visiblePanel(!0)};c.prototype.togglePanel=function(){return this.visiblePanel(!this.visiblePanel())};
c.prototype.showPanel=function(){console.log("showPanel");return $(".sub-head.event").animate({"margin-top":"0px"})};c.prototype.hidePanel=function(){console.log("hidePanel",this.activePanel().heightPanelSet());return $(".sub-head.event").animate({"margin-top":-this.activePanel().heightPanelSet()+4+"px"})};return c}();
EventPhotoBox=function(){function c(a){this.next=__bind(this.next,this);this.prev=__bind(this.prev,this);this.onResize=__bind(this.onResize,this);this.onComplete=__bind(this.onComplete,this);this.onAnimate=__bind(this.onAnimate,this);this.afterLoad=__bind(this.afterLoad,this);this.afterRender=__bind(this.afterRender,this);this.getIndex=__bind(this.getIndex,this);var b,c,e,f,h=this;this.photos=ko.observableArray([]);this.imagesServer=ko.observable("");this.unloadedCount=this.totalCount=0;this.activeIndex=
ko.observable(0);this.picturesPadding=ko.observable(5);this.animation=!1;this.boxHeight=ko.observable(0);this.afterRendered=this.picturesLoaded=!1;this.renderedPhotos=ko.computed(function(){return[]});e=0;for(f=a.length;e<f;e++)b=a[e],c=new Image,this.unloadedCount++,$(c).bind("load error",function(a){var b;console.log("image is loaded",a,h);"load"===a.type&&(h.totalCount++,b={},b.url=a.currentTarget.src,b.height=a.currentTarget.height,b.width=a.currentTarget.width,b.width=Math.round(b.width*(400/
b.height)),b.height=400,h.boxHeight(400),h.photos.push(b));h.unloadedCount--;if(0>=h.unloadedCount)return h.picturesLoaded=!0,h.afterLoad()}),c.src=this.imagesServer()+b.url}c.prototype.getIndex=function(a){a%=this.totalCount;0>a&&(a=this.totalCount+a);return a};c.prototype.afterRender=function(){this.afterRendered=!0;return this.afterLoad()};c.prototype.afterLoad=function(){var a,b,c,e;if(this.afterRendered&&this.picturesLoaded){this.renderedDivs=[];console.log("phts",this.photos(),this.boxHeight());
for(c=b=-2;2>=b;c=++b)a={},console.log("cmpW",c,"out",this.getIndex(c)),a.div=$('<div class="eventPhoto"><img src="'+this.photos()[this.getIndex(c)].url+'" height="400"/></div>'),a.prevInd=this.getIndex(c-1),a.nextInd=this.getIndex(c+1),a.thisInd=this.getIndex(c),this.renderedDivs.push(a);b=Math.round(this.photos()[this.renderedDivs[2].thisInd].width/2);a=b+this.picturesPadding();this.renderedDivs[2].left=-b;for(c=e=3;4>=e;c=++e)this.renderedDivs[c].left=a,a+=this.photos()[this.renderedDivs[c].thisInd].width+
this.picturesPadding();a=-b;for(c=b=1;0<=b;c=--b)a-=this.photos()[this.renderedDivs[c].thisInd].width+this.picturesPadding(),this.renderedDivs[c].left=a;e=this.renderedDivs;a=0;for(b=e.length;a<b;a++)c=e[a],c.div.css("left",c.left+"px"),$("#eventsContent .photoGallery .centerPosition").append(c.div);console.log("all loaded",this.renderedDivs);return $(".events .center-block").css("position","static")}};c.prototype.onAnimate=function(a,b){var c,e,f,h,j,m;c=a-b.start;j=this.renderedDivs;m=[];f=0;for(h=
j.length;f<h;f++)e=j[f],m.push(e.div.css("left",e.left+c+"px"));return m};c.prototype.onComplete=function(){var a,b,c,e;console.log("animation complete");e=this.renderedDivs;b=0;for(c=e.length;b<c;b++)a=e[b],a.left+=this.delta;0>this.delta?(console.log("next"),this.renderedDivs[0].div.remove(),this.renderedDivs.shift(),b=this.renderedDivs[3].nextInd,c=this.renderedDivs[3].left+this.photos()[this.renderedDivs[3].thisInd].width+this.picturesPadding()):(console.log("prev"),this.renderedDivs[4].div.remove(),
this.renderedDivs.pop(),b=this.renderedDivs[0].prevInd,c=this.renderedDivs[0].left-this.photos()[b].width-this.picturesPadding());a={};a.div=$('<div class="eventPhoto"><img src="'+this.photos()[this.getIndex(b)].url+'" height="400"/></div>');a.prevInd=this.getIndex(b-1);a.nextInd=this.getIndex(b+1);a.thisInd=this.getIndex(b);a.left=c;a.div.css("left",a.left+"px");0>this.delta?(this.renderedDivs.push(a),$("#eventsContent .photoGallery .centerPosition").append(a.div)):(this.renderedDivs.unshift(a),
$("#eventsContent .photoGallery .centerPosition").prepend(a.div));console.log("divs",this.renderedDivs);return this.animation=!1};c.prototype.onResize=function(){return console.log("resize")};c.prototype.prev=function(){var a,b=this;if(!this.animation)return this.animation=!0,a=-Math.round(this.photos()[this.renderedDivs[1].thisInd].width/2),this.delta=a-this.renderedDivs[1].left,console.log("delta",this.delta),this.renderedDivs[1].div.animate({left:a+"px"},{step:function(a,c){return b.onAnimate(a,
c)},complete:function(){return b.onComplete()}})};c.prototype.next=function(){var a,b=this;if(!this.animation)return this.animation=!0,a=-Math.round(this.photos()[this.renderedDivs[3].thisInd].width/2),this.delta=a-this.renderedDivs[3].left,console.log("delta",this.delta),this.renderedDivs[3].div.animate({left:a+"px"},{step:function(a,c){return b.onAnimate(a,c)},complete:function(){return b.onComplete()}})};return c}();
var Application,__bind=function(c,a){return function(){return c.apply(a,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(c,a){function b(){this.constructor=c}for(var d in a)__hasProp.call(a,d)&&(c[d]=a[d]);b.prototype=a.prototype;c.prototype=new b;c.__super__=a.prototype;return c},__slice=[].slice;
Application=function(c){function a(){this.isEvent=__bind(this.isEvent,this);this.isNotEvent=__bind(this.isNotEvent,this);this.mapRendered=__bind(this.mapRendered,this);this.contentRendered=__bind(this.contentRendered,this);this.handle404=__bind(this.handle404,this);this.bindItemsToEvent=__bind(this.bindItemsToEvent,this);this.bindItemsToBuy=__bind(this.bindItemsToBuy,this);this.bindEvents=__bind(this.bindEvents,this);this.runWithModule=__bind(this.runWithModule,this);this.render=__bind(this.render,
this);this.reRenderCalendarEvent=__bind(this.reRenderCalendarEvent,this);this.reRenderCalendarStatic=__bind(this.reRenderCalendarStatic,this);this.reRenderCalendar=__bind(this.reRenderCalendar,this);this.minimizeCalendar=__bind(this.minimizeCalendar,this);this.initCalendar=__bind(this.initCalendar,this);var a,c=this;window.onerror=function(a){return new ErrorPopup("e500withText",[a])};this.activeModule=ko.observable(null);this.activeModuleInstance=ko.observable(null);this.activeSearchPanel=ko.observable(null);
a={template:"",data:{},rt:function(){return!0},departureDate:function(){return"12.11.2013"},arrivalDate:function(){return"12.12.2013"},calendarText:"DOH",minimizeCalendar:function(){return!0},calendarHidden:function(){return!0},calendarShadow:function(){return!0},afterRender:function(){}};this.fakoPanel=ko.observable(a);this.panel=ko.computed(function(){var e;if(e=c.activeModuleInstance())if(a=ko.utils.unwrapObservable(e.panel),a=ko.utils.unwrapObservable(a),null!==a)return c.fakoPanel(a),c.activeSearchPanel(c.fakoPanel()),
ko.processAllDeferredBindingUpdates()});this._view=ko.observable(!1);this.activeView=ko.computed(function(){return!c._view()?"stub":c.activeModule()+"-"+c._view()});this.in1=ko.observable(0);this.indexMode=ko.computed(function(){return c.in1("index"===c._view())});this.calendarInitialized=!1;this.showEventsPicture=ko.computed(function(){return"tours-index"===c.activeView()});this.viewData=ko.observable({});this.slider=new Slider;this.slider.init();this.activeModule.subscribe(this.slider.handler);
this.debugMode=ko.observable(!1);this.breakdown=ko.observable(!1)}__extends(a,c);a.prototype.initCalendar=function(){throw"Deprecated";};a.prototype.minimizeCalendar=function(){if(this.activeSearchPanel())return this.activeSearchPanel().minimizedCalendar(!0)};a.prototype.reRenderCalendar=function(a){var c=this;VoyangaCalendarStandart.init(this.fakoPanel,a[1]);this.fakoPanel.subscribe(function(a){if(a.panels)return c.activeSearchPanel(_.last(a.panels()))});if(this.fakoPanel().panels)return this.activeSearchPanel(_.last(this.fakoPanel().panels()))};
a.prototype.reRenderCalendarStatic=function(a){var c=this;$(".calenderWindow").css("position","static").find(".calendarSlide").css("position","static");VoyangaCalendarStandart.init(this.fakoPanel,a[1]);this.fakoPanel.subscribe(function(a){if(a.panels)return c.activeSearchPanel(_.last(a.panels()))});if(this.fakoPanel().panels)return this.activeSearchPanel(_.last(this.fakoPanel().panels()))};a.prototype.reRenderCalendarEvent=function(a){console.log("rerender calendar");$(".calenderWindow").css("position",
"static").find(".calendarSlide").css("position","static");VoyangaCalendarStandart.init(this.itemsToBuy.activePanel,a[1]);return this.activeSearchPanel(_.last(this.itemsToBuy.activePanel().panels()))};a.prototype.render=function(a,c){this.viewData(a);this._view(c);return $(window).resize()};a.prototype.register=function(a,c,e){var f,h,j,m=this;null==e&&(e=!1);f=c.controller;f.on("viewChanged",function(a,b){return m.render(b,a)});j=f.routes;for(h in j)f=j[h],window.voyanga_debug("APP: registreing route",
a,h,f),this.route(a+h,a,f),e&&""===h&&this.route(h,a,f);return this.on("beforeroute:"+a,function(){var e;e=1<=arguments.length?__slice.call(arguments,0):[];window.voyanga_debug("APP: routing",e);if(void 0===this.panel()||a!==this.activeModule())return this.minimizeCalendar(),window.voyanga_debug("APP: switching active module to",a),this.activeModule(a),window.voyanga_debug("APP: activating panel",ko.utils.unwrapObservable(c.panel)),this.activeModuleInstance(c),$(window).unbind("resize"),$(window).resize(c.resize),
ko.processAllDeferredBindingUpdates(),this.toggleGMaps(!1)})};a.prototype.toggleGMaps=function(a){if("avia"===this.activeModule()||"hotels"===this.activeModule()){if(a||this.events&&this.events.isRendered)return this.events.closeEventsPhoto()}else if(a||this.events&&this.events.isRendered)return this.events.closeEventsMaps()};a.prototype.run=function(){Backbone.history.start();this.bindEvents();return this.slider.handler(this.activeModule())};a.prototype.runWithModule=function(a){Backbone.history.start({silent:!0});
window.app.navigate("#"+a,{replace:!0});this.activeModule(a);$(window).unbind("resize");$(window).resize(ResizeAvia);return $(window).resize()};a.prototype.bindEvents=function(){var a;a=[];$.each(window.eventsRaw,function(c,e){return a.push(new Event(e))});return this.events=new EventSet(a)};a.prototype.bindItemsToBuy=function(){return this.itemsToBuy=new TourTripResultSet(window.tripRaw)};a.prototype.bindItemsToEvent=function(){return this.itemsToBuy=new EventTourResultSet(window.tripRaw,window.eventId)};
a.prototype.handle404=function(){return new ErrorPopup("avia500")};a.prototype.route=function(a,c,e){return Backbone.Router.prototype.route.call(this,a,c,function(){this.trigger.apply(this,["beforeroute:"+c].concat(_.toArray(arguments)));return e.apply(this,arguments)})};a.prototype.contentRendered=function(){window.voyanga_debug("APP: Content rendered");this.trigger(this.activeModule()+":contentRendered");ResizeFun();return WidthMine()};a.prototype.mapRendered=function(){return $(".slideTours").find(".active").find(".triangle").animate({top:"-16px"},
200)};a.prototype.isNotEvent=function(){return!this.isEvent()};a.prototype.isEvent=function(){return"tours-index"===this.activeView()};return a}(Backbone.Router);window.voyanga_debug=function(){var c;c=1<=arguments.length?__slice.call(arguments,0):[];return console.log.apply(console,c)};
$(function(){var c,a,b,d;console.time("App dispatching");c=new Application;a=new AviaModule;b=new HotelsModule;d=new ToursModule;window.app=c;c.register("tours",d,!0);c.register("hotels",b);c.register("avia",a);c.run();console.timeEnd("App dispatching");console.time("Rendering");ko.applyBindings(c);ko.processAllDeferredBindingUpdates();return console.timeEnd("Rendering")});console.log=function(){};console.error=function(){};console.warn=function(){};console.info=function(){};console.time=function(){};
console.timeEnd=function(){};
